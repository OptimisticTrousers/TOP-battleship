(()=>{var t={653:(t,e,r)=>{const o=r(585),n=()=>{const t={hasBeenHit:!1,isShip:!1,offLimits:!1},e=Array(10).fill(structuredClone(t)).map((()=>Array(10).fill(structuredClone(t)))),r=[o(5,"Carrier"),o(4,"Battleship"),o(3,"Destroyer"),o(3,"Submarine"),o(2,"Patrol Boat")],n=()=>Object.assign(t,{offLimits:!0}),i=(t,r)=>e?.[t]?.[r],a=(t,r,o=n())=>{e[t][r]=o},s=(t,e,r)=>{const o=[t,e-1],n=i(o[0],o[1]),s=[t-1,e],l=i(s[0],s[1]),c=[t+1,e-1],h=i(c[0],c[1]),d=[t-1,e-1],p=i(d[0],d[1]),u=[t+1,e+r],f=i(u[0],u[1]),m=[t-1,e+r],v=i(m[0],m[1]);n&&a(o[0],o[1],n),l&&a(s[0],s[1],l),h&&a(c[0],c[1],h),p&&a(d[0],d[1],p),f&&a(u[0],u[1],f),v&&a(m[0],m[1],v)},l=(t,e,r,o)=>{const i=o.getLength();if("vertical"===r){if(e+i<=10){for(let r=0;r<i;r+=1)a(t,e+r,o);return((t,e,r)=>{const o=n();s(t,e,r),a(t,e+r,o)})(t,e,i),!0}}else if("horizontal"===r&&t+i<=10){for(let r=0;r<i;r+=1)a(t+r,e,o);return((t,e,r)=>{const o=n();s(t,e,r),a(t+r,e,o)})(t,e,i),!0}return!1},c=()=>{const t=0===Math.floor(2*Math.random())?"vertical":"horizontal";return{randomColumn:Math.floor(10*Math.random()),randomRow:Math.floor(10*Math.random()),randomDirection:t}};return{getLocation:i,receiveAttack:(t,r)=>{e[t][r].hasBeenHit=!0},checkIfAllShipsHaveSunk:()=>e.flat().every((t=>!1===t.isShip||!0===t.isShip&&!0===t.hasBeenHit&&t.getStatus().every((t=>"hit"===t)))),placeShip:l,randomlyPlaceShips:()=>{const t=[];for(let e=0;e<r.length;e+=1){const{randomColumn:o,randomRow:n,randomDirection:a}=c(),s=r[e],h=i(o,n);!0===h.isShip||!0===h.offLimits||!1===l(o,n,a,s)?e-=1:t.push({randomColumn:o,randomRow:n,randomDirection:a})}return t}}};n().placeShip(0,0,"vertical",o(3,"bobs ship")),t.exports=n},585:t=>{t.exports=(t,e="ship")=>{const r=Array(t).fill("unhit");return{name:e,getLength:()=>r.length,isSunk:()=>r.every((t=>"hit"===t)),hit:e=>{e<t&&(r[e]="hit")},getStatus:()=>r,isShip:!0}}}},e={};function r(o){var n=e[o];if(void 0!==n)return n.exports;var i=e[o]={exports:{}};return t[o](i,i.exports,r),i.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var o in e)r.o(e,o)&&!r.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";var t=r(653);const e=r.n(t)()();e.randomlyPlaceShips(),(({getLocation:t})=>{const e=document.querySelector("div.player-board");for(let r=0;r<10;r+=1)for(let o=0;o<10;o+=1){const n=document.createElement("div");n.classList.add("cell"),t(o,r).isShip&&n.classList.add("ship"),e.appendChild(n)}})(e)})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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aUQsRUFBSzJDLFVBQVVDLElBQUksUUFFdkJOLEVBQWdCTyxZQUFZN0MsS0RKeEMsQ0FBa0JxQyxJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvLi9zcmMvZ2FtZWJvYXJkL2dhbWVib2FyZC5qcyIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC8uL3NyYy9zaGlwL3NoaXAuanMiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3RvcC1iYXR0bGVzaGlwL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvLi9zcmMvZG9tLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC1leHByZXNzaW9ucyAqL1xuY29uc3QgY3JlYXRlU2hpcCA9IHJlcXVpcmUoJy4uL3NoaXAvc2hpcCcpXG5cbi8qIGVzbGludC1kaXNhYmxlIG5vLXBhcmFtLXJlYXNzaWduICovXG5jb25zdCBjcmVhdGVHYW1lQm9hcmQgPSAoKSA9PiB7XG4gICAgY29uc3QgZW1wdHlDZWxsID0geyBoYXNCZWVuSGl0OiBmYWxzZSwgaXNTaGlwOiBmYWxzZSwgb2ZmTGltaXRzOiBmYWxzZSB9XG4gICAgY29uc3QgZ2FtZUJvYXJkID0gQXJyYXkoMTApXG4gICAgICAgIC5maWxsKHN0cnVjdHVyZWRDbG9uZShlbXB0eUNlbGwpKVxuICAgICAgICAubWFwKCgpID0+IEFycmF5KDEwKS5maWxsKHN0cnVjdHVyZWRDbG9uZShlbXB0eUNlbGwpKSlcblxuICAgIGNvbnN0IHNoaXBzID0gW1xuICAgICAgICBjcmVhdGVTaGlwKDUsICdDYXJyaWVyJyksXG4gICAgICAgIGNyZWF0ZVNoaXAoNCwgJ0JhdHRsZXNoaXAnKSxcbiAgICAgICAgY3JlYXRlU2hpcCgzLCAnRGVzdHJveWVyJyksXG4gICAgICAgIGNyZWF0ZVNoaXAoMywgJ1N1Ym1hcmluZScpLFxuICAgICAgICBjcmVhdGVTaGlwKDIsICdQYXRyb2wgQm9hdCcpLFxuICAgIF1cblxuICAgIGNvbnN0IGNoZWNrSWZBbGxTaGlwc0hhdmVTdW5rID0gKCkgPT5cbiAgICAgICAgZ2FtZUJvYXJkLmZsYXQoKS5ldmVyeShcbiAgICAgICAgICAgIChjZWxsKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGNlbGwuaXNTaGlwID09PSBmYWxzZSkgcmV0dXJuIHRydWVcbiAgICAgICAgICAgICAgICBpZiAoY2VsbC5pc1NoaXAgPT09IHRydWUgJiYgY2VsbC5oYXNCZWVuSGl0ID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjZWxsLmdldFN0YXR1cygpLmV2ZXJ5KCh1bml0KSA9PiB1bml0ID09PSAnaGl0JylcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIChwb3NpdGlvbi5pc1NoaXAgPT09IGZhbHNlKSB8fFxuICAgICAgICAgICAgLy8gKHBvc2l0aW9uLmlzU2hpcCA9PT0gdHJ1ZSAmJiBwb3NpdGlvbi5oYXNCZWVuSGl0ID09PSB0cnVlKVxuICAgICAgICApXG5cbiAgICBjb25zdCBjcmVhdGVPZmZMaW1pdExvY2F0aW9uID0gKCkgPT5cbiAgICAgICAgT2JqZWN0LmFzc2lnbihlbXB0eUNlbGwsIHsgb2ZmTGltaXRzOiB0cnVlIH0pXG5cbiAgICBjb25zdCBnZXRMb2NhdGlvbiA9IChjb2x1bW4sIHJvdykgPT4gZ2FtZUJvYXJkPy5bY29sdW1uXT8uW3Jvd11cblxuICAgIGNvbnN0IHNldExvY2F0aW9uID0gKGNvbHVtbiwgcm93LCBzaGlwID0gY3JlYXRlT2ZmTGltaXRMb2NhdGlvbigpKSA9PiB7XG4gICAgICAgIGdhbWVCb2FyZFtjb2x1bW5dW3Jvd10gPSBzaGlwXG4gICAgfVxuXG4gICAgY29uc3QgYWRkT2ZmTGltaXRBcmVhRm9yU2hpcHMgPSAoY29sdW1uLCByb3csIHNoaXBMZW5ndGgpID0+IHtcbiAgICAgICAgY29uc3QgdG9wID0gW2NvbHVtbiwgcm93IC0gMV1cbiAgICAgICAgY29uc3QgdG9wRWxlbWVudCA9IGdldExvY2F0aW9uKHRvcFswXSwgdG9wWzFdKVxuICAgICAgICBjb25zdCBsZWZ0ID0gW2NvbHVtbiAtIDEsIHJvd11cbiAgICAgICAgY29uc3QgbGVmdEVsZW1lbnQgPSBnZXRMb2NhdGlvbihsZWZ0WzBdLCBsZWZ0WzFdKVxuICAgICAgICBjb25zdCB0b3BSaWdodCA9IFtjb2x1bW4gKyAxLCByb3cgLSAxXVxuICAgICAgICBjb25zdCB0b3BSaWdodEVsZW1lbnQgPSBnZXRMb2NhdGlvbih0b3BSaWdodFswXSwgdG9wUmlnaHRbMV0pXG4gICAgICAgIGNvbnN0IHRvcExlZnQgPSBbY29sdW1uIC0gMSwgcm93IC0gMV1cbiAgICAgICAgY29uc3QgdG9wTGVmdEVsZW1lbnQgPSBnZXRMb2NhdGlvbih0b3BMZWZ0WzBdLCB0b3BMZWZ0WzFdKVxuICAgICAgICBjb25zdCBib3R0b21SaWdodCA9IFtjb2x1bW4gKyAxLCByb3cgKyBzaGlwTGVuZ3RoXVxuICAgICAgICBjb25zdCBib3R0b21SaWdodEVsZW1lbnQgPSBnZXRMb2NhdGlvbihib3R0b21SaWdodFswXSwgYm90dG9tUmlnaHRbMV0pXG4gICAgICAgIGNvbnN0IGxlZnRSaWdodCA9IFtjb2x1bW4gLSAxLCByb3cgKyBzaGlwTGVuZ3RoXVxuICAgICAgICBjb25zdCBsZWZ0UmlnaHRFbGVtZW50ID0gZ2V0TG9jYXRpb24obGVmdFJpZ2h0WzBdLCBsZWZ0UmlnaHRbMV0pXG5cbiAgICAgICAgaWYodG9wRWxlbWVudCl7XG4gICAgICAgICAgICBzZXRMb2NhdGlvbih0b3BbMF0sIHRvcFsxXSwgdG9wRWxlbWVudClcbiAgICAgICAgfVxuICAgICAgICBpZihsZWZ0RWxlbWVudCl7XG4gICAgICAgICAgICBzZXRMb2NhdGlvbihsZWZ0WzBdLCBsZWZ0WzFdLCBsZWZ0RWxlbWVudClcbiAgICAgICAgfVxuICAgICAgICBpZih0b3BSaWdodEVsZW1lbnQpe1xuICAgICAgICAgICAgc2V0TG9jYXRpb24odG9wUmlnaHRbMF0sIHRvcFJpZ2h0WzFdLCB0b3BSaWdodEVsZW1lbnQpXG4gICAgICAgIH1cbiAgICAgICAgaWYodG9wTGVmdEVsZW1lbnQpe1xuICAgICAgICAgICAgc2V0TG9jYXRpb24odG9wTGVmdFswXSwgdG9wTGVmdFsxXSwgdG9wTGVmdEVsZW1lbnQpXG4gICAgICAgIH1cbiAgICAgICAgaWYoYm90dG9tUmlnaHRFbGVtZW50KXtcbiAgICAgICAgICAgIHNldExvY2F0aW9uKGJvdHRvbVJpZ2h0WzBdLCBib3R0b21SaWdodFsxXSwgYm90dG9tUmlnaHRFbGVtZW50KVxuICAgICAgICB9XG4gICAgICAgIGlmKGxlZnRSaWdodEVsZW1lbnQpe1xuICAgICAgICAgICAgc2V0TG9jYXRpb24obGVmdFJpZ2h0WzBdLCBsZWZ0UmlnaHRbMV0sIGxlZnRSaWdodEVsZW1lbnQpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBhZGRPZmZMaW1pdEFyZWFGb3JIb3Jpem9udGFsbHlQb3NpdGlvbmVkU2hpcCA9IChcbiAgICAgICAgY29sdW1uLFxuICAgICAgICByb3csXG4gICAgICAgIHNoaXBMZW5ndGhcbiAgICApID0+IHtcbiAgICAgICAgY29uc3QgcmlnaHQgPSBjcmVhdGVPZmZMaW1pdExvY2F0aW9uKClcbiAgICAgICAgYWRkT2ZmTGltaXRBcmVhRm9yU2hpcHMoY29sdW1uLCByb3csIHNoaXBMZW5ndGgpXG5cbiAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uICsgc2hpcExlbmd0aCwgcm93LCByaWdodClcbiAgICB9XG5cbiAgICBjb25zdCBhZGRPZmZMaW1pdEFyZWFGb3JWZXJ0aWNhbGx5UG9zaXRpb25lZFNoaXAgPSAoXG4gICAgICAgIGNvbHVtbixcbiAgICAgICAgcm93LFxuICAgICAgICBzaGlwTGVuZ3RoXG4gICAgKSA9PiB7XG4gICAgICAgIGNvbnN0IGJlbG93ID0gY3JlYXRlT2ZmTGltaXRMb2NhdGlvbigpXG4gICAgICAgIGFkZE9mZkxpbWl0QXJlYUZvclNoaXBzKGNvbHVtbiwgcm93LCBzaGlwTGVuZ3RoKVxuXG4gICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiwgcm93ICsgc2hpcExlbmd0aCwgYmVsb3cpXG4gICAgfVxuXG4gICAgY29uc3QgcGxhY2VTaGlwID0gKGNvbHVtbiwgcm93LCBkaXJlY3Rpb24sIHNoaXApID0+IHtcbiAgICAgICAgY29uc3Qgc2hpcExlbmd0aCA9IHNoaXAuZ2V0TGVuZ3RoKClcbiAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gJ3ZlcnRpY2FsJykge1xuICAgICAgICAgICAgaWYgKHJvdyArIHNoaXBMZW5ndGggPD0gMTApIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXBMZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgICAgICAgICBzZXRMb2NhdGlvbihjb2x1bW4sIHJvdyArIGksIHNoaXApXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGFkZE9mZkxpbWl0QXJlYUZvclZlcnRpY2FsbHlQb3NpdGlvbmVkU2hpcChcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLFxuICAgICAgICAgICAgICAgICAgICByb3csXG4gICAgICAgICAgICAgICAgICAgIHNoaXBMZW5ndGhcbiAgICAgICAgICAgICAgICApXG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PT0gJ2hvcml6b250YWwnKSB7XG4gICAgICAgICAgICBpZiAoY29sdW1uICsgc2hpcExlbmd0aCA8PSAxMCkge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcExlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiArIGksIHJvdywgc2hpcClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYWRkT2ZmTGltaXRBcmVhRm9ySG9yaXpvbnRhbGx5UG9zaXRpb25lZFNoaXAoXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbixcbiAgICAgICAgICAgICAgICAgICAgcm93LFxuICAgICAgICAgICAgICAgICAgICBzaGlwTGVuZ3RoXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgY29uc3QgbWFrZVJhbmRvbUNvb3JkaW5hdGVzID0gKCkgPT4ge1xuICAgICAgICBjb25zdCByYW5kb21EaXJlY3Rpb24gPVxuICAgICAgICAgICAgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMikgPT09IDAgPyAndmVydGljYWwnIDogJ2hvcml6b250YWwnXG4gICAgICAgIGNvbnN0IHJhbmRvbUNvbHVtbiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKVxuICAgICAgICBjb25zdCByYW5kb21Sb3cgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMClcbiAgICAgICAgcmV0dXJuIHsgcmFuZG9tQ29sdW1uLCByYW5kb21Sb3csIHJhbmRvbURpcmVjdGlvbiB9XG4gICAgfVxuXG4gICAgY29uc3QgcmFuZG9tbHlQbGFjZVNoaXBzID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBzaGlwRGV0YWlscyA9IFtdXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcHMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgcmFuZG9tQ29sdW1uLCByYW5kb21Sb3csIHJhbmRvbURpcmVjdGlvbiB9ID1cbiAgICAgICAgICAgICAgICBtYWtlUmFuZG9tQ29vcmRpbmF0ZXMoKVxuICAgICAgICAgICAgY29uc3Qgc2hpcCA9IHNoaXBzW2ldXG4gICAgICAgICAgICBjb25zdCBsb2NhdGlvbiA9IGdldExvY2F0aW9uKHJhbmRvbUNvbHVtbiwgcmFuZG9tUm93KVxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGxvY2F0aW9uLmlzU2hpcCA9PT0gdHJ1ZSB8fFxuICAgICAgICAgICAgICAgIGxvY2F0aW9uLm9mZkxpbWl0cyA9PT0gdHJ1ZSB8fFxuICAgICAgICAgICAgICAgIHBsYWNlU2hpcChyYW5kb21Db2x1bW4sIHJhbmRvbVJvdywgcmFuZG9tRGlyZWN0aW9uLCBzaGlwKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgZmFsc2VcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGkgLT0gMVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzaGlwRGV0YWlscy5wdXNoKHsgcmFuZG9tQ29sdW1uLCByYW5kb21Sb3csIHJhbmRvbURpcmVjdGlvbiB9KVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzaGlwRGV0YWlsc1xuICAgIH1cblxuICAgIGNvbnN0IHJlY2VpdmVBdHRhY2sgPSAoY29sdW1uLCByb3cpID0+IHtcbiAgICAgICAgZ2FtZUJvYXJkW2NvbHVtbl1bcm93XS5oYXNCZWVuSGl0ID0gdHJ1ZVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIGdldExvY2F0aW9uLFxuICAgICAgICByZWNlaXZlQXR0YWNrLFxuICAgICAgICBjaGVja0lmQWxsU2hpcHNIYXZlU3VuayxcbiAgICAgICAgcGxhY2VTaGlwLFxuICAgICAgICByYW5kb21seVBsYWNlU2hpcHMsXG4gICAgfVxufVxuXG5jb25zdCBib2IgPSBjcmVhdGVHYW1lQm9hcmQoKVxuYm9iLnBsYWNlU2hpcCgwLCAwLCAndmVydGljYWwnLCBjcmVhdGVTaGlwKDMsICdib2JzIHNoaXAnKSlcblxubW9kdWxlLmV4cG9ydHMgPSBjcmVhdGVHYW1lQm9hcmRcbiIsImNvbnN0IGNyZWF0ZVNoaXAgPSAobGVuZ3RoLCBuYW1lID0gJ3NoaXAnKSA9PiB7XG5cbiAgICBjb25zdCBzdGF0dXMgPSBBcnJheShsZW5ndGgpLmZpbGwoJ3VuaGl0JylcblxuICAgIGNvbnN0IGdldExlbmd0aCA9ICgpID0+IHN0YXR1cy5sZW5ndGhcblxuICAgIGNvbnN0IGdldFN0YXR1cyA9ICgpID0+IHN0YXR1c1xuXG4gICAgY29uc3QgaGl0ID0gKHBvc2l0aW9uKSA9PiB7XG4gICAgICAgIGlmIChwb3NpdGlvbiA8IGxlbmd0aCkge1xuICAgICAgICAgICAgc3RhdHVzW3Bvc2l0aW9uXSA9ICdoaXQnXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBpc1N1bmsgPSAoKSA9PiBzdGF0dXMuZXZlcnkoKHBvc2l0aW9uKSA9PiBwb3NpdGlvbiA9PT0gJ2hpdCcpXG5cbiAgICByZXR1cm4ge1xuICAgICAgICBuYW1lLFxuICAgICAgICBnZXRMZW5ndGgsXG4gICAgICAgIGlzU3VuayxcbiAgICAgICAgaGl0LFxuICAgICAgICBnZXRTdGF0dXMsXG4gICAgICAgIGlzU2hpcDogdHJ1ZSxcbiAgICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY3JlYXRlU2hpcFxuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSAobW9kdWxlKSA9PiB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdCgpID0+IChtb2R1bGVbJ2RlZmF1bHQnXSkgOlxuXHRcdCgpID0+IChtb2R1bGUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsImltcG9ydCByZW5kZXJQbGF5ZXJCb2FyZCBmcm9tICcuL2RvbSdcbmltcG9ydCBjcmVhdGVHYW1lQm9hcmQgZnJvbSAnLi9nYW1lYm9hcmQvZ2FtZWJvYXJkJ1xuXG5jb25zdCBwbGF5ZXJCb2FyZCA9IGNyZWF0ZUdhbWVCb2FyZCgpXG5wbGF5ZXJCb2FyZC5yYW5kb21seVBsYWNlU2hpcHMoKVxuXG5yZW5kZXJQbGF5ZXJCb2FyZChwbGF5ZXJCb2FyZClcbiIsImNvbnN0IHJlbmRlclBsYXllckJvYXJkID0gKHsgZ2V0TG9jYXRpb24gfSkgPT4ge1xuICAgIGNvbnN0IHBsYXllckJvYXJkQXJlYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5wbGF5ZXItYm9hcmQnKVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSArPSAxKSB7XG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgMTA7IGogKz0gMSkge1xuICAgICAgICAgICAgY29uc3QgY2VsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoJ2NlbGwnKVxuICAgICAgICAgICAgaWYgKGdldExvY2F0aW9uKGosIGkpLmlzU2hpcCkge1xuICAgICAgICAgICAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZCgnc2hpcCcpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwbGF5ZXJCb2FyZEFyZWEuYXBwZW5kQ2hpbGQoY2VsbClcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgcmVuZGVyUGxheWVyQm9hcmRcbiJdLCJuYW1lcyI6WyJjcmVhdGVTaGlwIiwiY3JlYXRlR2FtZUJvYXJkIiwiZW1wdHlDZWxsIiwiaGFzQmVlbkhpdCIsImlzU2hpcCIsIm9mZkxpbWl0cyIsImdhbWVCb2FyZCIsIkFycmF5IiwiZmlsbCIsInN0cnVjdHVyZWRDbG9uZSIsIm1hcCIsInNoaXBzIiwiY3JlYXRlT2ZmTGltaXRMb2NhdGlvbiIsIk9iamVjdCIsImFzc2lnbiIsImdldExvY2F0aW9uIiwiY29sdW1uIiwicm93Iiwic2V0TG9jYXRpb24iLCJzaGlwIiwiYWRkT2ZmTGltaXRBcmVhRm9yU2hpcHMiLCJzaGlwTGVuZ3RoIiwidG9wIiwidG9wRWxlbWVudCIsImxlZnQiLCJsZWZ0RWxlbWVudCIsInRvcFJpZ2h0IiwidG9wUmlnaHRFbGVtZW50IiwidG9wTGVmdCIsInRvcExlZnRFbGVtZW50IiwiYm90dG9tUmlnaHQiLCJib3R0b21SaWdodEVsZW1lbnQiLCJsZWZ0UmlnaHQiLCJsZWZ0UmlnaHRFbGVtZW50IiwicGxhY2VTaGlwIiwiZGlyZWN0aW9uIiwiZ2V0TGVuZ3RoIiwiaSIsImJlbG93IiwiYWRkT2ZmTGltaXRBcmVhRm9yVmVydGljYWxseVBvc2l0aW9uZWRTaGlwIiwicmlnaHQiLCJhZGRPZmZMaW1pdEFyZWFGb3JIb3Jpem9udGFsbHlQb3NpdGlvbmVkU2hpcCIsIm1ha2VSYW5kb21Db29yZGluYXRlcyIsInJhbmRvbURpcmVjdGlvbiIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInJhbmRvbUNvbHVtbiIsInJhbmRvbVJvdyIsInJlY2VpdmVBdHRhY2siLCJjaGVja0lmQWxsU2hpcHNIYXZlU3VuayIsImZsYXQiLCJldmVyeSIsImNlbGwiLCJnZXRTdGF0dXMiLCJ1bml0IiwicmFuZG9tbHlQbGFjZVNoaXBzIiwic2hpcERldGFpbHMiLCJsZW5ndGgiLCJsb2NhdGlvbiIsInB1c2giLCJtb2R1bGUiLCJleHBvcnRzIiwibmFtZSIsInN0YXR1cyIsImlzU3VuayIsInBvc2l0aW9uIiwiaGl0IiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsIm4iLCJnZXR0ZXIiLCJfX2VzTW9kdWxlIiwiZCIsImEiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJwbGF5ZXJCb2FyZCIsInBsYXllckJvYXJkQXJlYSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImoiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwiYXBwZW5kQ2hpbGQiXSwic291cmNlUm9vdCI6IiJ9