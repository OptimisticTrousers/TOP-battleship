(()=>{var e={653:(e,t,o)=>{const r=o(585);e.exports=()=>{const e={hasBeenHit:!1,isShip:!1,offLimits:!1};let t=!1;const o=()=>{const t=Array(10).fill().map((()=>Array(10).fill()));for(let o=0;o<10;o++)for(let r=0;r<10;r++)t[o][r]={...e,column:o,row:r};return t};let n=o();const i=[r(5,"Carrier"),r(4,"Battleship"),r(3,"Destroyer"),r(3,"Submarine"),r(2,"Patrol Boat")],a=(e,t)=>n?.[e]?.[t],l=(t,o,r=(()=>Object.assign(e,{offLimits:!0}))())=>{if(void 0===n?.[t]?.[o])return!0;const i=n[t][o];return n[t][o]={...i,...r},!0},c=(e,t)=>{l(e-1,t-1),l(e,t-1)},s=(e,t,o,r)=>{if("vertical"===o)for(let o=0;o<r;o++){const r=a(e,t+o);if(r&&!0===r.isShip&&!0===r.offLimits)return!0}if("horizontal"===o)for(let o=0;o<r;o++){const r=a(e+o,t);if(r&&!0===r.isShip&&!0===r.offLimits)return!0}return!1},h=(e,t,o,r)=>{const i=r.getLength();if(s(a(e,t)))return!1;if("vertical"===o){if(((e,t)=>e>=0&&e+t-1<n.length)(t,i)){for(let o=0;o<i;o+=1)l(e,t+o,{...r,position:o}),l(e+1,t+o),l(e-1,t+o);return((e,t,o)=>{c(e,t),l(e,t+o),l(e+1,t+o),l(e-1,t+o),l(e+1,t-1)})(e,t,i),!0}}else if("horizontal"===o&&((e,t)=>e>=0&&e+t-1<n.length)(e,i)){for(let o=0;o<i;o+=1)l(e+o,t,{...r,position:o}),l(e+o,t+1),l(e+o,t-1);return((e,t,o)=>{c(e,t),l(e+o,t),l(e-1,t+1),l(e+o,t+1),l(e+o,t-1)})(e,t,i),!0}return!1},d=()=>{const e=0===Math.floor(2*Math.random())?"vertical":"horizontal",t=Math.floor(100*Math.random()),o=(()=>{const e=[...n.flat()];return e.forEach((e=>{!0===e.hasBeenHit?e.availability=!1:e.availability=!0})),e})()[t];return!1===o.availability?d():{elementColumn:o.column,elementRow:o.row,randomDirection:e}};let u=e=>{let t=Math.floor(10*Math.random()),o=Math.floor(10*Math.random()),n=Math.round(Math.random());return(0!==n||(n="horizontal",!1!==h(t,o,n,r(e))))&&(1!==n||(n="vertical",!1!==h(t,o,n,r(e))))&&void 0};return{clearBoard:()=>{n=o()},checkIfLocationIsAShipOrOffLimits:s,checkIfOffLimitZoneWasCorrectlyImplemented:e=>n.flat().filter((e=>!0===e.offLimits)).length===e+2,getLocation:a,receiveAttack:(e,t)=>{n[e][t].hasBeenHit=!0},checkIfAllShipsHaveSunk:()=>{let e=!0;for(let t=0;t<10;t++)for(let o=0;o<10;o++){const r=a(t,o);if(!1!==r.isShip&&r.isShip&&!1===r.isSunk()){e=!1;break}}return e},placeShip:h,randomlyPlaceShips:()=>{const e=[];for(let t=0;t<i.length;t+=1){const o=i[t],{randomColumn:r,randomRow:n,randomDirection:a}=d(o.getLength());h(r,n,a,o)?e.push({randomColumn:r,randomRow:n,randomDirection:a}):t-=1}return e},makeRandomCoordinates:d,randomFleet:()=>{n=o();for(let e=0;e<2;)!1!==u(1)&&e++;for(let e=0;e<2;)!1!==u(2)&&e++;for(let e=0;e<2;)!1!==u(3)&&e++;for(let e=0;e<2;)!1!==u(4)&&e++},isStartAllowed:{get:function(){return t},set:function(e){t=e}}}}},61:e=>{e.exports=(e="player")=>({getName:()=>e,attack:(e,t,{getLocation:o,receiveAttack:r})=>{const n=o(e,t);return!1===n.hasBeenHit||n.isShip&&!1===n.getStatus().includes("unhit")?(r(e,t),n.hit?(n.hit(n.position),"You hit a ship!"):"It's a hit!"):"You have already hit this spot!"},randomPos:()=>[Math.floor(10*Math.random()),Math.floor(10*Math.random())]})},585:e=>{e.exports=(e,t="ship")=>{const o=Array(e).fill("unhit");return{getName:()=>t,getLength:()=>o.length,isSunk:()=>o.every((e=>"hit"===e)),hit:t=>{t<e&&(o[t]="hit")},getStatus:()=>o,domTargets:[],hasBeenHit:!1,offLimits:!0,isShip:!0}}}},t={};function o(r){var n=t[r];if(void 0!==n)return n.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,o),i.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=o(653),t=o.n(e),r=o(585),n=o.n(r);let i,a=!1,l=!1,c=[],s=[],h=[],d=[];function u(e,t,o,r){a=e,void 0!==t&&(l=t),void 0!==o&&(c=[o,r]),0==s.length&&void 0!==o?s=[o,r]:0!==s.length&&0==h.length&&void 0!==o&&(h=[o,r])}function p(e,t){return d=[],0!==t&&d.push([e,t-1]),9!==t&&d.push([e,t+1]),0!==e&&d.push([e-1,t]),9!==e&&d.push([e+1,t]),d}function f(e,t,o,r,n,u){let f;if(!0===r&&(c=[],s=[],h=[],d=[],a=!1,l=!1,i=""),!l&&!a)return f=t.randomPos(),g(t,o,f[0],f[1],n,u);if(0!==h.length&&a&&!e){let e;if(s[0]==h[0]-1&&(e=m("down")),s[0]==h[0]+1&&(e=m("up")),s[1]==h[1]-1&&(e=m("right")),s[1]==h[1]+1&&(e=m("left")),e[0]>=0&&e[0]<=9&&e[1]>=0&&e[1]<=9)return g(t,o,e[0],e[1],n,u)}else if(0!==h.length&&l&&!a){let e;if(c=s,h=[],"up"===i&&(e=m("down")),"down"===i&&(e=m("up")),"right"===i&&(e=m("left")),"left"===i&&(e=m("right")),e[0]>=0&&e[0]<=9&&e[1]>=0&&e[1]<=9)return g(t,o,e[0],e[1],n,u)}else if(l){0==d.length&&p(c[0],c[1]),0==d.length&&1==l&&p(s[0],s[1]);const e=d.pop();return g(t,o,e[0],e[1],n,u)}}function m(e){return"left"===e?(i="left",[c[0],c[1]-1]):"right"===e?(i="right",[c[0],c[1]+1]):"down"===e?(i="down",[c[0]+1,c[1]]):"up"===e?(i="up",[c[0]-1,c[1]]):void 0}let S=0;function v(e,t){let o=2;const r=document.querySelector(e),i=document.querySelector("body"),a=document.querySelectorAll(".player-board > .cell"),l=r.childNodes;let c,s,h="horizontal";l[0]&&l[0].addEventListener("mouseenter",(()=>s=0)),l[1]&&l[1].addEventListener("mouseenter",(()=>s=-1)),l[2]&&l[2].addEventListener("mouseenter",(()=>s=-2)),l[3]&&l[3].addEventListener("mouseenter",(()=>s=-3)),r.addEventListener("click",(e=>function(e){"horizontal"===h?(h="vertical",e.target.parentNode.classList.toggle("rotated")):(h="horizontal",e.target.parentNode.classList.toggle("rotated"))}(e))),r.addEventListener("dragstart",(e=>{for(let e=0;e<10;e++)t.gameBoard[e].forEach(((e,t)=>{(e.offLimits||e.isShip)&&document.querySelector(`.player-board > .cell[column='${e}'][row='${t}']`).classList.toggle("not-available")}))})),r.addEventListener("dragend",((i,a)=>{if(document.querySelectorAll(".not-available").forEach((e=>e.classList.remove("not-available"))),-1===c)return;let l,d,u=`${c}`;c<10?(l=0,d=c):(u=u.split(""),l=1*u[0],d=1*u[1]),"horizontal"===h&&(d+=s),"v"===h&&(l+=s),d<0||".ship-1"===e&&!1===t.placeShip(l,d,h,n()(1))||".ship-2"===e&&!1===t.placeShip(l,d,h,n()(2))||".ship-3"===e&&!1===t.placeShip(l,d,h,n()(3))||".ship-4"===e&&!1===t.placeShip(l,d,h,n()(4))||(L(t),o-=1,S++,8===S&&t.isStartAllowed.set(!0),r.parentNode.firstChild.textContent=`${o}x`,0===o&&(r.parentNode.style.display="none"))})),a.forEach(((e,t)=>{e.addEventListener("dragover",(e=>{e.preventDefault(),c=t}))})),i.addEventListener("dragenter",(()=>{c=-1}))}async function g(e,t,o,r,n,i){let a=!1;const l=document.querySelector(`.player-board > .cell[column='${o}'][row='${r}']`),c=t.attack(o,r,n);if(console.log(n.getLocation(o,r)),"You have already hit this spot!"===c&&f(!0,e,t,void 0,n,i),"It's a hit!"===c&&(u(!1),l.classList.add("miss")),"You hit a ship!"===c)return u(!0,!0,o,r),l.classList.add("hit"),n.getLocation(o,r).domTargets.push(l),n.getLocation(o,r).isSunk()&&(n.getLocation(o,r).domTargets.forEach((e=>e.classList.add("sunk"))),a=!0,!0===n.checkIfAllShipsHaveSunk())?b(n,i):(await y(1e3),f(!1,e,t,a,n,i))}function y(e){return new Promise((t=>{setTimeout((()=>{t(2)}),e)}))}const L=({getLocation:e})=>{const t=document.querySelector("div.player-board");for(let o=0;o<10;o+=1)for(let r=0;r<10;r+=1){const n=t.querySelector(`.cell:nth-child(${10*r+o+1})`);n.setAttribute("column",o),n.setAttribute("row",r);const i=e(o,r);i.isShip&&(n.classList.add("ship"),n.setAttribute("ship-name",i.getName()))}},b=(e,t)=>{if(e.checkIfAllShipsHaveSunk()){const e=document.querySelector(".modal"),t=document.querySelector(".modal-content > p"),o=document.querySelector(".modal-content > button");e.style.display="block",o.addEventListener("click",(()=>{location.reload()})),t.textContent="You lose!"}if(t.checkIfAllShipsHaveSunk()){const e=document.querySelector(".modal"),t=document.querySelector(".modal-content > p"),o=document.querySelector(".modal-content > button");e.style.display="block",t.textContent="You win!",o.addEventListener("click",(()=>{location.reload()}))}};var k=o(61),z=o.n(k);const A=t()(),w=t()(),E=z()(),q=z()();document.querySelector("button.randomize").addEventListener("click",(()=>{(e=>{switch(e.clearBoard(),document.querySelectorAll(".player-board > .cell").forEach((e=>{e.classList.remove("ship"),e.classList.remove("hit"),e.classList.remove("miss")})),Math.floor(4*Math.random())){case 0:e.placeShip(9,1,"vertical",n()(5)),e.placeShip(0,3,"horizontal",n()(3)),e.placeShip(3,6,"horizontal",n()(2)),e.placeShip(6,5,"horizontal",n()(3)),e.placeShip(3,9,"horizontal",n()(4));break;case 1:e.placeShip(0,2,"horizontal",n()(5)),e.placeShip(4,5,"horizontal",n()(3)),e.placeShip(8,7,"horizontal",n()(2)),e.placeShip(5,9,"horizontal",n()(3)),e.placeShip(6,3,"horizontal",n()(4));break;case 2:e.placeShip(5,1,"horizontal",n()(5)),e.placeShip(3,3,"vertical",n()(3)),e.placeShip(0,0,"vertical",n()(2)),e.placeShip(6,5,"horizontal",n()(3)),e.placeShip(5,9,"horizontal",n()(4));break;default:e.placeShip(0,0,"horizontal",n()(5)),e.placeShip(3,4,"horizontal",n()(3)),e.placeShip(6,7,"horizontal",n()(2)),e.placeShip(9,1,"vertical",n()(3)),e.placeShip(5,9,"horizontal",n()(4))}L(e)})(w)})),function(e){function t(e,t){const o=document.querySelector(".player:nth-child(1)"),r=document.createElement("div");r.classList.add("ship-container"),o.appendChild(r);const n=document.createElement("span");n.classList.add(`info-${e}`),n.textContent="2x",r.appendChild(n);const i=document.createElement("div");i.classList.add("ship"),i.classList.add(`ship-${e}`),i.setAttribute("draggable","true"),r.appendChild(i);for(let e=0;e<t;e++){const e=document.createElement("div");e.classList.add("cell"),i.appendChild(e)}}t(1,1),t(2,2),t(3,3),t(4,4);for(let t=1;t<5;t++)v(`.ship-${t}`,e)}(A),w.placeShip(0,0,"horizontal",n()(5)),w.placeShip(3,4,"horizontal",n()(3)),w.placeShip(6,7,"horizontal",n()(2)),w.placeShip(9,1,"vertical",n()(3)),w.placeShip(5,9,"horizontal",n()(4));const M=(()=>{const e={};return{publish:function(t,o){Array.isArray(e[t])&&e[t].forEach((e=>{e(o)}))},subscribe:function t(o,r){Array.isArray(t[o])||(e[o]=[]),e[o].push(r);const n=e[o].length-1;return{unsubscribe(){e[o].splice(n,1)}}}}})();((e,t,o,r,n)=>{const i=document.querySelector("div.enemy-board");for(let a=0;a<10;a+=1)for(let l=0;l<10;l+=1){const c=i.querySelector(`.cell:nth-child(${10*l+a+1})`);c.setAttribute("column",a),c.setAttribute("row",l),c.addEventListener("click",(()=>{n.publish("click",{cell:c,column:a,row:l,playerBoard:e,enemyBoard:t,player:o,enemy:r})}),{once:!0})}})(A,w,E,q,M),M.subscribe("click",(({cell:e,column:t,row:o,playerBoard:r,enemyBoard:n,player:i,enemy:a})=>{(async(e,t,o,r,n,i)=>{((e,t,o,r)=>{r.attack(e,t,o)})(e,t,o,n),((e,t,o,r)=>{const n=document.querySelector(`.enemy-board > .cell[column='${t}'][row='${o}']`);r.getLocation(t,o)?.isShip&&(r.getLocation(t,o).domTargets.push(n),r.getLocation(t,o).isSunk()&&r.getLocation(t,o).domTargets.forEach((e=>e.classList.add("sunk")))),r.getLocation(t,o).isShip?n.classList.add("hit"):n.classList.add("miss")})(0,e,t,o),await y(700),o.checkIfAllShipsHaveSunk()?b(r,o):f(!1,n,i,void 0,r,o)})(t,o,n,r,i,a)})),L(A)})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEdBQUtvRSxXQUFXckMsU0FBUzRGLEdBQU1BLEVBQUVHLFVBQVVjLElBQUksV0FJckVyQyxFQUFXckcsWUFBWUgsRUFBUUMsR0FDbkNULE9BQ1Q2SixFQUFLdEIsVUFBVWMsSUFBSSxPQUVuQlEsRUFBS3RCLFVBQVVjLElBQUksU0FZdkJ5QyxDQUFjLEVBQVN0TCxFQUFRQyxFQUFLdUcsU0FDOUJ1QyxFQUFNLEtBQ0x2QyxFQUFXekQsMEJBQTRCK0YsRUFBZ0J2QyxFQUFhQyxHQUFjTCxHQUFPLEVBQU82RSxFQUFRQyxPQUFPeEssRUFBVzhGLEVBQWFDLElBcVY5SStFLENBQWdCdkwsRUFBUUMsRUFBS3VHLEVBQVlELEVBQWF5RSxFQUFRQyxNQzFWbEU3QyxFQUFrQjdCLEkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC8uL3NyYy9nYW1lYm9hcmQvZ2FtZWJvYXJkLmpzIiwid2VicGFjazovL3RvcC1iYXR0bGVzaGlwLy4vc3JjL3BsYXllci9wbGF5ZXIuanMiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvLi9zcmMvc2hpcC9zaGlwLmpzIiwid2VicGFjazovL3RvcC1iYXR0bGVzaGlwL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3RvcC1iYXR0bGVzaGlwL3dlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0Iiwid2VicGFjazovL3RvcC1iYXR0bGVzaGlwL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3RvcC1iYXR0bGVzaGlwLy4vc3JjL2JvdC5qcyIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC8uL3NyYy9kcmFnLWFuZC1kcm9wLmpzIiwid2VicGFjazovL3RvcC1iYXR0bGVzaGlwLy4vc3JjL2RvbS5qcyIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcbi8qIGVzbGludC1kaXNhYmxlIG5vLW11bHRpLWFzc2lnbiAqL1xuLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLWV4cHJlc3Npb25zICovXG5jb25zdCBjcmVhdGVTaGlwID0gcmVxdWlyZSgnLi4vc2hpcC9zaGlwJylcblxuLyogZXNsaW50LWRpc2FibGUgbm8tcGFyYW0tcmVhc3NpZ24gKi9cbmNvbnN0IGNyZWF0ZUdhbWVCb2FyZCA9ICgpID0+IHtcbiAgICBjb25zdCBlbXB0eUNlbGwgPSB7IGhhc0JlZW5IaXQ6IGZhbHNlLCBpc1NoaXA6IGZhbHNlLCBvZmZMaW1pdHM6IGZhbHNlIH1cblxuICAgIGxldCBpc1N0YXJ0QWxsb3dlZCA9IGZhbHNlXG4gICAgXG4gICAgY29uc3QgaW5pdGlhbGl6ZUJvYXJkID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBnYW1lQm9hcmQgPSBBcnJheSgxMCkuZmlsbCgpLm1hcCgoKSA9PiBBcnJheSgxMCkuZmlsbCgpKVxuICAgICAgICBmb3IobGV0IGNvbHVtbj0gMDsgY29sdW1uIDwgMTA7IGNvbHVtbisrKXtcbiAgICAgICAgICAgIGZvcihsZXQgcm93PSAwOyByb3cgPCAxMDsgcm93Kyspe1xuICAgICAgICAgICAgICAgIGdhbWVCb2FyZFtjb2x1bW5dW3Jvd10gPSB7Li4uZW1wdHlDZWxsLCBjb2x1bW4sIHJvd31cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZ2FtZUJvYXJkXG4gICAgXG4gICAgfVxuXG4gICAgbGV0IGdhbWVCb2FyZCA9IGluaXRpYWxpemVCb2FyZCgpXG5cbiAgICBjb25zdCBzaGlwcyA9IFtcbiAgICAgICAgY3JlYXRlU2hpcCg1LCAnQ2FycmllcicpLFxuICAgICAgICBjcmVhdGVTaGlwKDQsICdCYXR0bGVzaGlwJyksXG4gICAgICAgIGNyZWF0ZVNoaXAoMywgJ0Rlc3Ryb3llcicpLFxuICAgICAgICBjcmVhdGVTaGlwKDMsICdTdWJtYXJpbmUnKSxcbiAgICAgICAgY3JlYXRlU2hpcCgyLCAnUGF0cm9sIEJvYXQnKSxcbiAgICBdXG5cblxuICAgIGNvbnN0IGNyZWF0ZU9mZkxpbWl0TG9jYXRpb24gPSAoKSA9PlxuICAgICAgICBPYmplY3QuYXNzaWduKGVtcHR5Q2VsbCwgeyBvZmZMaW1pdHM6IHRydWUgfSlcblxuICAgIGNvbnN0IGdldExvY2F0aW9uID0gKGNvbHVtbiwgcm93KSA9PiBnYW1lQm9hcmQ/Lltjb2x1bW5dPy5bcm93XVxuXG4gICAgY29uc3Qgc2V0TG9jYXRpb24gPSAoY29sdW1uLCByb3csIHNoaXAgPSBjcmVhdGVPZmZMaW1pdExvY2F0aW9uKCkpID0+IHtcbiAgICAgICAgaWYgKGdhbWVCb2FyZD8uW2NvbHVtbl0/Lltyb3ddID09PSB1bmRlZmluZWQpIHJldHVybiB0cnVlXG4gICAgICAgIGNvbnN0IGxvY2F0aW9uID0gZ2FtZUJvYXJkW2NvbHVtbl1bcm93XVxuXG4gICAgICAgIGdhbWVCb2FyZFtjb2x1bW5dW3Jvd10gPSB7Li4ubG9jYXRpb24sIC4uLnNoaXB9XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIGNvbnN0IGNoZWNrSWZBbGxTaGlwc0hhdmVTdW5rID0gKCkgPT4ge1xuXG4gICAgICAgIGxldCBoYXZlQWxsU2hpcHNTdW5rID10cnVlICBcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwOyBpKyspIHtcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgMTA7IGorKykge1xuICAgICAgICBjb25zdCBsb2NhdGlvbiA9IGdldExvY2F0aW9uKGksIGopXG4gICAgICAgIGlmKGxvY2F0aW9uLmlzU2hpcCA9PT0gZmFsc2UpIGNvbnRpbnVlXG4gICAgICAgIGlmKGxvY2F0aW9uLmlzU2hpcCAmJiBsb2NhdGlvbi5pc1N1bmsoKSA9PT0gZmFsc2Upe1xuICAgICAgICAgICBoYXZlQWxsU2hpcHNTdW5rID0gZmFsc2UgXG4gICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBoYXZlQWxsU2hpcHNTdW5rIFxuICAgIH1cblxuICAgIGNvbnN0IGFkZE9mZkxpbWl0QXJlYUZvclNoaXBzID0gKGNvbHVtbiwgcm93KSA9PiB7XG4gICAgICAgIC8vIHRvcC1sZWZ0XG4gICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiAtIDEsIHJvdyAtIDEpXG4gICAgICAgIC8vIHRvcFxuICAgICAgICBzZXRMb2NhdGlvbihjb2x1bW4sIHJvdyAtIDEpXG4gICAgfVxuXG4gICAgY29uc3QgYWRkT2ZmTGltaXRBcmVhRm9ySG9yaXpvbnRhbGx5UG9zaXRpb25lZFNoaXAgPSAoXG4gICAgICAgIGNvbHVtbixcbiAgICAgICAgcm93LFxuICAgICAgICBzaGlwTGVuZ3RoXG4gICAgKSA9PiB7XG4gICAgICAgIC8vIHBvc2l0aW9ucyByZWxhdGl2ZSB0byB0aGUgc2hpcCBpdHNlbGYoaWUuIGEgaG9yaXpvbnRhbCBzaGlwJ3MgYm90dG9tIGlzIHRvIHRoZSByaWdodClcblxuICAgICAgICBhZGRPZmZMaW1pdEFyZWFGb3JTaGlwcyhjb2x1bW4sIHJvdylcbiAgICAgICAgLy8gYm90dG9tXG4gICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiArIHNoaXBMZW5ndGgsIHJvdylcbiAgICAgICAgLy8gYm90dG9tLWxlZnRcbiAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uIC0gMSwgcm93ICsgMSlcbiAgICAgICAgLy8gYm90dG9tLXJpZ2h0XG4gICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiArIHNoaXBMZW5ndGgsIHJvdyArIDEpXG4gICAgICAgIC8vIHRvcC1yaWdodFxuICAgICAgICBzZXRMb2NhdGlvbihjb2x1bW4gKyBzaGlwTGVuZ3RoLCByb3cgLSAxKVxuICAgIH1cblxuICAgIGNvbnN0IGFkZE9mZkxpbWl0QXJlYUZvclZlcnRpY2FsbHlQb3NpdGlvbmVkU2hpcCA9IChcbiAgICAgICAgY29sdW1uLFxuICAgICAgICByb3csXG4gICAgICAgIHNoaXBMZW5ndGhcbiAgICApID0+IHtcbiAgICAgICAgLy8gcG9zaXRpb25zIHJlbGF0aXZlIHRvIGhvdyB0aGUgdXNlciBzZWVzIGl0KGllLiBhIHZlcnRpY2FsIHNoaXAncyBib3R0b20gaXMgdG8gdGhlIGJvdHRvbSlcblxuICAgICAgICBhZGRPZmZMaW1pdEFyZWFGb3JTaGlwcyhjb2x1bW4sIHJvdylcbiAgICAgICAgLy8gYm90dG9tXG4gICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiwgcm93ICsgc2hpcExlbmd0aClcbiAgICAgICAgLy8gYm90dG9tLXJpZ2h0XG4gICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiArIDEsIHJvdyArIHNoaXBMZW5ndGgpXG4gICAgICAgIC8vIGJvdHRvbS1sZWZ0XG4gICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiAtIDEsIHJvdyArIHNoaXBMZW5ndGgpXG4gICAgICAgIC8vIHRvcC1yaWdodFxuICAgICAgICBzZXRMb2NhdGlvbihjb2x1bW4gKyAxLCByb3cgLSAxKVxuICAgIH1cblxuICAgIGNvbnN0IGNoZWNrSWZDb2x1bW5Db29yZGluYXRlSXNWYWxpZCA9IChjb2x1bW4sIHNoaXBMZW5ndGgpID0+XG4gICAgICAgIGNvbHVtbiA+PSAwICYmIGNvbHVtbiArIHNoaXBMZW5ndGggLSAxIDwgZ2FtZUJvYXJkLmxlbmd0aFxuXG4gICAgY29uc3QgY2hlY2tJZlJvd0Nvb3JkaW5hdGVJc1ZhbGlkID0gKHJvdywgc2hpcExlbmd0aCkgPT5cbiAgICAgICAgcm93ID49IDAgJiYgcm93ICsgc2hpcExlbmd0aCAtIDEgPCBnYW1lQm9hcmQubGVuZ3RoXG5cblxuICAgIGNvbnN0IGNoZWNrSWZMb2NhdGlvbklzQVNoaXBPck9mZkxpbWl0cyA9IChcbiAgICAgICAgY29sdW1uLFxuICAgICAgICByb3csXG4gICAgICAgIGRpcmVjdGlvbixcbiAgICAgICAgc2hpcExlbmd0aFxuICAgICkgPT4ge1xuICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAndmVydGljYWwnKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXBMZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2F0aW9uID0gZ2V0TG9jYXRpb24oY29sdW1uLCByb3cgKyBpKVxuICAgICAgICAgICAgICAgIGlmIChsb2NhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5pc1NoaXAgPT09IHRydWUgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLm9mZkxpbWl0cyA9PT0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAnaG9yaXpvbnRhbCcpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcExlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbG9jYXRpb24gPSBnZXRMb2NhdGlvbihjb2x1bW4gKyBpLCByb3cpXG4gICAgICAgICAgICAgICAgaWYgKGxvY2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmlzU2hpcCA9PT0gdHJ1ZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ub2ZmTGltaXRzID09PSB0cnVlXG4gICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWUgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICAgIC8vIG1ha2VzIHRpbGVzIGFyb3VuZCBzaGlwIFwicmVzZXJ2ZWRcIlxuICBsZXQgcmVzZXJ2ZUFyb3VuZCA9IChwb3MxLCBwb3MyKSA9PiB7XG4gICAgZnVuY3Rpb24gY2VsbChuMSwgbjIpIHtcbiAgICAgIGlmIChwb3MxICsgbjEgPiA5IHx8IHBvczEgKyBuMSA8IDApIHJldHVybjtcbiAgICAgIGlmIChnYW1lQm9hcmRbcG9zMSArIG4xXVtwb3MyICsgbjJdID09PSBmYWxzZSlcbiAgICAgICAgZ2FtZUJvYXJkW3BvczEgKyBuMV1bcG9zMiArIG4yXSA9IFwicmVzXCI7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlc2VydmVDZWxsKHJvdykge1xuICAgICAgY2VsbChyb3csIC0xKTtcbiAgICAgIGNlbGwocm93LCAwKTtcbiAgICAgIGNlbGwocm93LCAxKTtcbiAgICB9XG4gICAgcmVzZXJ2ZUNlbGwoLTEpO1xuICAgIHJlc2VydmVDZWxsKDApO1xuICAgIHJlc2VydmVDZWxsKDEpO1xuICB9O1xuXG5jb25zdCBwbGFjZVNoaXAgPSAoY29sdW1uLCByb3csIGRpcmVjdGlvbiwgc2hpcCkgPT4ge1xuICAgICAgICBjb25zdCBzaGlwTGVuZ3RoID0gc2hpcC5nZXRMZW5ndGgoKVxuICAgICAgICBpZiAoY2hlY2tJZkxvY2F0aW9uSXNBU2hpcE9yT2ZmTGltaXRzKGdldExvY2F0aW9uKGNvbHVtbiwgcm93LCBkaXJlY3Rpb24sIHNoaXBMZW5ndGgpKSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAndmVydGljYWwnKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2tJZlJvd0Nvb3JkaW5hdGVJc1ZhbGlkKHJvdywgc2hpcExlbmd0aCkpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXBMZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgICAgICAgICBzZXRMb2NhdGlvbihjb2x1bW4sIHJvdyArIGksIHsuLi5zaGlwLCBwb3NpdGlvbjogaX0pXG4gICAgICAgICAgICAgICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiArIDEsIHJvdyArIGkpXG4gICAgICAgICAgICAgICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiAtIDEsIHJvdyArIGkpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGFkZE9mZkxpbWl0QXJlYUZvclZlcnRpY2FsbHlQb3NpdGlvbmVkU2hpcChcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLFxuICAgICAgICAgICAgICAgICAgICByb3csXG4gICAgICAgICAgICAgICAgICAgIHNoaXBMZW5ndGhcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPT09ICdob3Jpem9udGFsJykge1xuICAgICAgICAgICAgaWYgKGNoZWNrSWZDb2x1bW5Db29yZGluYXRlSXNWYWxpZChjb2x1bW4sIHNoaXBMZW5ndGgpKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGlwTGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uICsgaSAsIHJvdywgey4uLnNoaXAsIHBvc2l0aW9uOiBpfSlcbiAgICAgICAgICAgICAgICAgICAgLy9zZXRMb2NhdGlvbihjb2x1bW4gKyBpLCByb3csIHNoaXApXG4gICAgICAgICAgICAgICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiArIGksIHJvdyArIDEpXG4gICAgICAgICAgICAgICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiArIGksIHJvdyAtIDEpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGFkZE9mZkxpbWl0QXJlYUZvckhvcml6b250YWxseVBvc2l0aW9uZWRTaGlwKFxuICAgICAgICAgICAgICAgICAgICBjb2x1bW4sXG4gICAgICAgICAgICAgICAgICAgIHJvdyxcbiAgICAgICAgICAgICAgICAgICAgc2hpcExlbmd0aFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICAgICAgY29uc3QgYXZhaWxhYmxlU3BhY2VzID0gKCkgPT57XG5cbiAgICAgICAgY29uc3QgZmxhdHRlbmVkR2FtZUJvYXJkID0gWy4uLmdhbWVCb2FyZC5mbGF0KCldXG5cbiAgICAgICAgICAgIGZsYXR0ZW5lZEdhbWVCb2FyZC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYoZWxlbWVudC5oYXNCZWVuSGl0ID09PSB0cnVlKXtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5hdmFpbGFiaWxpdHkgPSBmYWxzZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmF2YWlsYWJpbGl0eSA9dHJ1ZSAgXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgcmV0dXJuIGZsYXR0ZW5lZEdhbWVCb2FyZFxuXG4gICAgICAgIH1cbiAgICBjb25zdCBtYWtlUmFuZG9tQ29vcmRpbmF0ZXMgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHJhbmRvbURpcmVjdGlvbiA9XG4gICAgICAgICAgICBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyKSA9PT0gMCA/ICd2ZXJ0aWNhbCcgOiAnaG9yaXpvbnRhbCdcbiAgICAgICAgY29uc3QgcmFuZG9tTG9jYXRpb24gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDApXG4gICAgICAgIGNvbnN0IGZsYXR0ZW5lZEdhbWVCb2FyZCA9IGF2YWlsYWJsZVNwYWNlcygpXG5cbiAgICAgICAgY29uc3QgbG9jYXRpb24gPSBmbGF0dGVuZWRHYW1lQm9hcmRbcmFuZG9tTG9jYXRpb25dXG5cbiAgICAgICAgaWYobG9jYXRpb24uYXZhaWxhYmlsaXR5ID09PSBmYWxzZSl7XG4gICAgICAgICAgICByZXR1cm4gbWFrZVJhbmRvbUNvb3JkaW5hdGVzKClcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGVsZW1lbnRDb2x1bW4gPSBsb2NhdGlvbi5jb2x1bW5cbiAgICAgICAgY29uc3QgZWxlbWVudFJvdyA9IGxvY2F0aW9uLnJvd1xuXG5cbiAgICAgICAgcmV0dXJuIHsgZWxlbWVudENvbHVtbiwgZWxlbWVudFJvdywgcmFuZG9tRGlyZWN0aW9uIH1cbiAgICB9XG5cbiAgLy8gY3JlYXRlcyBhIHNoaXAgd2l0aCByYW5kb20gcG9zIGFuZCBvcmllbnRhdGlvblxuICBsZXQgcmFuZG9tU2hpcCA9IChsZW5ndGgpID0+IHtcbiAgICBsZXQgcG9zMSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKTtcbiAgICBsZXQgcG9zMiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKTtcbiAgICBsZXQgZGlyID0gTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpKTtcblxuICAgIGlmIChkaXIgPT09IDApIHtcbiAgICAgIGRpciA9IFwiaG9yaXpvbnRhbFwiO1xuICAgICAgaWYgKHBsYWNlU2hpcChwb3MxLCBwb3MyLCBkaXIsIGNyZWF0ZVNoaXAobGVuZ3RoKSkgPT09IGZhbHNlKSByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKGRpciA9PT0gMSkge1xuICAgICAgZGlyID0gXCJ2ZXJ0aWNhbFwiO1xuICAgICAgaWYgKHBsYWNlU2hpcChwb3MxLCBwb3MyLCBkaXIsIGNyZWF0ZVNoaXAobGVuZ3RoKSkgPT09IGZhbHNlKSByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9O1xuXG4gICAgbGV0IHJhbmRvbUZsZWV0ID0gKCkgPT4ge1xuICAgICAgICBnYW1lQm9hcmQgPSBpbml0aWFsaXplQm9hcmQoKVxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgMjspIHtcbiAgICAgICAgICAgIGlmKHJhbmRvbVNoaXAoMSkgPT09IGZhbHNlKSBjb250aW51ZSBcbiAgICAgICAgICAgIGkrK1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IDI7KSB7XG4gICAgICAgICAgICBpZihyYW5kb21TaGlwKDIpID09PSBmYWxzZSkgY29udGludWUgXG4gICAgICAgICAgICBpKytcbiAgICAgICAgfVxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgMjspIHtcbiAgICAgICAgICAgIGlmKHJhbmRvbVNoaXAoMykgPT09IGZhbHNlKSBjb250aW51ZSBcbiAgICAgICAgICAgIGkrK1xuICAgICAgICB9XG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCAyOykge1xuICAgICAgICAgICAgaWYocmFuZG9tU2hpcCg0KSA9PT0gZmFsc2UpIGNvbnRpbnVlIFxuICAgICAgICAgICAgaSsrXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCByYW5kb21seVBsYWNlU2hpcHMgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHNoaXBEZXRhaWxzID0gW11cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGlwcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgY29uc3Qgc2hpcCA9IHNoaXBzW2ldXG4gICAgICAgICAgICBjb25zdCB7IHJhbmRvbUNvbHVtbiwgcmFuZG9tUm93LCByYW5kb21EaXJlY3Rpb24gfSA9XG4gICAgICAgICAgICAgICAgbWFrZVJhbmRvbUNvb3JkaW5hdGVzKHNoaXAuZ2V0TGVuZ3RoKCkpXG4gICAgICAgICAgICBpZiAocGxhY2VTaGlwKHJhbmRvbUNvbHVtbiwgcmFuZG9tUm93LCByYW5kb21EaXJlY3Rpb24sIHNoaXApKSB7XG4gICAgICAgICAgICAgICAgc2hpcERldGFpbHMucHVzaCh7IHJhbmRvbUNvbHVtbiwgcmFuZG9tUm93LCByYW5kb21EaXJlY3Rpb24gfSlcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaSAtPSAxXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNoaXBEZXRhaWxzXG4gICAgfVxuXG4gICAgY29uc3QgcmVjZWl2ZUF0dGFjayA9IChjb2x1bW4sIHJvdykgPT4ge1xuICAgICAgICBnYW1lQm9hcmRbY29sdW1uXVtyb3ddLmhhc0JlZW5IaXQgPSB0cnVlXG4gICAgfVxuXG4gICAgY29uc3QgY2hlY2tJZk9mZkxpbWl0Wm9uZVdhc0NvcnJlY3RseUltcGxlbWVudGVkID0gKHNoaXBMZW5ndGgpID0+XG4gICAgICAgIGdhbWVCb2FyZC5mbGF0KCkuZmlsdGVyKChlbGVtZW50KSA9PiBlbGVtZW50Lm9mZkxpbWl0cyA9PT0gdHJ1ZSlcbiAgICAgICAgICAgIC5sZW5ndGggPT09XG4gICAgICAgIHNoaXBMZW5ndGggKyAyXG4gICAgLy8gYWRkaW5nIHNoaXBMZW5ndGggcGx1cyB0d28gYmVjYXVzZSBmb3IgZXZlcnkgaW5jcmVhc2UgaW4gdGhlIHNpemUgb2Ygc2hpcCwgdGhlIHpvbmVzIGNvdmVyZWQgaW5jcmVhc2UgYnkgMiB1bml0c1xuXG4gICAgY29uc3QgY2xlYXJCb2FyZCAgPSAoKSA9PiB7XG4gICAgICAgIGdhbWVCb2FyZCA9IGluaXRpYWxpemVCb2FyZCgpXG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgY2xlYXJCb2FyZCxcbiAgICAgICAgY2hlY2tJZkxvY2F0aW9uSXNBU2hpcE9yT2ZmTGltaXRzLFxuICAgICAgICBjaGVja0lmT2ZmTGltaXRab25lV2FzQ29ycmVjdGx5SW1wbGVtZW50ZWQsXG4gICAgICAgIGdldExvY2F0aW9uLFxuICAgICAgICByZWNlaXZlQXR0YWNrLFxuICAgICAgICBjaGVja0lmQWxsU2hpcHNIYXZlU3VuayxcbiAgICAgICAgcGxhY2VTaGlwLFxuICAgICAgICByYW5kb21seVBsYWNlU2hpcHMsXG4gICAgICAgIG1ha2VSYW5kb21Db29yZGluYXRlcyxcbiAgICAgICAgcmFuZG9tRmxlZXQsXG4gICAgICAgIGlzU3RhcnRBbGxvd2VkIDoge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaXNTdGFydEFsbG93ZWRcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgaXNTdGFydEFsbG93ZWQgPSB2YWx1ZVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxubW9kdWxlLmV4cG9ydHMgPSBjcmVhdGVHYW1lQm9hcmQiLCJjb25zdCBjcmVhdGVQbGF5ZXIgPSAobmFtZSA9ICdwbGF5ZXInKSA9PiB7XG4gICAgY29uc3QgZ2V0TmFtZSA9ICgpID0+IG5hbWVcblxuICAgIGNvbnN0IGF0dGFjayA9IChjb2x1bW4sIHJvdywgeyBnZXRMb2NhdGlvbiwgcmVjZWl2ZUF0dGFjayB9KSA9PiB7XG4gICAgICAgIGNvbnN0IGxvY2F0aW9uID0gZ2V0TG9jYXRpb24oY29sdW1uLCByb3cpXG4gICAgICAgIGlmIChsb2NhdGlvbi5oYXNCZWVuSGl0ID09PSBmYWxzZSB8fCAobG9jYXRpb24uaXNTaGlwICYmIGxvY2F0aW9uLmdldFN0YXR1cygpLmluY2x1ZGVzKCd1bmhpdCcpID09PSBmYWxzZSkpIHtcbiAgICAgICAgICAgIHJlY2VpdmVBdHRhY2soY29sdW1uLCByb3cpXG4gICAgICAgICAgICBpZihsb2NhdGlvbi5oaXQpe1xuXG4gICAgICAgICAgICAgICAgbG9jYXRpb24uaGl0KGxvY2F0aW9uLnBvc2l0aW9uKVxuICAgICAgICAgICAgICAgIHJldHVybiBcIllvdSBoaXQgYSBzaGlwIVwiXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gXCJJdCdzIGEgaGl0IVwiXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gJ1lvdSBoYXZlIGFscmVhZHkgaGl0IHRoaXMgc3BvdCEnXG4gICAgfVxuXG4gICAgICBsZXQgcmFuZG9tUG9zID0gKCkgPT4ge1xuICAgIGxldCBwb3MxID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApO1xuICAgIGxldCBwb3MyID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApO1xuICAgIHJldHVybiBbcG9zMSwgcG9zMl07XG4gIH07XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBnZXROYW1lLFxuICAgICAgICBhdHRhY2ssXG4gICAgICAgIHJhbmRvbVBvcyxcbiAgICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY3JlYXRlUGxheWVyXG4iLCJjb25zdCBjcmVhdGVTaGlwID0gKGxlbmd0aCwgbmFtZSA9ICdzaGlwJykgPT4ge1xuXG4gICAgbGV0IGRvbVRhcmdldHMgPSBbXVxuXG4gICAgY29uc3Qgc3RhdHVzID0gQXJyYXkobGVuZ3RoKS5maWxsKCd1bmhpdCcpXG5cbiAgICBjb25zdCBnZXRMZW5ndGggPSAoKSA9PiBzdGF0dXMubGVuZ3RoXG5cbiAgICBjb25zdCBnZXRTdGF0dXMgPSAoKSA9PiBzdGF0dXNcblxuICAgIGNvbnN0IGhpdCA9IChwb3NpdGlvbikgPT4ge1xuICAgICAgICBpZiAocG9zaXRpb24gPCBsZW5ndGgpIHtcbiAgICAgICAgICAgIHN0YXR1c1twb3NpdGlvbl0gPSAnaGl0J1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgZ2V0TmFtZSA9ICgpID0+ICBuYW1lXG5cbiAgICBjb25zdCBpc1N1bmsgPSAoKSA9PiBzdGF0dXMuZXZlcnkoKHBvc2l0aW9uKSA9PiBwb3NpdGlvbiA9PT0gJ2hpdCcpXG5cbiAgICByZXR1cm4ge1xuICAgICAgICBnZXROYW1lLFxuICAgICAgICBnZXRMZW5ndGgsXG4gICAgICAgIGlzU3VuayxcbiAgICAgICAgaGl0LFxuICAgICAgICBnZXRTdGF0dXMsXG4gICAgICAgIGRvbVRhcmdldHMsXG4gICAgICAgIGhhc0JlZW5IaXQ6IGZhbHNlLFxuICAgICAgICBvZmZMaW1pdHM6IHRydWUsXG4gICAgICAgIGlzU2hpcDogdHJ1ZSxcbiAgICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY3JlYXRlU2hpcFxuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSAobW9kdWxlKSA9PiB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdCgpID0+IChtb2R1bGVbJ2RlZmF1bHQnXSkgOlxuXHRcdCgpID0+IChtb2R1bGUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8qIGVzbGludC1kaXNhYmxlIG5vLWVsc2UtcmV0dXJuICovXG5pbXBvcnQge3JlbmRlckF0dGFja1AyIH0gZnJvbSAnLi9kb20nXG5cbmxldCB3YXNIaXQgPSBmYWxzZTtcbmxldCBzdGF0dXMgPSBmYWxzZTtcbmxldCBsYXN0SGl0UG9zID0gW107XG5sZXQgZmlyc3RIaXRQb3MgPSBbXTtcbmxldCBzZWNvbmRIaXRQb3MgPSBbXTtcbmxldCBzdXJyb3VuZGluZ1BvcyA9IFtdO1xubGV0IGF0dGFja0RpcmVjdGlvbjtcblxuZnVuY3Rpb24gc2V0V2FzSGl0KHZhbHVlLCBzdGF0LCBwb3MxLCBwb3MyKSB7XG4gIHdhc0hpdCA9IHZhbHVlO1xuICBpZiAoc3RhdCAhPT0gdW5kZWZpbmVkKSBzdGF0dXMgPSBzdGF0O1xuICBpZiAocG9zMSAhPT0gdW5kZWZpbmVkKSBsYXN0SGl0UG9zID0gW3BvczEsIHBvczJdO1xuICBpZiAoZmlyc3RIaXRQb3MubGVuZ3RoID09IDAgJiYgcG9zMSAhPT0gdW5kZWZpbmVkKSBmaXJzdEhpdFBvcyA9IFtwb3MxLCBwb3MyXTtcbiAgZWxzZSBpZiAoXG4gICAgZmlyc3RIaXRQb3MubGVuZ3RoICE9PSAwICYmXG4gICAgc2Vjb25kSGl0UG9zLmxlbmd0aCA9PSAwICYmXG4gICAgcG9zMSAhPT0gdW5kZWZpbmVkXG4gIClcbiAgICBzZWNvbmRIaXRQb3MgPSBbcG9zMSwgcG9zMl07XG59XG5mdW5jdGlvbiBnZXRXYXNIaXQoKSB7XG4gIHJldHVybiBbd2FzSGl0LCBsYXN0SGl0UG9zLCBzdGF0dXNdO1xufVxuXG5mdW5jdGlvbiByZWdpc3RlclN1cnJvdW5kaW5nUG9zKHBvczEsIHBvczIpIHtcbiAgc3Vycm91bmRpbmdQb3MgPSBbXTtcbiAgaWYgKHBvczIgIT09IDApIHN1cnJvdW5kaW5nUG9zLnB1c2goW3BvczEsIHBvczIgLSAxXSk7XG4gIGlmIChwb3MyICE9PSA5KSBzdXJyb3VuZGluZ1Bvcy5wdXNoKFtwb3MxLCBwb3MyICsgMV0pO1xuICBpZiAocG9zMSAhPT0gMCkgc3Vycm91bmRpbmdQb3MucHVzaChbcG9zMSAtIDEsIHBvczJdKTtcbiAgaWYgKHBvczEgIT09IDkpIHN1cnJvdW5kaW5nUG9zLnB1c2goW3BvczEgKyAxLCBwb3MyXSk7XG4gIHJldHVybiBzdXJyb3VuZGluZ1Bvcztcbn1cblxuZnVuY3Rpb24gYWlQbGF5KHJlcGVhdCwgcDEsIHAyLCBpc1N1bmssIHBsYXllckJvYXJkLCBlbmVteUJvYXJkKSB7XG4gIGxldCBwb3M7IGxldCBwb3MxOyBsZXQgcG9zMjtcbiAgaWYgKGlzU3VuayA9PT0gdHJ1ZSkge1xuICAgIGxhc3RIaXRQb3MgPSBbXTtcbiAgICBmaXJzdEhpdFBvcyA9IFtdO1xuICAgIHNlY29uZEhpdFBvcyA9IFtdO1xuICAgIHN1cnJvdW5kaW5nUG9zID0gW107XG4gICAgd2FzSGl0ID0gZmFsc2U7XG4gICAgc3RhdHVzID0gZmFsc2U7XG4gICAgYXR0YWNrRGlyZWN0aW9uID0gXCJcIjtcbiAgfVxuICBpZiAoIXN0YXR1cyAmJiAhd2FzSGl0KSB7XG4gICAgcG9zID0gcDEucmFuZG9tUG9zKCk7XG5cbiAgICByZXR1cm4gcmVuZGVyQXR0YWNrUDIocDEsIHAyLCBwb3NbMF0sIHBvc1sxXSwgcGxheWVyQm9hcmQsIGVuZW15Qm9hcmQpO1xuICB9IGVsc2UgaWYgKHNlY29uZEhpdFBvcy5sZW5ndGggIT09IDAgJiYgd2FzSGl0ICYmICFyZXBlYXQpIHtcbiAgICBsZXQgbmV3UG9zO1xuICAgIGlmIChmaXJzdEhpdFBvc1swXSA9PSBzZWNvbmRIaXRQb3NbMF0gLSAxKSBuZXdQb3MgPSBhdHRhY2tUb3dhcmRzKFwiZG93blwiKTtcbiAgICBpZiAoZmlyc3RIaXRQb3NbMF0gPT0gc2Vjb25kSGl0UG9zWzBdICsgMSkgbmV3UG9zID0gYXR0YWNrVG93YXJkcyhcInVwXCIpO1xuICAgIGlmIChmaXJzdEhpdFBvc1sxXSA9PSBzZWNvbmRIaXRQb3NbMV0gLSAxKSBuZXdQb3MgPSBhdHRhY2tUb3dhcmRzKFwicmlnaHRcIik7XG4gICAgaWYgKGZpcnN0SGl0UG9zWzFdID09IHNlY29uZEhpdFBvc1sxXSArIDEpIG5ld1BvcyA9IGF0dGFja1Rvd2FyZHMoXCJsZWZ0XCIpO1xuICAgIGlmIChuZXdQb3NbMF0gPj0gMCAmJiBuZXdQb3NbMF0gPD0gOSAmJiBuZXdQb3NbMV0gPj0gMCAmJiBuZXdQb3NbMV0gPD0gOSlcbiAgICAgIHJldHVybiByZW5kZXJBdHRhY2tQMihwMSwgcDIsIG5ld1Bvc1swXSwgbmV3UG9zWzFdLCBwbGF5ZXJCb2FyZCwgZW5lbXlCb2FyZCk7XG4gIH0gZWxzZSBpZiAoc2Vjb25kSGl0UG9zLmxlbmd0aCAhPT0gMCAmJiBzdGF0dXMgJiYgIXdhc0hpdCkge1xuICAgIGxhc3RIaXRQb3MgPSBmaXJzdEhpdFBvcztcbiAgICBzZWNvbmRIaXRQb3MgPSBbXTtcbiAgICBsZXQgbmV3UG9zO1xuICAgIGlmIChhdHRhY2tEaXJlY3Rpb24gPT09IFwidXBcIikgbmV3UG9zID0gYXR0YWNrVG93YXJkcyhcImRvd25cIik7XG4gICAgaWYgKGF0dGFja0RpcmVjdGlvbiA9PT0gXCJkb3duXCIpIG5ld1BvcyA9IGF0dGFja1Rvd2FyZHMoXCJ1cFwiKTtcbiAgICBpZiAoYXR0YWNrRGlyZWN0aW9uID09PSBcInJpZ2h0XCIpIG5ld1BvcyA9IGF0dGFja1Rvd2FyZHMoXCJsZWZ0XCIpO1xuICAgIGlmIChhdHRhY2tEaXJlY3Rpb24gPT09IFwibGVmdFwiKSBuZXdQb3MgPSBhdHRhY2tUb3dhcmRzKFwicmlnaHRcIik7XG4gICAgaWYgKG5ld1Bvc1swXSA+PSAwICYmIG5ld1Bvc1swXSA8PSA5ICYmIG5ld1Bvc1sxXSA+PSAwICYmIG5ld1Bvc1sxXSA8PSA5KVxuICAgICAgcmV0dXJuIHJlbmRlckF0dGFja1AyKHAxLCBwMiwgbmV3UG9zWzBdLCBuZXdQb3NbMV0sIHBsYXllckJvYXJkLCBlbmVteUJvYXJkKTtcbiAgfSBlbHNlIGlmIChzdGF0dXMpIHtcbiAgICBpZiAoc3Vycm91bmRpbmdQb3MubGVuZ3RoID09IDApXG4gICAgICByZWdpc3RlclN1cnJvdW5kaW5nUG9zKGxhc3RIaXRQb3NbMF0sIGxhc3RIaXRQb3NbMV0pO1xuICAgIGlmIChzdXJyb3VuZGluZ1Bvcy5sZW5ndGggPT0gMCAmJiBzdGF0dXMgPT0gdHJ1ZSlcbiAgICAgIHJlZ2lzdGVyU3Vycm91bmRpbmdQb3MoZmlyc3RIaXRQb3NbMF0sIGZpcnN0SGl0UG9zWzFdKTtcbiAgICBjb25zdCBuZXdQb3MgPSBzdXJyb3VuZGluZ1Bvcy5wb3AoKTtcbiAgICByZXR1cm4gcmVuZGVyQXR0YWNrUDIocDEsIHAyLCBuZXdQb3NbMF0sIG5ld1Bvc1sxXSwgcGxheWVyQm9hcmQsIGVuZW15Qm9hcmQpO1xuICB9XG59XG4vLyBnZXQgcG9zIG9mIGF0dGFjayBiYXNlZCBvbiBkaXJlY3Rpb25cbmZ1bmN0aW9uIGF0dGFja1Rvd2FyZHMoZGlyKSB7XG4gIGlmIChkaXIgPT09IFwibGVmdFwiKSB7XG4gICAgYXR0YWNrRGlyZWN0aW9uID0gXCJsZWZ0XCI7XG4gICAgcmV0dXJuIFtsYXN0SGl0UG9zWzBdLCBsYXN0SGl0UG9zWzFdIC0gMV07XG4gIH1cbiAgaWYgKGRpciA9PT0gXCJyaWdodFwiKSB7XG4gICAgYXR0YWNrRGlyZWN0aW9uID0gXCJyaWdodFwiO1xuICAgIHJldHVybiBbbGFzdEhpdFBvc1swXSwgbGFzdEhpdFBvc1sxXSArIDFdO1xuICB9XG4gIGlmIChkaXIgPT09IFwiZG93blwiKSB7XG4gICAgYXR0YWNrRGlyZWN0aW9uID0gXCJkb3duXCI7XG4gICAgcmV0dXJuIFtsYXN0SGl0UG9zWzBdICsgMSwgbGFzdEhpdFBvc1sxXV07XG4gIH1cbiAgaWYgKGRpciA9PT0gXCJ1cFwiKSB7XG4gICAgYXR0YWNrRGlyZWN0aW9uID0gXCJ1cFwiO1xuICAgIHJldHVybiBbbGFzdEhpdFBvc1swXSAtIDEsIGxhc3RIaXRQb3NbMV1dO1xuICB9XG59XG5cbmV4cG9ydCB7IGFpUGxheSwgZ2V0V2FzSGl0LCBzZXRXYXNIaXQsIGxhc3RIaXRQb3MsIHN1cnJvdW5kaW5nUG9zIH07XG5cbiIsImltcG9ydCB7cmVuZGVyUGxheWVyU2hpcHN9IGZyb20gJy4vZG9tJ1xuaW1wb3J0IGNyZWF0ZVNoaXAgZnJvbSAnLi9zaGlwL3NoaXAnXG5cbmxldCB0b3RhbEFtb3VudFNoaXBzID0gMFxuXG5mdW5jdGlvbiBzaGlwRHJhZyhzaGlwTmFtZSwgcGxheWVyQm9hcmQpIHtcbiAgICBsZXQgYW1vdW50TGVmdCA9IDJcblxuICAgIGNvbnN0IHNoaXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNoaXBOYW1lKVxuICAgIGNvbnN0IGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5JylcbiAgICBjb25zdCBjZWxscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wbGF5ZXItYm9hcmQgPiAuY2VsbCcpXG4gICAgY29uc3QgY2hpbGQgPSBzaGlwLmNoaWxkTm9kZXNcbiAgICBsZXQgZHJhZ1NlbGVjdGlvbjtcbiAgICBsZXQgb2Zmc2V0O1xuICAgIGxldCBkaXIgPSBcImhvcml6b250YWxcIlxuXG4gICAgaWYoY2hpbGRbMF0pIGNoaWxkWzBdLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCAoKSA9PiAob2Zmc2V0ID0gMCkpXG4gICAgaWYoY2hpbGRbMV0pIGNoaWxkWzFdLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCAoKSA9PiAob2Zmc2V0ID0gLTEpKVxuICAgIGlmKGNoaWxkWzJdKSBjaGlsZFsyXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgKCkgPT4gKG9mZnNldCA9IC0yKSlcbiAgICBpZihjaGlsZFszXSkgY2hpbGRbM10uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsICgpID0+IChvZmZzZXQgPSAtMykpXG5cbiAgICBzaGlwLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4gY2hhbmdlRGlyKGUpKVxuXG4gICAgc2hpcC5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ3N0YXJ0XCIsIChlKSA9PiB7XG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKVxuICAgICAgICAgICAgcGxheWVyQm9hcmQuZ2FtZUJvYXJkW2ldLmZvckVhY2goKGUsIGopID0+IHtcbiAgICAgICAgICAgICAgICBpZihlLm9mZkxpbWl0cyB8fCBlLmlzU2hpcClcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAucGxheWVyLWJvYXJkID4gLmNlbGxbY29sdW1uPScke2V9J11bcm93PScke2p9J11gKS5jbGFzc0xpc3QudG9nZ2xlKFwibm90LWF2YWlsYWJsZVwiKVxuICAgICAgICAgICAgfSlcbiAgICB9KVxuXG4gICAgc2hpcC5hZGRFdmVudExpc3RlbmVyKCdkcmFnZW5kJywgKGUsIGkpID0+IHtcblxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm5vdC1hdmFpbGFibGVcIikuZm9yRWFjaCgoZSkgPT4gZS5jbGFzc0xpc3QucmVtb3ZlKFwibm90LWF2YWlsYWJsZVwiKSlcblxuICAgICAgICBpZihkcmFnU2VsZWN0aW9uID09PSAtMSkgcmV0dXJuXG5cbiAgICAgICAgbGV0IHBvczE7XG4gICAgICAgIGxldCBwb3MyO1xuICAgICAgICBsZXQgcG9zID0gYCR7ICBkcmFnU2VsZWN0aW9ufWBcblxuICAgICAgICBpZihkcmFnU2VsZWN0aW9uIDwgMTApIHtcbiAgICAgICAgICAgIHBvczEgPSAwO1xuICAgICAgICAgICAgcG9zMiA9IGRyYWdTZWxlY3Rpb25cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHBvcyA9IHBvcy5zcGxpdChcIlwiKVxuICAgICAgICAgICAgcG9zMSA9IHBvc1swXSAqIDFcbiAgICAgICAgICAgIHBvczIgPSBwb3NbMV0gKiAxXG4gICAgICAgIH1cblxuICAgICAgICBpZihkaXIgPT09IFwiaG9yaXpvbnRhbFwiKSBwb3MyICs9IG9mZnNldFxuICAgICAgICBpZihkaXIgPT09IFwidlwiKSBwb3MxICs9IG9mZnNldFxuXG4gICAgICAgIGlmKHBvczIgPCAwKSByZXR1cm5cblxuICAgICAgICBpZihzaGlwTmFtZSA9PT0gXCIuc2hpcC0xXCIpe1xuICAgICAgICAgICAgaWYocGxheWVyQm9hcmQucGxhY2VTaGlwKHBvczEsIHBvczIsIGRpciwgY3JlYXRlU2hpcCgxKSkgPT09IGZhbHNlKSByZXR1cm5cbiAgICAgICAgICAgIH1cbiAgICAgICAgaWYoc2hpcE5hbWUgPT09IFwiLnNoaXAtMlwiKXtcblxuICAgICAgICAgICAgaWYocGxheWVyQm9hcmQucGxhY2VTaGlwKHBvczEsIHBvczIsIGRpciwgY3JlYXRlU2hpcCgyKSkgPT09IGZhbHNlKSByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICBpZihzaGlwTmFtZSA9PT0gXCIuc2hpcC0zXCIpIHtcblxuICAgICAgICAgICAgaWYocGxheWVyQm9hcmQucGxhY2VTaGlwKHBvczEsIHBvczIsIGRpciwgY3JlYXRlU2hpcCgzKSkgPT09IGZhbHNlKSByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICBpZihzaGlwTmFtZSA9PT0gXCIuc2hpcC00XCIpIHtcblxuICAgICAgICAgICAgaWYocGxheWVyQm9hcmQucGxhY2VTaGlwKHBvczEsIHBvczIsIGRpciwgY3JlYXRlU2hpcCg0KSkgPT09IGZhbHNlKSByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIHJlbmRlclBsYXllclNoaXBzKHBsYXllckJvYXJkKVxuXG4gICAgICAgIGFtb3VudExlZnQgLT0gMVxuICAgICAgICB0b3RhbEFtb3VudFNoaXBzKytcblxuICAgICAgICBpZih0b3RhbEFtb3VudFNoaXBzID09PSA4KSBwbGF5ZXJCb2FyZC5pc1N0YXJ0QWxsb3dlZC5zZXQodHJ1ZSlcbiAgICAgICAgc2hpcC5wYXJlbnROb2RlLmZpcnN0Q2hpbGQudGV4dENvbnRlbnQgPSBgJHthbW91bnRMZWZ0fXhgXG4gICAgICAgIGlmKGFtb3VudExlZnQgPT09IDApIHNoaXAucGFyZW50Tm9kZS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCJcbiAgICB9KVxuXG4gICAgY2VsbHMuZm9yRWFjaCgoZSwgaSkgPT4ge1xuICAgICAgICBlLmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnb3ZlclwiLCAoZSkgPT4ge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgICAgICBkcmFnU2VsZWN0aW9uID0gaSBcbiAgICAgICAgfSlcbiAgICB9KVxuXG4gICAgYm9keS5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ2VudGVyXCIsICgpID0+IHtcbiAgICAgICAgZHJhZ1NlbGVjdGlvbiA9IC0xXG4gICAgfSlcblxuICAgIGZ1bmN0aW9uIGNoYW5nZURpcihlKSB7XG4gICAgICAgIGlmKGRpciA9PT0gXCJob3Jpem9udGFsXCIpIHtcbiAgICAgICAgICAgIGRpciA9IFwidmVydGljYWxcIlxuICAgICAgICAgICAgZS50YXJnZXQucGFyZW50Tm9kZS5jbGFzc0xpc3QudG9nZ2xlKFwicm90YXRlZFwiKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGlyID0gXCJob3Jpem9udGFsXCI7XG4gICAgICAgICAgICBlLnRhcmdldC5wYXJlbnROb2RlLmNsYXNzTGlzdC50b2dnbGUoXCJyb3RhdGVkXCIpXG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCB7c2hpcERyYWcsIHRvdGFsQW1vdW50U2hpcHN9IiwiaW1wb3J0IGNyZWF0ZUdhbWVCb2FyZCBmcm9tIFwiLi9nYW1lYm9hcmQvZ2FtZWJvYXJkXCJcbmltcG9ydCBjcmVhdGVTaGlwIGZyb20gXCIuL3NoaXAvc2hpcFwiXG5pbXBvcnQgeyBhaVBsYXksIGdldFdhc0hpdCwgc2V0V2FzSGl0LCBzdXJyb3VuZGluZ1BvcyB9IGZyb20gXCIuL2JvdFwiO1xuaW1wb3J0IHsgc2hpcERyYWcgfSBmcm9tIFwiLi9kcmFnLWFuZC1kcm9wXCI7XG5cbmNvbnN0IHJlbmRlckF0dGFja3MgPSAocGxheWVyLCBjb2x1bW4sIHJvdywgZW5lbXlCb2FyZCkgPT4ge1xuICAgIGNvbnN0IGNlbGwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgICBgLiR7cGxheWVyfS1ib2FyZCA+IC5jZWxsW2NvbHVtbj0nJHtjb2x1bW59J11bcm93PScke3Jvd30nXWBcbiAgICApXG5cbiAgICBpZihlbmVteUJvYXJkLmdldExvY2F0aW9uKGNvbHVtbiwgcm93KT8uaXNTaGlwKXtcblxuICAgICAgICBlbmVteUJvYXJkLmdldExvY2F0aW9uKGNvbHVtbiwgcm93KS5kb21UYXJnZXRzLnB1c2goY2VsbClcbiAgICAgICAgaWYoZW5lbXlCb2FyZC5nZXRMb2NhdGlvbihjb2x1bW4sIHJvdykuaXNTdW5rKCkpe1xuXG4gICAgICAgICAgICBlbmVteUJvYXJkLmdldExvY2F0aW9uKGNvbHVtbiwgcm93KS5kb21UYXJnZXRzLmZvckVhY2goKGUpID0+IGUuY2xhc3NMaXN0LmFkZCgnc3VuaycpKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgbG9jYXRpb24gPSBlbmVteUJvYXJkLmdldExvY2F0aW9uKGNvbHVtbiwgcm93KVxuICAgIGlmIChsb2NhdGlvbi5pc1NoaXApIHtcbiAgICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKCdoaXQnKVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZCgnbWlzcycpXG4gICAgfVxuXG59XG5cbmNvbnN0IGhhbmRsZUF0dGFjayA9IChjb2x1bW4sIHJvdywgZW5lbXlCb2FyZCwgcGxheWVyKSA9PlxuICAgIHBsYXllci5hdHRhY2soY29sdW1uLCByb3csIGVuZW15Qm9hcmQpXG5cbmNvbnN0IGF0dGFja0VuZW15Q2VsbCA9IGFzeW5jIChjb2x1bW4sIHJvdywgZW5lbXlCb2FyZCwgcGxheWVyQm9hcmQsIHBsYXllciwgZW5lbXkpID0+IHtcblxuXG4gICAgaGFuZGxlQXR0YWNrKGNvbHVtbiwgcm93LCBlbmVteUJvYXJkLCBwbGF5ZXIpXG4gICAgcmVuZGVyQXR0YWNrcygnZW5lbXknLCBjb2x1bW4sIHJvdywgZW5lbXlCb2FyZClcbiAgICBhd2FpdCBkZWxheSg3MDApXG4gICAgcmV0dXJuIGVuZW15Qm9hcmQuY2hlY2tJZkFsbFNoaXBzSGF2ZVN1bmsoKSA/IGNoZWNrSWZHYW1lT3ZlcihwbGF5ZXJCb2FyZCwgZW5lbXlCb2FyZCkgOiBhaVBsYXkoZmFsc2UsIHBsYXllciwgZW5lbXksIHVuZGVmaW5lZCwgcGxheWVyQm9hcmQsIGVuZW15Qm9hcmQpXG59XG5cbmNvbnN0IGlzU3BhY2VBcm91bmRIaXQgPSAoY29sdW1uLCByb3csIHBsYXllckJvYXJkKSA9PiB7XG5cbiAgICBjb25zdCBuZXh0Q29sdW1uID0gcGxheWVyQm9hcmQuZ2V0TG9jYXRpb24oY29sdW1uICsgMSwgcm93KVxuICAgIGNvbnN0IHByZXZpb3VzQ29sdW1uID0gcGxheWVyQm9hcmQuZ2V0TG9jYXRpb24oY29sdW1uIC0gMSwgcm93KVxuICAgIGNvbnN0IG5leHRSb3cgPSBwbGF5ZXJCb2FyZC5nZXRMb2NhdGlvbihjb2x1bW4sIHJvdyArIDEpXG4gICAgY29uc3QgcHJldmlvdXNSb3cgPSBwbGF5ZXJCb2FyZC5nZXRMb2NhdGlvbihjb2x1bW4sIHJvdyAtIDEpXG5cbiAgICBjb25zdCBzcGFjZXNIaXQgPSBbXVxuXG4gICAgaWYobmV4dENvbHVtbiAmJiAhbmV4dENvbHVtbi5oYXNCZWVuSGl0KXtcbiAgICAgICAgc3BhY2VzSGl0LnB1c2gobmV4dENvbHVtbilcbiAgICB9XG4gICAgaWYocHJldmlvdXNDb2x1bW4gJiYgIXByZXZpb3VzQ29sdW1uLmhhc0JlZW5IaXQpe1xuICAgICAgICBzcGFjZXNIaXQucHVzaChwcmV2aW91c0NvbHVtbilcbiAgICB9XG4gICAgaWYobmV4dFJvdyAmJiAhbmV4dFJvdy5oYXNCZWVuSGl0KXtcbiAgICAgICAgc3BhY2VzSGl0LnB1c2gobmV4dFJvdylcbiAgICB9XG4gICAgaWYocHJldmlvdXNSb3cgJiYgIXByZXZpb3VzUm93Lmhhc0JlZW5IaXQpe1xuICAgICAgICBzcGFjZXNIaXQucHVzaChwcmV2aW91c1JvdylcbiAgICB9XG5cbiAgICByZXR1cm4gc3BhY2VzSGl0XG5cbn1cblxuY29uc3QgcmFuZG9tRGlyZWN0aW9uQXR0YWNrID0gKGNvbHVtbiwgcm93LCBwbGF5ZXJCb2FyZCkgPT4ge1xuXG4gICAgY29uc3Qgc3BhY2VzSGl0ID0gaXNTcGFjZUFyb3VuZEhpdChjb2x1bW4sIHJvdywgcGxheWVyQm9hcmQpXG5cbiAgICBjb25zdCByYW5kb21JbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHNwYWNlc0hpdC5sZW5ndGgpXG5cbiAgICBpZighc3BhY2VzSGl0W3JhbmRvbUluZGV4XSkgcmV0dXJuIHJhbmRvbURpcmVjdGlvbkF0dGFjayhjb2x1bW4sIHJvdyAsIHBsYXllckJvYXJkKVxuXG4gICAgcmV0dXJuIHNwYWNlc0hpdFtyYW5kb21JbmRleF1cbn1cblxuY29uc3QgaXNSYW5kb21Db2x1bW5HcmVhdGVyVGhhbkN1cnJlbnRDb2x1bW4gPSAoY29sdW1uLCByYW5kb21Db2x1bW4pID0+IFxuICAgIHJhbmRvbUNvbHVtbiA+IGNvbHVtblxuXG5jb25zdCBpc1JhbmRvbVJvd0dyZWF0ZXJUaGFuQ3VycmVudENvbHVtbiA9IChyb3csIHJhbmRvbVJvdykgPT4gXG4gICAgcmFuZG9tUm93ID4gcm93XG5cbmNvbnN0IGxpc3RPZlJhbmRvbUNvb3JkaW5hdGVzID0gKGNvbHVtbiwgcm93LCBwbGF5ZXJCb2FyZCkgPT4ge1xuXG4gICAgICAgIGNvbnN0IGxvY2F0aW9uUHJvdG90eXBlID0ge1xuICAgICAgICAgICAgbG9jYXRpb24oKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBsYXllckJvYXJkLmdldExvY2F0aW9uKHRoaXMuY29sdW1uLCB0aGlzLnJvdylcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHRvcCA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShsb2NhdGlvblByb3RvdHlwZSksIHtcbiAgICAgICAgICAgIGNvbHVtbixcbiAgICAgICAgICAgIHJvdzogcm93IC0gMSxcbiAgICAgICAgfSlcbiAgICAgICAgY29uc3QgYm90dG9tID0gT2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKGxvY2F0aW9uUHJvdG90eXBlKSwge1xuICAgICAgICAgICAgY29sdW1uLFxuICAgICAgICAgICAgcm93OiByb3cgKyAxLFxuICAgICAgICB9KVxuICAgICAgICBjb25zdCByaWdodCA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShsb2NhdGlvblByb3RvdHlwZSksIHtcbiAgICAgICAgICAgIGNvbHVtbjogY29sdW1uICsgMSxcbiAgICAgICAgICAgIHJvdyxcbiAgICAgICAgfSlcbiAgICAgICAgY29uc3QgbGVmdCA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShsb2NhdGlvblByb3RvdHlwZSksIHtcbiAgICAgICAgICAgIGNvbHVtbjogY29sdW1uIC0gMSxcbiAgICAgICAgICAgIHJvdyxcbiAgICAgICAgfSlcbiAgICAgICAgY29uc3QgZGlyZWN0aW9ucyA9IFtdXG5cbiAgICAgICAgZGlyZWN0aW9ucy5wdXNoKHRvcClcbiAgICAgICAgZGlyZWN0aW9ucy5wdXNoKGJvdHRvbSlcbiAgICAgICAgZGlyZWN0aW9ucy5wdXNoKHJpZ2h0KVxuICAgICAgICBkaXJlY3Rpb25zLnB1c2gobGVmdClcblxuICAgICAgICByZXR1cm4gZGlyZWN0aW9uc1xufVxuXG4vLyByZW5kZXJzIGF0dGFjayBmb3IgcDIgKEFJKVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlbmRlckF0dGFja1AyKHAxLCBwMiwgcG9zMSwgcG9zMiwgcGxheWVyQm9hcmQsIGVuZW15Qm9hcmQpIHtcbiAgbGV0IGlzU3VuayA9IGZhbHNlO1xuICBjb25zdCBlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgYC5wbGF5ZXItYm9hcmQgPiAuY2VsbFtjb2x1bW49JyR7cG9zMX0nXVtyb3c9JyR7cG9zMn0nXWBcbiAgICApXG5cbiAgY29uc3QgYXR0YWNrID0gcDIuYXR0YWNrKHBvczEsIHBvczIsIHBsYXllckJvYXJkKTtcblxuICAgIGNvbnNvbGUubG9nKHBsYXllckJvYXJkLmdldExvY2F0aW9uKHBvczEsIHBvczIpKVxuICBpZiAoYXR0YWNrID09PSBcIllvdSBoYXZlIGFscmVhZHkgaGl0IHRoaXMgc3BvdCFcIikge1xuICAgIGNvbnN0IHJlcGVhdCA9IHRydWU7XG4gICAgYWlQbGF5KHJlcGVhdCwgcDEsIHAyLCB1bmRlZmluZWQsIHBsYXllckJvYXJkLCBlbmVteUJvYXJkKTtcbiAgfVxuICBpZiAoYXR0YWNrID09PSBcIkl0J3MgYSBoaXQhXCIpIHtcbiAgICBzZXRXYXNIaXQoZmFsc2UpO1xuICAgIGUuY2xhc3NMaXN0LmFkZChcIm1pc3NcIik7XG4gIH1cbiAgaWYgKGF0dGFjayA9PT0gXCJZb3UgaGl0IGEgc2hpcCFcIikge1xuICAgIHNldFdhc0hpdCh0cnVlLCB0cnVlLCBwb3MxLCBwb3MyKTtcbiAgICBlLmNsYXNzTGlzdC5hZGQoXCJoaXRcIik7XG4gICAgcGxheWVyQm9hcmQuZ2V0TG9jYXRpb24ocG9zMSwgcG9zMikuZG9tVGFyZ2V0cy5wdXNoKGUpXG4gICAgLy8gaWYgc2hpcCBpcyBzdW5rLCBhZGQgXCJzdW5rXCIgY2xhc3NcbiAgICBpZiAocGxheWVyQm9hcmQuZ2V0TG9jYXRpb24ocG9zMSwgcG9zMikuaXNTdW5rKCkpIHtcbiAgICAgIHBsYXllckJvYXJkLmdldExvY2F0aW9uKHBvczEsIHBvczIpLmRvbVRhcmdldHMuZm9yRWFjaCgoZSkgPT5cbiAgICAgICAgZS5jbGFzc0xpc3QuYWRkKFwic3Vua1wiKVxuICAgICAgKTtcbiAgICAgIGlzU3VuayA9IHRydWU7XG4gICAgICBpZiAocGxheWVyQm9hcmQuY2hlY2tJZkFsbFNoaXBzSGF2ZVN1bmsoKSA9PT0gdHJ1ZSkgcmV0dXJuIGNoZWNrSWZHYW1lT3ZlcihwbGF5ZXJCb2FyZCwgZW5lbXlCb2FyZCk7XG4gICAgfVxuICAgIGF3YWl0IGRlbGF5KDEwMDApXG4gICAgcmV0dXJuIGFpUGxheShmYWxzZSwgcDEsIHAyLCBpc1N1bmssIHBsYXllckJvYXJkLCBlbmVteUJvYXJkKTtcbiAgfVxuXG4gIC8vIHAxLmlzVHVybihwMik7IC8vIGdpdmVzIHR1cm4gdG8gUDFcbn1cbi8vIGh0dHBzOi8vanNtYW5pZmVzdC5jb20vdGhlLXB1Ymxpc2gtc3Vic2NyaWJlLXBhdHRlcm4taW4tamF2YXNjcmlwdC9cblxuZXhwb3J0IGNvbnN0IHB1YlN1YiA9ICgpID0+IHtcbiAgICBjb25zdCBzdWJzY3JpYmVycyA9IHt9XG5cbiAgICBmdW5jdGlvbiBwdWJsaXNoKGV2ZW50TmFtZSwgZGF0YSkge1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoc3Vic2NyaWJlcnNbZXZlbnROYW1lXSkpIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIHN1YnNjcmliZXJzW2V2ZW50TmFtZV0uZm9yRWFjaCgoY2FsbGJhY2spID0+IHtcbiAgICAgICAgICAgIGNhbGxiYWNrKGRhdGEpXG4gICAgICAgIH0pXG4gICAgfVxuICAgIGZ1bmN0aW9uIHN1YnNjcmliZShldmVudE5hbWUsIGNhbGxiYWNrKSB7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShzdWJzY3JpYmVbZXZlbnROYW1lXSkpIHtcbiAgICAgICAgICAgIHN1YnNjcmliZXJzW2V2ZW50TmFtZV0gPSBbXVxuICAgICAgICB9XG4gICAgICAgIHN1YnNjcmliZXJzW2V2ZW50TmFtZV0ucHVzaChjYWxsYmFjaylcbiAgICAgICAgY29uc3QgaW5kZXggPSBzdWJzY3JpYmVyc1tldmVudE5hbWVdLmxlbmd0aCAtIDFcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdW5zdWJzY3JpYmUoKSB7XG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlcnNbZXZlbnROYW1lXS5zcGxpY2UoaW5kZXgsIDEpXG4gICAgICAgICAgICB9LFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgcHVibGlzaCxcbiAgICAgICAgc3Vic2NyaWJlLFxuICAgIH1cbn1cblxuLy8gY3JlYXRlcyBhIGRlbGF5IHRvIGJlIHVzZWQgaW4gYW4gYXN5bmMgZnVuY3Rpb25cbmZ1bmN0aW9uIGRlbGF5KGRlbGF5SW5Ncykge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHJlc29sdmUoMik7XG4gICAgfSwgZGVsYXlJbk1zKTtcbiAgfSk7XG59XG5cbmV4cG9ydCBjb25zdCByZW5kZXJQbGF5ZXJTaGlwcyA9ICh7IGdldExvY2F0aW9uIH0pID0+IHtcbiAgICBjb25zdCBwbGF5ZXJCb2FyZEFyZWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdkaXYucGxheWVyLWJvYXJkJylcblxuICAgIGZvciAobGV0IGNvbHVtbiA9IDA7IGNvbHVtbiA8IDEwOyBjb2x1bW4gKz0gMSkge1xuICAgICAgICBmb3IgKGxldCByb3cgPSAwOyByb3cgPCAxMDsgcm93ICs9IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IGNlbGwgPSBwbGF5ZXJCb2FyZEFyZWEucXVlcnlTZWxlY3RvcihcbiAgICAgICAgICAgICAgICBgLmNlbGw6bnRoLWNoaWxkKCR7cm93ICogMTAgKyBjb2x1bW4gKyAxfSlgXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBjZWxsLnNldEF0dHJpYnV0ZSgnY29sdW1uJywgY29sdW1uKVxuICAgICAgICAgICAgY2VsbC5zZXRBdHRyaWJ1dGUoJ3JvdycsIHJvdylcbiAgICAgICAgICAgIGNvbnN0IGxvY2F0aW9uID0gZ2V0TG9jYXRpb24oY29sdW1uLCByb3cpXG4gICAgICAgICAgICBpZiAobG9jYXRpb24uaXNTaGlwKSB7XG4gICAgICAgICAgICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKCdzaGlwJylcbiAgICAgICAgICAgICAgICBjZWxsLnNldEF0dHJpYnV0ZSgnc2hpcC1uYW1lJywgbG9jYXRpb24uZ2V0TmFtZSgpKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG5jb25zdCBjaGVja0lmR2FtZU92ZXIgPSAocGxheWVyQm9hcmQsIGVuZW15Qm9hcmQpID0+IHtcbiAgICBpZiAocGxheWVyQm9hcmQuY2hlY2tJZkFsbFNoaXBzSGF2ZVN1bmsoKSkge1xuICAgICAgICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbCcpXG4gICAgICAgIGNvbnN0IG1vZGFsV2lubmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLWNvbnRlbnQgPiBwJylcbiAgICAgICAgY29uc3QgcGxheUFnYWluQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgICAgICcubW9kYWwtY29udGVudCA+IGJ1dHRvbidcbiAgICAgICAgKVxuXG4gICAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snXG4gICAgICAgIHBsYXlBZ2FpbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpXG4gICAgICAgIH0pXG5cbiAgICAgICAgbW9kYWxXaW5uZXIudGV4dENvbnRlbnQgPSAnWW91IGxvc2UhJ1xuICAgIH1cbiAgICBpZiAoZW5lbXlCb2FyZC5jaGVja0lmQWxsU2hpcHNIYXZlU3VuaygpKSB7XG4gICAgICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsJylcbiAgICAgICAgY29uc3QgbW9kYWxXaW5uZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwtY29udGVudCA+IHAnKVxuICAgICAgICBjb25zdCBwbGF5QWdhaW5CdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAgICAgJy5tb2RhbC1jb250ZW50ID4gYnV0dG9uJ1xuICAgICAgICApXG5cbiAgICAgICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9ICdibG9jaydcbiAgICAgICAgbW9kYWxXaW5uZXIudGV4dENvbnRlbnQgPSAnWW91IHdpbiEnXG4gICAgICAgIHBsYXlBZ2FpbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpXG4gICAgICAgIH0pXG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRHJhZ0FuZERyb3BGbGVldChwbGF5ZXJCb2FyZCkge1xuICAgIHJlbmRlclNoaXBTZWxlY3QoMSwgMSlcbiAgICByZW5kZXJTaGlwU2VsZWN0KDIsIDIpXG4gICAgcmVuZGVyU2hpcFNlbGVjdCgzLCAzKVxuICAgIHJlbmRlclNoaXBTZWxlY3QoNCwgNClcblxuICAgIGZ1bmN0aW9uIHJlbmRlclNoaXBTZWxlY3QoaSwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5wbGF5ZXI6bnRoLWNoaWxkKDEpYClcbiAgICAgICAgY29uc3Qgc2hpcENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgICAgIHNoaXBDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnc2hpcC1jb250YWluZXInKVxuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoc2hpcENvbnRhaW5lcilcblxuICAgICAgICBjb25zdCBzaGlwSW5mbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpXG4gICAgICAgIHNoaXBJbmZvLmNsYXNzTGlzdC5hZGQoYGluZm8tJHtpfWApXG4gICAgICAgIHNoaXBJbmZvLnRleHRDb250ZW50ID0gXCIyeFwiXG4gICAgICAgIHNoaXBDb250YWluZXIuYXBwZW5kQ2hpbGQoc2hpcEluZm8pXG5cbiAgICAgICAgY29uc3Qgc2hpcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIilcbiAgICAgICAgc2hpcC5jbGFzc0xpc3QuYWRkKFwic2hpcFwiKVxuICAgICAgICBzaGlwLmNsYXNzTGlzdC5hZGQoYHNoaXAtJHtpfWApXG4gICAgICAgIHNoaXAuc2V0QXR0cmlidXRlKFwiZHJhZ2dhYmxlXCIsIFwidHJ1ZVwiKVxuICAgICAgICBzaGlwQ29udGFpbmVyLmFwcGVuZENoaWxkKHNoaXApXG5cbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBjZWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKVxuICAgICAgICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKFwiY2VsbFwiKVxuICAgICAgICAgICAgc2hpcC5hcHBlbmRDaGlsZChjZWxsKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZm9yKGxldCBpID0gMTsgaSA8IDU7IGkrKykgc2hpcERyYWcoYC5zaGlwLSR7aX1gLCBwbGF5ZXJCb2FyZClcbn1cblxuZXhwb3J0IGNvbnN0IGFkZExpc3RlbmVyc1RvRW5lbXlCb2FyZCA9IChcbiAgICBwbGF5ZXJCb2FyZCxcbiAgICBlbmVteUJvYXJkLFxuICAgIHBsYXllcixcbiAgICBlbmVteSxcbiAgICBwc1xuKSA9PiB7XG4gICAgY29uc3QgZW5lbXlCb2FyZEFyZWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdkaXYuZW5lbXktYm9hcmQnKVxuXG4gICAgZm9yIChsZXQgY29sdW1uID0gMDsgY29sdW1uIDwgMTA7IGNvbHVtbiArPSAxKSB7XG4gICAgICAgIGZvciAobGV0IHJvdyA9IDA7IHJvdyA8IDEwOyByb3cgKz0gMSkge1xuICAgICAgICAgICAgLy8gQ3JlZGl0aW5nIGZvcm11bGEgdG8gY2FsY3VsYXRlIG50aC1jaGlsZCB1c2luZyBuZXN0ZWQgbG9vcDogaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvODg3MjY2Mi9tYXRoLXRvLWRldGVybWluZS1pdGVtLWluZGV4LWJhc2VkLW9uLWNvbC1yb3ctc2VsZWN0aW9uLWluLWdyaWRcbiAgICAgICAgICAgIGNvbnN0IGNlbGwgPSBlbmVteUJvYXJkQXJlYS5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAgICAgICAgIGAuY2VsbDpudGgtY2hpbGQoJHtyb3cgKiAxMCArIGNvbHVtbiArIDF9KWBcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIGNlbGwuc2V0QXR0cmlidXRlKCdjb2x1bW4nLCBjb2x1bW4pXG4gICAgICAgICAgICBjZWxsLnNldEF0dHJpYnV0ZSgncm93Jywgcm93KVxuXG4gICAgICAgICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgICAgICAgJ2NsaWNrJyxcbiAgICAgICAgICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHBzLnB1Ymxpc2goJ2NsaWNrJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbixcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllckJvYXJkLFxuICAgICAgICAgICAgICAgICAgICAgICAgZW5lbXlCb2FyZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllcixcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZW15LFxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgeyBvbmNlOiB0cnVlIH1cbiAgICAgICAgICAgIClcbiAgICAgICAgfVxuICAgIH1cbn1cblxuY29uc3QgY2xlYXJCb2FyZERPTSA9ICgpID0+IHtcbiAgICBjb25zdCBjZWxscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wbGF5ZXItYm9hcmQgPiAuY2VsbCcpXG5cbiAgICBjZWxscy5mb3JFYWNoKGNlbGwgPT4ge1xuICAgICAgICBjZWxsLmNsYXNzTGlzdC5yZW1vdmUoJ3NoaXAnKVxuICAgICAgICBjZWxsLmNsYXNzTGlzdC5yZW1vdmUoJ2hpdCcpXG4gICAgICAgIGNlbGwuY2xhc3NMaXN0LnJlbW92ZSgnbWlzcycpXG4gICAgfSlcblxuXG5cbn1cblxuZXhwb3J0IGNvbnN0IHJhbmRvbWl6ZUxpc3RlbmVyID0gKGdhbWVCb2FyZCkgPT4ge1xuXG4gICAgZ2FtZUJvYXJkLmNsZWFyQm9hcmQoKVxuICAgIGNsZWFyQm9hcmRET00oKVxuXG4gICAgY29uc3QgcmFuZG9tUG9zc2liaWxpdHkgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA0KVxuICAgIHN3aXRjaChyYW5kb21Qb3NzaWJpbGl0eSl7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgZ2FtZUJvYXJkLnBsYWNlU2hpcCg5LCAxLCAndmVydGljYWwnLCBjcmVhdGVTaGlwKDUpKVxuICAgICAgICBnYW1lQm9hcmQucGxhY2VTaGlwKDAsIDMsICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCgzKSlcbiAgICAgICAgZ2FtZUJvYXJkLnBsYWNlU2hpcCgzLCA2LCAnaG9yaXpvbnRhbCcsIGNyZWF0ZVNoaXAoMikpXG4gICAgICAgIGdhbWVCb2FyZC5wbGFjZVNoaXAoNiwgNSwgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDMpKVxuICAgICAgICBnYW1lQm9hcmQucGxhY2VTaGlwKDMsIDksICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCg0KSlcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgIGdhbWVCb2FyZC5wbGFjZVNoaXAoMCwgMiwgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDUpKVxuICAgICAgICBnYW1lQm9hcmQucGxhY2VTaGlwKDQsIDUsICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCgzKSlcbiAgICAgICAgZ2FtZUJvYXJkLnBsYWNlU2hpcCg4LCA3LCAnaG9yaXpvbnRhbCcsIGNyZWF0ZVNoaXAoMikpXG4gICAgICAgIGdhbWVCb2FyZC5wbGFjZVNoaXAoNSwgOSwgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDMpKVxuICAgICAgICBnYW1lQm9hcmQucGxhY2VTaGlwKDYsIDMsICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCg0KSlcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgIGdhbWVCb2FyZC5wbGFjZVNoaXAoNSwgMSwgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDUpKVxuICAgICAgICBnYW1lQm9hcmQucGxhY2VTaGlwKDMsIDMsICd2ZXJ0aWNhbCcsIGNyZWF0ZVNoaXAoMykpXG4gICAgICAgIGdhbWVCb2FyZC5wbGFjZVNoaXAoMCwgMCwgJ3ZlcnRpY2FsJywgY3JlYXRlU2hpcCgyKSlcbiAgICAgICAgZ2FtZUJvYXJkLnBsYWNlU2hpcCg2LCA1LCAnaG9yaXpvbnRhbCcsIGNyZWF0ZVNoaXAoMykpXG4gICAgICAgIGdhbWVCb2FyZC5wbGFjZVNoaXAoNSwgOSwgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDQpKVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBnYW1lQm9hcmQucGxhY2VTaGlwKDAsIDAsICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCg1KSlcbiAgICAgICAgICAgIGdhbWVCb2FyZC5wbGFjZVNoaXAoMywgNCwgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDMpKVxuICAgICAgICAgICAgZ2FtZUJvYXJkLnBsYWNlU2hpcCg2LCA3LCAnaG9yaXpvbnRhbCcsIGNyZWF0ZVNoaXAoMikpXG4gICAgICAgICAgICBnYW1lQm9hcmQucGxhY2VTaGlwKDksIDEsICd2ZXJ0aWNhbCcsIGNyZWF0ZVNoaXAoMykpXG4gICAgICAgICAgICBnYW1lQm9hcmQucGxhY2VTaGlwKDUsIDksICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCg0KSlcbiAgICAgICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIHJlbmRlclBsYXllclNoaXBzKGdhbWVCb2FyZClcblxufVxuXG5leHBvcnQgY29uc3QgYXR0YWNrID0gKHtcbiAgICBjZWxsLFxuICAgIGNvbHVtbixcbiAgICByb3csXG4gICAgcGxheWVyQm9hcmQsXG4gICAgZW5lbXlCb2FyZCxcbiAgICBwbGF5ZXIsXG4gICAgZW5lbXksXG59KSA9PiB7XG4gICAgLy8gaHVtYW4gcGxheWVyIGF0dGFja2luZyBjb21wdXRlclxuICAgIGF0dGFja0VuZW15Q2VsbChjb2x1bW4sIHJvdywgZW5lbXlCb2FyZCwgcGxheWVyQm9hcmQsIHBsYXllciwgZW5lbXkpXG4gICAgLy8gY29tcHV0ZXIgYXR0YWNraW5nIGh1bWFuXG4gICAgLy8gY29uc3QgeyBlbGVtZW50Q29sdW1uLCBlbGVtZW50Um93IH0gPSBwbGF5ZXJCb2FyZC5tYWtlUmFuZG9tQ29vcmRpbmF0ZXMoKVxuICAgIC8vIHJlbmRlckF0dGFja1AyKHBsYXllciwgZW5lbXksIGVsZW1lbnRDb2x1bW4sIGVsZW1lbnRSb3csIHBsYXllckJvYXJkLCBlbmVteUJvYXJkKVxuICAgIC8vIGFpUGxheShmYWxzZSwgcGxheWVyLCBlbmVteSwgdW5kZWZpbmVkLCBwbGF5ZXJCb2FyZCwgZW5lbXlCb2FyZClcbn1cbiIsImltcG9ydCB7IGFkZExpc3RlbmVyc1RvRW5lbXlCb2FyZCwgcmVuZGVyUGxheWVyU2hpcHMscHViU3ViLCByYW5kb21pemVMaXN0ZW5lciwgYXR0YWNrLCBjcmVhdGVEcmFnQW5kRHJvcEZsZWV0fSBmcm9tICcuL2RvbSdcblxuaW1wb3J0IGNyZWF0ZUdhbWVCb2FyZCBmcm9tICcuL2dhbWVib2FyZC9nYW1lYm9hcmQnXG5pbXBvcnQgY3JlYXRlU2hpcCBmcm9tICcuL3NoaXAvc2hpcCdcbmltcG9ydCBjcmVhdGVQbGF5ZXIgZnJvbSAnLi9wbGF5ZXIvcGxheWVyJ1xuXG5jb25zdCBwbGF5ZXJCb2FyZCA9IGNyZWF0ZUdhbWVCb2FyZCgpXG5jb25zdCBlbmVteUJvYXJkID0gY3JlYXRlR2FtZUJvYXJkKClcbmNvbnN0IHBsYXllciA9IGNyZWF0ZVBsYXllcigpXG5jb25zdCBjb21wdXRlciA9IGNyZWF0ZVBsYXllcigpXG5cbmNvbnN0IHJhbmRvbWl6ZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbi5yYW5kb21pemUnKVxuXG5yYW5kb21pemVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG5cbiAgICByYW5kb21pemVMaXN0ZW5lcihlbmVteUJvYXJkKVxufSlcblxuY3JlYXRlRHJhZ0FuZERyb3BGbGVldChwbGF5ZXJCb2FyZClcblxuZW5lbXlCb2FyZC5wbGFjZVNoaXAoMCwgMCwgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDUpKVxuZW5lbXlCb2FyZC5wbGFjZVNoaXAoMywgNCwgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDMpKVxuZW5lbXlCb2FyZC5wbGFjZVNoaXAoNiwgNywgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDIpKVxuZW5lbXlCb2FyZC5wbGFjZVNoaXAoOSwgMSwgJ3ZlcnRpY2FsJywgY3JlYXRlU2hpcCgzKSlcbmVuZW15Qm9hcmQucGxhY2VTaGlwKDUsIDksICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCg0KSlcblxuY29uc3QgcHMgPSBwdWJTdWIoKVxuXG5hZGRMaXN0ZW5lcnNUb0VuZW15Qm9hcmQocGxheWVyQm9hcmQsIGVuZW15Qm9hcmQsIHBsYXllciwgY29tcHV0ZXIsIHBzKVxuXG5wcy5zdWJzY3JpYmUoJ2NsaWNrJywgYXR0YWNrKVxuXG5yZW5kZXJQbGF5ZXJTaGlwcyhwbGF5ZXJCb2FyZCkiXSwibmFtZXMiOlsiY3JlYXRlU2hpcCIsIm1vZHVsZSIsImV4cG9ydHMiLCJlbXB0eUNlbGwiLCJoYXNCZWVuSGl0IiwiaXNTaGlwIiwib2ZmTGltaXRzIiwiaXNTdGFydEFsbG93ZWQiLCJpbml0aWFsaXplQm9hcmQiLCJnYW1lQm9hcmQiLCJBcnJheSIsImZpbGwiLCJtYXAiLCJjb2x1bW4iLCJyb3ciLCJzaGlwcyIsImdldExvY2F0aW9uIiwic2V0TG9jYXRpb24iLCJzaGlwIiwiT2JqZWN0IiwiYXNzaWduIiwiY3JlYXRlT2ZmTGltaXRMb2NhdGlvbiIsInVuZGVmaW5lZCIsImxvY2F0aW9uIiwiYWRkT2ZmTGltaXRBcmVhRm9yU2hpcHMiLCJjaGVja0lmTG9jYXRpb25Jc0FTaGlwT3JPZmZMaW1pdHMiLCJkaXJlY3Rpb24iLCJzaGlwTGVuZ3RoIiwiaSIsInBsYWNlU2hpcCIsImdldExlbmd0aCIsImxlbmd0aCIsImNoZWNrSWZSb3dDb29yZGluYXRlSXNWYWxpZCIsInBvc2l0aW9uIiwiYWRkT2ZmTGltaXRBcmVhRm9yVmVydGljYWxseVBvc2l0aW9uZWRTaGlwIiwiY2hlY2tJZkNvbHVtbkNvb3JkaW5hdGVJc1ZhbGlkIiwiYWRkT2ZmTGltaXRBcmVhRm9ySG9yaXpvbnRhbGx5UG9zaXRpb25lZFNoaXAiLCJtYWtlUmFuZG9tQ29vcmRpbmF0ZXMiLCJyYW5kb21EaXJlY3Rpb24iLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJyYW5kb21Mb2NhdGlvbiIsImZsYXR0ZW5lZEdhbWVCb2FyZCIsImZsYXQiLCJmb3JFYWNoIiwiZWxlbWVudCIsImF2YWlsYWJpbGl0eSIsImF2YWlsYWJsZVNwYWNlcyIsImVsZW1lbnRDb2x1bW4iLCJlbGVtZW50Um93IiwicmFuZG9tU2hpcCIsInBvczEiLCJwb3MyIiwiZGlyIiwicm91bmQiLCJjbGVhckJvYXJkIiwiY2hlY2tJZk9mZkxpbWl0Wm9uZVdhc0NvcnJlY3RseUltcGxlbWVudGVkIiwiZmlsdGVyIiwicmVjZWl2ZUF0dGFjayIsImNoZWNrSWZBbGxTaGlwc0hhdmVTdW5rIiwiaGF2ZUFsbFNoaXBzU3VuayIsImoiLCJpc1N1bmsiLCJyYW5kb21seVBsYWNlU2hpcHMiLCJzaGlwRGV0YWlscyIsInJhbmRvbUNvbHVtbiIsInJhbmRvbVJvdyIsInB1c2giLCJyYW5kb21GbGVldCIsImdldCIsInNldCIsInZhbHVlIiwibmFtZSIsImdldE5hbWUiLCJhdHRhY2siLCJnZXRTdGF0dXMiLCJpbmNsdWRlcyIsImhpdCIsInJhbmRvbVBvcyIsInN0YXR1cyIsImV2ZXJ5IiwiZG9tVGFyZ2V0cyIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJuIiwiZ2V0dGVyIiwiX19lc01vZHVsZSIsImQiLCJhIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiYXR0YWNrRGlyZWN0aW9uIiwid2FzSGl0IiwibGFzdEhpdFBvcyIsImZpcnN0SGl0UG9zIiwic2Vjb25kSGl0UG9zIiwic3Vycm91bmRpbmdQb3MiLCJzZXRXYXNIaXQiLCJzdGF0IiwicmVnaXN0ZXJTdXJyb3VuZGluZ1BvcyIsImFpUGxheSIsInJlcGVhdCIsInAxIiwicDIiLCJwbGF5ZXJCb2FyZCIsImVuZW15Qm9hcmQiLCJwb3MiLCJyZW5kZXJBdHRhY2tQMiIsIm5ld1BvcyIsImF0dGFja1Rvd2FyZHMiLCJwb3AiLCJ0b3RhbEFtb3VudFNoaXBzIiwic2hpcERyYWciLCJzaGlwTmFtZSIsImFtb3VudExlZnQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJib2R5IiwiY2VsbHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY2hpbGQiLCJjaGlsZE5vZGVzIiwiZHJhZ1NlbGVjdGlvbiIsIm9mZnNldCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwidGFyZ2V0IiwicGFyZW50Tm9kZSIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImNoYW5nZURpciIsInJlbW92ZSIsInNwbGl0IiwicmVuZGVyUGxheWVyU2hpcHMiLCJmaXJzdENoaWxkIiwidGV4dENvbnRlbnQiLCJzdHlsZSIsImRpc3BsYXkiLCJwcmV2ZW50RGVmYXVsdCIsImFzeW5jIiwiY29uc29sZSIsImxvZyIsImFkZCIsImNoZWNrSWZHYW1lT3ZlciIsImRlbGF5IiwiZGVsYXlJbk1zIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwicGxheWVyQm9hcmRBcmVhIiwiY2VsbCIsInNldEF0dHJpYnV0ZSIsIm1vZGFsIiwibW9kYWxXaW5uZXIiLCJwbGF5QWdhaW5CdXR0b24iLCJyZWxvYWQiLCJjb21wdXRlciIsInJhbmRvbWl6ZUxpc3RlbmVyIiwicmVuZGVyU2hpcFNlbGVjdCIsImNvbnRhaW5lciIsInNoaXBDb250YWluZXIiLCJjcmVhdGVFbGVtZW50IiwiYXBwZW5kQ2hpbGQiLCJzaGlwSW5mbyIsImNyZWF0ZURyYWdBbmREcm9wRmxlZXQiLCJwcyIsInN1YnNjcmliZXJzIiwicHVibGlzaCIsImV2ZW50TmFtZSIsImRhdGEiLCJpc0FycmF5IiwiY2FsbGJhY2siLCJzdWJzY3JpYmUiLCJpbmRleCIsInVuc3Vic2NyaWJlIiwic3BsaWNlIiwicHViU3ViIiwicGxheWVyIiwiZW5lbXkiLCJlbmVteUJvYXJkQXJlYSIsIm9uY2UiLCJhZGRMaXN0ZW5lcnNUb0VuZW15Qm9hcmQiLCJoYW5kbGVBdHRhY2siLCJyZW5kZXJBdHRhY2tzIiwiYXR0YWNrRW5lbXlDZWxsIl0sInNvdXJjZVJvb3QiOiIifQ==