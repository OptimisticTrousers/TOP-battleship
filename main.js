(()=>{var t={653:(t,e,r)=>{const o=r(585),i=()=>{const t={hasBeenHit:!1,isShip:!1,offLimits:!1},e=Array(10).fill(JSON.parse(JSON.stringify(t))).map((()=>Array(10).fill(JSON.parse(JSON.stringify(t))))),r=[o(5,"Carrier"),o(4,"Battleship"),o(3,"Destroyer"),o(3,"Submarine"),o(2,"Patrol Boat")],i=(t,r)=>e?.[t]?.[r],n=(t,r,o)=>{e[t][r]=o},a=(t,r,o,a)=>{const s=a.getLength();if("vertical"===o){if(r+s<=10){for(let e=0;e<s;e+=1)n(t,r+e,a);return((t,e,r)=>{i(t,e+r)})(t,r,s),console.log(e),!0}}else if("horizontal"===o&&t+s<=10){for(let e=0;e<s;e+=1)n(t+e,r,a);return!0}return!1},s=()=>{const t=0===Math.floor(2*Math.random())?"vertical":"horizontal";return{randomColumn:Math.floor(10*Math.random()),randomRow:Math.floor(10*Math.random()),randomDirection:t}};return{getLocation:i,receiveAttack:(t,r)=>{e[t][r].hasBeenHit=!0},checkIfAllShipsHaveSunk:()=>e.flat().every((t=>!1===t.isShip||!0===t.isShip&&!0===t.hasBeenHit&&t.getStatus().every((t=>"hit"===t)))),placeShip:a,randomlyPlaceShips:()=>{const t=[];for(let e=0;e<r.length;e+=1){const{randomColumn:o,randomRow:n,randomDirection:l}=s(),c=r[e],h=i(o,n);!0===h.isShip||!0===h.offLimits||!1===a(o,n,l,c)?e-=1:t.push({randomColumn:o,randomRow:n,randomDirection:l})}return t}}};i().placeShip(0,1,"vertical",o(3,"bobs ship")),t.exports=i},585:t=>{t.exports=(t,e="ship")=>{const r=Array(t).fill("unhit");return{name:e,getLength:()=>r.length,isSunk:()=>r.every((t=>"hit"===t)),hit:e=>{e<t&&(r[e]="hit")},getStatus:()=>r,isShip:!0}}}},e={};function r(o){var i=e[o];if(void 0!==i)return i.exports;var n=e[o]={exports:{}};return t[o](n,n.exports,r),n.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var o in e)r.o(e,o)&&!r.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";var t=r(653);const e=r.n(t)()();e.randomlyPlaceShips(),(({getLocation:t})=>{const e=document.querySelector("div.player-board");for(let r=0;r<10;r+=1)for(let o=0;o<10;o+=1){const i=document.createElement("div");i.classList.add("cell"),t(o,r).isShip&&i.classList.add("ship"),e.appendChild(i)}})(e)})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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VUFBVUMsSUFBSSxRQUV2Qk4sRUFBZ0JPLFlBQVk5QyxLREp4QyxDQUFrQnNDLEkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC8uL3NyYy9nYW1lYm9hcmQvZ2FtZWJvYXJkLmpzIiwid2VicGFjazovL3RvcC1iYXR0bGVzaGlwLy4vc3JjL3NoaXAvc2hpcC5qcyIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC8uL3NyYy9kb20uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLWV4cHJlc3Npb25zICovXG5jb25zdCBjcmVhdGVTaGlwID0gcmVxdWlyZSgnLi4vc2hpcC9zaGlwJylcblxuLyogZXNsaW50LWRpc2FibGUgbm8tcGFyYW0tcmVhc3NpZ24gKi9cbmNvbnN0IGNyZWF0ZUdhbWVCb2FyZCA9ICgpID0+IHtcbiAgICBjb25zdCBlbXB0eUNlbGwgPSB7IGhhc0JlZW5IaXQ6IGZhbHNlLCBpc1NoaXA6IGZhbHNlLCBvZmZMaW1pdHM6IGZhbHNlIH1cbiAgICBjb25zdCBnYW1lQm9hcmQgPSBBcnJheSgxMClcbiAgICAgICAgLmZpbGwoSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlbXB0eUNlbGwpKSlcbiAgICAgICAgLm1hcCgoKSA9PiBBcnJheSgxMCkuZmlsbChKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGVtcHR5Q2VsbCkpKSlcblxuICAgIGNvbnN0IHNoaXBzID0gW1xuICAgICAgICBjcmVhdGVTaGlwKDUsICdDYXJyaWVyJyksXG4gICAgICAgIGNyZWF0ZVNoaXAoNCwgJ0JhdHRsZXNoaXAnKSxcbiAgICAgICAgY3JlYXRlU2hpcCgzLCAnRGVzdHJveWVyJyksXG4gICAgICAgIGNyZWF0ZVNoaXAoMywgJ1N1Ym1hcmluZScpLFxuICAgICAgICBjcmVhdGVTaGlwKDIsICdQYXRyb2wgQm9hdCcpLFxuICAgIF1cblxuICAgIGNvbnN0IGNoZWNrSWZBbGxTaGlwc0hhdmVTdW5rID0gKCkgPT5cbiAgICAgICAgZ2FtZUJvYXJkLmZsYXQoKS5ldmVyeShcbiAgICAgICAgICAgIChjZWxsKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGNlbGwuaXNTaGlwID09PSBmYWxzZSkgcmV0dXJuIHRydWVcbiAgICAgICAgICAgICAgICBpZiAoY2VsbC5pc1NoaXAgPT09IHRydWUgJiYgY2VsbC5oYXNCZWVuSGl0ID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjZWxsLmdldFN0YXR1cygpLmV2ZXJ5KCh1bml0KSA9PiB1bml0ID09PSAnaGl0JylcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIChwb3NpdGlvbi5pc1NoaXAgPT09IGZhbHNlKSB8fFxuICAgICAgICAgICAgLy8gKHBvc2l0aW9uLmlzU2hpcCA9PT0gdHJ1ZSAmJiBwb3NpdGlvbi5oYXNCZWVuSGl0ID09PSB0cnVlKVxuICAgICAgICApXG5cbiAgICBjb25zdCBnZXRMb2NhdGlvbiA9IChjb2x1bW4sIHJvdykgPT4gZ2FtZUJvYXJkPy5bY29sdW1uXT8uW3Jvd11cblxuICAgIGNvbnN0IHNldExvY2F0aW9uID0gKGNvbHVtbiwgcm93LCBzaGlwKSA9PiB7XG4gICAgICAgIGdhbWVCb2FyZFtjb2x1bW5dW3Jvd10gPSBzaGlwXG4gICAgfVxuXG4gICAgY29uc3QgYWRkT2ZmTGltaXRBcmVhRm9yU2hpcHMgPSAoY29sdW1uLCByb3csIHNoaXBMZW5ndGgpID0+IHtcbiAgICAgICAgY29uc3QgdG9wID0gZ2V0TG9jYXRpb24oY29sdW1uLCByb3cgLSAxKVxuICAgICAgICBjb25zdCBsZWZ0ID0gZ2V0TG9jYXRpb24oY29sdW1uIC0gMSwgcm93KVxuICAgICAgICBjb25zdCB0b3BSaWdodCA9IGdldExvY2F0aW9uKGNvbHVtbiArIDEsIHJvdyAtIDEpXG4gICAgICAgIGNvbnN0IHRvcExlZnQgPSBnZXRMb2NhdGlvbihjb2x1bW4gLSAxLCByb3cgLSAxKVxuICAgICAgICBjb25zdCBib3R0b21SaWdodCA9IGdldExvY2F0aW9uKGNvbHVtbiArIDEsIHJvdyArIHNoaXBMZW5ndGgpXG4gICAgICAgIGNvbnN0IGxlZnRSaWdodCA9IGdldExvY2F0aW9uKGNvbHVtbiAtIDEsIHJvdyArIHNoaXBMZW5ndGgpXG5cbiAgICAgICAgaWYgKHRvcCkge1xuICAgICAgICAgICAgdG9wLm9mZkxpbWl0cyA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBpZiAobGVmdCkge1xuICAgICAgICAgICAgbGVmdC5vZmZMaW1pdHMgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRvcFJpZ2h0KSB7XG4gICAgICAgICAgICB0b3BSaWdodC5vZmZMaW1pdHMgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRvcExlZnQpIHtcbiAgICAgICAgICAgIHRvcExlZnQub2ZmTGltaXRzID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGlmIChib3R0b21SaWdodCkge1xuICAgICAgICAgICAgYm90dG9tUmlnaHQub2ZmTGltaXRzID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGlmIChsZWZ0UmlnaHQpIHtcbiAgICAgICAgICAgIGxlZnRSaWdodC5vZmZMaW1pdHMgPSB0cnVlXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBhZGRPZmZMaW1pdEFyZWFGb3JIb3Jpem9udGFsbHlQb3NpdGlvbmVkU2hpcCA9IChcbiAgICAgICAgY29sdW1uLFxuICAgICAgICByb3csXG4gICAgICAgIHNoaXBMZW5ndGhcbiAgICApID0+IHtcbiAgICAgICAgLy9jb25zdCByaWdodCA9IGdldExvY2F0aW9uKGNvbHVtbiArIHNoaXBMZW5ndGgsIHJvdylcbiAgICAgICAgLy9hZGRPZmZMaW1pdEFyZWFGb3JTaGlwcyhjb2x1bW4sIHJvdywgc2hpcExlbmd0aClcblxuICAgICAgICAvL2lmIChyaWdodCkge1xuICAgICAgICAgICAgLy9yaWdodC5vZmZMaW1pdHMgPSB0cnVlXG4gICAgICAgIC8vfVxuICAgIH1cblxuICAgIGNvbnN0IGFkZE9mZkxpbWl0QXJlYUZvclZlcnRpY2FsbHlQb3NpdGlvbmVkU2hpcCA9IChcbiAgICAgICAgY29sdW1uLFxuICAgICAgICByb3csXG4gICAgICAgIHNoaXBMZW5ndGhcbiAgICApID0+IHtcbiAgICAgICAgY29uc3QgYm90dG9tID0gZ2V0TG9jYXRpb24oY29sdW1uLCByb3cgKyBzaGlwTGVuZ3RoKVxuXG4gICAgICAgIC8vYWRkT2ZmTGltaXRBcmVhRm9yU2hpcHMoY29sdW1uLCByb3csIHNoaXBMZW5ndGgpXG5cbiAgICAgICAgLy9pZiAoYm90dG9tKSB7XG4gICAgICAgICAgICAvL2JvdHRvbS5vZmZMaW1pdHMgPSB0cnVlXG4gICAgICAgIC8vfVxuICAgIH1cblxuICAgIGNvbnN0IHBsYWNlU2hpcCA9IChjb2x1bW4sIHJvdywgZGlyZWN0aW9uLCBzaGlwKSA9PiB7XG4gICAgICAgIGNvbnN0IHNoaXBMZW5ndGggPSBzaGlwLmdldExlbmd0aCgpXG4gICAgICAgIGlmIChkaXJlY3Rpb24gPT09ICd2ZXJ0aWNhbCcpIHtcbiAgICAgICAgICAgIGlmIChyb3cgKyBzaGlwTGVuZ3RoIDw9IDEwKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGlwTGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uLCByb3cgKyBpLCBzaGlwKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhZGRPZmZMaW1pdEFyZWFGb3JWZXJ0aWNhbGx5UG9zaXRpb25lZFNoaXAoXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbixcbiAgICAgICAgICAgICAgICAgICAgcm93LFxuICAgICAgICAgICAgICAgICAgICBzaGlwTGVuZ3RoXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGdhbWVCb2FyZClcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PT0gJ2hvcml6b250YWwnKSB7XG4gICAgICAgICAgICBpZiAoY29sdW1uICsgc2hpcExlbmd0aCA8PSAxMCkge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcExlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiArIGksIHJvdywgc2hpcClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYWRkT2ZmTGltaXRBcmVhRm9ySG9yaXpvbnRhbGx5UG9zaXRpb25lZFNoaXAoXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbixcbiAgICAgICAgICAgICAgICAgICAgcm93LFxuICAgICAgICAgICAgICAgICAgICBzaGlwTGVuZ3RoXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgY29uc3QgbWFrZVJhbmRvbUNvb3JkaW5hdGVzID0gKCkgPT4ge1xuICAgICAgICBjb25zdCByYW5kb21EaXJlY3Rpb24gPVxuICAgICAgICAgICAgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMikgPT09IDAgPyAndmVydGljYWwnIDogJ2hvcml6b250YWwnXG4gICAgICAgIGNvbnN0IHJhbmRvbUNvbHVtbiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKVxuICAgICAgICBjb25zdCByYW5kb21Sb3cgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMClcbiAgICAgICAgcmV0dXJuIHsgcmFuZG9tQ29sdW1uLCByYW5kb21Sb3csIHJhbmRvbURpcmVjdGlvbiB9XG4gICAgfVxuXG4gICAgY29uc3QgcmFuZG9tbHlQbGFjZVNoaXBzID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBzaGlwRGV0YWlscyA9IFtdXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcHMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgcmFuZG9tQ29sdW1uLCByYW5kb21Sb3csIHJhbmRvbURpcmVjdGlvbiB9ID1cbiAgICAgICAgICAgICAgICBtYWtlUmFuZG9tQ29vcmRpbmF0ZXMoKVxuICAgICAgICAgICAgY29uc3Qgc2hpcCA9IHNoaXBzW2ldXG4gICAgICAgICAgICBjb25zdCBsb2NhdGlvbiA9IGdldExvY2F0aW9uKHJhbmRvbUNvbHVtbiwgcmFuZG9tUm93KVxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGxvY2F0aW9uLmlzU2hpcCA9PT0gdHJ1ZSB8fFxuICAgICAgICAgICAgICAgIGxvY2F0aW9uLm9mZkxpbWl0cyA9PT0gdHJ1ZSB8fFxuICAgICAgICAgICAgICAgIHBsYWNlU2hpcChyYW5kb21Db2x1bW4sIHJhbmRvbVJvdywgcmFuZG9tRGlyZWN0aW9uLCBzaGlwKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgZmFsc2VcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGkgLT0gMVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzaGlwRGV0YWlscy5wdXNoKHsgcmFuZG9tQ29sdW1uLCByYW5kb21Sb3csIHJhbmRvbURpcmVjdGlvbiB9KVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzaGlwRGV0YWlsc1xuICAgIH1cblxuICAgIGNvbnN0IHJlY2VpdmVBdHRhY2sgPSAoY29sdW1uLCByb3cpID0+IHtcbiAgICAgICAgZ2FtZUJvYXJkW2NvbHVtbl1bcm93XS5oYXNCZWVuSGl0ID0gdHJ1ZVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIGdldExvY2F0aW9uLFxuICAgICAgICByZWNlaXZlQXR0YWNrLFxuICAgICAgICBjaGVja0lmQWxsU2hpcHNIYXZlU3VuayxcbiAgICAgICAgcGxhY2VTaGlwLFxuICAgICAgICByYW5kb21seVBsYWNlU2hpcHMsXG4gICAgfVxufVxuXG5jb25zdCBib2IgPSBjcmVhdGVHYW1lQm9hcmQoKVxuYm9iLnBsYWNlU2hpcCgwLCAxLCAndmVydGljYWwnLCBjcmVhdGVTaGlwKDMsICdib2JzIHNoaXAnKSlcblxubW9kdWxlLmV4cG9ydHMgPSBjcmVhdGVHYW1lQm9hcmRcbiIsImNvbnN0IGNyZWF0ZVNoaXAgPSAobGVuZ3RoLCBuYW1lID0gJ3NoaXAnKSA9PiB7XG5cbiAgICBjb25zdCBzdGF0dXMgPSBBcnJheShsZW5ndGgpLmZpbGwoJ3VuaGl0JylcblxuICAgIGNvbnN0IGdldExlbmd0aCA9ICgpID0+IHN0YXR1cy5sZW5ndGhcblxuICAgIGNvbnN0IGdldFN0YXR1cyA9ICgpID0+IHN0YXR1c1xuXG4gICAgY29uc3QgaGl0ID0gKHBvc2l0aW9uKSA9PiB7XG4gICAgICAgIGlmIChwb3NpdGlvbiA8IGxlbmd0aCkge1xuICAgICAgICAgICAgc3RhdHVzW3Bvc2l0aW9uXSA9ICdoaXQnXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBpc1N1bmsgPSAoKSA9PiBzdGF0dXMuZXZlcnkoKHBvc2l0aW9uKSA9PiBwb3NpdGlvbiA9PT0gJ2hpdCcpXG5cbiAgICByZXR1cm4ge1xuICAgICAgICBuYW1lLFxuICAgICAgICBnZXRMZW5ndGgsXG4gICAgICAgIGlzU3VuayxcbiAgICAgICAgaGl0LFxuICAgICAgICBnZXRTdGF0dXMsXG4gICAgICAgIGlzU2hpcDogdHJ1ZSxcbiAgICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY3JlYXRlU2hpcFxuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSAobW9kdWxlKSA9PiB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdCgpID0+IChtb2R1bGVbJ2RlZmF1bHQnXSkgOlxuXHRcdCgpID0+IChtb2R1bGUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsImltcG9ydCByZW5kZXJQbGF5ZXJCb2FyZCBmcm9tICcuL2RvbSdcbmltcG9ydCBjcmVhdGVHYW1lQm9hcmQgZnJvbSAnLi9nYW1lYm9hcmQvZ2FtZWJvYXJkJ1xuXG5jb25zdCBwbGF5ZXJCb2FyZCA9IGNyZWF0ZUdhbWVCb2FyZCgpXG5wbGF5ZXJCb2FyZC5yYW5kb21seVBsYWNlU2hpcHMoKVxuXG5yZW5kZXJQbGF5ZXJCb2FyZChwbGF5ZXJCb2FyZClcbiIsImNvbnN0IHJlbmRlclBsYXllckJvYXJkID0gKHsgZ2V0TG9jYXRpb24gfSkgPT4ge1xuICAgIGNvbnN0IHBsYXllckJvYXJkQXJlYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5wbGF5ZXItYm9hcmQnKVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSArPSAxKSB7XG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgMTA7IGogKz0gMSkge1xuICAgICAgICAgICAgY29uc3QgY2VsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoJ2NlbGwnKVxuICAgICAgICAgICAgaWYgKGdldExvY2F0aW9uKGosIGkpLmlzU2hpcCkge1xuICAgICAgICAgICAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZCgnc2hpcCcpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwbGF5ZXJCb2FyZEFyZWEuYXBwZW5kQ2hpbGQoY2VsbClcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgcmVuZGVyUGxheWVyQm9hcmRcbiJdLCJuYW1lcyI6WyJjcmVhdGVTaGlwIiwiY3JlYXRlR2FtZUJvYXJkIiwiZW1wdHlDZWxsIiwiaGFzQmVlbkhpdCIsImlzU2hpcCIsIm9mZkxpbWl0cyIsImdhbWVCb2FyZCIsIkFycmF5IiwiZmlsbCIsIkpTT04iLCJwYXJzZSIsInN0cmluZ2lmeSIsIm1hcCIsInNoaXBzIiwiZ2V0TG9jYXRpb24iLCJjb2x1bW4iLCJyb3ciLCJzZXRMb2NhdGlvbiIsInNoaXAiLCJwbGFjZVNoaXAiLCJkaXJlY3Rpb24iLCJzaGlwTGVuZ3RoIiwiZ2V0TGVuZ3RoIiwiaSIsImFkZE9mZkxpbWl0QXJlYUZvclZlcnRpY2FsbHlQb3NpdGlvbmVkU2hpcCIsImNvbnNvbGUiLCJsb2ciLCJtYWtlUmFuZG9tQ29vcmRpbmF0ZXMiLCJyYW5kb21EaXJlY3Rpb24iLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJyYW5kb21Db2x1bW4iLCJyYW5kb21Sb3ciLCJyZWNlaXZlQXR0YWNrIiwiY2hlY2tJZkFsbFNoaXBzSGF2ZVN1bmsiLCJmbGF0IiwiZXZlcnkiLCJjZWxsIiwiZ2V0U3RhdHVzIiwidW5pdCIsInJhbmRvbWx5UGxhY2VTaGlwcyIsInNoaXBEZXRhaWxzIiwibGVuZ3RoIiwibG9jYXRpb24iLCJwdXNoIiwibW9kdWxlIiwiZXhwb3J0cyIsIm5hbWUiLCJzdGF0dXMiLCJpc1N1bmsiLCJwb3NpdGlvbiIsImhpdCIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsIl9fd2VicGFja19tb2R1bGVzX18iLCJuIiwiZ2V0dGVyIiwiX19lc01vZHVsZSIsImQiLCJhIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwicGxheWVyQm9hcmQiLCJwbGF5ZXJCb2FyZEFyZWEiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJqIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImFwcGVuZENoaWxkIl0sInNvdXJjZVJvb3QiOiIifQ==