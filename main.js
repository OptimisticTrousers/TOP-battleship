(()=>{var t={653:(t,e,o)=>{const r=o(585);t.exports=()=>{const t={hasBeenHit:!1,isShip:!1,offLimits:!1},e=()=>{const e=Array(10).fill().map((()=>Array(10).fill()));for(let o=0;o<10;o++)for(let r=0;r<10;r++)e[o][r]={...t,column:o,row:r};return e};let o=e();const i=[r(5,"Carrier"),r(4,"Battleship"),r(3,"Destroyer"),r(3,"Submarine"),r(2,"Patrol Boat")],n=(t,e)=>o?.[t]?.[e],a=(e,r,i=(()=>Object.assign(t,{offLimits:!0}))())=>{if(void 0===o?.[e]?.[r])return!0;const n=o[e][r];return o[e][r]={...n,...i},!0},l=(t,e)=>{a(t-1,e-1),a(t,e-1)},c=(t,e,o,r)=>{if("vertical"===o)for(let o=0;o<r;o++){const r=n(t,e+o);if(r&&!0===r.isShip&&!0===r.offLimits)return!0}if("horizontal"===o)for(let o=0;o<r;o++){const r=n(t+o,e);if(r&&!0===r.isShip&&!0===r.offLimits)return!0}return!1},s=(t,e,r,i)=>{const s=i.getLength();if(c(n(t,e)))return!1;if("vertical"===r){if(((t,e)=>t>=0&&t+e-1<o.length)(e,s)){for(let o=0;o<s;o+=1)a(t,e+o,{...i,position:o}),a(t+1,e+o),a(t-1,e+o);return((t,e,o)=>{l(t,e),a(t,e+o),a(t+1,e+o),a(t-1,e+o),a(t+1,e-1)})(t,e,s),!0}}else if("horizontal"===r&&((t,e)=>t>=0&&t+e-1<o.length)(t,s)){for(let o=0;o<s;o+=1)a(t+o,e,{...i,position:o}),a(t+o,e+1),a(t+o,e-1);return((t,e,o)=>{l(t,e),a(t+o,e),a(t-1,e+1),a(t+o,e+1),a(t+o,e-1)})(t,e,s),!0}return!1},h=()=>{const t=0===Math.floor(2*Math.random())?"vertical":"horizontal",e=Math.floor(100*Math.random()),r=(()=>{const t=[...o.flat()];return t.forEach((t=>{!0===t.hasBeenHit?t.availability=!1:t.availability=!0})),t})()[e];return!1===r.availability?h():{elementColumn:r.column,elementRow:r.row,randomDirection:t}};let u=t=>{let e=Math.floor(10*Math.random()),o=Math.floor(10*Math.random()),i=Math.round(Math.random());return(0!==i||(i="horizontal",!1!==s(e,o,i,r(t))))&&(1!==i||(i="vertical",!1!==s(e,o,i,r(t))))&&void 0};return{clearBoard:()=>{o=e()},checkIfLocationIsAShipOrOffLimits:c,checkIfOffLimitZoneWasCorrectlyImplemented:t=>o.flat().filter((t=>!0===t.offLimits)).length===t+2,getLocation:n,receiveAttack:(t,e)=>{o[t][e].hasBeenHit=!0},checkIfAllShipsHaveSunk:()=>{let t=!0;for(let e=0;e<10;e++)for(let o=0;o<10;o++){const r=n(e,o);if(!1!==r.isShip&&r.isShip&&!1===r.isSunk()){t=!1;break}}return t},placeShip:s,randomlyPlaceShips:()=>{const t=[];for(let e=0;e<i.length;e+=1){const o=i[e],{randomColumn:r,randomRow:n,randomDirection:a}=h(o.getLength());s(r,n,a,o)?t.push({randomColumn:r,randomRow:n,randomDirection:a}):e-=1}return t},makeRandomCoordinates:h,randomFleet:()=>{o=e();for(let t=0;t<2;)!1!==u(1)&&t++;for(let t=0;t<2;)!1!==u(2)&&t++;for(let t=0;t<2;)!1!==u(3)&&t++;for(let t=0;t<2;)!1!==u(4)&&t++}}}},61:t=>{t.exports=(t="player")=>({getName:()=>t,attack:(t,e,{getLocation:o,receiveAttack:r})=>{const i=o(t,e);return!1===i.hasBeenHit||i.isShip&&!1===i.getStatus().includes("unhit")?(r(t,e),i.hit?(i.hit(i.position),"You hit a ship!"):"It's a hit!"):"You have already hit this spot!"},randomPos:()=>[Math.floor(10*Math.random()),Math.floor(10*Math.random())]})},585:t=>{t.exports=(t,e="ship")=>{const o=Array(t).fill("unhit");return{getName:()=>e,getLength:()=>o.length,isSunk:()=>o.every((t=>"hit"===t)),hit:e=>{e<t&&(o[e]="hit")},getStatus:()=>o,domTargets:[],hasBeenHit:!1,offLimits:!0,isShip:!0}}}},e={};function o(r){var i=e[r];if(void 0!==i)return i.exports;var n=e[r]={exports:{}};return t[r](n,n.exports,o),n.exports}o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},o.d=(t,e)=>{for(var r in e)o.o(e,r)&&!o.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";var t=o(653),e=o.n(t),r=o(585),i=o.n(r);let n,a=!1,l=!1,c=[],s=[],h=[],u=[];function p(t,e,o,r){a=t,void 0!==e&&(l=e),void 0!==o&&(c=[o,r]),0==s.length&&void 0!==o?s=[o,r]:0!==s.length&&0==h.length&&void 0!==o&&(h=[o,r])}function d(t,e){return u=[],0!==e&&u.push([t,e-1]),9!==e&&u.push([t,e+1]),0!==t&&u.push([t-1,e]),9!==t&&u.push([t+1,e]),u}function f(t,e,o,r,i,p){let f;if(!0===r&&(c=[],s=[],h=[],u=[],a=!1,l=!1,n=""),!l&&!a)return f=e.randomPos(),S(e,o,f[0],f[1],i,p);if(0!==h.length&&a&&!t){let t;if(s[0]==h[0]-1&&(t=m("down")),s[0]==h[0]+1&&(t=m("up")),s[1]==h[1]-1&&(t=m("right")),s[1]==h[1]+1&&(t=m("left")),t[0]>=0&&t[0]<=9&&t[1]>=0&&t[1]<=9)return S(e,o,t[0],t[1],i,p)}else if(0!==h.length&&l&&!a){let t;if(c=s,h=[],"up"===n&&(t=m("down")),"down"===n&&(t=m("up")),"right"===n&&(t=m("left")),"left"===n&&(t=m("right")),t[0]>=0&&t[0]<=9&&t[1]>=0&&t[1]<=9)return S(e,o,t[0],t[1],i,p)}else if(l){0==u.length&&d(c[0],c[1]),0==u.length&&1==l&&d(s[0],s[1]);const t=u.pop();return S(e,o,t[0],t[1],i,p)}}function m(t){return"left"===t?(n="left",[c[0],c[1]-1]):"right"===t?(n="right",[c[0],c[1]+1]):"down"===t?(n="down",[c[0]+1,c[1]]):"up"===t?(n="up",[c[0]-1,c[1]]):void 0}async function S(t,e,o,r,i,n){let a=!1;const l=document.querySelector(`.player-board > .cell[column='${o}'][row='${r}']`),c=e.attack(o,r,i);if(console.log(i.getLocation(o,r)),"You have already hit this spot!"===c&&f(!0,t,e,void 0,i,n),"It's a hit!"===c&&(p(!1),l.classList.add("miss")),"You hit a ship!"===c)return p(!0,!0,o,r),l.classList.add("hit"),i.getLocation(o,r).domTargets.push(l),i.getLocation(o,r).isSunk()&&(i.getLocation(o,r).domTargets.forEach((t=>t.classList.add("sunk"))),a=!0,!0===i.checkIfAllShipsHaveSunk())?v(i,n):(await y(1e3),f(!1,t,e,a,i,n))}function y(t){return new Promise((e=>{setTimeout((()=>{e(2)}),t)}))}const g=({getLocation:t})=>{const e=document.querySelector("div.player-board");for(let o=0;o<10;o+=1)for(let r=0;r<10;r+=1){const i=e.querySelector(`.cell:nth-child(${10*r+o+1})`);i.setAttribute("column",o),i.setAttribute("row",r);const n=t(o,r);n.isShip&&(i.classList.add("ship"),i.setAttribute("ship-name",n.getName()))}},v=(t,e)=>{if(t.checkIfAllShipsHaveSunk()){const t=document.querySelector(".modal"),e=document.querySelector(".modal-content > p"),o=document.querySelector(".modal-content > button");t.style.display="block",o.addEventListener("click",(()=>{location.reload()})),e.textContent="You lose!"}if(e.checkIfAllShipsHaveSunk()){const t=document.querySelector(".modal"),e=document.querySelector(".modal-content > p"),o=document.querySelector(".modal-content > button");t.style.display="block",e.textContent="You win!",o.addEventListener("click",(()=>{location.reload()}))}};var L=o(61),k=o.n(L);const b=e()(),z=e()(),w=k()(),A=k()();document.querySelector("button.randomize").addEventListener("click",(()=>{(t=>{switch(t.clearBoard(),document.querySelectorAll(".player-board > .cell").forEach((t=>{t.classList.remove("ship"),t.classList.remove("hit"),t.classList.remove("miss")})),Math.floor(4*Math.random())){case 0:t.placeShip(9,1,"vertical",i()(5)),t.placeShip(0,3,"horizontal",i()(3)),t.placeShip(3,6,"horizontal",i()(2)),t.placeShip(6,5,"horizontal",i()(3)),t.placeShip(3,9,"horizontal",i()(4));break;case 1:t.placeShip(0,2,"horizontal",i()(5)),t.placeShip(4,5,"horizontal",i()(3)),t.placeShip(8,7,"horizontal",i()(2)),t.placeShip(5,9,"horizontal",i()(3)),t.placeShip(6,3,"horizontal",i()(4));break;case 2:t.placeShip(5,1,"horizontal",i()(5)),t.placeShip(3,3,"vertical",i()(3)),t.placeShip(0,0,"vertical",i()(2)),t.placeShip(6,5,"horizontal",i()(3)),t.placeShip(5,9,"horizontal",i()(4));break;default:t.placeShip(0,0,"horizontal",i()(5)),t.placeShip(3,4,"horizontal",i()(3)),t.placeShip(6,7,"horizontal",i()(2)),t.placeShip(9,1,"vertical",i()(3)),t.placeShip(5,9,"horizontal",i()(4))}g(t)})(z)})),z.placeShip(0,0,"horizontal",i()(5)),z.placeShip(3,4,"horizontal",i()(3)),z.placeShip(6,7,"horizontal",i()(2)),z.placeShip(9,1,"vertical",i()(3)),z.placeShip(5,9,"horizontal",i()(4));const M=(()=>{const t={};return{publish:function(e,o){Array.isArray(t[e])&&t[e].forEach((t=>{t(o)}))},subscribe:function e(o,r){Array.isArray(e[o])||(t[o]=[]),t[o].push(r);const i=t[o].length-1;return{unsubscribe(){t[o].splice(i,1)}}}}})();((t,e,o,r,i)=>{const n=document.querySelector("div.enemy-board");for(let a=0;a<10;a+=1)for(let l=0;l<10;l+=1){const c=n.querySelector(`.cell:nth-child(${10*l+a+1})`);c.setAttribute("column",a),c.setAttribute("row",l),c.addEventListener("click",(()=>{i.publish("click",{cell:c,column:a,row:l,playerBoard:t,enemyBoard:e,player:o,enemy:r})}),{once:!0})}})(b,z,w,A,M),M.subscribe("click",(({cell:t,column:e,row:o,playerBoard:r,enemyBoard:i,player:n,enemy:a})=>{(async(t,e,o,r,i,n)=>{((t,e,o,r)=>{r.attack(t,e,o)})(t,e,o,i),((t,e,o,r)=>{const i=document.querySelector(`.enemy-board > .cell[column='${e}'][row='${o}']`);r.getLocation(e,o)?.isShip&&(r.getLocation(e,o).domTargets.push(i),r.getLocation(e,o).isSunk()&&r.getLocation(e,o).domTargets.forEach((t=>t.classList.add("sunk")))),r.getLocation(e,o).isShip?i.classList.add("hit"):i.classList.add("miss")})(0,t,e,o),await y(700),o.checkIfAllShipsHaveSunk()?v(r,o):f(!1,i,n,void 0,r,o)})(e,o,i,r,n,a)})),g(b)})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoiMkJBR0EsTUFBTUEsRUFBYSxFQUFRLEtBdVQzQkMsRUFBT0MsUUFwVGlCLEtBQ3BCLE1BQU1DLEVBQVksQ0FBRUMsWUFBWSxFQUFPQyxRQUFRLEVBQU9DLFdBQVcsR0FFM0RDLEVBQWtCLEtBQ3BCLE1BQU1DLEVBQVlDLE1BQU0sSUFBSUMsT0FBT0MsS0FBSSxJQUFNRixNQUFNLElBQUlDLFNBQ3ZELElBQUksSUFBSUUsRUFBUSxFQUFHQSxFQUFTLEdBQUlBLElBQzVCLElBQUksSUFBSUMsRUFBSyxFQUFHQSxFQUFNLEdBQUlBLElBQ3RCTCxFQUFVSSxHQUFRQyxHQUFPLElBQUlWLEVBQVdTLFNBQVFDLE9BR3hELE9BQU9MLEdBSVgsSUFBSUEsRUFBWUQsSUFFaEIsTUFBTU8sRUFBUSxDQUNWZCxFQUFXLEVBQUcsV0FDZEEsRUFBVyxFQUFHLGNBQ2RBLEVBQVcsRUFBRyxhQUNkQSxFQUFXLEVBQUcsYUFDZEEsRUFBVyxFQUFHLGdCQU9aZSxFQUFjLENBQUNILEVBQVFDLElBQVFMLElBQVlJLEtBQVVDLEdBRXJERyxFQUFjLENBQUNKLEVBQVFDLEVBQUtJLEVBTEgsS0FDM0JDLE9BQU9DLE9BQU9oQixFQUFXLENBQUVHLFdBQVcsSUFJRGMsTUFDckMsUUFBbUNDLElBQS9CYixJQUFZSSxLQUFVQyxHQUFvQixPQUFPLEVBQ3JELE1BQU1TLEVBQVdkLEVBQVVJLEdBQVFDLEdBR25DLE9BREFMLEVBQVVJLEdBQVFDLEdBQU8sSUFBSVMsS0FBYUwsSUFDbkMsR0FrQkxNLEVBQTBCLENBQUNYLEVBQVFDLEtBRXJDRyxFQUFZSixFQUFTLEVBQUdDLEVBQU0sR0FFOUJHLEVBQVlKLEVBQVFDLEVBQU0sSUE4Q3hCVyxFQUFvQyxDQUN0Q1osRUFDQUMsRUFDQVksRUFDQUMsS0FFQSxHQUFrQixhQUFkRCxFQUNBLElBQUssSUFBSUUsRUFBSSxFQUFHQSxFQUFJRCxFQUFZQyxJQUFLLENBQ2pDLE1BQU1MLEVBQVdQLEVBQVlILEVBQVFDLEVBQU1jLEdBQzNDLEdBQUlMLElBRXdCLElBQXBCQSxFQUFTakIsU0FDYyxJQUF2QmlCLEVBQVNoQixVQUVULE9BQU8sRUFNdkIsR0FBa0IsZUFBZG1CLEVBQ0EsSUFBSyxJQUFJRSxFQUFJLEVBQUdBLEVBQUlELEVBQVlDLElBQUssQ0FDakMsTUFBTUwsRUFBV1AsRUFBWUgsRUFBU2UsRUFBR2QsR0FDekMsR0FBSVMsSUFFd0IsSUFBcEJBLEVBQVNqQixTQUNjLElBQXZCaUIsRUFBU2hCLFVBRVQsT0FBTyxFQU12QixPQUFPLEdBb0JUc0IsRUFBWSxDQUFDaEIsRUFBUUMsRUFBS1ksRUFBV1IsS0FDbkMsTUFBTVMsRUFBYVQsRUFBS1ksWUFDeEIsR0FBSUwsRUFBa0NULEVBQVlILEVBQVFDLElBQ3RELE9BQU8sRUFDWCxHQUFrQixhQUFkWSxHQUNBLEdBL0Q0QixFQUFDWixFQUFLYSxJQUN0Q2IsR0FBTyxHQUFLQSxFQUFNYSxFQUFhLEVBQUlsQixFQUFVc0IsT0E4RHJDQyxDQUE0QmxCLEVBQUthLEdBQWEsQ0FDOUMsSUFBSyxJQUFJQyxFQUFJLEVBQUdBLEVBQUlELEVBQVlDLEdBQUssRUFDakNYLEVBQVlKLEVBQVFDLEVBQU1jLEVBQUcsSUFBSVYsRUFBTWUsU0FBVUwsSUFDakRYLEVBQVlKLEVBQVMsRUFBR0MsRUFBTWMsR0FDOUJYLEVBQVlKLEVBQVMsRUFBR0MsRUFBTWMsR0FPbEMsTUEvRnVDLEVBQy9DZixFQUNBQyxFQUNBYSxLQUlBSCxFQUF3QlgsRUFBUUMsR0FFaENHLEVBQVlKLEVBQVFDLEVBQU1hLEdBRTFCVixFQUFZSixFQUFTLEVBQUdDLEVBQU1hLEdBRTlCVixFQUFZSixFQUFTLEVBQUdDLEVBQU1hLEdBRTlCVixFQUFZSixFQUFTLEVBQUdDLEVBQU0sSUEyRXRCb0IsQ0FDSXJCLEVBQ0FDLEVBQ0FhLElBRUcsUUFFUixHQUFrQixlQUFkRCxHQS9Fd0IsRUFBQ2IsRUFBUWMsSUFDNUNkLEdBQVUsR0FBS0EsRUFBU2MsRUFBYSxFQUFJbEIsRUFBVXNCLE9BK0UzQ0ksQ0FBK0J0QixFQUFRYyxHQUFhLENBQ3BELElBQUssSUFBSUMsRUFBSSxFQUFHQSxFQUFJRCxFQUFZQyxHQUFLLEVBQ2pDWCxFQUFZSixFQUFTZSxFQUFJZCxFQUFLLElBQUlJLEVBQU1lLFNBQVVMLElBRWxEWCxFQUFZSixFQUFTZSxFQUFHZCxFQUFNLEdBQzlCRyxFQUFZSixFQUFTZSxFQUFHZCxFQUFNLEdBT2xDLE1BaEl5QyxFQUNqREQsRUFDQUMsRUFDQWEsS0FJQUgsRUFBd0JYLEVBQVFDLEdBRWhDRyxFQUFZSixFQUFTYyxFQUFZYixHQUVqQ0csRUFBWUosRUFBUyxFQUFHQyxFQUFNLEdBRTlCRyxFQUFZSixFQUFTYyxFQUFZYixFQUFNLEdBRXZDRyxFQUFZSixFQUFTYyxFQUFZYixFQUFNLElBNEcvQnNCLENBQ0l2QixFQUNBQyxFQUNBYSxJQUVHLEVBR2YsT0FBTyxHQWtCTFUsRUFBd0IsS0FDMUIsTUFBTUMsRUFDZ0MsSUFBbENDLEtBQUtDLE1BQXNCLEVBQWhCRCxLQUFLRSxVQUFzQixXQUFhLGFBQ2pEQyxFQUFpQkgsS0FBS0MsTUFBc0IsSUFBaEJELEtBQUtFLFVBR2pDbEIsRUF0QmtCLE1BRXhCLE1BQU1vQixFQUFxQixJQUFJbEMsRUFBVW1DLFFBV3JDLE9BVEFELEVBQW1CRSxTQUFTQyxLQUNFLElBQXZCQSxFQUFRekMsV0FDUHlDLEVBQVFDLGNBQWUsRUFHdkJELEVBQVFDLGNBQWMsS0FJdkJKLEdBT2dCSyxHQUVTTixHQUVwQyxPQUE2QixJQUExQm5CLEVBQVN3QixhQUNEVixJQU9KLENBQUVZLGNBSmExQixFQUFTVixPQUlQcUMsV0FITDNCLEVBQVNULElBR1F3QixvQkFJMUMsSUFBSWEsRUFBY3BCLElBQ2hCLElBQUlxQixFQUFPYixLQUFLQyxNQUFzQixHQUFoQkQsS0FBS0UsVUFDdkJZLEVBQU9kLEtBQUtDLE1BQXNCLEdBQWhCRCxLQUFLRSxVQUN2QmEsRUFBTWYsS0FBS2dCLE1BQU1oQixLQUFLRSxVQUUxQixPQUFZLElBQVJhLElBQ0ZBLEVBQU0sY0FDaUQsSUFBbkR6QixFQUFVdUIsRUFBTUMsRUFBTUMsRUFBS3JELEVBQVc4QixRQUdoQyxJQUFSdUIsSUFDRkEsRUFBTSxZQUNpRCxJQUFuRHpCLEVBQVV1QixFQUFNQyxFQUFNQyxFQUFLckQsRUFBVzhCLFlBRjVDLEdBd0RBLE1BQU8sQ0FDSHlCLFdBTGdCLEtBQ2hCL0MsRUFBWUQsS0FLWmlCLG9DQUNBZ0MsMkNBYmdEOUIsR0FDaERsQixFQUFVbUMsT0FBT2MsUUFBUVosSUFBa0MsSUFBdEJBLEVBQVF2QyxZQUN4Q3dCLFNBQ0xKLEVBQWEsRUFXYlgsY0FDQTJDLGNBbkJrQixDQUFDOUMsRUFBUUMsS0FDM0JMLEVBQVVJLEdBQVFDLEdBQUtULFlBQWEsR0FtQnBDdUQsd0JBeFE0QixLQUU1QixJQUFJQyxHQUFrQixFQUMxQixJQUFLLElBQUlqQyxFQUFJLEVBQUdBLEVBQUksR0FBSUEsSUFDdEIsSUFBSyxJQUFJa0MsRUFBSSxFQUFHQSxFQUFJLEdBQUlBLElBQUssQ0FDM0IsTUFBTXZDLEVBQVdQLEVBQVlZLEVBQUdrQyxHQUNoQyxJQUF1QixJQUFwQnZDLEVBQVNqQixRQUNUaUIsRUFBU2pCLFNBQWdDLElBQXRCaUIsRUFBU3dDLFNBQW1CLENBQy9DRixHQUFtQixFQUNuQixPQUlQLE9BQU9BLEdBNFBIaEMsWUFDQW1DLG1CQXJDdUIsS0FDdkIsTUFBTUMsRUFBYyxHQUNwQixJQUFLLElBQUlyQyxFQUFJLEVBQUdBLEVBQUliLEVBQU1nQixPQUFRSCxHQUFLLEVBQUcsQ0FDdEMsTUFBTVYsRUFBT0gsRUFBTWEsSUFDYixhQUFFc0MsRUFBWSxVQUFFQyxFQUFTLGdCQUFFN0IsR0FDN0JELEVBQXNCbkIsRUFBS1ksYUFDM0JELEVBQVVxQyxFQUFjQyxFQUFXN0IsRUFBaUJwQixHQUNwRCtDLEVBQVlHLEtBQUssQ0FBRUYsZUFBY0MsWUFBVzdCLG9CQUU1Q1YsR0FBSyxFQUdiLE9BQU9xQyxHQTBCUDVCLHdCQUNBZ0MsWUE1RGMsS0FDZDVELEVBQVlELElBQ1osSUFBSSxJQUFJb0IsRUFBSSxFQUFHQSxFQUFJLElBQ00sSUFBbEJ1QixFQUFXLElBQ2R2QixJQUdKLElBQUksSUFBSUEsRUFBSSxFQUFHQSxFQUFJLElBQ00sSUFBbEJ1QixFQUFXLElBQ2R2QixJQUVKLElBQUksSUFBSUEsRUFBSSxFQUFHQSxFQUFJLElBQ00sSUFBbEJ1QixFQUFXLElBQ2R2QixJQUVKLElBQUksSUFBSUEsRUFBSSxFQUFHQSxFQUFJLElBQ00sSUFBbEJ1QixFQUFXLElBQ2R2QixRLE9DN09aMUIsRUFBT0MsUUEvQmMsQ0FBQ21FLEVBQU8sWUF3QmxCLENBQ0hDLFFBeEJZLElBQU1ELEVBeUJsQkUsT0F2QlcsQ0FBQzNELEVBQVFDLEdBQU9FLGNBQWEyQyxvQkFDeEMsTUFBTXBDLEVBQVdQLEVBQVlILEVBQVFDLEdBQ3JDLE9BQTRCLElBQXhCUyxFQUFTbEIsWUFBeUJrQixFQUFTakIsU0FBcUQsSUFBM0NpQixFQUFTa0QsWUFBWUMsU0FBUyxVQUNuRmYsRUFBYzlDLEVBQVFDLEdBQ25CUyxFQUFTb0QsS0FFUnBELEVBQVNvRCxJQUFJcEQsRUFBU1UsVUFDZixtQkFFSixlQUdKLG1DQVlQMkMsVUFUYyxJQUdYLENBRklyQyxLQUFLQyxNQUFzQixHQUFoQkQsS0FBS0UsVUFDaEJGLEtBQUtDLE1BQXNCLEdBQWhCRCxLQUFLRSxjLFFDYS9CdkMsRUFBT0MsUUFqQ1ksQ0FBQzRCLEVBQVF1QyxFQUFPLFVBSS9CLE1BQU1PLEVBQVNuRSxNQUFNcUIsR0FBUXBCLEtBQUssU0FnQmxDLE1BQU8sQ0FDSDRELFFBTFksSUFBT0QsRUFNbkJ4QyxVQWhCYyxJQUFNK0MsRUFBTzlDLE9BaUIzQmdDLE9BTFcsSUFBTWMsRUFBT0MsT0FBTzdDLEdBQTBCLFFBQWJBLElBTTVDMEMsSUFkUzFDLElBQ0xBLEVBQVdGLElBQ1g4QyxFQUFPNUMsR0FBWSxRQWF2QndDLFVBakJjLElBQU1JLEVBa0JwQkUsV0F4QmEsR0F5QmIxRSxZQUFZLEVBQ1pFLFdBQVcsRUFDWEQsUUFBUSxNQzVCWjBFLEVBQTJCLEdBRy9CLFNBQVNDLEVBQW9CQyxHQUU1QixJQUFJQyxFQUFlSCxFQUF5QkUsR0FDNUMsUUFBcUI1RCxJQUFqQjZELEVBQ0gsT0FBT0EsRUFBYWhGLFFBR3JCLElBQUlELEVBQVM4RSxFQUF5QkUsR0FBWSxDQUdqRC9FLFFBQVMsSUFPVixPQUhBaUYsRUFBb0JGLEdBQVVoRixFQUFRQSxFQUFPQyxRQUFTOEUsR0FHL0MvRSxFQUFPQyxRQ3BCZjhFLEVBQW9CSSxFQUFLbkYsSUFDeEIsSUFBSW9GLEVBQVNwRixHQUFVQSxFQUFPcUYsV0FDN0IsSUFBT3JGLEVBQWlCLFFBQ3hCLElBQU0sRUFFUCxPQURBK0UsRUFBb0JPLEVBQUVGLEVBQVEsQ0FBRUcsRUFBR0gsSUFDNUJBLEdDTFJMLEVBQW9CTyxFQUFJLENBQUNyRixFQUFTdUYsS0FDakMsSUFBSSxJQUFJQyxLQUFPRCxFQUNYVCxFQUFvQlcsRUFBRUYsRUFBWUMsS0FBU1YsRUFBb0JXLEVBQUV6RixFQUFTd0YsSUFDNUV4RSxPQUFPMEUsZUFBZTFGLEVBQVN3RixFQUFLLENBQUVHLFlBQVksRUFBTUMsSUFBS0wsRUFBV0MsTUNKM0VWLEVBQW9CVyxFQUFJLENBQUNJLEVBQUtDLElBQVU5RSxPQUFPK0UsVUFBVUMsZUFBZUMsS0FBS0osRUFBS0MsRywyRENHbEYsSUFNSUksRUFOQUMsR0FBUyxFQUNULEdBQVMsRUFDVEMsRUFBYSxHQUNiQyxFQUFjLEdBQ2RDLEVBQWUsR0FDZkMsRUFBaUIsR0FHckIsU0FBU0MsRUFBVUMsRUFBT0MsRUFBTXpELEVBQU1DLEdBQ3BDaUQsRUFBU00sT0FDSXRGLElBQVR1RixJQUFvQixFQUFTQSxRQUNwQnZGLElBQVQ4QixJQUFvQm1ELEVBQWEsQ0FBQ25ELEVBQU1DLElBQ2xCLEdBQXRCbUQsRUFBWXpFLGFBQXdCVCxJQUFUOEIsRUFBb0JvRCxFQUFjLENBQUNwRCxFQUFNQyxHQUUvQyxJQUF2Qm1ELEVBQVl6RSxRQUNXLEdBQXZCMEUsRUFBYTFFLGFBQ0pULElBQVQ4QixJQUVBcUQsRUFBZSxDQUFDckQsRUFBTUMsSUFNMUIsU0FBU3lELEVBQXVCMUQsRUFBTUMsR0FNcEMsT0FMQXFELEVBQWlCLEdBQ0osSUFBVHJELEdBQVlxRCxFQUFldEMsS0FBSyxDQUFDaEIsRUFBTUMsRUFBTyxJQUNyQyxJQUFUQSxHQUFZcUQsRUFBZXRDLEtBQUssQ0FBQ2hCLEVBQU1DLEVBQU8sSUFDckMsSUFBVEQsR0FBWXNELEVBQWV0QyxLQUFLLENBQUNoQixFQUFPLEVBQUdDLElBQ2xDLElBQVRELEdBQVlzRCxFQUFldEMsS0FBSyxDQUFDaEIsRUFBTyxFQUFHQyxJQUN4Q3FELEVBR1QsU0FBU0ssRUFBT0MsRUFBUUMsRUFBSUMsRUFBSW5ELEVBQVFvRCxFQUFhQyxHQUNuRCxJQUFJQyxFQVVKLElBVGUsSUFBWHRELElBQ0Z3QyxFQUFhLEdBQ2JDLEVBQWMsR0FDZEMsRUFBZSxHQUNmQyxFQUFpQixHQUNqQkosR0FBUyxFQUNULEdBQVMsRUFDVEQsRUFBa0IsS0FFZixJQUFXQyxFQUdkLE9BRkFlLEVBQU1KLEVBQUdyQyxZQUVGMEMsRUFBZUwsRUFBSUMsRUFBSUcsRUFBSSxHQUFJQSxFQUFJLEdBQUlGLEVBQWFDLEdBQ3RELEdBQTRCLElBQXhCWCxFQUFhMUUsUUFBZ0J1RSxJQUFXVSxFQUFRLENBQ3pELElBQUlPLEVBS0osR0FKSWYsRUFBWSxJQUFNQyxFQUFhLEdBQUssSUFBR2MsRUFBU0MsRUFBYyxTQUM5RGhCLEVBQVksSUFBTUMsRUFBYSxHQUFLLElBQUdjLEVBQVNDLEVBQWMsT0FDOURoQixFQUFZLElBQU1DLEVBQWEsR0FBSyxJQUFHYyxFQUFTQyxFQUFjLFVBQzlEaEIsRUFBWSxJQUFNQyxFQUFhLEdBQUssSUFBR2MsRUFBU0MsRUFBYyxTQUM5REQsRUFBTyxJQUFNLEdBQUtBLEVBQU8sSUFBTSxHQUFLQSxFQUFPLElBQU0sR0FBS0EsRUFBTyxJQUFNLEVBQ3JFLE9BQU9ELEVBQWVMLEVBQUlDLEVBQUlLLEVBQU8sR0FBSUEsRUFBTyxHQUFJSixFQUFhQyxRQUM5RCxHQUE0QixJQUF4QlgsRUFBYTFFLFFBQWdCLElBQVd1RSxFQUFRLENBR3pELElBQUlpQixFQUtKLEdBUEFoQixFQUFhQyxFQUNiQyxFQUFlLEdBRVMsT0FBcEJKLElBQTBCa0IsRUFBU0MsRUFBYyxTQUM3QixTQUFwQm5CLElBQTRCa0IsRUFBU0MsRUFBYyxPQUMvQixVQUFwQm5CLElBQTZCa0IsRUFBU0MsRUFBYyxTQUNoQyxTQUFwQm5CLElBQTRCa0IsRUFBU0MsRUFBYyxVQUNuREQsRUFBTyxJQUFNLEdBQUtBLEVBQU8sSUFBTSxHQUFLQSxFQUFPLElBQU0sR0FBS0EsRUFBTyxJQUFNLEVBQ3JFLE9BQU9ELEVBQWVMLEVBQUlDLEVBQUlLLEVBQU8sR0FBSUEsRUFBTyxHQUFJSixFQUFhQyxRQUM5RCxHQUFJLEVBQVEsQ0FDWSxHQUF6QlYsRUFBZTNFLFFBQ2pCK0UsRUFBdUJQLEVBQVcsR0FBSUEsRUFBVyxJQUN0QixHQUF6QkcsRUFBZTNFLFFBQXlCLEdBQVYsR0FDaEMrRSxFQUF1Qk4sRUFBWSxHQUFJQSxFQUFZLElBQ3JELE1BQU1lLEVBQVNiLEVBQWVlLE1BQzlCLE9BQU9ILEVBQWVMLEVBQUlDLEVBQUlLLEVBQU8sR0FBSUEsRUFBTyxHQUFJSixFQUFhQyxJQUlyRSxTQUFTSSxFQUFjbEUsR0FDckIsTUFBWSxTQUFSQSxHQUNGK0MsRUFBa0IsT0FDWCxDQUFDRSxFQUFXLEdBQUlBLEVBQVcsR0FBSyxJQUU3QixVQUFSakQsR0FDRitDLEVBQWtCLFFBQ1gsQ0FBQ0UsRUFBVyxHQUFJQSxFQUFXLEdBQUssSUFFN0IsU0FBUmpELEdBQ0YrQyxFQUFrQixPQUNYLENBQUNFLEVBQVcsR0FBSyxFQUFHQSxFQUFXLEtBRTVCLE9BQVJqRCxHQUNGK0MsRUFBa0IsS0FDWCxDQUFDRSxFQUFXLEdBQUssRUFBR0EsRUFBVyxVQUZ4QyxFQ3lCS21CLGVBQWVKLEVBQWVMLEVBQUlDLEVBQUk5RCxFQUFNQyxFQUFNOEQsRUFBYUMsR0FDcEUsSUFBSXJELEdBQVMsRUFDYixNQUFNNEQsRUFBSUMsU0FBU0MsY0FDYixpQ0FBaUN6RSxZQUFlQyxPQUdoRG1CLEVBQVMwQyxFQUFHMUMsT0FBT3BCLEVBQU1DLEVBQU04RCxHQVdyQyxHQVRFVyxRQUFRQyxJQUFJWixFQUFZbkcsWUFBWW9DLEVBQU1DLElBQzdCLG9DQUFYbUIsR0FFRnVDLEdBRGUsRUFDQUUsRUFBSUMsT0FBSTVGLEVBQVc2RixFQUFhQyxHQUVsQyxnQkFBWDVDLElBQ0ZtQyxHQUFVLEdBQ1ZnQixFQUFFSyxVQUFVQyxJQUFJLFNBRUgsb0JBQVh6RCxFQUtGLE9BSkFtQyxHQUFVLEdBQU0sRUFBTXZELEVBQU1DLEdBQzVCc0UsRUFBRUssVUFBVUMsSUFBSSxPQUNoQmQsRUFBWW5HLFlBQVlvQyxFQUFNQyxHQUFNMEIsV0FBV1gsS0FBS3VELEdBRWhEUixFQUFZbkcsWUFBWW9DLEVBQU1DLEdBQU1VLFdBQ3RDb0QsRUFBWW5HLFlBQVlvQyxFQUFNQyxHQUFNMEIsV0FBV2xDLFNBQVM4RSxHQUN0REEsRUFBRUssVUFBVUMsSUFBSSxVQUVsQmxFLEdBQVMsR0FDcUMsSUFBMUNvRCxFQUFZdkQsMkJBQTJDc0UsRUFBZ0JmLEVBQWFDLFVBRXBGZSxFQUFNLEtBQ0xwQixHQUFPLEVBQU9FLEVBQUlDLEVBQUluRCxFQUFRb0QsRUFBYUMsSUF1Q3RELFNBQVNlLEVBQU1DLEdBQ2IsT0FBTyxJQUFJQyxTQUFTQyxJQUNsQkMsWUFBVyxLQUNURCxFQUFRLEtBQ1BGLE1BSUEsTUFBTUksRUFBb0IsRUFBR3hILGtCQUNoQyxNQUFNeUgsRUFBa0JiLFNBQVNDLGNBQWMsb0JBRS9DLElBQUssSUFBSWhILEVBQVMsRUFBR0EsRUFBUyxHQUFJQSxHQUFVLEVBQ3hDLElBQUssSUFBSUMsRUFBTSxFQUFHQSxFQUFNLEdBQUlBLEdBQU8sRUFBRyxDQUNsQyxNQUFNNEgsRUFBT0QsRUFBZ0JaLGNBQ3pCLG1CQUF5QixHQUFOL0csRUFBV0QsRUFBUyxNQUUzQzZILEVBQUtDLGFBQWEsU0FBVTlILEdBQzVCNkgsRUFBS0MsYUFBYSxNQUFPN0gsR0FDekIsTUFBTVMsRUFBV1AsRUFBWUgsRUFBUUMsR0FDakNTLEVBQVNqQixTQUNUb0ksRUFBS1YsVUFBVUMsSUFBSSxRQUNuQlMsRUFBS0MsYUFBYSxZQUFhcEgsRUFBU2dELGNBTWxEMkQsRUFBa0IsQ0FBQ2YsRUFBYUMsS0FDbEMsR0FBSUQsRUFBWXZELDBCQUEyQixDQUN2QyxNQUFNZ0YsRUFBUWhCLFNBQVNDLGNBQWMsVUFDL0JnQixFQUFjakIsU0FBU0MsY0FBYyxzQkFDckNpQixFQUFrQmxCLFNBQVNDLGNBQzdCLDJCQUdKZSxFQUFNRyxNQUFNQyxRQUFVLFFBQ3RCRixFQUFnQkcsaUJBQWlCLFNBQVMsS0FDdEMxSCxTQUFTMkgsWUFHYkwsRUFBWU0sWUFBYyxZQUU5QixHQUFJL0IsRUFBV3hELDBCQUEyQixDQUN0QyxNQUFNZ0YsRUFBUWhCLFNBQVNDLGNBQWMsVUFDL0JnQixFQUFjakIsU0FBU0MsY0FBYyxzQkFDckNpQixFQUFrQmxCLFNBQVNDLGNBQzdCLDJCQUdKZSxFQUFNRyxNQUFNQyxRQUFVLFFBQ3RCSCxFQUFZTSxZQUFjLFdBQzFCTCxFQUFnQkcsaUJBQWlCLFNBQVMsS0FDdEMxSCxTQUFTMkgsYyxxQkN4T3JCLE1BQU0vQixFQUFjLE1BQ2RDLEVBQWEsTUFDYixFQUFTLE1BQ1RnQyxFQUFXLE1BRU94QixTQUFTQyxjQUFjLG9CQUUvQm9CLGlCQUFpQixTQUFTLEtEd1JULENBQUN4SSxJQU05QixPQUpBQSxFQUFVK0MsYUFkSW9FLFNBQVN5QixpQkFBaUIseUJBRWxDeEcsU0FBUTZGLElBQ1ZBLEVBQUtWLFVBQVVzQixPQUFPLFFBQ3RCWixFQUFLVixVQUFVc0IsT0FBTyxPQUN0QlosRUFBS1YsVUFBVXNCLE9BQU8sV0FZQS9HLEtBQUtDLE1BQXNCLEVBQWhCRCxLQUFLRSxXQUV0QyxLQUFLLEVBQ0xoQyxFQUFVb0IsVUFBVSxFQUFHLEVBQUcsV0FBWSxJQUFXLElBQ2pEcEIsRUFBVW9CLFVBQVUsRUFBRyxFQUFHLGFBQWMsSUFBVyxJQUNuRHBCLEVBQVVvQixVQUFVLEVBQUcsRUFBRyxhQUFjLElBQVcsSUFDbkRwQixFQUFVb0IsVUFBVSxFQUFHLEVBQUcsYUFBYyxJQUFXLElBQ25EcEIsRUFBVW9CLFVBQVUsRUFBRyxFQUFHLGFBQWMsSUFBVyxJQUMvQyxNQUNKLEtBQUssRUFDTHBCLEVBQVVvQixVQUFVLEVBQUcsRUFBRyxhQUFjLElBQVcsSUFDbkRwQixFQUFVb0IsVUFBVSxFQUFHLEVBQUcsYUFBYyxJQUFXLElBQ25EcEIsRUFBVW9CLFVBQVUsRUFBRyxFQUFHLGFBQWMsSUFBVyxJQUNuRHBCLEVBQVVvQixVQUFVLEVBQUcsRUFBRyxhQUFjLElBQVcsSUFDbkRwQixFQUFVb0IsVUFBVSxFQUFHLEVBQUcsYUFBYyxJQUFXLElBQy9DLE1BQ0osS0FBSyxFQUNMcEIsRUFBVW9CLFVBQVUsRUFBRyxFQUFHLGFBQWMsSUFBVyxJQUNuRHBCLEVBQVVvQixVQUFVLEVBQUcsRUFBRyxXQUFZLElBQVcsSUFDakRwQixFQUFVb0IsVUFBVSxFQUFHLEVBQUcsV0FBWSxJQUFXLElBQ2pEcEIsRUFBVW9CLFVBQVUsRUFBRyxFQUFHLGFBQWMsSUFBVyxJQUNuRHBCLEVBQVVvQixVQUFVLEVBQUcsRUFBRyxhQUFjLElBQVcsSUFDL0MsTUFDSixRQUNJcEIsRUFBVW9CLFVBQVUsRUFBRyxFQUFHLGFBQWMsSUFBVyxJQUNuRHBCLEVBQVVvQixVQUFVLEVBQUcsRUFBRyxhQUFjLElBQVcsSUFDbkRwQixFQUFVb0IsVUFBVSxFQUFHLEVBQUcsYUFBYyxJQUFXLElBQ25EcEIsRUFBVW9CLFVBQVUsRUFBRyxFQUFHLFdBQVksSUFBVyxJQUNqRHBCLEVBQVVvQixVQUFVLEVBQUcsRUFBRyxhQUFjLElBQVcsSUFJM0QyRyxFQUFrQi9ILElDM1RsQjhJLENBQWtCbkMsTUFHdEJBLEVBQVd2RixVQUFVLEVBQUcsRUFBRyxhQUFjLElBQVcsSUFDcER1RixFQUFXdkYsVUFBVSxFQUFHLEVBQUcsYUFBYyxJQUFXLElBQ3BEdUYsRUFBV3ZGLFVBQVUsRUFBRyxFQUFHLGFBQWMsSUFBVyxJQUNwRHVGLEVBQVd2RixVQUFVLEVBQUcsRUFBRyxXQUFZLElBQVcsSUFDbER1RixFQUFXdkYsVUFBVSxFQUFHLEVBQUcsYUFBYyxJQUFXLElBRXBELE1BQU0ySCxFRGtJZ0IsTUFDbEIsTUFBTUMsRUFBYyxHQXdCcEIsTUFBTyxDQUNIQyxRQXZCSixTQUFpQkMsRUFBV0MsR0FDbkJsSixNQUFNbUosUUFBUUosRUFBWUUsS0FHL0JGLEVBQVlFLEdBQVc5RyxTQUFTaUgsSUFDNUJBLEVBQVNGLE9BbUJiRyxVQWhCSixTQUFTQSxFQUFVSixFQUFXRyxHQUNyQnBKLE1BQU1tSixRQUFRRSxFQUFVSixNQUN6QkYsRUFBWUUsR0FBYSxJQUU3QkYsRUFBWUUsR0FBV3ZGLEtBQUswRixHQUM1QixNQUFNRSxFQUFRUCxFQUFZRSxHQUFXNUgsT0FBUyxFQUU5QyxNQUFPLENBQ0hrSSxjQUNJUixFQUFZRSxHQUFXTyxPQUFPRixFQUFPLFFDdEoxQ0csR0QyTjZCLEVBQ3BDaEQsRUFDQUMsRUFDQWdELEVBQ0FDLEVBQ0FiLEtBRUEsTUFBTWMsRUFBaUIxQyxTQUFTQyxjQUFjLG1CQUU5QyxJQUFLLElBQUloSCxFQUFTLEVBQUdBLEVBQVMsR0FBSUEsR0FBVSxFQUN4QyxJQUFLLElBQUlDLEVBQU0sRUFBR0EsRUFBTSxHQUFJQSxHQUFPLEVBQUcsQ0FFbEMsTUFBTTRILEVBQU80QixFQUFlekMsY0FDeEIsbUJBQXlCLEdBQU4vRyxFQUFXRCxFQUFTLE1BRTNDNkgsRUFBS0MsYUFBYSxTQUFVOUgsR0FDNUI2SCxFQUFLQyxhQUFhLE1BQU83SCxHQUV6QjRILEVBQUtPLGlCQUNELFNBQ0EsS0FDSU8sRUFBR0UsUUFBUSxRQUFTLENBQ2hCaEIsT0FDQTdILFNBQ0FDLE1BQ0FxRyxjQUNBQyxhQUNBZ0QsU0FDQUMsWUFHUixDQUFFRSxNQUFNLE1DeFB4QkMsQ0FBeUJyRCxFQUFhQyxFQUFZLEVBQVFnQyxFQUFVSSxHQUVwRUEsRUFBR08sVUFBVSxTRGtUUyxFQUNsQnJCLE9BQ0E3SCxTQUNBQyxNQUNBcUcsY0FDQUMsYUFDQWdELFNBQ0FDLFlBdlRvQjNDLE9BQU83RyxFQUFRQyxFQUFLc0csRUFBWUQsRUFBYWlELEVBQVFDLEtBSHhELEVBQUN4SixFQUFRQyxFQUFLc0csRUFBWWdELEtBQzNDQSxFQUFPNUYsT0FBTzNELEVBQVFDLEVBQUtzRyxJQUszQnFELENBQWE1SixFQUFRQyxFQUFLc0csRUFBWWdELEdBN0JwQixFQUFDQSxFQUFRdkosRUFBUUMsRUFBS3NHLEtBQ3hDLE1BQU1zQixFQUFPZCxTQUFTQyxjQUNsQixnQ0FBb0NoSCxZQUFpQkMsT0FHdERzRyxFQUFXcEcsWUFBWUgsRUFBUUMsSUFBTVIsU0FFcEM4RyxFQUFXcEcsWUFBWUgsRUFBUUMsR0FBS2lFLFdBQVdYLEtBQUtzRSxHQUNqRHRCLEVBQVdwRyxZQUFZSCxFQUFRQyxHQUFLaUQsVUFFbkNxRCxFQUFXcEcsWUFBWUgsRUFBUUMsR0FBS2lFLFdBQVdsQyxTQUFTOEUsR0FBTUEsRUFBRUssVUFBVUMsSUFBSSxXQUlyRWIsRUFBV3BHLFlBQVlILEVBQVFDLEdBQ25DUixPQUNUb0ksRUFBS1YsVUFBVUMsSUFBSSxPQUVuQlMsRUFBS1YsVUFBVUMsSUFBSSxTQVl2QnlDLENBQWMsRUFBUzdKLEVBQVFDLEVBQUtzRyxTQUM5QmUsRUFBTSxLQUNMZixFQUFXeEQsMEJBQTRCc0UsRUFBZ0JmLEVBQWFDLEdBQWNMLEdBQU8sRUFBT3FELEVBQVFDLE9BQU8vSSxFQUFXNkYsRUFBYUMsSUFvVDlJdUQsQ0FBZ0I5SixFQUFRQyxFQUFLc0csRUFBWUQsRUFBYWlELEVBQVFDLE1DMVRsRTdCLEVBQWtCckIsSSIsInNvdXJjZXMiOlsid2VicGFjazovL3RvcC1iYXR0bGVzaGlwLy4vc3JjL2dhbWVib2FyZC9nYW1lYm9hcmQuanMiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvLi9zcmMvcGxheWVyL3BsYXllci5qcyIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC8uL3NyYy9zaGlwL3NoaXAuanMiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3RvcC1iYXR0bGVzaGlwL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvLi9zcmMvYm90LmpzIiwid2VicGFjazovL3RvcC1iYXR0bGVzaGlwLy4vc3JjL2RvbS5qcyIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcbi8qIGVzbGludC1kaXNhYmxlIG5vLW11bHRpLWFzc2lnbiAqL1xuLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLWV4cHJlc3Npb25zICovXG5jb25zdCBjcmVhdGVTaGlwID0gcmVxdWlyZSgnLi4vc2hpcC9zaGlwJylcblxuLyogZXNsaW50LWRpc2FibGUgbm8tcGFyYW0tcmVhc3NpZ24gKi9cbmNvbnN0IGNyZWF0ZUdhbWVCb2FyZCA9ICgpID0+IHtcbiAgICBjb25zdCBlbXB0eUNlbGwgPSB7IGhhc0JlZW5IaXQ6IGZhbHNlLCBpc1NoaXA6IGZhbHNlLCBvZmZMaW1pdHM6IGZhbHNlIH1cbiAgICBcbiAgICBjb25zdCBpbml0aWFsaXplQm9hcmQgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGdhbWVCb2FyZCA9IEFycmF5KDEwKS5maWxsKCkubWFwKCgpID0+IEFycmF5KDEwKS5maWxsKCkpXG4gICAgICAgIGZvcihsZXQgY29sdW1uPSAwOyBjb2x1bW4gPCAxMDsgY29sdW1uKyspe1xuICAgICAgICAgICAgZm9yKGxldCByb3c9IDA7IHJvdyA8IDEwOyByb3crKyl7XG4gICAgICAgICAgICAgICAgZ2FtZUJvYXJkW2NvbHVtbl1bcm93XSA9IHsuLi5lbXB0eUNlbGwsIGNvbHVtbiwgcm93fVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBnYW1lQm9hcmRcbiAgICBcbiAgICB9XG5cbiAgICBsZXQgZ2FtZUJvYXJkID0gaW5pdGlhbGl6ZUJvYXJkKClcblxuICAgIGNvbnN0IHNoaXBzID0gW1xuICAgICAgICBjcmVhdGVTaGlwKDUsICdDYXJyaWVyJyksXG4gICAgICAgIGNyZWF0ZVNoaXAoNCwgJ0JhdHRsZXNoaXAnKSxcbiAgICAgICAgY3JlYXRlU2hpcCgzLCAnRGVzdHJveWVyJyksXG4gICAgICAgIGNyZWF0ZVNoaXAoMywgJ1N1Ym1hcmluZScpLFxuICAgICAgICBjcmVhdGVTaGlwKDIsICdQYXRyb2wgQm9hdCcpLFxuICAgIF1cblxuXG4gICAgY29uc3QgY3JlYXRlT2ZmTGltaXRMb2NhdGlvbiA9ICgpID0+XG4gICAgICAgIE9iamVjdC5hc3NpZ24oZW1wdHlDZWxsLCB7IG9mZkxpbWl0czogdHJ1ZSB9KVxuXG4gICAgY29uc3QgZ2V0TG9jYXRpb24gPSAoY29sdW1uLCByb3cpID0+IGdhbWVCb2FyZD8uW2NvbHVtbl0/Lltyb3ddXG5cbiAgICBjb25zdCBzZXRMb2NhdGlvbiA9IChjb2x1bW4sIHJvdywgc2hpcCA9IGNyZWF0ZU9mZkxpbWl0TG9jYXRpb24oKSkgPT4ge1xuICAgICAgICBpZiAoZ2FtZUJvYXJkPy5bY29sdW1uXT8uW3Jvd10gPT09IHVuZGVmaW5lZCkgcmV0dXJuIHRydWVcbiAgICAgICAgY29uc3QgbG9jYXRpb24gPSBnYW1lQm9hcmRbY29sdW1uXVtyb3ddXG5cbiAgICAgICAgZ2FtZUJvYXJkW2NvbHVtbl1bcm93XSA9IHsuLi5sb2NhdGlvbiwgLi4uc2hpcH1cbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgY29uc3QgY2hlY2tJZkFsbFNoaXBzSGF2ZVN1bmsgPSAoKSA9PiB7XG5cbiAgICAgICAgbGV0IGhhdmVBbGxTaGlwc1N1bmsgPXRydWUgIFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTA7IGkrKykge1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAxMDsgaisrKSB7XG4gICAgICAgIGNvbnN0IGxvY2F0aW9uID0gZ2V0TG9jYXRpb24oaSwgailcbiAgICAgICAgaWYobG9jYXRpb24uaXNTaGlwID09PSBmYWxzZSkgY29udGludWVcbiAgICAgICAgaWYobG9jYXRpb24uaXNTaGlwICYmIGxvY2F0aW9uLmlzU3VuaygpID09PSBmYWxzZSl7XG4gICAgICAgICAgIGhhdmVBbGxTaGlwc1N1bmsgPSBmYWxzZSBcbiAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGhhdmVBbGxTaGlwc1N1bmsgXG4gICAgfVxuXG4gICAgY29uc3QgYWRkT2ZmTGltaXRBcmVhRm9yU2hpcHMgPSAoY29sdW1uLCByb3cpID0+IHtcbiAgICAgICAgLy8gdG9wLWxlZnRcbiAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uIC0gMSwgcm93IC0gMSlcbiAgICAgICAgLy8gdG9wXG4gICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiwgcm93IC0gMSlcbiAgICB9XG5cbiAgICBjb25zdCBhZGRPZmZMaW1pdEFyZWFGb3JIb3Jpem9udGFsbHlQb3NpdGlvbmVkU2hpcCA9IChcbiAgICAgICAgY29sdW1uLFxuICAgICAgICByb3csXG4gICAgICAgIHNoaXBMZW5ndGhcbiAgICApID0+IHtcbiAgICAgICAgLy8gcG9zaXRpb25zIHJlbGF0aXZlIHRvIHRoZSBzaGlwIGl0c2VsZihpZS4gYSBob3Jpem9udGFsIHNoaXAncyBib3R0b20gaXMgdG8gdGhlIHJpZ2h0KVxuXG4gICAgICAgIGFkZE9mZkxpbWl0QXJlYUZvclNoaXBzKGNvbHVtbiwgcm93KVxuICAgICAgICAvLyBib3R0b21cbiAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uICsgc2hpcExlbmd0aCwgcm93KVxuICAgICAgICAvLyBib3R0b20tbGVmdFxuICAgICAgICBzZXRMb2NhdGlvbihjb2x1bW4gLSAxLCByb3cgKyAxKVxuICAgICAgICAvLyBib3R0b20tcmlnaHRcbiAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uICsgc2hpcExlbmd0aCwgcm93ICsgMSlcbiAgICAgICAgLy8gdG9wLXJpZ2h0XG4gICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiArIHNoaXBMZW5ndGgsIHJvdyAtIDEpXG4gICAgfVxuXG4gICAgY29uc3QgYWRkT2ZmTGltaXRBcmVhRm9yVmVydGljYWxseVBvc2l0aW9uZWRTaGlwID0gKFxuICAgICAgICBjb2x1bW4sXG4gICAgICAgIHJvdyxcbiAgICAgICAgc2hpcExlbmd0aFxuICAgICkgPT4ge1xuICAgICAgICAvLyBwb3NpdGlvbnMgcmVsYXRpdmUgdG8gaG93IHRoZSB1c2VyIHNlZXMgaXQoaWUuIGEgdmVydGljYWwgc2hpcCdzIGJvdHRvbSBpcyB0byB0aGUgYm90dG9tKVxuXG4gICAgICAgIGFkZE9mZkxpbWl0QXJlYUZvclNoaXBzKGNvbHVtbiwgcm93KVxuICAgICAgICAvLyBib3R0b21cbiAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uLCByb3cgKyBzaGlwTGVuZ3RoKVxuICAgICAgICAvLyBib3R0b20tcmlnaHRcbiAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uICsgMSwgcm93ICsgc2hpcExlbmd0aClcbiAgICAgICAgLy8gYm90dG9tLWxlZnRcbiAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uIC0gMSwgcm93ICsgc2hpcExlbmd0aClcbiAgICAgICAgLy8gdG9wLXJpZ2h0XG4gICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiArIDEsIHJvdyAtIDEpXG4gICAgfVxuXG4gICAgY29uc3QgY2hlY2tJZkNvbHVtbkNvb3JkaW5hdGVJc1ZhbGlkID0gKGNvbHVtbiwgc2hpcExlbmd0aCkgPT5cbiAgICAgICAgY29sdW1uID49IDAgJiYgY29sdW1uICsgc2hpcExlbmd0aCAtIDEgPCBnYW1lQm9hcmQubGVuZ3RoXG5cbiAgICBjb25zdCBjaGVja0lmUm93Q29vcmRpbmF0ZUlzVmFsaWQgPSAocm93LCBzaGlwTGVuZ3RoKSA9PlxuICAgICAgICByb3cgPj0gMCAmJiByb3cgKyBzaGlwTGVuZ3RoIC0gMSA8IGdhbWVCb2FyZC5sZW5ndGhcblxuXG4gICAgY29uc3QgY2hlY2tJZkxvY2F0aW9uSXNBU2hpcE9yT2ZmTGltaXRzID0gKFxuICAgICAgICBjb2x1bW4sXG4gICAgICAgIHJvdyxcbiAgICAgICAgZGlyZWN0aW9uLFxuICAgICAgICBzaGlwTGVuZ3RoXG4gICAgKSA9PiB7XG4gICAgICAgIGlmIChkaXJlY3Rpb24gPT09ICd2ZXJ0aWNhbCcpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcExlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbG9jYXRpb24gPSBnZXRMb2NhdGlvbihjb2x1bW4sIHJvdyArIGkpXG4gICAgICAgICAgICAgICAgaWYgKGxvY2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmlzU2hpcCA9PT0gdHJ1ZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ub2ZmTGltaXRzID09PSB0cnVlXG4gICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkaXJlY3Rpb24gPT09ICdob3Jpem9udGFsJykge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGlwTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsb2NhdGlvbiA9IGdldExvY2F0aW9uKGNvbHVtbiArIGksIHJvdylcbiAgICAgICAgICAgICAgICBpZiAobG9jYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24uaXNTaGlwID09PSB0cnVlICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5vZmZMaW1pdHMgPT09IHRydWVcbiAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZSBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgICAgLy8gbWFrZXMgdGlsZXMgYXJvdW5kIHNoaXAgXCJyZXNlcnZlZFwiXG4gIGxldCByZXNlcnZlQXJvdW5kID0gKHBvczEsIHBvczIpID0+IHtcbiAgICBmdW5jdGlvbiBjZWxsKG4xLCBuMikge1xuICAgICAgaWYgKHBvczEgKyBuMSA+IDkgfHwgcG9zMSArIG4xIDwgMCkgcmV0dXJuO1xuICAgICAgaWYgKGdhbWVCb2FyZFtwb3MxICsgbjFdW3BvczIgKyBuMl0gPT09IGZhbHNlKVxuICAgICAgICBnYW1lQm9hcmRbcG9zMSArIG4xXVtwb3MyICsgbjJdID0gXCJyZXNcIjtcbiAgICB9XG4gICAgZnVuY3Rpb24gcmVzZXJ2ZUNlbGwocm93KSB7XG4gICAgICBjZWxsKHJvdywgLTEpO1xuICAgICAgY2VsbChyb3csIDApO1xuICAgICAgY2VsbChyb3csIDEpO1xuICAgIH1cbiAgICByZXNlcnZlQ2VsbCgtMSk7XG4gICAgcmVzZXJ2ZUNlbGwoMCk7XG4gICAgcmVzZXJ2ZUNlbGwoMSk7XG4gIH07XG5cbmNvbnN0IHBsYWNlU2hpcCA9IChjb2x1bW4sIHJvdywgZGlyZWN0aW9uLCBzaGlwKSA9PiB7XG4gICAgICAgIGNvbnN0IHNoaXBMZW5ndGggPSBzaGlwLmdldExlbmd0aCgpXG4gICAgICAgIGlmIChjaGVja0lmTG9jYXRpb25Jc0FTaGlwT3JPZmZMaW1pdHMoZ2V0TG9jYXRpb24oY29sdW1uLCByb3csIGRpcmVjdGlvbiwgc2hpcExlbmd0aCkpKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIGlmIChkaXJlY3Rpb24gPT09ICd2ZXJ0aWNhbCcpIHtcbiAgICAgICAgICAgIGlmIChjaGVja0lmUm93Q29vcmRpbmF0ZUlzVmFsaWQocm93LCBzaGlwTGVuZ3RoKSkge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcExlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiwgcm93ICsgaSwgey4uLnNoaXAsIHBvc2l0aW9uOiBpfSlcbiAgICAgICAgICAgICAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uICsgMSwgcm93ICsgaSlcbiAgICAgICAgICAgICAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uIC0gMSwgcm93ICsgaSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYWRkT2ZmTGltaXRBcmVhRm9yVmVydGljYWxseVBvc2l0aW9uZWRTaGlwKFxuICAgICAgICAgICAgICAgICAgICBjb2x1bW4sXG4gICAgICAgICAgICAgICAgICAgIHJvdyxcbiAgICAgICAgICAgICAgICAgICAgc2hpcExlbmd0aFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PT0gJ2hvcml6b250YWwnKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2tJZkNvbHVtbkNvb3JkaW5hdGVJc1ZhbGlkKGNvbHVtbiwgc2hpcExlbmd0aCkpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXBMZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgICAgICAgICBzZXRMb2NhdGlvbihjb2x1bW4gKyBpICwgcm93LCB7Li4uc2hpcCwgcG9zaXRpb246IGl9KVxuICAgICAgICAgICAgICAgICAgICAvL3NldExvY2F0aW9uKGNvbHVtbiArIGksIHJvdywgc2hpcClcbiAgICAgICAgICAgICAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uICsgaSwgcm93ICsgMSlcbiAgICAgICAgICAgICAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uICsgaSwgcm93IC0gMSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYWRkT2ZmTGltaXRBcmVhRm9ySG9yaXpvbnRhbGx5UG9zaXRpb25lZFNoaXAoXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbixcbiAgICAgICAgICAgICAgICAgICAgcm93LFxuICAgICAgICAgICAgICAgICAgICBzaGlwTGVuZ3RoXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgICAgICBjb25zdCBhdmFpbGFibGVTcGFjZXMgPSAoKSA9PntcblxuICAgICAgICBjb25zdCBmbGF0dGVuZWRHYW1lQm9hcmQgPSBbLi4uZ2FtZUJvYXJkLmZsYXQoKV1cblxuICAgICAgICAgICAgZmxhdHRlbmVkR2FtZUJvYXJkLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBpZihlbGVtZW50Lmhhc0JlZW5IaXQgPT09IHRydWUpe1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmF2YWlsYWJpbGl0eSA9IGZhbHNlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuYXZhaWxhYmlsaXR5ID10cnVlICBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICByZXR1cm4gZmxhdHRlbmVkR2FtZUJvYXJkXG5cbiAgICAgICAgfVxuICAgIGNvbnN0IG1ha2VSYW5kb21Db29yZGluYXRlcyA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgcmFuZG9tRGlyZWN0aW9uID1cbiAgICAgICAgICAgIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDIpID09PSAwID8gJ3ZlcnRpY2FsJyA6ICdob3Jpem9udGFsJ1xuICAgICAgICBjb25zdCByYW5kb21Mb2NhdGlvbiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMClcbiAgICAgICAgY29uc3QgZmxhdHRlbmVkR2FtZUJvYXJkID0gYXZhaWxhYmxlU3BhY2VzKClcblxuICAgICAgICBjb25zdCBsb2NhdGlvbiA9IGZsYXR0ZW5lZEdhbWVCb2FyZFtyYW5kb21Mb2NhdGlvbl1cblxuICAgICAgICBpZihsb2NhdGlvbi5hdmFpbGFiaWxpdHkgPT09IGZhbHNlKXtcbiAgICAgICAgICAgIHJldHVybiBtYWtlUmFuZG9tQ29vcmRpbmF0ZXMoKVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZWxlbWVudENvbHVtbiA9IGxvY2F0aW9uLmNvbHVtblxuICAgICAgICBjb25zdCBlbGVtZW50Um93ID0gbG9jYXRpb24ucm93XG5cblxuICAgICAgICByZXR1cm4geyBlbGVtZW50Q29sdW1uLCBlbGVtZW50Um93LCByYW5kb21EaXJlY3Rpb24gfVxuICAgIH1cblxuICAvLyBjcmVhdGVzIGEgc2hpcCB3aXRoIHJhbmRvbSBwb3MgYW5kIG9yaWVudGF0aW9uXG4gIGxldCByYW5kb21TaGlwID0gKGxlbmd0aCkgPT4ge1xuICAgIGxldCBwb3MxID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApO1xuICAgIGxldCBwb3MyID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApO1xuICAgIGxldCBkaXIgPSBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkpO1xuXG4gICAgaWYgKGRpciA9PT0gMCkge1xuICAgICAgZGlyID0gXCJob3Jpem9udGFsXCI7XG4gICAgICBpZiAocGxhY2VTaGlwKHBvczEsIHBvczIsIGRpciwgY3JlYXRlU2hpcChsZW5ndGgpKSA9PT0gZmFsc2UpIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoZGlyID09PSAxKSB7XG4gICAgICBkaXIgPSBcInZlcnRpY2FsXCI7XG4gICAgICBpZiAocGxhY2VTaGlwKHBvczEsIHBvczIsIGRpciwgY3JlYXRlU2hpcChsZW5ndGgpKSA9PT0gZmFsc2UpIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH07XG5cbiAgICBsZXQgcmFuZG9tRmxlZXQgPSAoKSA9PiB7XG4gICAgICAgIGdhbWVCb2FyZCA9IGluaXRpYWxpemVCb2FyZCgpXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCAyOykge1xuICAgICAgICAgICAgaWYocmFuZG9tU2hpcCgxKSA9PT0gZmFsc2UpIGNvbnRpbnVlIFxuICAgICAgICAgICAgaSsrXG4gICAgICAgIH1cblxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgMjspIHtcbiAgICAgICAgICAgIGlmKHJhbmRvbVNoaXAoMikgPT09IGZhbHNlKSBjb250aW51ZSBcbiAgICAgICAgICAgIGkrK1xuICAgICAgICB9XG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCAyOykge1xuICAgICAgICAgICAgaWYocmFuZG9tU2hpcCgzKSA9PT0gZmFsc2UpIGNvbnRpbnVlIFxuICAgICAgICAgICAgaSsrXG4gICAgICAgIH1cbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IDI7KSB7XG4gICAgICAgICAgICBpZihyYW5kb21TaGlwKDQpID09PSBmYWxzZSkgY29udGludWUgXG4gICAgICAgICAgICBpKytcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHJhbmRvbWx5UGxhY2VTaGlwcyA9ICgpID0+IHtcbiAgICAgICAgY29uc3Qgc2hpcERldGFpbHMgPSBbXVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXBzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICBjb25zdCBzaGlwID0gc2hpcHNbaV1cbiAgICAgICAgICAgIGNvbnN0IHsgcmFuZG9tQ29sdW1uLCByYW5kb21Sb3csIHJhbmRvbURpcmVjdGlvbiB9ID1cbiAgICAgICAgICAgICAgICBtYWtlUmFuZG9tQ29vcmRpbmF0ZXMoc2hpcC5nZXRMZW5ndGgoKSlcbiAgICAgICAgICAgIGlmIChwbGFjZVNoaXAocmFuZG9tQ29sdW1uLCByYW5kb21Sb3csIHJhbmRvbURpcmVjdGlvbiwgc2hpcCkpIHtcbiAgICAgICAgICAgICAgICBzaGlwRGV0YWlscy5wdXNoKHsgcmFuZG9tQ29sdW1uLCByYW5kb21Sb3csIHJhbmRvbURpcmVjdGlvbiB9KVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpIC09IDFcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2hpcERldGFpbHNcbiAgICB9XG5cbiAgICBjb25zdCByZWNlaXZlQXR0YWNrID0gKGNvbHVtbiwgcm93KSA9PiB7XG4gICAgICAgIGdhbWVCb2FyZFtjb2x1bW5dW3Jvd10uaGFzQmVlbkhpdCA9IHRydWVcbiAgICB9XG5cbiAgICBjb25zdCBjaGVja0lmT2ZmTGltaXRab25lV2FzQ29ycmVjdGx5SW1wbGVtZW50ZWQgPSAoc2hpcExlbmd0aCkgPT5cbiAgICAgICAgZ2FtZUJvYXJkLmZsYXQoKS5maWx0ZXIoKGVsZW1lbnQpID0+IGVsZW1lbnQub2ZmTGltaXRzID09PSB0cnVlKVxuICAgICAgICAgICAgLmxlbmd0aCA9PT1cbiAgICAgICAgc2hpcExlbmd0aCArIDJcbiAgICAvLyBhZGRpbmcgc2hpcExlbmd0aCBwbHVzIHR3byBiZWNhdXNlIGZvciBldmVyeSBpbmNyZWFzZSBpbiB0aGUgc2l6ZSBvZiBzaGlwLCB0aGUgem9uZXMgY292ZXJlZCBpbmNyZWFzZSBieSAyIHVuaXRzXG5cbiAgICBjb25zdCBjbGVhckJvYXJkICA9ICgpID0+IHtcbiAgICAgICAgZ2FtZUJvYXJkID0gaW5pdGlhbGl6ZUJvYXJkKClcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBjbGVhckJvYXJkLFxuICAgICAgICBjaGVja0lmTG9jYXRpb25Jc0FTaGlwT3JPZmZMaW1pdHMsXG4gICAgICAgIGNoZWNrSWZPZmZMaW1pdFpvbmVXYXNDb3JyZWN0bHlJbXBsZW1lbnRlZCxcbiAgICAgICAgZ2V0TG9jYXRpb24sXG4gICAgICAgIHJlY2VpdmVBdHRhY2ssXG4gICAgICAgIGNoZWNrSWZBbGxTaGlwc0hhdmVTdW5rLFxuICAgICAgICBwbGFjZVNoaXAsXG4gICAgICAgIHJhbmRvbWx5UGxhY2VTaGlwcyxcbiAgICAgICAgbWFrZVJhbmRvbUNvb3JkaW5hdGVzLFxuICAgICAgICByYW5kb21GbGVldCxcbiAgICB9XG59XG5tb2R1bGUuZXhwb3J0cyA9IGNyZWF0ZUdhbWVCb2FyZCIsImNvbnN0IGNyZWF0ZVBsYXllciA9IChuYW1lID0gJ3BsYXllcicpID0+IHtcbiAgICBjb25zdCBnZXROYW1lID0gKCkgPT4gbmFtZVxuXG4gICAgY29uc3QgYXR0YWNrID0gKGNvbHVtbiwgcm93LCB7IGdldExvY2F0aW9uLCByZWNlaXZlQXR0YWNrIH0pID0+IHtcbiAgICAgICAgY29uc3QgbG9jYXRpb24gPSBnZXRMb2NhdGlvbihjb2x1bW4sIHJvdylcbiAgICAgICAgaWYgKGxvY2F0aW9uLmhhc0JlZW5IaXQgPT09IGZhbHNlIHx8IChsb2NhdGlvbi5pc1NoaXAgJiYgbG9jYXRpb24uZ2V0U3RhdHVzKCkuaW5jbHVkZXMoJ3VuaGl0JykgPT09IGZhbHNlKSkge1xuICAgICAgICAgICAgcmVjZWl2ZUF0dGFjayhjb2x1bW4sIHJvdylcbiAgICAgICAgICAgIGlmKGxvY2F0aW9uLmhpdCl7XG5cbiAgICAgICAgICAgICAgICBsb2NhdGlvbi5oaXQobG9jYXRpb24ucG9zaXRpb24pXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiWW91IGhpdCBhIHNoaXAhXCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBcIkl0J3MgYSBoaXQhXCJcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAnWW91IGhhdmUgYWxyZWFkeSBoaXQgdGhpcyBzcG90ISdcbiAgICB9XG5cbiAgICAgIGxldCByYW5kb21Qb3MgPSAoKSA9PiB7XG4gICAgbGV0IHBvczEgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCk7XG4gICAgbGV0IHBvczIgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCk7XG4gICAgcmV0dXJuIFtwb3MxLCBwb3MyXTtcbiAgfTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIGdldE5hbWUsXG4gICAgICAgIGF0dGFjayxcbiAgICAgICAgcmFuZG9tUG9zLFxuICAgIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjcmVhdGVQbGF5ZXJcbiIsImNvbnN0IGNyZWF0ZVNoaXAgPSAobGVuZ3RoLCBuYW1lID0gJ3NoaXAnKSA9PiB7XG5cbiAgICBsZXQgZG9tVGFyZ2V0cyA9IFtdXG5cbiAgICBjb25zdCBzdGF0dXMgPSBBcnJheShsZW5ndGgpLmZpbGwoJ3VuaGl0JylcblxuICAgIGNvbnN0IGdldExlbmd0aCA9ICgpID0+IHN0YXR1cy5sZW5ndGhcblxuICAgIGNvbnN0IGdldFN0YXR1cyA9ICgpID0+IHN0YXR1c1xuXG4gICAgY29uc3QgaGl0ID0gKHBvc2l0aW9uKSA9PiB7XG4gICAgICAgIGlmIChwb3NpdGlvbiA8IGxlbmd0aCkge1xuICAgICAgICAgICAgc3RhdHVzW3Bvc2l0aW9uXSA9ICdoaXQnXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBnZXROYW1lID0gKCkgPT4gIG5hbWVcblxuICAgIGNvbnN0IGlzU3VuayA9ICgpID0+IHN0YXR1cy5ldmVyeSgocG9zaXRpb24pID0+IHBvc2l0aW9uID09PSAnaGl0JylcblxuICAgIHJldHVybiB7XG4gICAgICAgIGdldE5hbWUsXG4gICAgICAgIGdldExlbmd0aCxcbiAgICAgICAgaXNTdW5rLFxuICAgICAgICBoaXQsXG4gICAgICAgIGdldFN0YXR1cyxcbiAgICAgICAgZG9tVGFyZ2V0cyxcbiAgICAgICAgaGFzQmVlbkhpdDogZmFsc2UsXG4gICAgICAgIG9mZkxpbWl0czogdHJ1ZSxcbiAgICAgICAgaXNTaGlwOiB0cnVlLFxuICAgIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjcmVhdGVTaGlwXG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbl9fd2VicGFja19yZXF1aXJlX18ubiA9IChtb2R1bGUpID0+IHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0KCkgPT4gKG1vZHVsZVsnZGVmYXVsdCddKSA6XG5cdFx0KCkgPT4gKG1vZHVsZSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLyogZXNsaW50LWRpc2FibGUgbm8tZWxzZS1yZXR1cm4gKi9cbmltcG9ydCB7cmVuZGVyQXR0YWNrUDIgfSBmcm9tICcuL2RvbSdcblxubGV0IHdhc0hpdCA9IGZhbHNlO1xubGV0IHN0YXR1cyA9IGZhbHNlO1xubGV0IGxhc3RIaXRQb3MgPSBbXTtcbmxldCBmaXJzdEhpdFBvcyA9IFtdO1xubGV0IHNlY29uZEhpdFBvcyA9IFtdO1xubGV0IHN1cnJvdW5kaW5nUG9zID0gW107XG5sZXQgYXR0YWNrRGlyZWN0aW9uO1xuXG5mdW5jdGlvbiBzZXRXYXNIaXQodmFsdWUsIHN0YXQsIHBvczEsIHBvczIpIHtcbiAgd2FzSGl0ID0gdmFsdWU7XG4gIGlmIChzdGF0ICE9PSB1bmRlZmluZWQpIHN0YXR1cyA9IHN0YXQ7XG4gIGlmIChwb3MxICE9PSB1bmRlZmluZWQpIGxhc3RIaXRQb3MgPSBbcG9zMSwgcG9zMl07XG4gIGlmIChmaXJzdEhpdFBvcy5sZW5ndGggPT0gMCAmJiBwb3MxICE9PSB1bmRlZmluZWQpIGZpcnN0SGl0UG9zID0gW3BvczEsIHBvczJdO1xuICBlbHNlIGlmIChcbiAgICBmaXJzdEhpdFBvcy5sZW5ndGggIT09IDAgJiZcbiAgICBzZWNvbmRIaXRQb3MubGVuZ3RoID09IDAgJiZcbiAgICBwb3MxICE9PSB1bmRlZmluZWRcbiAgKVxuICAgIHNlY29uZEhpdFBvcyA9IFtwb3MxLCBwb3MyXTtcbn1cbmZ1bmN0aW9uIGdldFdhc0hpdCgpIHtcbiAgcmV0dXJuIFt3YXNIaXQsIGxhc3RIaXRQb3MsIHN0YXR1c107XG59XG5cbmZ1bmN0aW9uIHJlZ2lzdGVyU3Vycm91bmRpbmdQb3MocG9zMSwgcG9zMikge1xuICBzdXJyb3VuZGluZ1BvcyA9IFtdO1xuICBpZiAocG9zMiAhPT0gMCkgc3Vycm91bmRpbmdQb3MucHVzaChbcG9zMSwgcG9zMiAtIDFdKTtcbiAgaWYgKHBvczIgIT09IDkpIHN1cnJvdW5kaW5nUG9zLnB1c2goW3BvczEsIHBvczIgKyAxXSk7XG4gIGlmIChwb3MxICE9PSAwKSBzdXJyb3VuZGluZ1Bvcy5wdXNoKFtwb3MxIC0gMSwgcG9zMl0pO1xuICBpZiAocG9zMSAhPT0gOSkgc3Vycm91bmRpbmdQb3MucHVzaChbcG9zMSArIDEsIHBvczJdKTtcbiAgcmV0dXJuIHN1cnJvdW5kaW5nUG9zO1xufVxuXG5mdW5jdGlvbiBhaVBsYXkocmVwZWF0LCBwMSwgcDIsIGlzU3VuaywgcGxheWVyQm9hcmQsIGVuZW15Qm9hcmQpIHtcbiAgbGV0IHBvczsgbGV0IHBvczE7IGxldCBwb3MyO1xuICBpZiAoaXNTdW5rID09PSB0cnVlKSB7XG4gICAgbGFzdEhpdFBvcyA9IFtdO1xuICAgIGZpcnN0SGl0UG9zID0gW107XG4gICAgc2Vjb25kSGl0UG9zID0gW107XG4gICAgc3Vycm91bmRpbmdQb3MgPSBbXTtcbiAgICB3YXNIaXQgPSBmYWxzZTtcbiAgICBzdGF0dXMgPSBmYWxzZTtcbiAgICBhdHRhY2tEaXJlY3Rpb24gPSBcIlwiO1xuICB9XG4gIGlmICghc3RhdHVzICYmICF3YXNIaXQpIHtcbiAgICBwb3MgPSBwMS5yYW5kb21Qb3MoKTtcblxuICAgIHJldHVybiByZW5kZXJBdHRhY2tQMihwMSwgcDIsIHBvc1swXSwgcG9zWzFdLCBwbGF5ZXJCb2FyZCwgZW5lbXlCb2FyZCk7XG4gIH0gZWxzZSBpZiAoc2Vjb25kSGl0UG9zLmxlbmd0aCAhPT0gMCAmJiB3YXNIaXQgJiYgIXJlcGVhdCkge1xuICAgIGxldCBuZXdQb3M7XG4gICAgaWYgKGZpcnN0SGl0UG9zWzBdID09IHNlY29uZEhpdFBvc1swXSAtIDEpIG5ld1BvcyA9IGF0dGFja1Rvd2FyZHMoXCJkb3duXCIpO1xuICAgIGlmIChmaXJzdEhpdFBvc1swXSA9PSBzZWNvbmRIaXRQb3NbMF0gKyAxKSBuZXdQb3MgPSBhdHRhY2tUb3dhcmRzKFwidXBcIik7XG4gICAgaWYgKGZpcnN0SGl0UG9zWzFdID09IHNlY29uZEhpdFBvc1sxXSAtIDEpIG5ld1BvcyA9IGF0dGFja1Rvd2FyZHMoXCJyaWdodFwiKTtcbiAgICBpZiAoZmlyc3RIaXRQb3NbMV0gPT0gc2Vjb25kSGl0UG9zWzFdICsgMSkgbmV3UG9zID0gYXR0YWNrVG93YXJkcyhcImxlZnRcIik7XG4gICAgaWYgKG5ld1Bvc1swXSA+PSAwICYmIG5ld1Bvc1swXSA8PSA5ICYmIG5ld1Bvc1sxXSA+PSAwICYmIG5ld1Bvc1sxXSA8PSA5KVxuICAgICAgcmV0dXJuIHJlbmRlckF0dGFja1AyKHAxLCBwMiwgbmV3UG9zWzBdLCBuZXdQb3NbMV0sIHBsYXllckJvYXJkLCBlbmVteUJvYXJkKTtcbiAgfSBlbHNlIGlmIChzZWNvbmRIaXRQb3MubGVuZ3RoICE9PSAwICYmIHN0YXR1cyAmJiAhd2FzSGl0KSB7XG4gICAgbGFzdEhpdFBvcyA9IGZpcnN0SGl0UG9zO1xuICAgIHNlY29uZEhpdFBvcyA9IFtdO1xuICAgIGxldCBuZXdQb3M7XG4gICAgaWYgKGF0dGFja0RpcmVjdGlvbiA9PT0gXCJ1cFwiKSBuZXdQb3MgPSBhdHRhY2tUb3dhcmRzKFwiZG93blwiKTtcbiAgICBpZiAoYXR0YWNrRGlyZWN0aW9uID09PSBcImRvd25cIikgbmV3UG9zID0gYXR0YWNrVG93YXJkcyhcInVwXCIpO1xuICAgIGlmIChhdHRhY2tEaXJlY3Rpb24gPT09IFwicmlnaHRcIikgbmV3UG9zID0gYXR0YWNrVG93YXJkcyhcImxlZnRcIik7XG4gICAgaWYgKGF0dGFja0RpcmVjdGlvbiA9PT0gXCJsZWZ0XCIpIG5ld1BvcyA9IGF0dGFja1Rvd2FyZHMoXCJyaWdodFwiKTtcbiAgICBpZiAobmV3UG9zWzBdID49IDAgJiYgbmV3UG9zWzBdIDw9IDkgJiYgbmV3UG9zWzFdID49IDAgJiYgbmV3UG9zWzFdIDw9IDkpXG4gICAgICByZXR1cm4gcmVuZGVyQXR0YWNrUDIocDEsIHAyLCBuZXdQb3NbMF0sIG5ld1Bvc1sxXSwgcGxheWVyQm9hcmQsIGVuZW15Qm9hcmQpO1xuICB9IGVsc2UgaWYgKHN0YXR1cykge1xuICAgIGlmIChzdXJyb3VuZGluZ1Bvcy5sZW5ndGggPT0gMClcbiAgICAgIHJlZ2lzdGVyU3Vycm91bmRpbmdQb3MobGFzdEhpdFBvc1swXSwgbGFzdEhpdFBvc1sxXSk7XG4gICAgaWYgKHN1cnJvdW5kaW5nUG9zLmxlbmd0aCA9PSAwICYmIHN0YXR1cyA9PSB0cnVlKVxuICAgICAgcmVnaXN0ZXJTdXJyb3VuZGluZ1BvcyhmaXJzdEhpdFBvc1swXSwgZmlyc3RIaXRQb3NbMV0pO1xuICAgIGNvbnN0IG5ld1BvcyA9IHN1cnJvdW5kaW5nUG9zLnBvcCgpO1xuICAgIHJldHVybiByZW5kZXJBdHRhY2tQMihwMSwgcDIsIG5ld1Bvc1swXSwgbmV3UG9zWzFdLCBwbGF5ZXJCb2FyZCwgZW5lbXlCb2FyZCk7XG4gIH1cbn1cbi8vIGdldCBwb3Mgb2YgYXR0YWNrIGJhc2VkIG9uIGRpcmVjdGlvblxuZnVuY3Rpb24gYXR0YWNrVG93YXJkcyhkaXIpIHtcbiAgaWYgKGRpciA9PT0gXCJsZWZ0XCIpIHtcbiAgICBhdHRhY2tEaXJlY3Rpb24gPSBcImxlZnRcIjtcbiAgICByZXR1cm4gW2xhc3RIaXRQb3NbMF0sIGxhc3RIaXRQb3NbMV0gLSAxXTtcbiAgfVxuICBpZiAoZGlyID09PSBcInJpZ2h0XCIpIHtcbiAgICBhdHRhY2tEaXJlY3Rpb24gPSBcInJpZ2h0XCI7XG4gICAgcmV0dXJuIFtsYXN0SGl0UG9zWzBdLCBsYXN0SGl0UG9zWzFdICsgMV07XG4gIH1cbiAgaWYgKGRpciA9PT0gXCJkb3duXCIpIHtcbiAgICBhdHRhY2tEaXJlY3Rpb24gPSBcImRvd25cIjtcbiAgICByZXR1cm4gW2xhc3RIaXRQb3NbMF0gKyAxLCBsYXN0SGl0UG9zWzFdXTtcbiAgfVxuICBpZiAoZGlyID09PSBcInVwXCIpIHtcbiAgICBhdHRhY2tEaXJlY3Rpb24gPSBcInVwXCI7XG4gICAgcmV0dXJuIFtsYXN0SGl0UG9zWzBdIC0gMSwgbGFzdEhpdFBvc1sxXV07XG4gIH1cbn1cblxuZXhwb3J0IHsgYWlQbGF5LCBnZXRXYXNIaXQsIHNldFdhc0hpdCwgbGFzdEhpdFBvcywgc3Vycm91bmRpbmdQb3MgfTtcblxuIiwiaW1wb3J0IGNyZWF0ZUdhbWVCb2FyZCBmcm9tIFwiLi9nYW1lYm9hcmQvZ2FtZWJvYXJkXCJcbmltcG9ydCBjcmVhdGVTaGlwIGZyb20gXCIuL3NoaXAvc2hpcFwiXG5pbXBvcnQgeyBhaVBsYXksIGdldFdhc0hpdCwgc2V0V2FzSGl0LCBzdXJyb3VuZGluZ1BvcyB9IGZyb20gXCIuL2JvdFwiO1xuXG5jb25zdCByZW5kZXJBdHRhY2tzID0gKHBsYXllciwgY29sdW1uLCByb3csIGVuZW15Qm9hcmQpID0+IHtcbiAgICBjb25zdCBjZWxsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgYC4ke3BsYXllcn0tYm9hcmQgPiAuY2VsbFtjb2x1bW49JyR7Y29sdW1ufSddW3Jvdz0nJHtyb3d9J11gXG4gICAgKVxuXG4gICAgaWYoZW5lbXlCb2FyZC5nZXRMb2NhdGlvbihjb2x1bW4sIHJvdyk/LmlzU2hpcCl7XG5cbiAgICAgICAgZW5lbXlCb2FyZC5nZXRMb2NhdGlvbihjb2x1bW4sIHJvdykuZG9tVGFyZ2V0cy5wdXNoKGNlbGwpXG4gICAgICAgIGlmKGVuZW15Qm9hcmQuZ2V0TG9jYXRpb24oY29sdW1uLCByb3cpLmlzU3VuaygpKXtcblxuICAgICAgICAgICAgZW5lbXlCb2FyZC5nZXRMb2NhdGlvbihjb2x1bW4sIHJvdykuZG9tVGFyZ2V0cy5mb3JFYWNoKChlKSA9PiBlLmNsYXNzTGlzdC5hZGQoJ3N1bmsnKSlcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGxvY2F0aW9uID0gZW5lbXlCb2FyZC5nZXRMb2NhdGlvbihjb2x1bW4sIHJvdylcbiAgICBpZiAobG9jYXRpb24uaXNTaGlwKSB7XG4gICAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZCgnaGl0JylcbiAgICB9IGVsc2Uge1xuICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoJ21pc3MnKVxuICAgIH1cblxufVxuXG5jb25zdCBoYW5kbGVBdHRhY2sgPSAoY29sdW1uLCByb3csIGVuZW15Qm9hcmQsIHBsYXllcikgPT5cbiAgICBwbGF5ZXIuYXR0YWNrKGNvbHVtbiwgcm93LCBlbmVteUJvYXJkKVxuXG5jb25zdCBhdHRhY2tFbmVteUNlbGwgPSBhc3luYyAoY29sdW1uLCByb3csIGVuZW15Qm9hcmQsIHBsYXllckJvYXJkLCBwbGF5ZXIsIGVuZW15KSA9PiB7XG5cblxuICAgIGhhbmRsZUF0dGFjayhjb2x1bW4sIHJvdywgZW5lbXlCb2FyZCwgcGxheWVyKVxuICAgIHJlbmRlckF0dGFja3MoJ2VuZW15JywgY29sdW1uLCByb3csIGVuZW15Qm9hcmQpXG4gICAgYXdhaXQgZGVsYXkoNzAwKVxuICAgIHJldHVybiBlbmVteUJvYXJkLmNoZWNrSWZBbGxTaGlwc0hhdmVTdW5rKCkgPyBjaGVja0lmR2FtZU92ZXIocGxheWVyQm9hcmQsIGVuZW15Qm9hcmQpIDogYWlQbGF5KGZhbHNlLCBwbGF5ZXIsIGVuZW15LCB1bmRlZmluZWQsIHBsYXllckJvYXJkLCBlbmVteUJvYXJkKVxufVxuXG5jb25zdCBpc1NwYWNlQXJvdW5kSGl0ID0gKGNvbHVtbiwgcm93LCBwbGF5ZXJCb2FyZCkgPT4ge1xuXG4gICAgY29uc3QgbmV4dENvbHVtbiA9IHBsYXllckJvYXJkLmdldExvY2F0aW9uKGNvbHVtbiArIDEsIHJvdylcbiAgICBjb25zdCBwcmV2aW91c0NvbHVtbiA9IHBsYXllckJvYXJkLmdldExvY2F0aW9uKGNvbHVtbiAtIDEsIHJvdylcbiAgICBjb25zdCBuZXh0Um93ID0gcGxheWVyQm9hcmQuZ2V0TG9jYXRpb24oY29sdW1uLCByb3cgKyAxKVxuICAgIGNvbnN0IHByZXZpb3VzUm93ID0gcGxheWVyQm9hcmQuZ2V0TG9jYXRpb24oY29sdW1uLCByb3cgLSAxKVxuXG4gICAgY29uc3Qgc3BhY2VzSGl0ID0gW11cblxuICAgIGlmKG5leHRDb2x1bW4gJiYgIW5leHRDb2x1bW4uaGFzQmVlbkhpdCl7XG4gICAgICAgIHNwYWNlc0hpdC5wdXNoKG5leHRDb2x1bW4pXG4gICAgfVxuICAgIGlmKHByZXZpb3VzQ29sdW1uICYmICFwcmV2aW91c0NvbHVtbi5oYXNCZWVuSGl0KXtcbiAgICAgICAgc3BhY2VzSGl0LnB1c2gocHJldmlvdXNDb2x1bW4pXG4gICAgfVxuICAgIGlmKG5leHRSb3cgJiYgIW5leHRSb3cuaGFzQmVlbkhpdCl7XG4gICAgICAgIHNwYWNlc0hpdC5wdXNoKG5leHRSb3cpXG4gICAgfVxuICAgIGlmKHByZXZpb3VzUm93ICYmICFwcmV2aW91c1Jvdy5oYXNCZWVuSGl0KXtcbiAgICAgICAgc3BhY2VzSGl0LnB1c2gocHJldmlvdXNSb3cpXG4gICAgfVxuXG4gICAgcmV0dXJuIHNwYWNlc0hpdFxuXG59XG5cbmNvbnN0IHJhbmRvbURpcmVjdGlvbkF0dGFjayA9IChjb2x1bW4sIHJvdywgcGxheWVyQm9hcmQpID0+IHtcblxuICAgIGNvbnN0IHNwYWNlc0hpdCA9IGlzU3BhY2VBcm91bmRIaXQoY29sdW1uLCByb3csIHBsYXllckJvYXJkKVxuXG4gICAgY29uc3QgcmFuZG9tSW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBzcGFjZXNIaXQubGVuZ3RoKVxuXG4gICAgaWYoIXNwYWNlc0hpdFtyYW5kb21JbmRleF0pIHJldHVybiByYW5kb21EaXJlY3Rpb25BdHRhY2soY29sdW1uLCByb3cgLCBwbGF5ZXJCb2FyZClcblxuICAgIHJldHVybiBzcGFjZXNIaXRbcmFuZG9tSW5kZXhdXG59XG5cbmNvbnN0IGlzUmFuZG9tQ29sdW1uR3JlYXRlclRoYW5DdXJyZW50Q29sdW1uID0gKGNvbHVtbiwgcmFuZG9tQ29sdW1uKSA9PiBcbiAgICByYW5kb21Db2x1bW4gPiBjb2x1bW5cblxuY29uc3QgaXNSYW5kb21Sb3dHcmVhdGVyVGhhbkN1cnJlbnRDb2x1bW4gPSAocm93LCByYW5kb21Sb3cpID0+IFxuICAgIHJhbmRvbVJvdyA+IHJvd1xuXG5jb25zdCBsaXN0T2ZSYW5kb21Db29yZGluYXRlcyA9IChjb2x1bW4sIHJvdywgcGxheWVyQm9hcmQpID0+IHtcblxuICAgICAgICBjb25zdCBsb2NhdGlvblByb3RvdHlwZSA9IHtcbiAgICAgICAgICAgIGxvY2F0aW9uKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBwbGF5ZXJCb2FyZC5nZXRMb2NhdGlvbih0aGlzLmNvbHVtbiwgdGhpcy5yb3cpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB0b3AgPSBPYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUobG9jYXRpb25Qcm90b3R5cGUpLCB7XG4gICAgICAgICAgICBjb2x1bW4sXG4gICAgICAgICAgICByb3c6IHJvdyAtIDEsXG4gICAgICAgIH0pXG4gICAgICAgIGNvbnN0IGJvdHRvbSA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShsb2NhdGlvblByb3RvdHlwZSksIHtcbiAgICAgICAgICAgIGNvbHVtbixcbiAgICAgICAgICAgIHJvdzogcm93ICsgMSxcbiAgICAgICAgfSlcbiAgICAgICAgY29uc3QgcmlnaHQgPSBPYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUobG9jYXRpb25Qcm90b3R5cGUpLCB7XG4gICAgICAgICAgICBjb2x1bW46IGNvbHVtbiArIDEsXG4gICAgICAgICAgICByb3csXG4gICAgICAgIH0pXG4gICAgICAgIGNvbnN0IGxlZnQgPSBPYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUobG9jYXRpb25Qcm90b3R5cGUpLCB7XG4gICAgICAgICAgICBjb2x1bW46IGNvbHVtbiAtIDEsXG4gICAgICAgICAgICByb3csXG4gICAgICAgIH0pXG4gICAgICAgIGNvbnN0IGRpcmVjdGlvbnMgPSBbXVxuXG4gICAgICAgIGRpcmVjdGlvbnMucHVzaCh0b3ApXG4gICAgICAgIGRpcmVjdGlvbnMucHVzaChib3R0b20pXG4gICAgICAgIGRpcmVjdGlvbnMucHVzaChyaWdodClcbiAgICAgICAgZGlyZWN0aW9ucy5wdXNoKGxlZnQpXG5cbiAgICAgICAgcmV0dXJuIGRpcmVjdGlvbnNcbn1cblxuLy8gcmVuZGVycyBhdHRhY2sgZm9yIHAyIChBSSlcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZW5kZXJBdHRhY2tQMihwMSwgcDIsIHBvczEsIHBvczIsIHBsYXllckJvYXJkLCBlbmVteUJvYXJkKSB7XG4gIGxldCBpc1N1bmsgPSBmYWxzZTtcbiAgY29uc3QgZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgIGAucGxheWVyLWJvYXJkID4gLmNlbGxbY29sdW1uPScke3BvczF9J11bcm93PScke3BvczJ9J11gXG4gICAgKVxuXG4gIGNvbnN0IGF0dGFjayA9IHAyLmF0dGFjayhwb3MxLCBwb3MyLCBwbGF5ZXJCb2FyZCk7XG5cbiAgICBjb25zb2xlLmxvZyhwbGF5ZXJCb2FyZC5nZXRMb2NhdGlvbihwb3MxLCBwb3MyKSlcbiAgaWYgKGF0dGFjayA9PT0gXCJZb3UgaGF2ZSBhbHJlYWR5IGhpdCB0aGlzIHNwb3QhXCIpIHtcbiAgICBjb25zdCByZXBlYXQgPSB0cnVlO1xuICAgIGFpUGxheShyZXBlYXQsIHAxLCBwMiwgdW5kZWZpbmVkLCBwbGF5ZXJCb2FyZCwgZW5lbXlCb2FyZCk7XG4gIH1cbiAgaWYgKGF0dGFjayA9PT0gXCJJdCdzIGEgaGl0IVwiKSB7XG4gICAgc2V0V2FzSGl0KGZhbHNlKTtcbiAgICBlLmNsYXNzTGlzdC5hZGQoXCJtaXNzXCIpO1xuICB9XG4gIGlmIChhdHRhY2sgPT09IFwiWW91IGhpdCBhIHNoaXAhXCIpIHtcbiAgICBzZXRXYXNIaXQodHJ1ZSwgdHJ1ZSwgcG9zMSwgcG9zMik7XG4gICAgZS5jbGFzc0xpc3QuYWRkKFwiaGl0XCIpO1xuICAgIHBsYXllckJvYXJkLmdldExvY2F0aW9uKHBvczEsIHBvczIpLmRvbVRhcmdldHMucHVzaChlKVxuICAgIC8vIGlmIHNoaXAgaXMgc3VuaywgYWRkIFwic3Vua1wiIGNsYXNzXG4gICAgaWYgKHBsYXllckJvYXJkLmdldExvY2F0aW9uKHBvczEsIHBvczIpLmlzU3VuaygpKSB7XG4gICAgICBwbGF5ZXJCb2FyZC5nZXRMb2NhdGlvbihwb3MxLCBwb3MyKS5kb21UYXJnZXRzLmZvckVhY2goKGUpID0+XG4gICAgICAgIGUuY2xhc3NMaXN0LmFkZChcInN1bmtcIilcbiAgICAgICk7XG4gICAgICBpc1N1bmsgPSB0cnVlO1xuICAgICAgaWYgKHBsYXllckJvYXJkLmNoZWNrSWZBbGxTaGlwc0hhdmVTdW5rKCkgPT09IHRydWUpIHJldHVybiBjaGVja0lmR2FtZU92ZXIocGxheWVyQm9hcmQsIGVuZW15Qm9hcmQpO1xuICAgIH1cbiAgICBhd2FpdCBkZWxheSgxMDAwKVxuICAgIHJldHVybiBhaVBsYXkoZmFsc2UsIHAxLCBwMiwgaXNTdW5rLCBwbGF5ZXJCb2FyZCwgZW5lbXlCb2FyZCk7XG4gIH1cblxuICAvLyBwMS5pc1R1cm4ocDIpOyAvLyBnaXZlcyB0dXJuIHRvIFAxXG59XG4vLyBodHRwczovL2pzbWFuaWZlc3QuY29tL3RoZS1wdWJsaXNoLXN1YnNjcmliZS1wYXR0ZXJuLWluLWphdmFzY3JpcHQvXG5cbmV4cG9ydCBjb25zdCBwdWJTdWIgPSAoKSA9PiB7XG4gICAgY29uc3Qgc3Vic2NyaWJlcnMgPSB7fVxuXG4gICAgZnVuY3Rpb24gcHVibGlzaChldmVudE5hbWUsIGRhdGEpIHtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHN1YnNjcmliZXJzW2V2ZW50TmFtZV0pKSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICBzdWJzY3JpYmVyc1tldmVudE5hbWVdLmZvckVhY2goKGNhbGxiYWNrKSA9PiB7XG4gICAgICAgICAgICBjYWxsYmFjayhkYXRhKVxuICAgICAgICB9KVxuICAgIH1cbiAgICBmdW5jdGlvbiBzdWJzY3JpYmUoZXZlbnROYW1lLCBjYWxsYmFjaykge1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoc3Vic2NyaWJlW2V2ZW50TmFtZV0pKSB7XG4gICAgICAgICAgICBzdWJzY3JpYmVyc1tldmVudE5hbWVdID0gW11cbiAgICAgICAgfVxuICAgICAgICBzdWJzY3JpYmVyc1tldmVudE5hbWVdLnB1c2goY2FsbGJhY2spXG4gICAgICAgIGNvbnN0IGluZGV4ID0gc3Vic2NyaWJlcnNbZXZlbnROYW1lXS5sZW5ndGggLSAxXG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlKCkge1xuICAgICAgICAgICAgICAgIHN1YnNjcmliZXJzW2V2ZW50TmFtZV0uc3BsaWNlKGluZGV4LCAxKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIHB1Ymxpc2gsXG4gICAgICAgIHN1YnNjcmliZSxcbiAgICB9XG59XG5cbi8vIGNyZWF0ZXMgYSBkZWxheSB0byBiZSB1c2VkIGluIGFuIGFzeW5jIGZ1bmN0aW9uXG5mdW5jdGlvbiBkZWxheShkZWxheUluTXMpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICByZXNvbHZlKDIpO1xuICAgIH0sIGRlbGF5SW5Ncyk7XG4gIH0pO1xufVxuXG5leHBvcnQgY29uc3QgcmVuZGVyUGxheWVyU2hpcHMgPSAoeyBnZXRMb2NhdGlvbiB9KSA9PiB7XG4gICAgY29uc3QgcGxheWVyQm9hcmRBcmVhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZGl2LnBsYXllci1ib2FyZCcpXG5cbiAgICBmb3IgKGxldCBjb2x1bW4gPSAwOyBjb2x1bW4gPCAxMDsgY29sdW1uICs9IDEpIHtcbiAgICAgICAgZm9yIChsZXQgcm93ID0gMDsgcm93IDwgMTA7IHJvdyArPSAxKSB7XG4gICAgICAgICAgICBjb25zdCBjZWxsID0gcGxheWVyQm9hcmRBcmVhLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgICAgICAgICAgYC5jZWxsOm50aC1jaGlsZCgke3JvdyAqIDEwICsgY29sdW1uICsgMX0pYFxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgY2VsbC5zZXRBdHRyaWJ1dGUoJ2NvbHVtbicsIGNvbHVtbilcbiAgICAgICAgICAgIGNlbGwuc2V0QXR0cmlidXRlKCdyb3cnLCByb3cpXG4gICAgICAgICAgICBjb25zdCBsb2NhdGlvbiA9IGdldExvY2F0aW9uKGNvbHVtbiwgcm93KVxuICAgICAgICAgICAgaWYgKGxvY2F0aW9uLmlzU2hpcCkge1xuICAgICAgICAgICAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZCgnc2hpcCcpXG4gICAgICAgICAgICAgICAgY2VsbC5zZXRBdHRyaWJ1dGUoJ3NoaXAtbmFtZScsIGxvY2F0aW9uLmdldE5hbWUoKSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cblxuY29uc3QgY2hlY2tJZkdhbWVPdmVyID0gKHBsYXllckJvYXJkLCBlbmVteUJvYXJkKSA9PiB7XG4gICAgaWYgKHBsYXllckJvYXJkLmNoZWNrSWZBbGxTaGlwc0hhdmVTdW5rKCkpIHtcbiAgICAgICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwnKVxuICAgICAgICBjb25zdCBtb2RhbFdpbm5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC1jb250ZW50ID4gcCcpXG4gICAgICAgIGNvbnN0IHBsYXlBZ2FpbkJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgICAgICAnLm1vZGFsLWNvbnRlbnQgPiBidXR0b24nXG4gICAgICAgIClcblxuICAgICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJ1xuICAgICAgICBwbGF5QWdhaW5CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKVxuICAgICAgICB9KVxuXG4gICAgICAgIG1vZGFsV2lubmVyLnRleHRDb250ZW50ID0gJ1lvdSBsb3NlISdcbiAgICB9XG4gICAgaWYgKGVuZW15Qm9hcmQuY2hlY2tJZkFsbFNoaXBzSGF2ZVN1bmsoKSkge1xuICAgICAgICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbCcpXG4gICAgICAgIGNvbnN0IG1vZGFsV2lubmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLWNvbnRlbnQgPiBwJylcbiAgICAgICAgY29uc3QgcGxheUFnYWluQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgICAgICcubW9kYWwtY29udGVudCA+IGJ1dHRvbidcbiAgICAgICAgKVxuXG4gICAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snXG4gICAgICAgIG1vZGFsV2lubmVyLnRleHRDb250ZW50ID0gJ1lvdSB3aW4hJ1xuICAgICAgICBwbGF5QWdhaW5CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKVxuICAgICAgICB9KVxuICAgIH1cbn1cblxuZXhwb3J0IGNvbnN0IGFkZExpc3RlbmVyc1RvRW5lbXlCb2FyZCA9IChcbiAgICBwbGF5ZXJCb2FyZCxcbiAgICBlbmVteUJvYXJkLFxuICAgIHBsYXllcixcbiAgICBlbmVteSxcbiAgICBwc1xuKSA9PiB7XG4gICAgY29uc3QgZW5lbXlCb2FyZEFyZWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdkaXYuZW5lbXktYm9hcmQnKVxuXG4gICAgZm9yIChsZXQgY29sdW1uID0gMDsgY29sdW1uIDwgMTA7IGNvbHVtbiArPSAxKSB7XG4gICAgICAgIGZvciAobGV0IHJvdyA9IDA7IHJvdyA8IDEwOyByb3cgKz0gMSkge1xuICAgICAgICAgICAgLy8gQ3JlZGl0aW5nIGZvcm11bGEgdG8gY2FsY3VsYXRlIG50aC1jaGlsZCB1c2luZyBuZXN0ZWQgbG9vcDogaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvODg3MjY2Mi9tYXRoLXRvLWRldGVybWluZS1pdGVtLWluZGV4LWJhc2VkLW9uLWNvbC1yb3ctc2VsZWN0aW9uLWluLWdyaWRcbiAgICAgICAgICAgIGNvbnN0IGNlbGwgPSBlbmVteUJvYXJkQXJlYS5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAgICAgICAgIGAuY2VsbDpudGgtY2hpbGQoJHtyb3cgKiAxMCArIGNvbHVtbiArIDF9KWBcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIGNlbGwuc2V0QXR0cmlidXRlKCdjb2x1bW4nLCBjb2x1bW4pXG4gICAgICAgICAgICBjZWxsLnNldEF0dHJpYnV0ZSgncm93Jywgcm93KVxuXG4gICAgICAgICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgICAgICAgJ2NsaWNrJyxcbiAgICAgICAgICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHBzLnB1Ymxpc2goJ2NsaWNrJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbixcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllckJvYXJkLFxuICAgICAgICAgICAgICAgICAgICAgICAgZW5lbXlCb2FyZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllcixcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZW15LFxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgeyBvbmNlOiB0cnVlIH1cbiAgICAgICAgICAgIClcbiAgICAgICAgfVxuICAgIH1cbn1cblxuY29uc3QgY2xlYXJCb2FyZERPTSA9ICgpID0+IHtcbiAgICBjb25zdCBjZWxscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wbGF5ZXItYm9hcmQgPiAuY2VsbCcpXG5cbiAgICBjZWxscy5mb3JFYWNoKGNlbGwgPT4ge1xuICAgICAgICBjZWxsLmNsYXNzTGlzdC5yZW1vdmUoJ3NoaXAnKVxuICAgICAgICBjZWxsLmNsYXNzTGlzdC5yZW1vdmUoJ2hpdCcpXG4gICAgICAgIGNlbGwuY2xhc3NMaXN0LnJlbW92ZSgnbWlzcycpXG4gICAgfSlcblxuXG5cbn1cblxuZXhwb3J0IGNvbnN0IHJhbmRvbWl6ZUxpc3RlbmVyID0gKGdhbWVCb2FyZCkgPT4ge1xuXG4gICAgZ2FtZUJvYXJkLmNsZWFyQm9hcmQoKVxuICAgIGNsZWFyQm9hcmRET00oKVxuXG4gICAgY29uc3QgcmFuZG9tUG9zc2liaWxpdHkgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA0KVxuICAgIHN3aXRjaChyYW5kb21Qb3NzaWJpbGl0eSl7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgZ2FtZUJvYXJkLnBsYWNlU2hpcCg5LCAxLCAndmVydGljYWwnLCBjcmVhdGVTaGlwKDUpKVxuICAgICAgICBnYW1lQm9hcmQucGxhY2VTaGlwKDAsIDMsICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCgzKSlcbiAgICAgICAgZ2FtZUJvYXJkLnBsYWNlU2hpcCgzLCA2LCAnaG9yaXpvbnRhbCcsIGNyZWF0ZVNoaXAoMikpXG4gICAgICAgIGdhbWVCb2FyZC5wbGFjZVNoaXAoNiwgNSwgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDMpKVxuICAgICAgICBnYW1lQm9hcmQucGxhY2VTaGlwKDMsIDksICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCg0KSlcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgIGdhbWVCb2FyZC5wbGFjZVNoaXAoMCwgMiwgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDUpKVxuICAgICAgICBnYW1lQm9hcmQucGxhY2VTaGlwKDQsIDUsICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCgzKSlcbiAgICAgICAgZ2FtZUJvYXJkLnBsYWNlU2hpcCg4LCA3LCAnaG9yaXpvbnRhbCcsIGNyZWF0ZVNoaXAoMikpXG4gICAgICAgIGdhbWVCb2FyZC5wbGFjZVNoaXAoNSwgOSwgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDMpKVxuICAgICAgICBnYW1lQm9hcmQucGxhY2VTaGlwKDYsIDMsICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCg0KSlcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgIGdhbWVCb2FyZC5wbGFjZVNoaXAoNSwgMSwgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDUpKVxuICAgICAgICBnYW1lQm9hcmQucGxhY2VTaGlwKDMsIDMsICd2ZXJ0aWNhbCcsIGNyZWF0ZVNoaXAoMykpXG4gICAgICAgIGdhbWVCb2FyZC5wbGFjZVNoaXAoMCwgMCwgJ3ZlcnRpY2FsJywgY3JlYXRlU2hpcCgyKSlcbiAgICAgICAgZ2FtZUJvYXJkLnBsYWNlU2hpcCg2LCA1LCAnaG9yaXpvbnRhbCcsIGNyZWF0ZVNoaXAoMykpXG4gICAgICAgIGdhbWVCb2FyZC5wbGFjZVNoaXAoNSwgOSwgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDQpKVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBnYW1lQm9hcmQucGxhY2VTaGlwKDAsIDAsICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCg1KSlcbiAgICAgICAgICAgIGdhbWVCb2FyZC5wbGFjZVNoaXAoMywgNCwgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDMpKVxuICAgICAgICAgICAgZ2FtZUJvYXJkLnBsYWNlU2hpcCg2LCA3LCAnaG9yaXpvbnRhbCcsIGNyZWF0ZVNoaXAoMikpXG4gICAgICAgICAgICBnYW1lQm9hcmQucGxhY2VTaGlwKDksIDEsICd2ZXJ0aWNhbCcsIGNyZWF0ZVNoaXAoMykpXG4gICAgICAgICAgICBnYW1lQm9hcmQucGxhY2VTaGlwKDUsIDksICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCg0KSlcbiAgICAgICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIHJlbmRlclBsYXllclNoaXBzKGdhbWVCb2FyZClcblxufVxuXG5leHBvcnQgY29uc3QgYXR0YWNrID0gKHtcbiAgICBjZWxsLFxuICAgIGNvbHVtbixcbiAgICByb3csXG4gICAgcGxheWVyQm9hcmQsXG4gICAgZW5lbXlCb2FyZCxcbiAgICBwbGF5ZXIsXG4gICAgZW5lbXksXG59KSA9PiB7XG4gICAgLy8gaHVtYW4gcGxheWVyIGF0dGFja2luZyBjb21wdXRlclxuICAgIGF0dGFja0VuZW15Q2VsbChjb2x1bW4sIHJvdywgZW5lbXlCb2FyZCwgcGxheWVyQm9hcmQsIHBsYXllciwgZW5lbXkpXG4gICAgLy8gY29tcHV0ZXIgYXR0YWNraW5nIGh1bWFuXG4gICAgLy8gY29uc3QgeyBlbGVtZW50Q29sdW1uLCBlbGVtZW50Um93IH0gPSBwbGF5ZXJCb2FyZC5tYWtlUmFuZG9tQ29vcmRpbmF0ZXMoKVxuICAgIC8vIHJlbmRlckF0dGFja1AyKHBsYXllciwgZW5lbXksIGVsZW1lbnRDb2x1bW4sIGVsZW1lbnRSb3csIHBsYXllckJvYXJkLCBlbmVteUJvYXJkKVxuICAgIC8vIGFpUGxheShmYWxzZSwgcGxheWVyLCBlbmVteSwgdW5kZWZpbmVkLCBwbGF5ZXJCb2FyZCwgZW5lbXlCb2FyZClcbn1cbiIsImltcG9ydCB7IGFkZExpc3RlbmVyc1RvRW5lbXlCb2FyZCwgcmVuZGVyUGxheWVyU2hpcHMscHViU3ViLCByYW5kb21pemVMaXN0ZW5lciwgYXR0YWNrfSBmcm9tICcuL2RvbSdcblxuaW1wb3J0IGNyZWF0ZUdhbWVCb2FyZCBmcm9tICcuL2dhbWVib2FyZC9nYW1lYm9hcmQnXG5pbXBvcnQgY3JlYXRlU2hpcCBmcm9tICcuL3NoaXAvc2hpcCdcbmltcG9ydCBjcmVhdGVQbGF5ZXIgZnJvbSAnLi9wbGF5ZXIvcGxheWVyJ1xuXG5jb25zdCBwbGF5ZXJCb2FyZCA9IGNyZWF0ZUdhbWVCb2FyZCgpXG5jb25zdCBlbmVteUJvYXJkID0gY3JlYXRlR2FtZUJvYXJkKClcbmNvbnN0IHBsYXllciA9IGNyZWF0ZVBsYXllcigpXG5jb25zdCBjb21wdXRlciA9IGNyZWF0ZVBsYXllcigpXG5cbmNvbnN0IHJhbmRvbWl6ZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbi5yYW5kb21pemUnKVxuXG5yYW5kb21pemVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG5cbiAgICByYW5kb21pemVMaXN0ZW5lcihlbmVteUJvYXJkKVxufSlcblxuZW5lbXlCb2FyZC5wbGFjZVNoaXAoMCwgMCwgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDUpKVxuZW5lbXlCb2FyZC5wbGFjZVNoaXAoMywgNCwgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDMpKVxuZW5lbXlCb2FyZC5wbGFjZVNoaXAoNiwgNywgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDIpKVxuZW5lbXlCb2FyZC5wbGFjZVNoaXAoOSwgMSwgJ3ZlcnRpY2FsJywgY3JlYXRlU2hpcCgzKSlcbmVuZW15Qm9hcmQucGxhY2VTaGlwKDUsIDksICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCg0KSlcblxuY29uc3QgcHMgPSBwdWJTdWIoKVxuXG5hZGRMaXN0ZW5lcnNUb0VuZW15Qm9hcmQocGxheWVyQm9hcmQsIGVuZW15Qm9hcmQsIHBsYXllciwgY29tcHV0ZXIsIHBzKVxuXG5wcy5zdWJzY3JpYmUoJ2NsaWNrJywgYXR0YWNrKVxuXG5yZW5kZXJQbGF5ZXJTaGlwcyhwbGF5ZXJCb2FyZCkiXSwibmFtZXMiOlsiY3JlYXRlU2hpcCIsIm1vZHVsZSIsImV4cG9ydHMiLCJlbXB0eUNlbGwiLCJoYXNCZWVuSGl0IiwiaXNTaGlwIiwib2ZmTGltaXRzIiwiaW5pdGlhbGl6ZUJvYXJkIiwiZ2FtZUJvYXJkIiwiQXJyYXkiLCJmaWxsIiwibWFwIiwiY29sdW1uIiwicm93Iiwic2hpcHMiLCJnZXRMb2NhdGlvbiIsInNldExvY2F0aW9uIiwic2hpcCIsIk9iamVjdCIsImFzc2lnbiIsImNyZWF0ZU9mZkxpbWl0TG9jYXRpb24iLCJ1bmRlZmluZWQiLCJsb2NhdGlvbiIsImFkZE9mZkxpbWl0QXJlYUZvclNoaXBzIiwiY2hlY2tJZkxvY2F0aW9uSXNBU2hpcE9yT2ZmTGltaXRzIiwiZGlyZWN0aW9uIiwic2hpcExlbmd0aCIsImkiLCJwbGFjZVNoaXAiLCJnZXRMZW5ndGgiLCJsZW5ndGgiLCJjaGVja0lmUm93Q29vcmRpbmF0ZUlzVmFsaWQiLCJwb3NpdGlvbiIsImFkZE9mZkxpbWl0QXJlYUZvclZlcnRpY2FsbHlQb3NpdGlvbmVkU2hpcCIsImNoZWNrSWZDb2x1bW5Db29yZGluYXRlSXNWYWxpZCIsImFkZE9mZkxpbWl0QXJlYUZvckhvcml6b250YWxseVBvc2l0aW9uZWRTaGlwIiwibWFrZVJhbmRvbUNvb3JkaW5hdGVzIiwicmFuZG9tRGlyZWN0aW9uIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwicmFuZG9tTG9jYXRpb24iLCJmbGF0dGVuZWRHYW1lQm9hcmQiLCJmbGF0IiwiZm9yRWFjaCIsImVsZW1lbnQiLCJhdmFpbGFiaWxpdHkiLCJhdmFpbGFibGVTcGFjZXMiLCJlbGVtZW50Q29sdW1uIiwiZWxlbWVudFJvdyIsInJhbmRvbVNoaXAiLCJwb3MxIiwicG9zMiIsImRpciIsInJvdW5kIiwiY2xlYXJCb2FyZCIsImNoZWNrSWZPZmZMaW1pdFpvbmVXYXNDb3JyZWN0bHlJbXBsZW1lbnRlZCIsImZpbHRlciIsInJlY2VpdmVBdHRhY2siLCJjaGVja0lmQWxsU2hpcHNIYXZlU3VuayIsImhhdmVBbGxTaGlwc1N1bmsiLCJqIiwiaXNTdW5rIiwicmFuZG9tbHlQbGFjZVNoaXBzIiwic2hpcERldGFpbHMiLCJyYW5kb21Db2x1bW4iLCJyYW5kb21Sb3ciLCJwdXNoIiwicmFuZG9tRmxlZXQiLCJuYW1lIiwiZ2V0TmFtZSIsImF0dGFjayIsImdldFN0YXR1cyIsImluY2x1ZGVzIiwiaGl0IiwicmFuZG9tUG9zIiwic3RhdHVzIiwiZXZlcnkiLCJkb21UYXJnZXRzIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsIm4iLCJnZXR0ZXIiLCJfX2VzTW9kdWxlIiwiZCIsImEiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJhdHRhY2tEaXJlY3Rpb24iLCJ3YXNIaXQiLCJsYXN0SGl0UG9zIiwiZmlyc3RIaXRQb3MiLCJzZWNvbmRIaXRQb3MiLCJzdXJyb3VuZGluZ1BvcyIsInNldFdhc0hpdCIsInZhbHVlIiwic3RhdCIsInJlZ2lzdGVyU3Vycm91bmRpbmdQb3MiLCJhaVBsYXkiLCJyZXBlYXQiLCJwMSIsInAyIiwicGxheWVyQm9hcmQiLCJlbmVteUJvYXJkIiwicG9zIiwicmVuZGVyQXR0YWNrUDIiLCJuZXdQb3MiLCJhdHRhY2tUb3dhcmRzIiwicG9wIiwiYXN5bmMiLCJlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29uc29sZSIsImxvZyIsImNsYXNzTGlzdCIsImFkZCIsImNoZWNrSWZHYW1lT3ZlciIsImRlbGF5IiwiZGVsYXlJbk1zIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwicmVuZGVyUGxheWVyU2hpcHMiLCJwbGF5ZXJCb2FyZEFyZWEiLCJjZWxsIiwic2V0QXR0cmlidXRlIiwibW9kYWwiLCJtb2RhbFdpbm5lciIsInBsYXlBZ2FpbkJ1dHRvbiIsInN0eWxlIiwiZGlzcGxheSIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZWxvYWQiLCJ0ZXh0Q29udGVudCIsImNvbXB1dGVyIiwicXVlcnlTZWxlY3RvckFsbCIsInJlbW92ZSIsInJhbmRvbWl6ZUxpc3RlbmVyIiwicHMiLCJzdWJzY3JpYmVycyIsInB1Ymxpc2giLCJldmVudE5hbWUiLCJkYXRhIiwiaXNBcnJheSIsImNhbGxiYWNrIiwic3Vic2NyaWJlIiwiaW5kZXgiLCJ1bnN1YnNjcmliZSIsInNwbGljZSIsInB1YlN1YiIsInBsYXllciIsImVuZW15IiwiZW5lbXlCb2FyZEFyZWEiLCJvbmNlIiwiYWRkTGlzdGVuZXJzVG9FbmVteUJvYXJkIiwiaGFuZGxlQXR0YWNrIiwicmVuZGVyQXR0YWNrcyIsImF0dGFja0VuZW15Q2VsbCJdLCJzb3VyY2VSb290IjoiIn0=