(()=>{var t={653:(t,o,e)=>{const r=e(585),i=()=>{const t=Array(10).fill({hasBeenHit:!1,isShip:!1,offLimits:!1}).map((()=>Array(10).fill({hasBeenHit:!1,isShip:!1,offLimits:!1}))),o=[r(5),r(4),r(3),r(3),r(2)],e=(o,e)=>t[o][e],i=(o,e,r)=>{const i=t[o][e-1],n=t[o-1][e],a=t[o+1][e-1],s=t[o-1][e-1],l=t[o+1][e+r],f=t[o-1][e+r];i&&(i.offLimits=!0),n&&(n.offLimits=!0),a&&(a.offLimits=!0),s&&(s.offLimits=!0),l&&(l.offLimits=!0),f&&(f.offLimits=!0)},n=(o,e,r,n)=>{const a=n.getLength();if("vertical"===r){if(e+a<=10){for(let r=0;r<a;r+=1)t[o][e+r]=n;return((o,e,r)=>{const n=t[o][e+r];i(o,e,r),n&&(n.offLimits=!0)})(o,e,a),!0}}else if("horizontal"===r&&o+a<=10){for(let r=0;r<a;r+=1)t[o+r][e]=n;return((o,e,r)=>{const n=t[o+r][e];i(o,e,r),n&&(n.offLimits=!0)})(o,e,a),!0}return!1},a=()=>{const t=0===Math.floor(2*Math.random())?"vertical":"horizontal";return{randomColumn:Math.floor(10*Math.random()),randomRow:Math.floor(10*Math.random()),randomDirection:t}};return{getShotLocation:e,receiveAttack:(o,e)=>{t[o][e].hasBeenHit=!0},checkIfAllShipsHaveSunk:()=>t.flat().every((t=>!1===t.isShip||!0===t.isShip&&!0===t.hasBeenHit&&t.getStatus().every((t=>"hit"===t)))),placeShip:n,randomlyPlaceShips:()=>{const t=[];for(let r=0;r<o.length;r+=1){const{randomColumn:i,randomRow:s,randomDirection:l}=a(),f=o[r],c=e(i,s);!0===c.isShip&&!0===c.offLimits&&!1===n(i,s,l,f)?r-=1:t.push({randomColumn:i,randomRow:s,randomDirection:l})}return t}}};i().randomlyPlaceShips(),t.exports=i},585:t=>{t.exports=t=>{const o=Array(t).fill("unhit");return{getLength:()=>o.length,isSunk:()=>o.every((t=>"hit"===t)),hit:e=>{e<t&&(o[e]="hit")},getStatus:()=>o,isShip:!0}}}},o={};function e(r){var i=o[r];if(void 0!==i)return i.exports;var n=o[r]={exports:{}};return t[r](n,n.exports,e),n.exports}e.n=t=>{var o=t&&t.__esModule?()=>t.default:()=>t;return e.d(o,{a:o}),o},e.d=(t,o)=>{for(var r in o)e.o(o,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:o[r]})},e.o=(t,o)=>Object.prototype.hasOwnProperty.call(t,o),(()=>{"use strict";var t=e(653);const o=e.n(t)()();o.randomlyPlaceShips(),(t=>{const o=document.querySelector("div.player-board");for(let e=0;e<10;e+=1)for(let r=0;r<10;r+=1){const i=document.createElement("div");i.classList.add("cell"),t.getShotLocation(e,r).isShip&&i.classList.add("ship"),o.appendChild(i)}})(o)})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixFQUFTZ0IsSUFDNUVFLE9BQU9DLGVBQWVuQixFQUFTZ0IsRUFBSyxDQUFFSSxZQUFZLEVBQU1DLElBQUtOLEVBQVdDLE1DSjNFWCxFQUFvQlksRUFBSSxDQUFDSyxFQUFLQyxJQUFVTCxPQUFPTSxVQUFVQyxlQUFlQyxLQUFLSixFQUFLQyxHLGdDQ0dsRixNQUFNSSxFLE1BQWMsS0FDcEJBLEVBQVlqQyxxQkNKYyxDQUFDaUMsSUFDdkIsTUFBTUMsRUFBa0JDLFNBQVNDLGNBQWMsb0JBRS9DLElBQUssSUFBSXZELEVBQUksRUFBR0EsRUFBSSxHQUFJQSxHQUFLLEVBQ3pCLElBQUssSUFBSXdELEVBQUksRUFBR0EsRUFBSSxHQUFJQSxHQUFLLEVBQUcsQ0FDNUIsTUFBTUMsRUFBT0gsU0FBU0ksY0FBYyxPQUNwQ0QsRUFBS0UsVUFBVUMsSUFBSSxRQUNmUixFQUFZbkUsZ0JBQWdCZSxFQUFHd0QsR0FBRzNFLFFBQ2xDNEUsRUFBS0UsVUFBVUMsSUFBSSxRQUV2QlAsRUFBZ0JRLFlBQVlKLEtESnhDLENBQWtCTCxJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvLi9zcmMvZ2FtZWJvYXJkL2dhbWVib2FyZC5qcyIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC8uL3NyYy9zaGlwL3NoaXAuanMiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3RvcC1iYXR0bGVzaGlwL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvLi9zcmMvZG9tLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC1leHByZXNzaW9ucyAqL1xuY29uc3QgY3JlYXRlU2hpcCA9IHJlcXVpcmUoJy4uL3NoaXAvc2hpcCcpXG5cbi8qIGVzbGludC1kaXNhYmxlIG5vLXBhcmFtLXJlYXNzaWduICovXG5jb25zdCBjcmVhdGVHYW1lQm9hcmQgPSAoKSA9PiB7XG4gICAgY29uc3QgZ2FtZUJvYXJkID0gQXJyYXkoMTApXG4gICAgICAgIC5maWxsKHsgaGFzQmVlbkhpdDogZmFsc2UsIGlzU2hpcDogZmFsc2UsIG9mZkxpbWl0czogZmFsc2UgfSlcbiAgICAgICAgLm1hcCgoKSA9PlxuICAgICAgICAgICAgQXJyYXkoMTApLmZpbGwoe1xuICAgICAgICAgICAgICAgIGhhc0JlZW5IaXQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGlzU2hpcDogZmFsc2UsXG4gICAgICAgICAgICAgICAgb2ZmTGltaXRzOiBmYWxzZSxcbiAgICAgICAgICAgIH0pXG4gICAgICAgIClcblxuICAgIGNvbnN0IHNoaXBzID0gW1xuICAgICAgICBjcmVhdGVTaGlwKDUpLFxuICAgICAgICBjcmVhdGVTaGlwKDQpLFxuICAgICAgICBjcmVhdGVTaGlwKDMpLFxuICAgICAgICBjcmVhdGVTaGlwKDMpLFxuICAgICAgICBjcmVhdGVTaGlwKDIpLFxuICAgIF1cblxuICAgIGNvbnN0IGNoZWNrSWZBbGxTaGlwc0hhdmVTdW5rID0gKCkgPT5cbiAgICAgICAgZ2FtZUJvYXJkLmZsYXQoKS5ldmVyeShcbiAgICAgICAgICAgIChwb3NpdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChwb3NpdGlvbi5pc1NoaXAgPT09IGZhbHNlKSByZXR1cm4gdHJ1ZVxuICAgICAgICAgICAgICAgIGlmIChwb3NpdGlvbi5pc1NoaXAgPT09IHRydWUgJiYgcG9zaXRpb24uaGFzQmVlbkhpdCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcG9zaXRpb24uZ2V0U3RhdHVzKCkuZXZlcnkoKHVuaXQpID0+IHVuaXQgPT09ICdoaXQnKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gKHBvc2l0aW9uLmlzU2hpcCA9PT0gZmFsc2UpIHx8XG4gICAgICAgICAgICAvLyAocG9zaXRpb24uaXNTaGlwID09PSB0cnVlICYmIHBvc2l0aW9uLmhhc0JlZW5IaXQgPT09IHRydWUpXG4gICAgICAgIClcblxuICAgIGNvbnN0IGdldFNob3RMb2NhdGlvbiA9IChjb2x1bW4sIHJvdykgPT4gZ2FtZUJvYXJkW2NvbHVtbl1bcm93XVxuXG4gICAgY29uc3QgYWRkT2ZmTGltaXRBcmVhRm9yU2hpcHMgPSAoY29sdW1uLCByb3csIHNoaXBMZW5ndGgpID0+IHtcbiAgICAgICAgY29uc3QgdG9wID0gZ2FtZUJvYXJkW2NvbHVtbl1bcm93IC0gMV1cbiAgICAgICAgY29uc3QgbGVmdCA9IGdhbWVCb2FyZFtjb2x1bW4gLSAxXVtyb3ddXG4gICAgICAgIGNvbnN0IHRvcFJpZ2h0ID0gZ2FtZUJvYXJkW2NvbHVtbiArIDFdW3JvdyAtIDFdXG4gICAgICAgIGNvbnN0IHRvcExlZnQgPSBnYW1lQm9hcmRbY29sdW1uIC0gMV1bcm93IC0gMV1cbiAgICAgICAgY29uc3QgYm90dG9tUmlnaHQgPSBnYW1lQm9hcmRbY29sdW1uICsgMV1bcm93ICsgc2hpcExlbmd0aF1cbiAgICAgICAgY29uc3QgbGVmdFJpZ2h0ID0gZ2FtZUJvYXJkW2NvbHVtbiAtIDFdW3JvdyArIHNoaXBMZW5ndGhdXG5cbiAgICAgICAgaWYgKHRvcCkge1xuICAgICAgICAgICAgdG9wLm9mZkxpbWl0cyA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBpZiAobGVmdCkge1xuICAgICAgICAgICAgbGVmdC5vZmZMaW1pdHMgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRvcFJpZ2h0KSB7XG4gICAgICAgICAgICB0b3BSaWdodC5vZmZMaW1pdHMgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRvcExlZnQpIHtcbiAgICAgICAgICAgIHRvcExlZnQub2ZmTGltaXRzID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGlmIChib3R0b21SaWdodCkge1xuICAgICAgICAgICAgYm90dG9tUmlnaHQub2ZmTGltaXRzID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGlmIChsZWZ0UmlnaHQpIHtcbiAgICAgICAgICAgIGxlZnRSaWdodC5vZmZMaW1pdHMgPSB0cnVlXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBhZGRPZmZMaW1pdEFyZWFGb3JIb3Jpem9udGFsbHlQb3NpdGlvbmVkU2hpcCA9IChcbiAgICAgICAgY29sdW1uLFxuICAgICAgICByb3csXG4gICAgICAgIHNoaXBMZW5ndGhcbiAgICApID0+IHtcbiAgICAgICAgY29uc3QgcmlnaHQgPSBnYW1lQm9hcmRbY29sdW1uICsgc2hpcExlbmd0aF1bcm93XVxuICAgICAgICBhZGRPZmZMaW1pdEFyZWFGb3JTaGlwcyhjb2x1bW4sIHJvdywgc2hpcExlbmd0aClcblxuICAgICAgICBpZiAocmlnaHQpIHtcbiAgICAgICAgICAgIHJpZ2h0Lm9mZkxpbWl0cyA9IHRydWVcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGFkZE9mZkxpbWl0QXJlYUZvclZlcnRpY2FsbHlQb3NpdGlvbmVkU2hpcCA9IChcbiAgICAgICAgY29sdW1uLFxuICAgICAgICByb3csXG4gICAgICAgIHNoaXBMZW5ndGhcbiAgICApID0+IHtcbiAgICAgICAgY29uc3QgYm90dG9tID0gZ2FtZUJvYXJkW2NvbHVtbl1bcm93ICsgc2hpcExlbmd0aF1cblxuICAgICAgICBhZGRPZmZMaW1pdEFyZWFGb3JTaGlwcyhjb2x1bW4sIHJvdywgc2hpcExlbmd0aClcblxuICAgICAgICBpZiAoYm90dG9tKSB7XG4gICAgICAgICAgICBib3R0b20ub2ZmTGltaXRzID0gdHJ1ZVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgcGxhY2VTaGlwID0gKGNvbHVtbiwgcm93LCBkaXJlY3Rpb24sIHNoaXApID0+IHtcbiAgICAgICAgY29uc3Qgc2hpcExlbmd0aCA9IHNoaXAuZ2V0TGVuZ3RoKClcbiAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gJ3ZlcnRpY2FsJykge1xuICAgICAgICAgICAgaWYgKHJvdyArIHNoaXBMZW5ndGggPD0gMTApIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXBMZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgICAgICAgICBnYW1lQm9hcmRbY29sdW1uXVtyb3cgKyBpXSA9IHNoaXBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYWRkT2ZmTGltaXRBcmVhRm9yVmVydGljYWxseVBvc2l0aW9uZWRTaGlwKGNvbHVtbiwgcm93LCBzaGlwTGVuZ3RoKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09PSAnaG9yaXpvbnRhbCcpIHtcbiAgICAgICAgICAgIGlmIChjb2x1bW4gKyBzaGlwTGVuZ3RoIDw9IDEwKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGlwTGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgZ2FtZUJvYXJkW2NvbHVtbiArIGldW3Jvd10gPSBzaGlwXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGFkZE9mZkxpbWl0QXJlYUZvckhvcml6b250YWxseVBvc2l0aW9uZWRTaGlwKGNvbHVtbiwgcm93LCBzaGlwTGVuZ3RoKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgY29uc3QgbWFrZVJhbmRvbUNvb3JkaW5hdGVzID0gKCkgPT4ge1xuICAgICAgICBjb25zdCByYW5kb21EaXJlY3Rpb24gPVxuICAgICAgICAgICAgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMikgPT09IDAgPyAndmVydGljYWwnIDogJ2hvcml6b250YWwnXG4gICAgICAgIGNvbnN0IHJhbmRvbUNvbHVtbiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKVxuICAgICAgICBjb25zdCByYW5kb21Sb3cgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMClcbiAgICAgICAgcmV0dXJuIHsgcmFuZG9tQ29sdW1uLCByYW5kb21Sb3csIHJhbmRvbURpcmVjdGlvbiB9XG4gICAgfVxuXG4gICAgY29uc3QgcmFuZG9tbHlQbGFjZVNoaXBzID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBzaGlwRGV0YWlscyA9IFtdXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcHMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgcmFuZG9tQ29sdW1uLCByYW5kb21Sb3csIHJhbmRvbURpcmVjdGlvbiB9ID1cbiAgICAgICAgICAgICAgICBtYWtlUmFuZG9tQ29vcmRpbmF0ZXMoKVxuICAgICAgICAgICAgY29uc3Qgc2hpcCA9IHNoaXBzW2ldXG4gICAgICAgICAgICBjb25zdCBsb2NhdGlvbiA9IGdldFNob3RMb2NhdGlvbihyYW5kb21Db2x1bW4sIHJhbmRvbVJvdylcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBsb2NhdGlvbi5pc1NoaXAgPT09IHRydWUgJiZcbiAgICAgICAgICAgICAgICBsb2NhdGlvbi5vZmZMaW1pdHMgPT09IHRydWUgJiZcbiAgICAgICAgICAgICAgICBwbGFjZVNoaXAocmFuZG9tQ29sdW1uLCByYW5kb21Sb3csIHJhbmRvbURpcmVjdGlvbiwgc2hpcCkgPT09XG4gICAgICAgICAgICAgICAgICAgIGZhbHNlXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBpIC09IDFcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2hpcERldGFpbHMucHVzaCh7IHJhbmRvbUNvbHVtbiwgcmFuZG9tUm93LCByYW5kb21EaXJlY3Rpb24gfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2hpcERldGFpbHNcbiAgICB9XG5cbiAgICBjb25zdCByZWNlaXZlQXR0YWNrID0gKGNvbHVtbiwgcm93KSA9PiB7XG4gICAgICAgIGdhbWVCb2FyZFtjb2x1bW5dW3Jvd10uaGFzQmVlbkhpdCA9IHRydWVcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBnZXRTaG90TG9jYXRpb24sXG4gICAgICAgIHJlY2VpdmVBdHRhY2ssXG4gICAgICAgIGNoZWNrSWZBbGxTaGlwc0hhdmVTdW5rLFxuICAgICAgICBwbGFjZVNoaXAsXG4gICAgICAgIHJhbmRvbWx5UGxhY2VTaGlwcyxcbiAgICB9XG59XG5cbmNvbnN0IGJvYiA9IGNyZWF0ZUdhbWVCb2FyZCgpXG5ib2IucmFuZG9tbHlQbGFjZVNoaXBzKClcblxubW9kdWxlLmV4cG9ydHMgPSBjcmVhdGVHYW1lQm9hcmRcbiIsImNvbnN0IGNyZWF0ZVNoaXAgPSAobGVuZ3RoKSA9PiB7XG4gICAgY29uc3Qgc3RhdHVzID0gQXJyYXkobGVuZ3RoKS5maWxsKCd1bmhpdCcpXG5cbiAgICBjb25zdCBnZXRMZW5ndGggPSAoKSA9PiBzdGF0dXMubGVuZ3RoXG5cbiAgICBjb25zdCBnZXRTdGF0dXMgPSAoKSA9PiBzdGF0dXNcblxuICAgIGNvbnN0IGhpdCA9IChwb3NpdGlvbikgPT4ge1xuICAgICAgICBpZiAocG9zaXRpb24gPCBsZW5ndGgpIHtcbiAgICAgICAgICAgIHN0YXR1c1twb3NpdGlvbl0gPSAnaGl0J1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgaXNTdW5rID0gKCkgPT4gc3RhdHVzLmV2ZXJ5KChwb3NpdGlvbikgPT4gcG9zaXRpb24gPT09ICdoaXQnKVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgZ2V0TGVuZ3RoLFxuICAgICAgICBpc1N1bmssXG4gICAgICAgIGhpdCxcbiAgICAgICAgZ2V0U3RhdHVzLFxuICAgICAgICBpc1NoaXA6IHRydWUsXG4gICAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGNyZWF0ZVNoaXBcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gKG1vZHVsZSkgPT4ge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHQoKSA9PiAobW9kdWxlWydkZWZhdWx0J10pIDpcblx0XHQoKSA9PiAobW9kdWxlKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCJpbXBvcnQgcmVuZGVyUGxheWVyQm9hcmQgZnJvbSAnLi9kb20nXG5pbXBvcnQgY3JlYXRlR2FtZUJvYXJkIGZyb20gJy4vZ2FtZWJvYXJkL2dhbWVib2FyZCdcblxuY29uc3QgcGxheWVyQm9hcmQgPSBjcmVhdGVHYW1lQm9hcmQoKVxucGxheWVyQm9hcmQucmFuZG9tbHlQbGFjZVNoaXBzKClcblxucmVuZGVyUGxheWVyQm9hcmQocGxheWVyQm9hcmQpXG4iLCJjb25zdCByZW5kZXJQbGF5ZXJCb2FyZCA9IChwbGF5ZXJCb2FyZCkgPT4ge1xuICAgIGNvbnN0IHBsYXllckJvYXJkQXJlYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5wbGF5ZXItYm9hcmQnKVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSArPSAxKSB7XG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgMTA7IGogKz0gMSkge1xuICAgICAgICAgICAgY29uc3QgY2VsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoJ2NlbGwnKVxuICAgICAgICAgICAgaWYgKHBsYXllckJvYXJkLmdldFNob3RMb2NhdGlvbihpLCBqKS5pc1NoaXApIHtcbiAgICAgICAgICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoJ3NoaXAnKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGxheWVyQm9hcmRBcmVhLmFwcGVuZENoaWxkKGNlbGwpXG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IHJlbmRlclBsYXllckJvYXJkIl0sIm5hbWVzIjpbImNyZWF0ZVNoaXAiLCJjcmVhdGVHYW1lQm9hcmQiLCJnYW1lQm9hcmQiLCJBcnJheSIsImZpbGwiLCJoYXNCZWVuSGl0IiwiaXNTaGlwIiwib2ZmTGltaXRzIiwibWFwIiwic2hpcHMiLCJnZXRTaG90TG9jYXRpb24iLCJjb2x1bW4iLCJyb3ciLCJhZGRPZmZMaW1pdEFyZWFGb3JTaGlwcyIsInNoaXBMZW5ndGgiLCJ0b3AiLCJsZWZ0IiwidG9wUmlnaHQiLCJ0b3BMZWZ0IiwiYm90dG9tUmlnaHQiLCJsZWZ0UmlnaHQiLCJwbGFjZVNoaXAiLCJkaXJlY3Rpb24iLCJzaGlwIiwiZ2V0TGVuZ3RoIiwiaSIsImJvdHRvbSIsImFkZE9mZkxpbWl0QXJlYUZvclZlcnRpY2FsbHlQb3NpdGlvbmVkU2hpcCIsInJpZ2h0IiwiYWRkT2ZmTGltaXRBcmVhRm9ySG9yaXpvbnRhbGx5UG9zaXRpb25lZFNoaXAiLCJtYWtlUmFuZG9tQ29vcmRpbmF0ZXMiLCJyYW5kb21EaXJlY3Rpb24iLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJyYW5kb21Db2x1bW4iLCJyYW5kb21Sb3ciLCJyZWNlaXZlQXR0YWNrIiwiY2hlY2tJZkFsbFNoaXBzSGF2ZVN1bmsiLCJmbGF0IiwiZXZlcnkiLCJwb3NpdGlvbiIsImdldFN0YXR1cyIsInVuaXQiLCJyYW5kb21seVBsYWNlU2hpcHMiLCJzaGlwRGV0YWlscyIsImxlbmd0aCIsImxvY2F0aW9uIiwicHVzaCIsIm1vZHVsZSIsImV4cG9ydHMiLCJzdGF0dXMiLCJpc1N1bmsiLCJoaXQiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwibiIsImdldHRlciIsIl9fZXNNb2R1bGUiLCJkIiwiYSIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsInBsYXllckJvYXJkIiwicGxheWVyQm9hcmRBcmVhIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaiIsImNlbGwiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwiYXBwZW5kQ2hpbGQiXSwic291cmNlUm9vdCI6IiJ9