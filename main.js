(()=>{var t={653:(t,r,e)=>{const o=e(585),n=()=>{const t={hasBeenHit:!1,isShip:!1,offLimits:!1},r=Array(10).fill(JSON.parse(JSON.stringify(t))).map((()=>Array(10).fill(JSON.parse(JSON.stringify(t))))),e=[o(5),o(4),o(3),o(3),o(2)],n=(t,e)=>r?.[t]?.[e],i=(t,e,o)=>{r[t][e]=o},a=(t,r,e,o)=>{const n=o.getLength();if("vertical"===e){if(r+n<=10){for(let e=0;e<n;e+=1)i(t,r+e,o);return!0}}else if("horizontal"===e&&t+n<=10){for(let e=0;e<n;e+=1)i(t+e,r,o);return!0}return!1},s=()=>{const t=0===Math.floor(2*Math.random())?"vertical":"horizontal";return{randomColumn:Math.floor(10*Math.random()),randomRow:Math.floor(10*Math.random()),randomDirection:t}};return{getLocation:n,receiveAttack:(t,e)=>{r[t][e].hasBeenHit=!0},checkIfAllShipsHaveSunk:()=>r.flat().every((t=>!1===t.isShip||!0===t.isShip&&!0===t.hasBeenHit&&t.getStatus().every((t=>"hit"===t)))),placeShip:a,randomlyPlaceShips:()=>{const t=[];for(let r=0;r<e.length;r+=1){const{randomColumn:o,randomRow:i,randomDirection:l}=s(),c=e[r],h=n(o,i);!0===h.isShip||!0===h.offLimits||!1===a(o,i,l,c)?r-=1:t.push({randomColumn:o,randomRow:i,randomDirection:l})}return t}}};n().placeShip(0,0,"horizontal",o(3)),t.exports=n},585:t=>{t.exports=t=>{const r=Array(t).fill("unhit");return{getLength:()=>r.length,isSunk:()=>r.every((t=>"hit"===t)),hit:e=>{e<t&&(r[e]="hit")},getStatus:()=>r,isShip:!0}}}},r={};function e(o){var n=r[o];if(void 0!==n)return n.exports;var i=r[o]={exports:{}};return t[o](i,i.exports,e),i.exports}e.n=t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},e.d=(t,r)=>{for(var o in r)e.o(r,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:r[o]})},e.o=(t,r)=>Object.prototype.hasOwnProperty.call(t,r),(()=>{"use strict";var t=e(653);const r=e.n(t)()();r.randomlyPlaceShips(),(({getLocation:t})=>{const r=document.querySelector("div.player-board");for(let e=0;e<10;e+=1)for(let o=0;o<10;o+=1){const n=document.createElement("div");n.classList.add("cell"),t(o,e).isShip&&n.classList.add("ship"),r.appendChild(n)}})(r)})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE9BQU9BLEVBQWFSLFFBR3JCLElBQUlELEVBQVNNLEVBQXlCRSxHQUFZLENBR2pEUCxRQUFTLElBT1YsT0FIQVUsRUFBb0JILEdBQVVSLEVBQVFBLEVBQU9DLFFBQVNNLEdBRy9DUCxFQUFPQyxRQ3BCZk0sRUFBb0JLLEVBQUtaLElBQ3hCLElBQUlhLEVBQVNiLEdBQVVBLEVBQU9jLFdBQzdCLElBQU9kLEVBQWlCLFFBQ3hCLElBQU0sRUFFUCxPQURBTyxFQUFvQlEsRUFBRUYsRUFBUSxDQUFFRyxFQUFHSCxJQUM1QkEsR0NMUk4sRUFBb0JRLEVBQUksQ0FBQ2QsRUFBU2dCLEtBQ2pDLElBQUksSUFBSUMsS0FBT0QsRUFDWFYsRUFBb0JZLEVBQUVGLEVBQVlDLEtBQVNYLEVBQW9CWSxFQUFFbEIsRUFBU2lCLElBQzVFRSxPQUFPQyxlQUFlcEIsRUFBU2lCLEVBQUssQ0FBRUksWUFBWSxFQUFNQyxJQUFLTixFQUFXQyxNQ0ozRVgsRUFBb0JZLEVBQUksQ0FBQ0ssRUFBS0MsSUFBVUwsT0FBT00sVUFBVUMsZUFBZUMsS0FBS0osRUFBS0MsRyxnQ0NHbEYsTUFBTUksRSxNQUFjLEtBQ3BCQSxFQUFZbEMscUJDSmMsR0FBR3hCLGtCQUN6QixNQUFNMkQsRUFBa0JDLFNBQVNDLGNBQWMsb0JBRS9DLElBQUssSUFBSXBELEVBQUksRUFBR0EsRUFBSSxHQUFJQSxHQUFLLEVBQ3pCLElBQUssSUFBSXFELEVBQUksRUFBR0EsRUFBSSxHQUFJQSxHQUFLLEVBQUcsQ0FDNUIsTUFBTXpDLEVBQU91QyxTQUFTRyxjQUFjLE9BQ3BDMUMsRUFBSzJDLFVBQVVDLElBQUksUUFDZmpFLEVBQVk4RCxFQUFHckQsR0FBR25CLFFBQ2xCK0IsRUFBSzJDLFVBQVVDLElBQUksUUFFdkJOLEVBQWdCTyxZQUFZN0MsS0RKeEMsQ0FBa0JxQyxJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvLi9zcmMvZ2FtZWJvYXJkL2dhbWVib2FyZC5qcyIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC8uL3NyYy9zaGlwL3NoaXAuanMiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3RvcC1iYXR0bGVzaGlwL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvLi9zcmMvZG9tLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC1leHByZXNzaW9ucyAqL1xuY29uc3QgY3JlYXRlU2hpcCA9IHJlcXVpcmUoJy4uL3NoaXAvc2hpcCcpXG5cbi8qIGVzbGludC1kaXNhYmxlIG5vLXBhcmFtLXJlYXNzaWduICovXG5jb25zdCBjcmVhdGVHYW1lQm9hcmQgPSAoKSA9PiB7XG4gICAgY29uc3QgZW1wdHlDZWxsID0geyBoYXNCZWVuSGl0OiBmYWxzZSwgaXNTaGlwOiBmYWxzZSwgb2ZmTGltaXRzOiBmYWxzZSB9XG4gICAgY29uc3QgZ2FtZUJvYXJkID0gQXJyYXkoMTApXG4gICAgICAgIC5maWxsKEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZW1wdHlDZWxsKSkpXG4gICAgICAgIC5tYXAoKCkgPT4gQXJyYXkoMTApLmZpbGwoSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlbXB0eUNlbGwpKSkpXG5cbiAgICBjb25zdCBzaGlwcyA9IFtcbiAgICAgICAgY3JlYXRlU2hpcCg1KSxcbiAgICAgICAgY3JlYXRlU2hpcCg0KSxcbiAgICAgICAgY3JlYXRlU2hpcCgzKSxcbiAgICAgICAgY3JlYXRlU2hpcCgzKSxcbiAgICAgICAgY3JlYXRlU2hpcCgyKSxcbiAgICBdXG5cbiAgICBjb25zdCBjaGVja0lmQWxsU2hpcHNIYXZlU3VuayA9ICgpID0+XG4gICAgICAgIGdhbWVCb2FyZC5mbGF0KCkuZXZlcnkoXG4gICAgICAgICAgICAoY2VsbCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChjZWxsLmlzU2hpcCA9PT0gZmFsc2UpIHJldHVybiB0cnVlXG4gICAgICAgICAgICAgICAgaWYgKGNlbGwuaXNTaGlwID09PSB0cnVlICYmIGNlbGwuaGFzQmVlbkhpdCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2VsbC5nZXRTdGF0dXMoKS5ldmVyeSgodW5pdCkgPT4gdW5pdCA9PT0gJ2hpdCcpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyAocG9zaXRpb24uaXNTaGlwID09PSBmYWxzZSkgfHxcbiAgICAgICAgICAgIC8vIChwb3NpdGlvbi5pc1NoaXAgPT09IHRydWUgJiYgcG9zaXRpb24uaGFzQmVlbkhpdCA9PT0gdHJ1ZSlcbiAgICAgICAgKVxuXG4gICAgY29uc3QgZ2V0TG9jYXRpb24gPSAoY29sdW1uLCByb3cpID0+IGdhbWVCb2FyZD8uW2NvbHVtbl0/Lltyb3ddXG5cbiAgICBjb25zdCBzZXRMb2NhdGlvbiA9IChjb2x1bW4sIHJvdywgc2hpcCkgPT4ge1xuICAgICAgICBnYW1lQm9hcmRbY29sdW1uXVtyb3ddID0gc2hpcFxuICAgIH1cblxuICAgIGNvbnN0IGFkZE9mZkxpbWl0QXJlYUZvclNoaXBzID0gKGNvbHVtbiwgcm93LCBzaGlwTGVuZ3RoKSA9PiB7XG4gICAgICAgIGNvbnN0IHRvcCA9IGdldExvY2F0aW9uKGNvbHVtbiwgcm93KVxuICAgICAgICBjb25zdCBsZWZ0ID0gZ2V0TG9jYXRpb24oY29sdW1uIC0gMSwgcm93KVxuICAgICAgICBjb25zdCB0b3BSaWdodCA9IGdldExvY2F0aW9uKGNvbHVtbiArIDEsIHJvdyAtIDEpXG4gICAgICAgIGNvbnN0IHRvcExlZnQgPSBnZXRMb2NhdGlvbihjb2x1bW4gLSAxLCByb3cgLSAxKVxuICAgICAgICBjb25zdCBib3R0b21SaWdodCA9IGdldExvY2F0aW9uKGNvbHVtbiArIDEsIHJvdyArIHNoaXBMZW5ndGgpXG4gICAgICAgIGNvbnN0IGxlZnRSaWdodCA9IGdldExvY2F0aW9uKGNvbHVtbiAtIDEsIHJvdyArIHNoaXBMZW5ndGgpXG5cbiAgICAgICAgaWYgKHRvcCkge1xuICAgICAgICAgICAgdG9wLm9mZkxpbWl0cyA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBpZiAobGVmdCkge1xuICAgICAgICAgICAgbGVmdC5vZmZMaW1pdHMgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRvcFJpZ2h0KSB7XG4gICAgICAgICAgICB0b3BSaWdodC5vZmZMaW1pdHMgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRvcExlZnQpIHtcbiAgICAgICAgICAgIHRvcExlZnQub2ZmTGltaXRzID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGlmIChib3R0b21SaWdodCkge1xuICAgICAgICAgICAgYm90dG9tUmlnaHQub2ZmTGltaXRzID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGlmIChsZWZ0UmlnaHQpIHtcbiAgICAgICAgICAgIGxlZnRSaWdodC5vZmZMaW1pdHMgPSB0cnVlXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBhZGRPZmZMaW1pdEFyZWFGb3JIb3Jpem9udGFsbHlQb3NpdGlvbmVkU2hpcCA9IChcbiAgICAgICAgY29sdW1uLFxuICAgICAgICByb3csXG4gICAgICAgIHNoaXBMZW5ndGhcbiAgICApID0+IHtcbiAgICAgICAgY29uc3QgcmlnaHQgPSBnZXRMb2NhdGlvbihjb2x1bW4gKyBzaGlwTGVuZ3RoLCByb3cpXG4gICAgICAgIGFkZE9mZkxpbWl0QXJlYUZvclNoaXBzKGNvbHVtbiwgcm93LCBzaGlwTGVuZ3RoKVxuXG4gICAgICAgIGlmIChyaWdodCkge1xuICAgICAgICAgICAgcmlnaHQub2ZmTGltaXRzID0gdHJ1ZVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgYWRkT2ZmTGltaXRBcmVhRm9yVmVydGljYWxseVBvc2l0aW9uZWRTaGlwID0gKFxuICAgICAgICBjb2x1bW4sXG4gICAgICAgIHJvdyxcbiAgICAgICAgc2hpcExlbmd0aFxuICAgICkgPT4ge1xuICAgICAgICBjb25zdCBib3R0b20gPSBnYW1lQm9hcmQ/Lltjb2x1bW5dPy5bcm93ICsgc2hpcExlbmd0aF1cblxuICAgICAgICBhZGRPZmZMaW1pdEFyZWFGb3JTaGlwcyhjb2x1bW4sIHJvdywgc2hpcExlbmd0aClcblxuICAgICAgICBpZiAoYm90dG9tKSB7XG4gICAgICAgICAgICBib3R0b20ub2ZmTGltaXRzID0gdHJ1ZVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgcGxhY2VTaGlwID0gKGNvbHVtbiwgcm93LCBkaXJlY3Rpb24sIHNoaXApID0+IHtcbiAgICAgICAgY29uc3Qgc2hpcExlbmd0aCA9IHNoaXAuZ2V0TGVuZ3RoKClcbiAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gJ3ZlcnRpY2FsJykge1xuICAgICAgICAgICAgaWYgKHJvdyArIHNoaXBMZW5ndGggPD0gMTApIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXBMZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgICAgICAgICBzZXRMb2NhdGlvbihjb2x1bW4sIHJvdyArIGksIHNoaXApXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGFkZE9mZkxpbWl0QXJlYUZvclZlcnRpY2FsbHlQb3NpdGlvbmVkU2hpcChjb2x1bW4sIHJvdywgc2hpcExlbmd0aClcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PT0gJ2hvcml6b250YWwnKSB7XG4gICAgICAgICAgICBpZiAoY29sdW1uICsgc2hpcExlbmd0aCA8PSAxMCkge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcExlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiArIGksIHJvdywgc2hpcClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gYWRkT2ZmTGltaXRBcmVhRm9ySG9yaXpvbnRhbGx5UG9zaXRpb25lZFNoaXAoXG4gICAgICAgICAgICAgICAgLy8gY29sdW1uLFxuICAgICAgICAgICAgICAgIC8vIHJvdyxcbiAgICAgICAgICAgICAgICAvLyBzaGlwTGVuZ3RoXG4gICAgICAgICAgICAgICAgLy8gKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgY29uc3QgbWFrZVJhbmRvbUNvb3JkaW5hdGVzID0gKCkgPT4ge1xuICAgICAgICBjb25zdCByYW5kb21EaXJlY3Rpb24gPVxuICAgICAgICAgICAgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMikgPT09IDAgPyAndmVydGljYWwnIDogJ2hvcml6b250YWwnXG4gICAgICAgIGNvbnN0IHJhbmRvbUNvbHVtbiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKVxuICAgICAgICBjb25zdCByYW5kb21Sb3cgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMClcbiAgICAgICAgcmV0dXJuIHsgcmFuZG9tQ29sdW1uLCByYW5kb21Sb3csIHJhbmRvbURpcmVjdGlvbiB9XG4gICAgfVxuXG4gICAgY29uc3QgcmFuZG9tbHlQbGFjZVNoaXBzID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBzaGlwRGV0YWlscyA9IFtdXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcHMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgcmFuZG9tQ29sdW1uLCByYW5kb21Sb3csIHJhbmRvbURpcmVjdGlvbiB9ID1cbiAgICAgICAgICAgICAgICBtYWtlUmFuZG9tQ29vcmRpbmF0ZXMoKVxuICAgICAgICAgICAgY29uc3Qgc2hpcCA9IHNoaXBzW2ldXG4gICAgICAgICAgICBjb25zdCBsb2NhdGlvbiA9IGdldExvY2F0aW9uKHJhbmRvbUNvbHVtbiwgcmFuZG9tUm93KVxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGxvY2F0aW9uLmlzU2hpcCA9PT0gdHJ1ZSB8fFxuICAgICAgICAgICAgICAgIGxvY2F0aW9uLm9mZkxpbWl0cyA9PT0gdHJ1ZSB8fFxuICAgICAgICAgICAgICAgIHBsYWNlU2hpcChyYW5kb21Db2x1bW4sIHJhbmRvbVJvdywgcmFuZG9tRGlyZWN0aW9uLCBzaGlwKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgZmFsc2VcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGkgLT0gMVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzaGlwRGV0YWlscy5wdXNoKHsgcmFuZG9tQ29sdW1uLCByYW5kb21Sb3csIHJhbmRvbURpcmVjdGlvbiB9KVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzaGlwRGV0YWlsc1xuICAgIH1cblxuICAgIGNvbnN0IHJlY2VpdmVBdHRhY2sgPSAoY29sdW1uLCByb3cpID0+IHtcbiAgICAgICAgZ2FtZUJvYXJkW2NvbHVtbl1bcm93XS5oYXNCZWVuSGl0ID0gdHJ1ZVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIGdldExvY2F0aW9uLFxuICAgICAgICByZWNlaXZlQXR0YWNrLFxuICAgICAgICBjaGVja0lmQWxsU2hpcHNIYXZlU3VuayxcbiAgICAgICAgcGxhY2VTaGlwLFxuICAgICAgICByYW5kb21seVBsYWNlU2hpcHMsXG4gICAgfVxufVxuXG5jb25zdCBib2IgPSBjcmVhdGVHYW1lQm9hcmQoKVxuYm9iLnBsYWNlU2hpcCgwLCAwLCAnaG9yaXpvbnRhbCcsIGNyZWF0ZVNoaXAoMykpXG5cbm1vZHVsZS5leHBvcnRzID0gY3JlYXRlR2FtZUJvYXJkXG4iLCJjb25zdCBjcmVhdGVTaGlwID0gKGxlbmd0aCkgPT4ge1xuICAgIGNvbnN0IHN0YXR1cyA9IEFycmF5KGxlbmd0aCkuZmlsbCgndW5oaXQnKVxuXG4gICAgY29uc3QgZ2V0TGVuZ3RoID0gKCkgPT4gc3RhdHVzLmxlbmd0aFxuXG4gICAgY29uc3QgZ2V0U3RhdHVzID0gKCkgPT4gc3RhdHVzXG5cbiAgICBjb25zdCBoaXQgPSAocG9zaXRpb24pID0+IHtcbiAgICAgICAgaWYgKHBvc2l0aW9uIDwgbGVuZ3RoKSB7XG4gICAgICAgICAgICBzdGF0dXNbcG9zaXRpb25dID0gJ2hpdCdcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGlzU3VuayA9ICgpID0+IHN0YXR1cy5ldmVyeSgocG9zaXRpb24pID0+IHBvc2l0aW9uID09PSAnaGl0JylcblxuICAgIHJldHVybiB7XG4gICAgICAgIGdldExlbmd0aCxcbiAgICAgICAgaXNTdW5rLFxuICAgICAgICBoaXQsXG4gICAgICAgIGdldFN0YXR1cyxcbiAgICAgICAgaXNTaGlwOiB0cnVlLFxuICAgIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjcmVhdGVTaGlwXG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbl9fd2VicGFja19yZXF1aXJlX18ubiA9IChtb2R1bGUpID0+IHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0KCkgPT4gKG1vZHVsZVsnZGVmYXVsdCddKSA6XG5cdFx0KCkgPT4gKG1vZHVsZSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiaW1wb3J0IHJlbmRlclBsYXllckJvYXJkIGZyb20gJy4vZG9tJ1xuaW1wb3J0IGNyZWF0ZUdhbWVCb2FyZCBmcm9tICcuL2dhbWVib2FyZC9nYW1lYm9hcmQnXG5cbmNvbnN0IHBsYXllckJvYXJkID0gY3JlYXRlR2FtZUJvYXJkKClcbnBsYXllckJvYXJkLnJhbmRvbWx5UGxhY2VTaGlwcygpXG5cbnJlbmRlclBsYXllckJvYXJkKHBsYXllckJvYXJkKVxuIiwiY29uc3QgcmVuZGVyUGxheWVyQm9hcmQgPSAoeyBnZXRMb2NhdGlvbiB9KSA9PiB7XG4gICAgY29uc3QgcGxheWVyQm9hcmRBcmVhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZGl2LnBsYXllci1ib2FyZCcpXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwOyBpICs9IDEpIHtcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAxMDsgaiArPSAxKSB7XG4gICAgICAgICAgICBjb25zdCBjZWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICAgICAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZCgnY2VsbCcpXG4gICAgICAgICAgICBpZiAoZ2V0TG9jYXRpb24oaiwgaSkuaXNTaGlwKSB7XG4gICAgICAgICAgICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKCdzaGlwJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBsYXllckJvYXJkQXJlYS5hcHBlbmRDaGlsZChjZWxsKVxuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCByZW5kZXJQbGF5ZXJCb2FyZFxuIl0sIm5hbWVzIjpbImNyZWF0ZVNoaXAiLCJjcmVhdGVHYW1lQm9hcmQiLCJlbXB0eUNlbGwiLCJoYXNCZWVuSGl0IiwiaXNTaGlwIiwib2ZmTGltaXRzIiwiZ2FtZUJvYXJkIiwiQXJyYXkiLCJmaWxsIiwiSlNPTiIsInBhcnNlIiwic3RyaW5naWZ5IiwibWFwIiwic2hpcHMiLCJnZXRMb2NhdGlvbiIsImNvbHVtbiIsInJvdyIsInNldExvY2F0aW9uIiwic2hpcCIsInBsYWNlU2hpcCIsImRpcmVjdGlvbiIsInNoaXBMZW5ndGgiLCJnZXRMZW5ndGgiLCJpIiwibWFrZVJhbmRvbUNvb3JkaW5hdGVzIiwicmFuZG9tRGlyZWN0aW9uIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwicmFuZG9tQ29sdW1uIiwicmFuZG9tUm93IiwicmVjZWl2ZUF0dGFjayIsImNoZWNrSWZBbGxTaGlwc0hhdmVTdW5rIiwiZmxhdCIsImV2ZXJ5IiwiY2VsbCIsImdldFN0YXR1cyIsInVuaXQiLCJyYW5kb21seVBsYWNlU2hpcHMiLCJzaGlwRGV0YWlscyIsImxlbmd0aCIsImxvY2F0aW9uIiwicHVzaCIsIm1vZHVsZSIsImV4cG9ydHMiLCJzdGF0dXMiLCJpc1N1bmsiLCJwb3NpdGlvbiIsImhpdCIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsIl9fd2VicGFja19tb2R1bGVzX18iLCJuIiwiZ2V0dGVyIiwiX19lc01vZHVsZSIsImQiLCJhIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwicGxheWVyQm9hcmQiLCJwbGF5ZXJCb2FyZEFyZWEiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJqIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImFwcGVuZENoaWxkIl0sInNvdXJjZVJvb3QiOiIifQ==