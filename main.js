(()=>{var t={653:(t,e,r)=>{const o=r(585);t.exports=()=>{const t={hasBeenHit:!1,isShip:!1,offLimits:!1};let e=!1;const r=()=>{const e=Array(10).fill().map((()=>Array(10).fill()));for(let r=0;r<10;r+=1)for(let o=0;o<10;o+=1)e[r][o]={...t,column:r,row:o};return e};let i=r();const a=()=>{i=r()},n=(t,e)=>i?.[t]?.[e],l=(e,r,o=(()=>Object.assign(t,{offLimits:!0}))())=>{if(void 0===i?.[e]?.[r])return!0;const a=i[e][r];return i[e][r]={...a,...o},!0},c=(t,e)=>{l(t-1,e-1),l(t,e-1)},s=(t,e,r,o)=>{if("vertical"===r)for(let r=0;r<o;r+=1){const o=n(t,e+r);if(o&&!0===o.isShip&&!0===o.offLimits)return!0}if("horizontal"===r)for(let r=0;r<o;r+=1){const o=n(t+r,e);if(o&&!0===o.isShip&&!0===o.offLimits)return!0}return!1},d=(t,e,r,o)=>{if(i[t][e].isShip||i[t][e].offLimits)return!1;const a=o.getLength();if(s(n(t,e)))return!1;if("vertical"===r){if(((t,e)=>t>=0&&t+e-1<i.length)(e,a)){for(let r=0;r<a;r+=1)l(t,e+r,{...o,position:r}),l(t+1,e+r),l(t-1,e+r);return((t,e,r)=>{c(t,e),l(t,e+r),l(t+1,e+r),l(t-1,e+r),l(t+1,e-1)})(t,e,a),!0}}else if("horizontal"===r&&((t,e)=>t>=0&&t+e-1<i.length)(t,a)){for(let r=0;r<a;r+=1)l(t+r,e,{...o,position:r}),l(t+r,e+1),l(t+r,e-1);return((t,e,r)=>{c(t,e),l(t+r,e),l(t-1,e+1),l(t+r,e+1),l(t+r,e-1),l(t-1,e)})(t,e,a),!0}return!1},u=()=>{const t=Math.floor(100*Math.random()),e=(()=>{const t=[...i.flat()];return t.forEach((t=>{!0===t.hasBeenHit?t.availability=!1:t.availability=!0})),t})()[t];return!1===e.availability?u():[e.column,e.row]},h=t=>{const e=Math.floor(10*Math.random()),r=Math.floor(10*Math.random());let i=Math.round(Math.random());return(0!==i||(i="horizontal",!1!==d(e,r,i,o(t))))&&(1!==i||(i="vertical",!1!==d(e,r,i,o(t))))&&void 0};return{clearBoard:a,checkIfLocationIsAShipOrOffLimits:s,checkIfOffLimitZoneWasCorrectlyImplemented:t=>i.flat().filter((t=>!0===t.offLimits)).length===t+2,getLocation:n,receiveAttack:(t,e)=>{i[t][e].hasBeenHit=!0},checkIfAllShipsHaveSunk:()=>{let t=!0;for(let e=0;e<10;e+=1)for(let r=0;r<10;r+=1){const o=n(e,r);if(!1!==o.isShip&&o.isShip&&!1===o.isSunk()){t=!1;break}}return t},placeShip:d,randomlyPlaceShips:()=>{switch(a(),Math.floor(10*Math.random())){case 0:d(1,1,"horizontal",o(4)),d(1,4,"horizontal",o(4)),d(7,3,"horizontal",o(3)),d(2,7,"horizonal",o(3)),d(6,7,"horizontal",o(2)),d(5,9,"horizontal",o(2)),d(8,1,"vertical",o(1)),d(9,5,"vertical",o(1));break;case 1:d(0,1,"vertical",o(4)),d(8,1,"vertical",o(4)),d(3,1,"horizontal",o(3)),d(0,7,"vertical",o(3)),d(3,6,"horizontal",o(2)),d(8,7,"horizontal",o(2)),d(4,8,"vertical",o(1)),d(6,7,"vertical",o(1));break;case 2:d(0,1,"horizontal",o(4)),d(0,3,"horizontal",o(4)),d(9,1,"vertical",o(3)),d(2,8,"horizontal",o(3)),d(5,3,"vertical",o(2)),d(0,6,"vertical",o(2)),d(1,6,"vertical",o(1)),d(7,4,"vertical",o(1));break;case 3:d(0,0,"vertical",o(4)),d(9,0,"vertical",o(4)),d(0,5,"vertical",o(3)),d(3,1,"vertical",o(3)),d(5,1,"vertical",o(2)),d(7,1,"vertical",o(2)),d(4,7,"vertical",o(1)),d(8,7,"vertical",o(1));break;case 4:d(2,4,"horizontal",o(4)),d(0,6,"vertical",o(4)),d(2,7,"horizontal",o(3)),d(6,6,"horizontal",o(3)),d(7,1,"horizontal",o(2)),d(6,8,"horizontal",o(2)),d(2,1,"horizontal",o(1)),d(4,1,"horizontal",o(1));break;case 5:d(1,3,"horizontal",o(4)),d(6,2,"vertical",o(4)),d(0,6,"vertical",o(3)),d(8,2,"vertical",o(3)),d(0,0,"horizontal",o(2)),d(2,6,"horizontal",o(2)),d(9,6,"vertical",o(1)),d(5,9,"vertical",o(1));break;case 6:d(0,0,"vertical",o(4)),d(0,6,"vertical",o(4)),d(0,2,"horizontal",o(3)),d(6,1,"horizontal",o(3)),d(8,3,"horizontal",o(2)),d(9,5,"vertical",o(2)),d(9,8,"vertical",o(1)),d(7,9,"vertical",o(1));break;case 7:d(0,1,"vertical",o(4)),d(0,6,"vertical",o(4)),d(2,0,"horizontal",o(3)),d(6,0,"horizontal",o(3)),d(9,2,"vertical",o(2)),d(9,6,"vertical",o(2)),d(9,9,"vertical",o(1)),d(7,9,"vertical",o(1));break;case 8:d(2,0,"vertical",o(4)),d(7,1,"vertical",o(4)),d(2,5,"horizontal",o(3)),d(6,7,"vertical",o(3)),d(1,9,"horizontal",o(2)),d(2,7,"horizontal",o(2)),d(9,6,"vertical",o(1)),d(8,9,"vertical",o(1));break;case 9:d(0,0,"horizontal",o(4)),d(5,2,"vertical",o(1)),d(2,6,"vertical",o(1)),d(0,8,"horizontal",o(3)),d(4,5,"vertical",o(4)),d(7,4,"horizontal",o(2)),d(6,6,"horizontal",o(2)),d(7,8,"horizontal",o(3))}},makeRandomCoordinates:u,checkIfBoardHasBeenFullyPopulated:()=>{const t=i.flat();let e=0;return t.forEach((t=>{t.isShip&&(e+=1)})),20===e},randomFleet:()=>{for(let t=0;t<2;)!1!==h(1)&&(t+=1);for(let t=0;t<2;)!1!==h(2)&&(t+=1);for(let t=0;t<2;)!1!==h(3)&&(t+=1);for(let t=0;t<2;)!1!==h(4)&&(t+=1);e=!0},gameBoard:i,isStartAllowed:{get:()=>e,set(t){e=t}}}}},61:t=>{t.exports=(t="player")=>{let e=!1;return{getName:()=>t,attack:(t,e,{getLocation:r,receiveAttack:o})=>{const i=r(t,e);return!1===i.hasBeenHit||i.isShip&&!1===i.getStatus().includes("unhit")?(o(t,e),i.hit?(i.hit(i.position),"You hit a ship!"):"It's a hit!"):"You have already hit this spot!"},turn:{get:()=>e,set(t){e=t}},isTurn:t=>{e=!0,t.turn.set(!1)}}}},585:t=>{t.exports=(t,e="ship")=>{const r=Array(t).fill("unhit");return{getName:()=>e,getLength:()=>r.length,isSunk:()=>r.every((t=>"hit"===t)),hit:e=>{e<t&&(r[e]="hit")},getStatus:()=>r,domTargets:[],hasBeenHit:!1,offLimits:!0,isShip:!0}}}},e={};function r(o){var i=e[o];if(void 0!==i)return i.exports;var a=e[o]={exports:{}};return t[o](a,a.exports,r),a.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var o in e)r.o(e,o)&&!r.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";let t,e=!1,o=!1,i=[],a=[],n=[],l=[];function c(e){return"left"===e?(t="left",[i[0],i[1]-1]):"right"===e?(t="right",[i[0],i[1]+1]):"down"===e?(t="down",[i[0]+1,i[1]]):"up"===e?(t="up",[i[0]-1,i[1]]):void 0}function s(t,r,l,c){e=t,void 0!==r&&(o=r),void 0!==l&&(i=[l,c]),0===a.length&&void 0!==l?a=[l,c]:0!==a.length&&0===n.length&&void 0!==l&&(n=[l,c])}function d(t,e){return l=[],0!==e&&l.push([t,e-1]),9!==e&&l.push([t,e+1]),0!==t&&l.push([t-1,e]),9!==t&&l.push([t+1,e]),l}function u(r,s,u,h,p,f){let v;if(!0===h&&(i=[],a=[],n=[],l=[],e=!1,o=!1,t=""),!o&&!e)return v=p.makeRandomCoordinates(),S(s,u,v[0],v[1],p,f);if(0!==n.length&&e&&!r){let t;if(a[0]===n[0]-1&&(t=c("down")),a[0]===n[0]+1&&(t=c("up")),a[1]===n[1]-1&&(t=c("right")),a[1]===n[1]+1&&(t=c("left")),t[0]>=0&&t[0]<=9&&t[1]>=0&&t[1]<=9)return S(s,u,t[0],t[1],p,f)}else if(0!==n.length&&o&&!e){let e;if(i=a,n=[],"up"===t&&(e=c("down")),"down"===t&&(e=c("up")),"right"===t&&(e=c("left")),"left"===t&&(e=c("right")),e[0]>=0&&e[0]<=9&&e[1]>=0&&e[1]<=9)return S(s,u,e[0],e[1],p,f)}else if(o){0===l.length&&d(i[0],i[1]),0===l.length&&!0===o&&d(a[0],a[1]);const t=l.pop();return S(s,u,t[0],t[1],p,f)}}var h=r(585),p=r.n(h);let f=0;function v(t,e){let r=2;const o=document.querySelector(t),i=document.querySelector("body"),a=document.querySelectorAll(".player-board > .cell"),n=o.childNodes;let l,c,s="horizontal";n[0]&&n[0].addEventListener("mouseenter",(()=>c=0)),n[1]&&n[1].addEventListener("mouseenter",(()=>c=-1)),n[2]&&n[2].addEventListener("mouseenter",(()=>c=-2)),n[3]&&n[3].addEventListener("mouseenter",(()=>c=-3)),o.addEventListener("click",(t=>function(t){"horizontal"===s?(s="vertical",t.target.parentNode.classList.toggle("rotated")):(s="horizontal",t.target.parentNode.classList.toggle("rotated"))}(t))),o.addEventListener("dragstart",(()=>{for(let t=0;t<10;t+=1)e.gameBoard[t].forEach((t=>{(t.offLimits||t.isShip)&&document.querySelector(`.player-board > .cell[column='${t.column}'][row='${t.row}']`).classList.toggle("not-available")}))})),o.addEventListener("dragend",(()=>{if(document.querySelectorAll(".not-available").forEach((t=>t.classList.remove("not-available"))),-1===l)return;let i,a,n=`${l}`;l<10?(i=0,a=l):(n=n.split(""),i=1*n[0],a=1*n[1]),"horizontal"===s&&(a+=c),"vertical"===s&&(i+=c),a<0||".ship-1"===t&&!1===e.placeShip(a,i,s,p()(1))||".ship-2"===t&&!1===e.placeShip(a,i,s,p()(2))||".ship-3"===t&&!1===e.placeShip(a,i,s,p()(3))||".ship-4"===t&&!1===e.placeShip(a,i,s,p()(4))||(g(e),r-=1,f+=1,8===f&&e.isStartAllowed.set(!0),o.parentNode.firstChild.textContent=`${r}x`,0===r&&(o.parentNode.style.display="none"),!e.checkIfBoardHasBeenFullyPopulated())||(document.querySelector("body > main > div.player > div:nth-child(3)").style.display="none",document.querySelector(".randomize").style.display="none",e.isStartAllowed.set(!0))})),a.forEach(((t,e)=>{t.addEventListener("dragover",(t=>{t.preventDefault(),l=e}))})),i.addEventListener("dragenter",(()=>{l=-1}))}function m(t){return new Promise((e=>{setTimeout((()=>{e(2)}),t)}))}const y=(t,e)=>{if(t.checkIfAllShipsHaveSunk()){const t=document.querySelector(".modal"),e=document.querySelector(".modal-content > p"),r=document.querySelector(".modal-content > button");t.style.display="block",r.addEventListener("click",(()=>{location.reload()})),e.textContent="You lose!"}if(e.checkIfAllShipsHaveSunk()){const t=document.querySelector(".modal"),e=document.querySelector(".modal-content > p"),r=document.querySelector(".modal-content > button");t.style.display="block",e.textContent="You win!",r.addEventListener("click",(()=>{location.reload()}))}};async function S(t,e,r,o,i,a){let n=!1;const l=document.querySelector(`.player-board > .cell[column='${r}'][row='${o}']`),c=e.attack(r,o,i);if("You have already hit this spot!"===c&&u(!0,t,e,void 0,i,a),"It's a hit!"===c&&(s(!1),l.classList.add("miss")),"You hit a ship!"===c)return s(!0,!0,r,o),l.classList.add("hit"),i.getLocation(r,o).domTargets.push(l),i.getLocation(r,o).isSunk()&&(i.getLocation(r,o).domTargets.forEach((t=>t.classList.add("sunk"))),n=!0,!0===i.checkIfAllShipsHaveSunk())?y(i,a):(await m(1e3),u(!1,t,e,n,i,a));t.isTurn(e)}const g=({getLocation:t})=>{const e=document.querySelector("div.player-board");for(let r=0;r<10;r+=1)for(let o=0;o<10;o+=1){const i=e.querySelector(`.cell:nth-child(${10*o+r+1})`);i.setAttribute("column",r),i.setAttribute("row",o);const a=t(r,o);a.isShip&&(i.classList.add("ship"),i.setAttribute("ship-name",a.getName()))}};var b=r(653),L=r.n(b),k=r(61),z=r.n(k);const A=L()(),w=L()(),E=z()("player"),q=z()("computer");E.isTurn(q),function(t){document.querySelector("button.randomize").addEventListener("click",(()=>{document.querySelector(".player > div:nth-child(3)").style.display="none",t.randomlyPlaceShips(),t.isStartAllowed.set(!0),g(t)})),document.querySelector("button.reset").addEventListener("click",(()=>{location.reload()}))}(A),function(t){function e(t,e){const r=document.querySelector("body > main > div.player > div:nth-child(3)"),o=document.createElement("div");o.classList.add("ship-container"),r.appendChild(o);const i=document.createElement("span");i.classList.add(`info-${t}`),i.textContent="2x",o.appendChild(i);const a=document.createElement("div");a.classList.add("ship"),a.classList.add(`ship-${t}`),a.setAttribute("draggable","true"),o.appendChild(a);for(let t=0;t<e;t+=1){const t=document.createElement("div");t.classList.add("cell"),a.appendChild(t)}}e(1,1),e(2,2),e(3,3),e(4,4);for(let e=1;e<5;e+=1)v(`.ship-${e}`,t)}(A),w.randomlyPlaceShips();const B=(()=>{const t={};return{publish:function(e,r){Array.isArray(t[e])&&t[e].forEach((t=>{t(r)}))},subscribe:function e(r,o){Array.isArray(e[r])||(t[r]=[]),t[r].push(o);const i=t[r].length-1;return{unsubscribe(){t[r].splice(i,1)}}}}})();((t,e,r,o,i)=>{const a=document.querySelector("div.enemy-board");for(let n=0;n<10;n+=1)for(let l=0;l<10;l+=1){const c=a.querySelector(`.cell:nth-child(${10*l+n+1})`);c.setAttribute("column",n),c.setAttribute("row",l),c.addEventListener("click",(()=>{document.querySelectorAll(".enemy-board .cell").forEach((t=>{t.style="cursor: not-allowed; pointer-events: none;"})),t.isStartAllowed.get()&&(r.turn.get()&&i.publish("click",{column:n,row:l,playerBoard:t,enemyBoard:e,player:r,enemy:o}),m(1100).then((()=>{i.publish("click",{column:n,row:l,playerBoard:t,enemyBoard:e,player:r,enemy:o}),document.querySelectorAll(".enemy-board .cell").forEach((t=>{t.style="cursor: pointer; pointer-events: initial;"}))})))}))}})(A,w,E,q,B),B.subscribe("click",(({column:t,row:e,playerBoard:r,enemyBoard:o,player:i,enemy:a})=>{i.turn.get()&&r.isStartAllowed.get()&&((t,e,r,o,i,a)=>{((t,e,r,o)=>{o.attack(t,e,r)})(t,e,r,i),(async(t,e,r,o,i,a,n)=>{const l=document.querySelector(`.enemy-board > .cell[column='${e}'][row='${r}']`);o.getLocation(e,r)?.isShip?(l.classList.add("hit"),o.getLocation(e,r).domTargets.push(l),o.getLocation(e,r).isSunk()&&o.getLocation(e,r).domTargets.forEach((t=>t.classList.add("sunk")))):(l.classList.add("miss"),a.isTurn(i),await m(700),o.checkIfAllShipsHaveSunk()?y(n,o):u(!1,i,a,void 0,n,o))})(0,t,e,r,i,a,o)})(t,e,o,r,i,a)})),g(A)})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBT3JILEtBQUtKLE9BQVVrRCxFQUFZM0csZUFBZXlELE9BMU5sQyxFQUNwQm5ELEVBQ0FDLEVBQ0FxRyxFQUNBRCxFQUNBdUUsRUFDQTlHLEtBVGlCLEVBQUM5RCxFQUFRQyxFQUFLcUcsRUFBWXNFLEtBQzNDQSxFQUFPbkgsT0FBT3pELEVBQVFDLEVBQUtxRyxJQVUzQjBFLENBQWFoTCxFQUFRQyxFQUFLcUcsRUFBWXNFLEdBNUNwQjFCLE9BQ2xCMEIsRUFDQTVLLEVBQ0FDLEVBQ0FxRyxFQUNBMkUsRUFDQW5ILEVBQ0F1QyxLQUVBLE1BQU1nRCxFQUFPdEMsU0FBU0MsY0FDbEIsZ0NBQW9DaEgsWUFBaUJDLE9BR3JEcUcsRUFBV25HLFlBQVlILEVBQVFDLElBQU1ULFFBQ3JDNkosRUFBS3pCLFVBQVV1QixJQUFJLE9BQ25CN0MsRUFBV25HLFlBQVlILEVBQVFDLEdBQUtnRSxXQUFXK0IsS0FBS3FELEdBQ2hEL0MsRUFBV25HLFlBQVlILEVBQVFDLEdBQUs2QyxVQUNwQ3dELEVBQ0tuRyxZQUFZSCxFQUFRQyxHQUNwQmdFLFdBQVdsQyxTQUFTMEYsR0FBTUEsRUFBRUcsVUFBVXVCLElBQUksWUFLdkRFLEVBQUt6QixVQUFVdUIsSUFBSSxRQUNuQnJGLEVBQU1ELE9BQU9vSCxTQUNQekMsRUFBTSxLQUVMbEMsRUFBVzNELDBCQUNaa0csRUFBZ0J4QyxFQUFhQyxHQUM3QkwsR0FBTyxFQUFPZ0YsRUFBT25ILE9BQU9yRCxFQUFXNEYsRUFBYUMsS0FlMUQ0RSxDQUFjLEVBQVNsTCxFQUFRQyxFQUFLcUcsRUFBWXNFLEVBQVE5RyxFQUFPdUMsSUFrTi9EOEUsQ0FBZ0JuTCxFQUFRQyxFQUFLcUcsRUFBWUQsRUFBYXVFLEVBQVE5RyxNQ3BTbEVtRSxFQUFrQjVCLEkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC8uL3NyYy9nYW1lYm9hcmQvZ2FtZWJvYXJkLmpzIiwid2VicGFjazovL3RvcC1iYXR0bGVzaGlwLy4vc3JjL3BsYXllci9wbGF5ZXIuanMiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvLi9zcmMvc2hpcC9zaGlwLmpzIiwid2VicGFjazovL3RvcC1iYXR0bGVzaGlwL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3RvcC1iYXR0bGVzaGlwL3dlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0Iiwid2VicGFjazovL3RvcC1iYXR0bGVzaGlwL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3RvcC1iYXR0bGVzaGlwLy4vc3JjL2JvdC5qcyIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC8uL3NyYy9kcmFnLWFuZC1kcm9wLmpzIiwid2VicGFjazovL3RvcC1iYXR0bGVzaGlwLy4vc3JjL2RvbS5qcyIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBjb25zaXN0ZW50LXJldHVybiAqL1xuLyogZXNsaW50LWRpc2FibGUgbm8tY29udGludWUgKi9cbi8qIGVzbGludC1kaXNhYmxlIGRlZmF1bHQtY2FzZSAqL1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby1jeWNsZVxuLyogZXNsaW50LWRpc2FibGUgbm8tbXVsdGktYXNzaWduICovXG4vKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtZXhwcmVzc2lvbnMgKi9cbmNvbnN0IGNyZWF0ZVNoaXAgPSByZXF1aXJlKCcuLi9zaGlwL3NoaXAnKVxuXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1wYXJhbS1yZWFzc2lnbiAqL1xuY29uc3QgY3JlYXRlR2FtZUJvYXJkID0gKCkgPT4ge1xuICAgIGNvbnN0IGVtcHR5Q2VsbCA9IHsgaGFzQmVlbkhpdDogZmFsc2UsIGlzU2hpcDogZmFsc2UsIG9mZkxpbWl0czogZmFsc2UgfVxuXG4gICAgbGV0IGlzU3RhcnRBbGxvd2VkID0gZmFsc2VcbiAgICBcbiAgICBjb25zdCBpbml0aWFsaXplQm9hcmQgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGdhbWVCb2FyZCA9IEFycmF5KDEwKS5maWxsKCkubWFwKCgpID0+IEFycmF5KDEwKS5maWxsKCkpXG4gICAgICAgIGZvcihsZXQgY29sdW1uPSAwOyBjb2x1bW4gPCAxMDsgY29sdW1uICs9IDEpe1xuICAgICAgICAgICAgZm9yKGxldCByb3c9IDA7IHJvdyA8IDEwOyByb3cgKz0gMSl7XG4gICAgICAgICAgICAgICAgZ2FtZUJvYXJkW2NvbHVtbl1bcm93XSA9IHsuLi5lbXB0eUNlbGwsIGNvbHVtbiwgcm93fVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBnYW1lQm9hcmRcbiAgICBcbiAgICB9XG5cbiAgICBsZXQgZ2FtZUJvYXJkID0gaW5pdGlhbGl6ZUJvYXJkKClcblxuICAgIGNvbnN0IGNsZWFyQm9hcmQgID0gKCkgPT4ge1xuICAgICAgICBnYW1lQm9hcmQgPSBpbml0aWFsaXplQm9hcmQoKVxuICAgIH1cblxuICAgIGNvbnN0IGNyZWF0ZU9mZkxpbWl0TG9jYXRpb24gPSAoKSA9PlxuICAgICAgICBPYmplY3QuYXNzaWduKGVtcHR5Q2VsbCwgeyBvZmZMaW1pdHM6IHRydWUgfSlcblxuICAgIGNvbnN0IGdldExvY2F0aW9uID0gKGNvbHVtbiwgcm93KSA9PiBnYW1lQm9hcmQ/Lltjb2x1bW5dPy5bcm93XVxuXG4gICAgY29uc3Qgc2V0TG9jYXRpb24gPSAoY29sdW1uLCByb3csIHNoaXAgPSBjcmVhdGVPZmZMaW1pdExvY2F0aW9uKCkpID0+IHtcbiAgICAgICAgaWYgKGdhbWVCb2FyZD8uW2NvbHVtbl0/Lltyb3ddID09PSB1bmRlZmluZWQpIHJldHVybiB0cnVlXG4gICAgICAgIGNvbnN0IGxvY2F0aW9uID0gZ2FtZUJvYXJkW2NvbHVtbl1bcm93XVxuXG4gICAgICAgIGdhbWVCb2FyZFtjb2x1bW5dW3Jvd10gPSB7Li4ubG9jYXRpb24sIC4uLnNoaXB9XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIGNvbnN0IGNoZWNrSWZBbGxTaGlwc0hhdmVTdW5rID0gKCkgPT4ge1xuXG4gICAgICAgIGxldCBoYXZlQWxsU2hpcHNTdW5rID10cnVlICBcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwOyBpICs9IDEpIHtcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgMTA7IGogKz0gMSkge1xuICAgICAgICBjb25zdCBsb2NhdGlvbiA9IGdldExvY2F0aW9uKGksIGopXG4gICAgICAgIGlmKGxvY2F0aW9uLmlzU2hpcCA9PT0gZmFsc2UpIGNvbnRpbnVlXG4gICAgICAgIGlmKGxvY2F0aW9uLmlzU2hpcCAmJiBsb2NhdGlvbi5pc1N1bmsoKSA9PT0gZmFsc2Upe1xuICAgICAgICAgICBoYXZlQWxsU2hpcHNTdW5rID0gZmFsc2UgXG4gICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBoYXZlQWxsU2hpcHNTdW5rIFxuICAgIH1cblxuICAgIGNvbnN0IGFkZE9mZkxpbWl0QXJlYUZvclNoaXBzID0gKGNvbHVtbiwgcm93KSA9PiB7XG4gICAgICAgIC8vIHRvcC1sZWZ0XG4gICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiAtIDEsIHJvdyAtIDEpXG4gICAgICAgIC8vIHRvcFxuICAgICAgICBzZXRMb2NhdGlvbihjb2x1bW4sIHJvdyAtIDEpXG4gICAgfVxuXG4gICAgY29uc3QgYWRkT2ZmTGltaXRBcmVhRm9ySG9yaXpvbnRhbGx5UG9zaXRpb25lZFNoaXAgPSAoXG4gICAgICAgIGNvbHVtbixcbiAgICAgICAgcm93LFxuICAgICAgICBzaGlwTGVuZ3RoXG4gICAgKSA9PiB7XG4gICAgICAgIC8vIHBvc2l0aW9ucyByZWxhdGl2ZSB0byB0aGUgc2hpcCBpdHNlbGYoaWUuIGEgaG9yaXpvbnRhbCBzaGlwJ3MgYm90dG9tIGlzIHRvIHRoZSByaWdodClcblxuICAgICAgICBhZGRPZmZMaW1pdEFyZWFGb3JTaGlwcyhjb2x1bW4sIHJvdylcbiAgICAgICAgLy8gYm90dG9tXG4gICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiArIHNoaXBMZW5ndGgsIHJvdylcbiAgICAgICAgLy8gYm90dG9tLWxlZnRcbiAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uIC0gMSwgcm93ICsgMSlcbiAgICAgICAgLy8gYm90dG9tLXJpZ2h0XG4gICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiArIHNoaXBMZW5ndGgsIHJvdyArIDEpXG4gICAgICAgIC8vIHRvcC1yaWdodFxuICAgICAgICBzZXRMb2NhdGlvbihjb2x1bW4gKyBzaGlwTGVuZ3RoLCByb3cgLSAxKVxuICAgICAgICAvLyBsZWZ0XG4gICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiAtMSwgcm93KVxuICAgIH1cblxuICAgIGNvbnN0IGFkZE9mZkxpbWl0QXJlYUZvclZlcnRpY2FsbHlQb3NpdGlvbmVkU2hpcCA9IChcbiAgICAgICAgY29sdW1uLFxuICAgICAgICByb3csXG4gICAgICAgIHNoaXBMZW5ndGhcbiAgICApID0+IHtcbiAgICAgICAgLy8gcG9zaXRpb25zIHJlbGF0aXZlIHRvIGhvdyB0aGUgdXNlciBzZWVzIGl0KGllLiBhIHZlcnRpY2FsIHNoaXAncyBib3R0b20gaXMgdG8gdGhlIGJvdHRvbSlcblxuICAgICAgICBhZGRPZmZMaW1pdEFyZWFGb3JTaGlwcyhjb2x1bW4sIHJvdylcbiAgICAgICAgLy8gYm90dG9tXG4gICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiwgcm93ICsgc2hpcExlbmd0aClcbiAgICAgICAgLy8gYm90dG9tLXJpZ2h0XG4gICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiArIDEsIHJvdyArIHNoaXBMZW5ndGgpXG4gICAgICAgIC8vIGJvdHRvbS1sZWZ0XG4gICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiAtIDEsIHJvdyArIHNoaXBMZW5ndGgpXG4gICAgICAgIC8vIHRvcC1yaWdodFxuICAgICAgICBzZXRMb2NhdGlvbihjb2x1bW4gKyAxLCByb3cgLSAxKVxuICAgIH1cblxuICAgIGNvbnN0IGNoZWNrSWZDb2x1bW5Db29yZGluYXRlSXNWYWxpZCA9IChjb2x1bW4sIHNoaXBMZW5ndGgpID0+XG4gICAgICAgIGNvbHVtbiA+PSAwICYmIGNvbHVtbiArIHNoaXBMZW5ndGggLSAxIDwgZ2FtZUJvYXJkLmxlbmd0aFxuXG4gICAgY29uc3QgY2hlY2tJZlJvd0Nvb3JkaW5hdGVJc1ZhbGlkID0gKHJvdywgc2hpcExlbmd0aCkgPT5cbiAgICAgICAgcm93ID49IDAgJiYgcm93ICsgc2hpcExlbmd0aCAtIDEgPCBnYW1lQm9hcmQubGVuZ3RoXG5cblxuICAgIGNvbnN0IGNoZWNrSWZMb2NhdGlvbklzQVNoaXBPck9mZkxpbWl0cyA9IChcbiAgICAgICAgY29sdW1uLFxuICAgICAgICByb3csXG4gICAgICAgIGRpcmVjdGlvbixcbiAgICAgICAgc2hpcExlbmd0aFxuICAgICkgPT4ge1xuICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAndmVydGljYWwnKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXBMZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2F0aW9uID0gZ2V0TG9jYXRpb24oY29sdW1uLCByb3cgKyBpKVxuICAgICAgICAgICAgICAgIGlmIChsb2NhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5pc1NoaXAgPT09IHRydWUgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLm9mZkxpbWl0cyA9PT0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAnaG9yaXpvbnRhbCcpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcExlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbG9jYXRpb24gPSBnZXRMb2NhdGlvbihjb2x1bW4gKyBpLCByb3cpXG4gICAgICAgICAgICAgICAgaWYgKGxvY2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmlzU2hpcCA9PT0gdHJ1ZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ub2ZmTGltaXRzID09PSB0cnVlXG4gICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWUgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbmNvbnN0IHBsYWNlU2hpcCA9IChjb2x1bW4sIHJvdywgZGlyZWN0aW9uLCBzaGlwKSA9PiB7XG4gICAgaWYoZ2FtZUJvYXJkW2NvbHVtbl1bcm93XS5pc1NoaXAgfHwgZ2FtZUJvYXJkW2NvbHVtbl1bcm93XS5vZmZMaW1pdHMpIHJldHVybiBmYWxzZVxuICAgICAgICBjb25zdCBzaGlwTGVuZ3RoID0gc2hpcC5nZXRMZW5ndGgoKVxuICAgICAgICBpZiAoY2hlY2tJZkxvY2F0aW9uSXNBU2hpcE9yT2ZmTGltaXRzKGdldExvY2F0aW9uKGNvbHVtbiwgcm93LCBkaXJlY3Rpb24sIHNoaXBMZW5ndGgpKSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAndmVydGljYWwnKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2tJZlJvd0Nvb3JkaW5hdGVJc1ZhbGlkKHJvdywgc2hpcExlbmd0aCkpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXBMZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgICAgICAgICBzZXRMb2NhdGlvbihjb2x1bW4sIHJvdyArIGksIHsuLi5zaGlwLCBwb3NpdGlvbjogaX0pXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlc2VydmVBcm91bmQoY29sdW1uLCByb3cgKyBpKVxuICAgICAgICAgICAgICAgICAgICBzZXRMb2NhdGlvbihjb2x1bW4gKyAxLCByb3cgKyBpKVxuICAgICAgICAgICAgICAgICAgICBzZXRMb2NhdGlvbihjb2x1bW4gLSAxLCByb3cgKyBpKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhZGRPZmZMaW1pdEFyZWFGb3JWZXJ0aWNhbGx5UG9zaXRpb25lZFNoaXAoXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbixcbiAgICAgICAgICAgICAgICAgICAgcm93LFxuICAgICAgICAgICAgICAgICAgICBzaGlwTGVuZ3RoXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09PSAnaG9yaXpvbnRhbCcpIHtcbiAgICAgICAgICAgIGlmIChjaGVja0lmQ29sdW1uQ29vcmRpbmF0ZUlzVmFsaWQoY29sdW1uLCBzaGlwTGVuZ3RoKSkge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcExlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiArIGkgLCByb3csIHsuLi5zaGlwLCBwb3NpdGlvbjogaX0pXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlc2VydmVBcm91bmQoY29sdW1uICsgaSwgcm93KVxuICAgICAgICAgICAgICAgICAgICBzZXRMb2NhdGlvbihjb2x1bW4gKyBpLCByb3cgKyAxKVxuICAgICAgICAgICAgICAgICAgICBzZXRMb2NhdGlvbihjb2x1bW4gKyBpLCByb3cgLSAxKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhZGRPZmZMaW1pdEFyZWFGb3JIb3Jpem9udGFsbHlQb3NpdGlvbmVkU2hpcChcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLFxuICAgICAgICAgICAgICAgICAgICByb3csXG4gICAgICAgICAgICAgICAgICAgIHNoaXBMZW5ndGhcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgICAgIGNvbnN0IGF2YWlsYWJsZVNwYWNlcyA9ICgpID0+e1xuXG4gICAgICAgIGNvbnN0IGZsYXR0ZW5lZEdhbWVCb2FyZCA9IFsuLi5nYW1lQm9hcmQuZmxhdCgpXVxuXG4gICAgICAgICAgICBmbGF0dGVuZWRHYW1lQm9hcmQuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmKGVsZW1lbnQuaGFzQmVlbkhpdCA9PT0gdHJ1ZSl7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuYXZhaWxhYmlsaXR5ID0gZmFsc2VcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5hdmFpbGFiaWxpdHkgPXRydWUgIFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIHJldHVybiBmbGF0dGVuZWRHYW1lQm9hcmRcblxuICAgICAgICB9XG4gICAgY29uc3QgbWFrZVJhbmRvbUNvb3JkaW5hdGVzID0gKCkgPT4ge1xuICAgICAgICBjb25zdCByYW5kb21Mb2NhdGlvbiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMClcbiAgICAgICAgY29uc3QgZmxhdHRlbmVkR2FtZUJvYXJkID0gYXZhaWxhYmxlU3BhY2VzKClcblxuICAgICAgICBjb25zdCBsb2NhdGlvbiA9IGZsYXR0ZW5lZEdhbWVCb2FyZFtyYW5kb21Mb2NhdGlvbl1cblxuICAgICAgICBpZihsb2NhdGlvbi5hdmFpbGFiaWxpdHkgPT09IGZhbHNlKXtcbiAgICAgICAgICAgIHJldHVybiBtYWtlUmFuZG9tQ29vcmRpbmF0ZXMoKVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZWxlbWVudENvbHVtbiA9IGxvY2F0aW9uLmNvbHVtblxuICAgICAgICBjb25zdCBlbGVtZW50Um93ID0gbG9jYXRpb24ucm93XG5cblxuICAgICAgICByZXR1cm4gW2VsZW1lbnRDb2x1bW4sIGVsZW1lbnRSb3ddXG4gICAgfVxuICAvLyBjcmVhdGVzIGEgc2hpcCB3aXRoIHJhbmRvbSBwb3MgYW5kIG9yaWVudGF0aW9uXG4gIGNvbnN0IHJhbmRvbVNoaXAgPSAobGVuZ3RoKSA9PiB7XG4gICAgY29uc3QgcG9zMSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKTtcbiAgICBjb25zdCBwb3MyID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApO1xuICAgIGxldCBkaXIgPSBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkpO1xuXG4gICAgaWYgKGRpciA9PT0gMCkge1xuICAgICAgZGlyID0gXCJob3Jpem9udGFsXCI7XG4gICAgICBpZiAocGxhY2VTaGlwKHBvczEsIHBvczIsIGRpciwgY3JlYXRlU2hpcChsZW5ndGgpKSA9PT0gZmFsc2UpIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoZGlyID09PSAxKSB7XG4gICAgICBkaXIgPSBcInZlcnRpY2FsXCI7XG4gICAgICBpZiAocGxhY2VTaGlwKHBvczEsIHBvczIsIGRpciwgY3JlYXRlU2hpcChsZW5ndGgpKSA9PT0gZmFsc2UpIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH07XG4gIC8vIGNyZWF0ZXMgYSByYW5kb20gZmxlZXQgb2YgOCBzaGlwc1xuICBjb25zdCByYW5kb21GbGVldCA9ICgpID0+IHtcbiAgICAvLyBjcmVhdGUgMiBzaGlwcyBvZiBsZW5ndGggMVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMjsgKSB7XG4gICAgICBpZiAocmFuZG9tU2hpcCgxKSA9PT0gZmFsc2UpIGNvbnRpbnVlO1xuICAgICAgaSArPSAxO1xuICAgIH1cbiAgICAvLyBjcmVhdGUgMiBzaGlwcyBvZiBsZW5ndGggMlxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMjsgKSB7XG4gICAgICBpZiAocmFuZG9tU2hpcCgyKSA9PT0gZmFsc2UpIGNvbnRpbnVlO1xuICAgICAgaSArPSAxO1xuICAgIH1cbiAgICAvLyBjcmVhdGUgMiBzaGlwcyBvZiBsZW5ndGggM1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMjsgKSB7XG4gICAgICBpZiAocmFuZG9tU2hpcCgzKSA9PT0gZmFsc2UpIGNvbnRpbnVlO1xuICAgICAgaSArPSAxO1xuICAgIH1cbiAgICAvLyBjcmVhdGUgMSBzaGlwIG9mIGxlbmd0aCA0XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAyOyApIHtcbiAgICAgIGlmIChyYW5kb21TaGlwKDQpID09PSBmYWxzZSkgY29udGludWU7XG4gICAgICBpICs9IDE7XG4gICAgfVxuICAgIGlzU3RhcnRBbGxvd2VkID0gdHJ1ZVxuICB9O1xuXG4gICAgY29uc3QgcmFuZG9tbHlQbGFjZVNoaXBzID0gKCkgPT4ge1xuXG4gICAgY2xlYXJCb2FyZCgpXG4gICAgY29uc3QgcmFuZG9tUG9zc2liaWxpdHkgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMClcbiAgICBzd2l0Y2gocmFuZG9tUG9zc2liaWxpdHkpe1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICBwbGFjZVNoaXAoMSwgMSwgJ2hvcml6b250YWwnLGNyZWF0ZVNoaXAoNCkpXG4gICAgICAgICAgICBwbGFjZVNoaXAoMSwgNCwgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDQpKVxuICAgICAgICAgICAgcGxhY2VTaGlwKDcsIDMsICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCgzKSlcbiAgICAgICAgICAgIHBsYWNlU2hpcCgyLCA3LCAnaG9yaXpvbmFsJywgY3JlYXRlU2hpcCgzKSlcbiAgICAgICAgICAgIHBsYWNlU2hpcCg2LCA3LCAnaG9yaXpvbnRhbCcsIGNyZWF0ZVNoaXAoMikpXG4gICAgICAgICAgICBwbGFjZVNoaXAoNSwgOSwgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDIpKVxuICAgICAgICAgICAgcGxhY2VTaGlwKDgsIDEsICd2ZXJ0aWNhbCcsIGNyZWF0ZVNoaXAoMSkpXG4gICAgICAgICAgICBwbGFjZVNoaXAoOSwgNSwgJ3ZlcnRpY2FsJywgY3JlYXRlU2hpcCgxKSlcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICBwbGFjZVNoaXAoMCwgMSwgJ3ZlcnRpY2FsJywgY3JlYXRlU2hpcCg0KSlcbiAgICAgICAgICAgIHBsYWNlU2hpcCg4LCAxLCAndmVydGljYWwnLCBjcmVhdGVTaGlwKDQpKVxuICAgICAgICAgICAgcGxhY2VTaGlwKDMsIDEsICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCgzKSlcbiAgICAgICAgICAgIHBsYWNlU2hpcCgwLCA3LCAndmVydGljYWwnLCBjcmVhdGVTaGlwKDMpKVxuICAgICAgICAgICAgcGxhY2VTaGlwKDMsIDYsICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCgyKSlcbiAgICAgICAgICAgIHBsYWNlU2hpcCg4LCA3LCAnaG9yaXpvbnRhbCcsIGNyZWF0ZVNoaXAoMikpXG4gICAgICAgICAgICBwbGFjZVNoaXAoNCwgOCwgJ3ZlcnRpY2FsJywgY3JlYXRlU2hpcCgxKSlcbiAgICAgICAgICAgIHBsYWNlU2hpcCg2LCA3LCAndmVydGljYWwnLCBjcmVhdGVTaGlwKDEpKVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHBsYWNlU2hpcCgwLCAxLCAnaG9yaXpvbnRhbCcsIGNyZWF0ZVNoaXAoNCkpXG4gICAgICAgICAgICBwbGFjZVNoaXAoMCwgMywgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDQpKVxuICAgICAgICAgICAgcGxhY2VTaGlwKDksIDEsICd2ZXJ0aWNhbCcsIGNyZWF0ZVNoaXAoMykpXG4gICAgICAgICAgICBwbGFjZVNoaXAoMiwgOCwgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDMpKVxuICAgICAgICAgICAgcGxhY2VTaGlwKDUsIDMsICd2ZXJ0aWNhbCcsIGNyZWF0ZVNoaXAoMikpXG4gICAgICAgICAgICBwbGFjZVNoaXAoMCwgNiwgJ3ZlcnRpY2FsJywgY3JlYXRlU2hpcCgyKSlcbiAgICAgICAgICAgIHBsYWNlU2hpcCgxLCA2LCAndmVydGljYWwnLCBjcmVhdGVTaGlwKDEpKVxuICAgICAgICAgICAgcGxhY2VTaGlwKDcsIDQsICd2ZXJ0aWNhbCcsIGNyZWF0ZVNoaXAoMSkpXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgcGxhY2VTaGlwKDAsIDAsICd2ZXJ0aWNhbCcsIGNyZWF0ZVNoaXAoNCkpXG4gICAgICAgICAgICBwbGFjZVNoaXAoOSwgMCwgJ3ZlcnRpY2FsJywgY3JlYXRlU2hpcCg0KSlcbiAgICAgICAgICAgIHBsYWNlU2hpcCgwLCA1LCAndmVydGljYWwnLCBjcmVhdGVTaGlwKDMpKVxuICAgICAgICAgICAgcGxhY2VTaGlwKDMsIDEsICd2ZXJ0aWNhbCcsIGNyZWF0ZVNoaXAoMykpXG4gICAgICAgICAgICBwbGFjZVNoaXAoNSwgMSwgJ3ZlcnRpY2FsJywgY3JlYXRlU2hpcCgyKSlcbiAgICAgICAgICAgIHBsYWNlU2hpcCg3LCAxLCAndmVydGljYWwnLCBjcmVhdGVTaGlwKDIpKVxuICAgICAgICAgICAgcGxhY2VTaGlwKDQsIDcsICd2ZXJ0aWNhbCcsIGNyZWF0ZVNoaXAoMSkpXG4gICAgICAgICAgICBwbGFjZVNoaXAoOCwgNywgJ3ZlcnRpY2FsJywgY3JlYXRlU2hpcCgxKSlcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICBwbGFjZVNoaXAoMiwgNCwgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDQpKVxuICAgICAgICAgICAgcGxhY2VTaGlwKDAsIDYsICd2ZXJ0aWNhbCcsIGNyZWF0ZVNoaXAoNCkpXG4gICAgICAgICAgICBwbGFjZVNoaXAoMiwgNywgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDMpKVxuICAgICAgICAgICAgcGxhY2VTaGlwKDYsIDYsICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCgzKSlcbiAgICAgICAgICAgIHBsYWNlU2hpcCg3LCAxLCAnaG9yaXpvbnRhbCcsIGNyZWF0ZVNoaXAoMikpXG4gICAgICAgICAgICBwbGFjZVNoaXAoNiwgOCwgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDIpKVxuICAgICAgICAgICAgcGxhY2VTaGlwKDIsIDEsICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCgxKSlcbiAgICAgICAgICAgIHBsYWNlU2hpcCg0LCAxLCAnaG9yaXpvbnRhbCcsIGNyZWF0ZVNoaXAoMSkpXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgcGxhY2VTaGlwKDEsIDMsICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCg0KSlcbiAgICAgICAgICAgIHBsYWNlU2hpcCg2LCAyLCAndmVydGljYWwnLCBjcmVhdGVTaGlwKDQpKVxuICAgICAgICAgICAgcGxhY2VTaGlwKDAsIDYsICd2ZXJ0aWNhbCcsIGNyZWF0ZVNoaXAoMykpXG4gICAgICAgICAgICBwbGFjZVNoaXAoOCwgMiwgJ3ZlcnRpY2FsJywgY3JlYXRlU2hpcCgzKSlcbiAgICAgICAgICAgIHBsYWNlU2hpcCgwLCAwLCAnaG9yaXpvbnRhbCcsIGNyZWF0ZVNoaXAoMikpXG4gICAgICAgICAgICBwbGFjZVNoaXAoMiwgNiwgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDIpKVxuICAgICAgICAgICAgcGxhY2VTaGlwKDksIDYsICd2ZXJ0aWNhbCcsIGNyZWF0ZVNoaXAoMSkpXG4gICAgICAgICAgICBwbGFjZVNoaXAoNSwgOSwgJ3ZlcnRpY2FsJywgY3JlYXRlU2hpcCgxKSlcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICBwbGFjZVNoaXAoMCwgMCwgJ3ZlcnRpY2FsJywgY3JlYXRlU2hpcCg0KSlcbiAgICAgICAgICAgIHBsYWNlU2hpcCgwLCA2LCAndmVydGljYWwnLCBjcmVhdGVTaGlwKDQpKVxuICAgICAgICAgICAgcGxhY2VTaGlwKDAsIDIsICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCgzKSlcbiAgICAgICAgICAgIHBsYWNlU2hpcCg2LCAxLCAnaG9yaXpvbnRhbCcsIGNyZWF0ZVNoaXAoMykpXG4gICAgICAgICAgICBwbGFjZVNoaXAoOCwgMywgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDIpKVxuICAgICAgICAgICAgcGxhY2VTaGlwKDksIDUsICd2ZXJ0aWNhbCcsIGNyZWF0ZVNoaXAoMikpXG4gICAgICAgICAgICBwbGFjZVNoaXAoOSwgOCwgJ3ZlcnRpY2FsJywgY3JlYXRlU2hpcCgxKSlcbiAgICAgICAgICAgIHBsYWNlU2hpcCg3LCA5LCAndmVydGljYWwnLCBjcmVhdGVTaGlwKDEpKVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgIHBsYWNlU2hpcCgwLCAxLCAndmVydGljYWwnLCBjcmVhdGVTaGlwKDQpKVxuICAgICAgICAgICAgcGxhY2VTaGlwKDAsIDYsICd2ZXJ0aWNhbCcsIGNyZWF0ZVNoaXAoNCkpXG4gICAgICAgICAgICBwbGFjZVNoaXAoMiwgMCwgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDMpKVxuICAgICAgICAgICAgcGxhY2VTaGlwKDYsIDAsICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCgzKSlcbiAgICAgICAgICAgIHBsYWNlU2hpcCg5LCAyLCAndmVydGljYWwnLCBjcmVhdGVTaGlwKDIpKVxuICAgICAgICAgICAgcGxhY2VTaGlwKDksIDYsICd2ZXJ0aWNhbCcsIGNyZWF0ZVNoaXAoMikpXG4gICAgICAgICAgICBwbGFjZVNoaXAoOSwgOSwgJ3ZlcnRpY2FsJywgY3JlYXRlU2hpcCgxKSlcbiAgICAgICAgICAgIHBsYWNlU2hpcCg3LCA5LCAndmVydGljYWwnLCBjcmVhdGVTaGlwKDEpKVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgIHBsYWNlU2hpcCgyLCAwLCAndmVydGljYWwnLCBjcmVhdGVTaGlwKDQpKVxuICAgICAgICAgICAgcGxhY2VTaGlwKDcsIDEsICd2ZXJ0aWNhbCcsIGNyZWF0ZVNoaXAoNCkpXG4gICAgICAgICAgICBwbGFjZVNoaXAoMiwgNSwgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDMpKVxuICAgICAgICAgICAgcGxhY2VTaGlwKDYsIDcsICd2ZXJ0aWNhbCcsIGNyZWF0ZVNoaXAoMykpXG4gICAgICAgICAgICBwbGFjZVNoaXAoMSwgOSwgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDIpKVxuICAgICAgICAgICAgcGxhY2VTaGlwKDIsIDcsICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCgyKSlcbiAgICAgICAgICAgIHBsYWNlU2hpcCg5LCA2LCAndmVydGljYWwnLCBjcmVhdGVTaGlwKDEpKVxuICAgICAgICAgICAgcGxhY2VTaGlwKDgsIDksICd2ZXJ0aWNhbCcsIGNyZWF0ZVNoaXAoMSkpXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgcGxhY2VTaGlwKDAsIDAsICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCg0KSlcbiAgICAgICAgICAgIHBsYWNlU2hpcCg1LCAyLCAndmVydGljYWwnLCBjcmVhdGVTaGlwKDEpKVxuICAgICAgICAgICAgcGxhY2VTaGlwKDIsIDYsICd2ZXJ0aWNhbCcsIGNyZWF0ZVNoaXAoMSkpXG4gICAgICAgICAgICBwbGFjZVNoaXAoMCwgOCwgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDMpKVxuICAgICAgICAgICAgcGxhY2VTaGlwKDQsIDUsICd2ZXJ0aWNhbCcsIGNyZWF0ZVNoaXAoNCkpXG4gICAgICAgICAgICBwbGFjZVNoaXAoNywgNCwgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDIpKVxuICAgICAgICAgICAgcGxhY2VTaGlwKDYsIDYsICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCgyKSlcbiAgICAgICAgICAgIHBsYWNlU2hpcCg3LCA4LCAnaG9yaXpvbnRhbCcsIGNyZWF0ZVNoaXAoMykpXG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgcmVjZWl2ZUF0dGFjayA9IChjb2x1bW4sIHJvdykgPT4ge1xuICAgICAgICBnYW1lQm9hcmRbY29sdW1uXVtyb3ddLmhhc0JlZW5IaXQgPSB0cnVlXG4gICAgfVxuXG4gICAgY29uc3QgY2hlY2tJZk9mZkxpbWl0Wm9uZVdhc0NvcnJlY3RseUltcGxlbWVudGVkID0gKHNoaXBMZW5ndGgpID0+XG4gICAgICAgIGdhbWVCb2FyZC5mbGF0KCkuZmlsdGVyKChlbGVtZW50KSA9PiBlbGVtZW50Lm9mZkxpbWl0cyA9PT0gdHJ1ZSlcbiAgICAgICAgICAgIC5sZW5ndGggPT09XG4gICAgICAgIHNoaXBMZW5ndGggKyAyXG4gICAgLy8gYWRkaW5nIHNoaXBMZW5ndGggcGx1cyB0d28gYmVjYXVzZSBmb3IgZXZlcnkgaW5jcmVhc2UgaW4gdGhlIHNpemUgb2Ygc2hpcCwgdGhlIHpvbmVzIGNvdmVyZWQgaW5jcmVhc2UgYnkgMiB1bml0c1xuXG4gICAgIFxuICAgIGNvbnN0IGNoZWNrSWZCb2FyZEhhc0JlZW5GdWxseVBvcHVsYXRlZCA9ICgpID0+IHtcblxuICAgICAgICBjb25zdCBmbGF0dGVuZWRHYW1lQm9hcmQgPSBnYW1lQm9hcmQuZmxhdCgpXG5cbiAgICAgICAgbGV0IG51bU9mU2hpcENlbGxzID0gMFxuXG4gICAgICAgIGZsYXR0ZW5lZEdhbWVCb2FyZC5mb3JFYWNoKChsb2NhdGlvbikgPT4ge1xuXG4gICAgICAgICAgICBpZihsb2NhdGlvbi5pc1NoaXApe1xuICAgICAgICAgICAgICAgIG51bU9mU2hpcENlbGxzICs9IDFcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgICAgICByZXR1cm4gbnVtT2ZTaGlwQ2VsbHMgPT09IDIwXG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgY2xlYXJCb2FyZCxcbiAgICAgICAgY2hlY2tJZkxvY2F0aW9uSXNBU2hpcE9yT2ZmTGltaXRzLFxuICAgICAgICBjaGVja0lmT2ZmTGltaXRab25lV2FzQ29ycmVjdGx5SW1wbGVtZW50ZWQsXG4gICAgICAgIGdldExvY2F0aW9uLFxuICAgICAgICByZWNlaXZlQXR0YWNrLFxuICAgICAgICBjaGVja0lmQWxsU2hpcHNIYXZlU3VuayxcbiAgICAgICAgcGxhY2VTaGlwLFxuICAgICAgICByYW5kb21seVBsYWNlU2hpcHMsXG4gICAgICAgIG1ha2VSYW5kb21Db29yZGluYXRlcyxcbiAgICAgICAgY2hlY2tJZkJvYXJkSGFzQmVlbkZ1bGx5UG9wdWxhdGVkLFxuICAgICAgICByYW5kb21GbGVldCxcbiAgICAgICAgZ2FtZUJvYXJkLFxuICAgICAgICBpc1N0YXJ0QWxsb3dlZCA6IHtcbiAgICAgICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaXNTdGFydEFsbG93ZWRcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpc1N0YXJ0QWxsb3dlZCA9IHZhbHVlXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5tb2R1bGUuZXhwb3J0cyA9IGNyZWF0ZUdhbWVCb2FyZCIsImNvbnN0IGNyZWF0ZVBsYXllciA9IChuYW1lID0gJ3BsYXllcicpID0+IHtcblxuICAgIGxldCB0dXJuID0gZmFsc2VcbiAgICBjb25zdCBnZXROYW1lID0gKCkgPT4gbmFtZVxuXG4gICAgY29uc3QgYXR0YWNrID0gKGNvbHVtbiwgcm93LCB7IGdldExvY2F0aW9uLCByZWNlaXZlQXR0YWNrIH0pID0+IHtcbiAgICAgICAgY29uc3QgbG9jYXRpb24gPSBnZXRMb2NhdGlvbihjb2x1bW4sIHJvdylcbiAgICAgICAgaWYgKGxvY2F0aW9uLmhhc0JlZW5IaXQgPT09IGZhbHNlIHx8IChsb2NhdGlvbi5pc1NoaXAgJiYgbG9jYXRpb24uZ2V0U3RhdHVzKCkuaW5jbHVkZXMoJ3VuaGl0JykgPT09IGZhbHNlKSkge1xuICAgICAgICAgICAgcmVjZWl2ZUF0dGFjayhjb2x1bW4sIHJvdylcbiAgICAgICAgICAgIGlmKGxvY2F0aW9uLmhpdCl7XG5cbiAgICAgICAgICAgICAgICBsb2NhdGlvbi5oaXQobG9jYXRpb24ucG9zaXRpb24pXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiWW91IGhpdCBhIHNoaXAhXCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBcIkl0J3MgYSBoaXQhXCJcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAnWW91IGhhdmUgYWxyZWFkeSBoaXQgdGhpcyBzcG90ISdcbiAgICB9XG5cbiAgICBjb25zdCBpc1R1cm4gPSAoZW5lbXkpID0+IHtcbiAgICAgICAgdHVybiA9IHRydWVcbiAgICAgICAgZW5lbXkudHVybi5zZXQoZmFsc2UpXG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgZ2V0TmFtZSxcbiAgICAgICAgYXR0YWNrLFxuICAgICAgICB0dXJuOiB7XG4gICAgICAgICAgICBnZXQgKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0dXJuO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldCAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICB0dXJuID0gdmFsdWU7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBpc1R1cm4sXG4gICAgICAgIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjcmVhdGVQbGF5ZXJcbiIsImNvbnN0IGNyZWF0ZVNoaXAgPSAobGVuZ3RoLCBuYW1lID0gJ3NoaXAnKSA9PiB7XG5cbiAgICBjb25zdCBkb21UYXJnZXRzID0gW11cblxuICAgIGNvbnN0IHN0YXR1cyA9IEFycmF5KGxlbmd0aCkuZmlsbCgndW5oaXQnKVxuXG4gICAgY29uc3QgZ2V0TGVuZ3RoID0gKCkgPT4gc3RhdHVzLmxlbmd0aFxuXG4gICAgY29uc3QgZ2V0U3RhdHVzID0gKCkgPT4gc3RhdHVzXG5cbiAgICBjb25zdCBoaXQgPSAocG9zaXRpb24pID0+IHtcbiAgICAgICAgaWYgKHBvc2l0aW9uIDwgbGVuZ3RoKSB7XG4gICAgICAgICAgICBzdGF0dXNbcG9zaXRpb25dID0gJ2hpdCdcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGdldE5hbWUgPSAoKSA9PiAgbmFtZVxuXG4gICAgY29uc3QgaXNTdW5rID0gKCkgPT4gc3RhdHVzLmV2ZXJ5KChwb3NpdGlvbikgPT4gcG9zaXRpb24gPT09ICdoaXQnKVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgZ2V0TmFtZSxcbiAgICAgICAgZ2V0TGVuZ3RoLFxuICAgICAgICBpc1N1bmssXG4gICAgICAgIGhpdCxcbiAgICAgICAgZ2V0U3RhdHVzLFxuICAgICAgICBkb21UYXJnZXRzLFxuICAgICAgICBoYXNCZWVuSGl0OiBmYWxzZSxcbiAgICAgICAgb2ZmTGltaXRzOiB0cnVlLFxuICAgICAgICBpc1NoaXA6IHRydWUsXG4gICAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGNyZWF0ZVNoaXBcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gKG1vZHVsZSkgPT4ge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHQoKSA9PiAobW9kdWxlWydkZWZhdWx0J10pIDpcblx0XHQoKSA9PiAobW9kdWxlKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvbm8tbXV0YWJsZS1leHBvcnRzICovXG4vKiBlc2xpbnQtZGlzYWJsZSBjb25zaXN0ZW50LXJldHVybiAqL1xuLyogZXNsaW50LWRpc2FibGUgaW1wb3J0L25vLWN5Y2xlICovXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1lbHNlLXJldHVybiAqL1xuaW1wb3J0IHtyZW5kZXJBdHRhY2tQMiB9IGZyb20gJy4vZG9tJ1xuXG5sZXQgd2FzSGl0ID0gZmFsc2U7XG5sZXQgc3RhdHVzID0gZmFsc2U7XG5sZXQgbGFzdEhpdFBvcyA9IFtdO1xubGV0IGZpcnN0SGl0UG9zID0gW107XG5sZXQgc2Vjb25kSGl0UG9zID0gW107XG5sZXQgc3Vycm91bmRpbmdQb3MgPSBbXTtcbmxldCBhdHRhY2tEaXJlY3Rpb247XG5cbi8vIGdldCBwb3Mgb2YgYXR0YWNrIGJhc2VkIG9uIGRpcmVjdGlvblxuZnVuY3Rpb24gYXR0YWNrVG93YXJkcyhkaXIpIHtcbiAgaWYgKGRpciA9PT0gXCJsZWZ0XCIpIHtcbiAgICBhdHRhY2tEaXJlY3Rpb24gPSBcImxlZnRcIjtcbiAgICByZXR1cm4gW2xhc3RIaXRQb3NbMF0sIGxhc3RIaXRQb3NbMV0gLSAxXTtcbiAgfVxuICBpZiAoZGlyID09PSBcInJpZ2h0XCIpIHtcbiAgICBhdHRhY2tEaXJlY3Rpb24gPSBcInJpZ2h0XCI7XG4gICAgcmV0dXJuIFtsYXN0SGl0UG9zWzBdLCBsYXN0SGl0UG9zWzFdICsgMV07XG4gIH1cbiAgaWYgKGRpciA9PT0gXCJkb3duXCIpIHtcbiAgICBhdHRhY2tEaXJlY3Rpb24gPSBcImRvd25cIjtcbiAgICByZXR1cm4gW2xhc3RIaXRQb3NbMF0gKyAxLCBsYXN0SGl0UG9zWzFdXTtcbiAgfVxuICBpZiAoZGlyID09PSBcInVwXCIpIHtcbiAgICBhdHRhY2tEaXJlY3Rpb24gPSBcInVwXCI7XG4gICAgcmV0dXJuIFtsYXN0SGl0UG9zWzBdIC0gMSwgbGFzdEhpdFBvc1sxXV07XG4gIH1cbn1cblxuZnVuY3Rpb24gc2V0V2FzSGl0KHZhbHVlLCBzdGF0LCBwb3MxLCBwb3MyKSB7XG4gIHdhc0hpdCA9IHZhbHVlO1xuICBpZiAoc3RhdCAhPT0gdW5kZWZpbmVkKSBzdGF0dXMgPSBzdGF0O1xuICBpZiAocG9zMSAhPT0gdW5kZWZpbmVkKSBsYXN0SGl0UG9zID0gW3BvczEsIHBvczJdO1xuICBpZiAoZmlyc3RIaXRQb3MubGVuZ3RoID09PSAwICYmIHBvczEgIT09IHVuZGVmaW5lZCkgZmlyc3RIaXRQb3MgPSBbcG9zMSwgcG9zMl07XG4gIGVsc2UgaWYgKFxuICAgIGZpcnN0SGl0UG9zLmxlbmd0aCAhPT0gMCAmJlxuICAgIHNlY29uZEhpdFBvcy5sZW5ndGggPT09IDAgJiZcbiAgICBwb3MxICE9PSB1bmRlZmluZWRcbiAgKVxuICAgIHNlY29uZEhpdFBvcyA9IFtwb3MxLCBwb3MyXTtcbn1cbmZ1bmN0aW9uIGdldFdhc0hpdCgpIHtcbiAgcmV0dXJuIFt3YXNIaXQsIGxhc3RIaXRQb3MsIHN0YXR1c107XG59XG5cbmZ1bmN0aW9uIHJlZ2lzdGVyU3Vycm91bmRpbmdQb3MocG9zMSwgcG9zMikge1xuICBzdXJyb3VuZGluZ1BvcyA9IFtdO1xuICBpZiAocG9zMiAhPT0gMCkgc3Vycm91bmRpbmdQb3MucHVzaChbcG9zMSwgcG9zMiAtIDFdKTtcbiAgaWYgKHBvczIgIT09IDkpIHN1cnJvdW5kaW5nUG9zLnB1c2goW3BvczEsIHBvczIgKyAxXSk7XG4gIGlmIChwb3MxICE9PSAwKSBzdXJyb3VuZGluZ1Bvcy5wdXNoKFtwb3MxIC0gMSwgcG9zMl0pO1xuICBpZiAocG9zMSAhPT0gOSkgc3Vycm91bmRpbmdQb3MucHVzaChbcG9zMSArIDEsIHBvczJdKTtcbiAgcmV0dXJuIHN1cnJvdW5kaW5nUG9zO1xufVxuXG5mdW5jdGlvbiBhaVBsYXkocmVwZWF0LCBwMSwgcDIsIGlzU3VuaywgcGxheWVyQm9hcmQsIGVuZW15Qm9hcmQpIHtcbiAgbGV0IHBvczsgXG4gIGlmIChpc1N1bmsgPT09IHRydWUpIHtcbiAgICBsYXN0SGl0UG9zID0gW107XG4gICAgZmlyc3RIaXRQb3MgPSBbXTtcbiAgICBzZWNvbmRIaXRQb3MgPSBbXTtcbiAgICBzdXJyb3VuZGluZ1BvcyA9IFtdO1xuICAgIHdhc0hpdCA9IGZhbHNlO1xuICAgIHN0YXR1cyA9IGZhbHNlO1xuICAgIGF0dGFja0RpcmVjdGlvbiA9IFwiXCI7XG4gIH1cbiAgaWYgKCFzdGF0dXMgJiYgIXdhc0hpdCkge1xuICAgIHBvcyA9IHBsYXllckJvYXJkLm1ha2VSYW5kb21Db29yZGluYXRlcygpXG5cbiAgICByZXR1cm4gcmVuZGVyQXR0YWNrUDIocDEsIHAyLCBwb3NbMF0sIHBvc1sxXSwgcGxheWVyQm9hcmQsIGVuZW15Qm9hcmQpO1xuICB9IGVsc2UgaWYgKHNlY29uZEhpdFBvcy5sZW5ndGggIT09IDAgJiYgd2FzSGl0ICYmICFyZXBlYXQpIHtcbiAgICBsZXQgbmV3UG9zO1xuICAgIGlmIChmaXJzdEhpdFBvc1swXSA9PT0gc2Vjb25kSGl0UG9zWzBdIC0gMSkgbmV3UG9zID0gYXR0YWNrVG93YXJkcyhcImRvd25cIik7XG4gICAgaWYgKGZpcnN0SGl0UG9zWzBdID09PSBzZWNvbmRIaXRQb3NbMF0gKyAxKSBuZXdQb3MgPSBhdHRhY2tUb3dhcmRzKFwidXBcIik7XG4gICAgaWYgKGZpcnN0SGl0UG9zWzFdID09PSBzZWNvbmRIaXRQb3NbMV0gLSAxKSBuZXdQb3MgPSBhdHRhY2tUb3dhcmRzKFwicmlnaHRcIik7XG4gICAgaWYgKGZpcnN0SGl0UG9zWzFdID09PSBzZWNvbmRIaXRQb3NbMV0gKyAxKSBuZXdQb3MgPSBhdHRhY2tUb3dhcmRzKFwibGVmdFwiKTtcbiAgICBpZiAobmV3UG9zWzBdID49IDAgJiYgbmV3UG9zWzBdIDw9IDkgJiYgbmV3UG9zWzFdID49IDAgJiYgbmV3UG9zWzFdIDw9IDkpXG4gICAgICByZXR1cm4gcmVuZGVyQXR0YWNrUDIocDEsIHAyLCBuZXdQb3NbMF0sIG5ld1Bvc1sxXSwgcGxheWVyQm9hcmQsIGVuZW15Qm9hcmQpO1xuICB9IGVsc2UgaWYgKHNlY29uZEhpdFBvcy5sZW5ndGggIT09IDAgJiYgc3RhdHVzICYmICF3YXNIaXQpIHtcbiAgICBsYXN0SGl0UG9zID0gZmlyc3RIaXRQb3M7XG4gICAgc2Vjb25kSGl0UG9zID0gW107XG4gICAgbGV0IG5ld1BvcztcbiAgICBpZiAoYXR0YWNrRGlyZWN0aW9uID09PSBcInVwXCIpIG5ld1BvcyA9IGF0dGFja1Rvd2FyZHMoXCJkb3duXCIpO1xuICAgIGlmIChhdHRhY2tEaXJlY3Rpb24gPT09IFwiZG93blwiKSBuZXdQb3MgPSBhdHRhY2tUb3dhcmRzKFwidXBcIik7XG4gICAgaWYgKGF0dGFja0RpcmVjdGlvbiA9PT0gXCJyaWdodFwiKSBuZXdQb3MgPSBhdHRhY2tUb3dhcmRzKFwibGVmdFwiKTtcbiAgICBpZiAoYXR0YWNrRGlyZWN0aW9uID09PSBcImxlZnRcIikgbmV3UG9zID0gYXR0YWNrVG93YXJkcyhcInJpZ2h0XCIpO1xuICAgIGlmIChuZXdQb3NbMF0gPj0gMCAmJiBuZXdQb3NbMF0gPD0gOSAmJiBuZXdQb3NbMV0gPj0gMCAmJiBuZXdQb3NbMV0gPD0gOSlcbiAgICAgIHJldHVybiByZW5kZXJBdHRhY2tQMihwMSwgcDIsIG5ld1Bvc1swXSwgbmV3UG9zWzFdLCBwbGF5ZXJCb2FyZCwgZW5lbXlCb2FyZCk7XG4gIH0gZWxzZSBpZiAoc3RhdHVzKSB7XG4gICAgaWYgKHN1cnJvdW5kaW5nUG9zLmxlbmd0aCA9PT0gMClcbiAgICAgIHJlZ2lzdGVyU3Vycm91bmRpbmdQb3MobGFzdEhpdFBvc1swXSwgbGFzdEhpdFBvc1sxXSk7XG4gICAgaWYgKHN1cnJvdW5kaW5nUG9zLmxlbmd0aCA9PT0gMCAmJiBzdGF0dXMgPT09IHRydWUpXG4gICAgICByZWdpc3RlclN1cnJvdW5kaW5nUG9zKGZpcnN0SGl0UG9zWzBdLCBmaXJzdEhpdFBvc1sxXSk7XG4gICAgY29uc3QgbmV3UG9zID0gc3Vycm91bmRpbmdQb3MucG9wKCk7XG4gICAgcmV0dXJuIHJlbmRlckF0dGFja1AyKHAxLCBwMiwgbmV3UG9zWzBdLCBuZXdQb3NbMV0sIHBsYXllckJvYXJkLCBlbmVteUJvYXJkKTtcbiAgfVxufVxuXG5leHBvcnQgeyBhaVBsYXksIGdldFdhc0hpdCwgc2V0V2FzSGl0LCBsYXN0SGl0UG9zLCBzdXJyb3VuZGluZ1BvcyB9O1xuXG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvbm8tY3ljbGUgKi9cbi8qIGVzbGludC1kaXNhYmxlIGltcG9ydC9uby1tdXRhYmxlLWV4cG9ydHMgKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLXJldHVybi1hc3NpZ24gKi9cbmltcG9ydCB7IHJlbmRlclBsYXllclNoaXBzIH0gZnJvbSAnLi9kb20nXG5pbXBvcnQgY3JlYXRlU2hpcCBmcm9tICcuL3NoaXAvc2hpcCdcblxubGV0IHRvdGFsQW1vdW50U2hpcHMgPSAwXG5cbmZ1bmN0aW9uIHNoaXBEcmFnKHNoaXBOYW1lLCBwbGF5ZXJCb2FyZCkge1xuICAgIGxldCBhbW91bnRMZWZ0ID0gMlxuXG4gICAgY29uc3Qgc2hpcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2hpcE5hbWUpXG4gICAgY29uc3QgYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKVxuICAgIGNvbnN0IGNlbGxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBsYXllci1ib2FyZCA+IC5jZWxsJylcbiAgICBjb25zdCBjaGlsZCA9IHNoaXAuY2hpbGROb2Rlc1xuICAgIGxldCBkcmFnU2VsZWN0aW9uXG4gICAgbGV0IG9mZnNldFxuICAgIGxldCBkaXIgPSAnaG9yaXpvbnRhbCdcblxuICAgIGlmIChjaGlsZFswXSkgY2hpbGRbMF0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsICgpID0+IChvZmZzZXQgPSAwKSlcbiAgICBpZiAoY2hpbGRbMV0pIGNoaWxkWzFdLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCAoKSA9PiAob2Zmc2V0ID0gLTEpKVxuICAgIGlmIChjaGlsZFsyXSkgY2hpbGRbMl0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsICgpID0+IChvZmZzZXQgPSAtMikpXG4gICAgaWYgKGNoaWxkWzNdKSBjaGlsZFszXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgKCkgPT4gKG9mZnNldCA9IC0zKSlcblxuICAgIGZ1bmN0aW9uIGNoYW5nZURpcihlKSB7XG4gICAgICAgIGlmIChkaXIgPT09ICdob3Jpem9udGFsJykge1xuICAgICAgICAgICAgZGlyID0gJ3ZlcnRpY2FsJ1xuICAgICAgICAgICAgZS50YXJnZXQucGFyZW50Tm9kZS5jbGFzc0xpc3QudG9nZ2xlKCdyb3RhdGVkJylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRpciA9ICdob3Jpem9udGFsJ1xuICAgICAgICAgICAgZS50YXJnZXQucGFyZW50Tm9kZS5jbGFzc0xpc3QudG9nZ2xlKCdyb3RhdGVkJylcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNoaXAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gY2hhbmdlRGlyKGUpKVxuXG4gICAgc2hpcC5hZGRFdmVudExpc3RlbmVyKCdkcmFnc3RhcnQnLCAoKSA9PiB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTA7IGkgKz0gMSkge1xuICAgICAgICAgICAgcGxheWVyQm9hcmQuZ2FtZUJvYXJkW2ldLmZvckVhY2goKGUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZS5vZmZMaW1pdHMgfHwgZS5pc1NoaXApXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAucXVlcnlTZWxlY3RvcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgLnBsYXllci1ib2FyZCA+IC5jZWxsW2NvbHVtbj0nJHtlLmNvbHVtbn0nXVtyb3c9JyR7ZS5yb3d9J11gXG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2xhc3NMaXN0LnRvZ2dsZSgnbm90LWF2YWlsYWJsZScpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgfSlcblxuICAgIHNoaXAuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2VuZCcsICgpID0+IHtcbiAgICAgICAgZG9jdW1lbnRcbiAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yQWxsKCcubm90LWF2YWlsYWJsZScpXG4gICAgICAgICAgICAuZm9yRWFjaCgoZSkgPT4gZS5jbGFzc0xpc3QucmVtb3ZlKCdub3QtYXZhaWxhYmxlJykpXG5cbiAgICAgICAgaWYgKGRyYWdTZWxlY3Rpb24gPT09IC0xKSByZXR1cm5cblxuICAgICAgICBsZXQgcG9zMVxuICAgICAgICBsZXQgcG9zMlxuICAgICAgICBsZXQgcG9zID0gYCR7ZHJhZ1NlbGVjdGlvbn1gXG5cbiAgICAgICAgaWYgKGRyYWdTZWxlY3Rpb24gPCAxMCkge1xuICAgICAgICAgICAgcG9zMSA9IDBcbiAgICAgICAgICAgIHBvczIgPSBkcmFnU2VsZWN0aW9uXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwb3MgPSBwb3Muc3BsaXQoJycpXG4gICAgICAgICAgICBwb3MxID0gcG9zWzBdICogMVxuICAgICAgICAgICAgcG9zMiA9IHBvc1sxXSAqIDFcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkaXIgPT09ICdob3Jpem9udGFsJykgcG9zMiArPSBvZmZzZXRcbiAgICAgICAgaWYgKGRpciA9PT0gJ3ZlcnRpY2FsJykgcG9zMSArPSBvZmZzZXRcblxuICAgICAgICBpZiAocG9zMiA8IDApIHJldHVyblxuXG4gICAgICAgIGlmIChzaGlwTmFtZSA9PT0gJy5zaGlwLTEnKSB7XG4gICAgICAgICAgICBpZiAocGxheWVyQm9hcmQucGxhY2VTaGlwKHBvczIsIHBvczEsIGRpciwgY3JlYXRlU2hpcCgxKSkgPT09IGZhbHNlKVxuICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIGlmIChzaGlwTmFtZSA9PT0gJy5zaGlwLTInKSB7XG4gICAgICAgICAgICBpZiAocGxheWVyQm9hcmQucGxhY2VTaGlwKHBvczIsIHBvczEsIGRpciwgY3JlYXRlU2hpcCgyKSkgPT09IGZhbHNlKVxuICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIGlmIChzaGlwTmFtZSA9PT0gJy5zaGlwLTMnKSB7XG4gICAgICAgICAgICBpZiAocGxheWVyQm9hcmQucGxhY2VTaGlwKHBvczIsIHBvczEsIGRpciwgY3JlYXRlU2hpcCgzKSkgPT09IGZhbHNlKVxuICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIGlmIChzaGlwTmFtZSA9PT0gJy5zaGlwLTQnKSB7XG4gICAgICAgICAgICBpZiAocGxheWVyQm9hcmQucGxhY2VTaGlwKHBvczIsIHBvczEsIGRpciwgY3JlYXRlU2hpcCg0KSkgPT09IGZhbHNlKVxuICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgcmVuZGVyUGxheWVyU2hpcHMocGxheWVyQm9hcmQpXG5cbiAgICAgICAgYW1vdW50TGVmdCAtPSAxXG4gICAgICAgIHRvdGFsQW1vdW50U2hpcHMgKz0gMVxuXG4gICAgICAgIGlmICh0b3RhbEFtb3VudFNoaXBzID09PSA4KSBwbGF5ZXJCb2FyZC5pc1N0YXJ0QWxsb3dlZC5zZXQodHJ1ZSlcbiAgICAgICAgc2hpcC5wYXJlbnROb2RlLmZpcnN0Q2hpbGQudGV4dENvbnRlbnQgPSBgJHthbW91bnRMZWZ0fXhgXG4gICAgICAgIGlmIChhbW91bnRMZWZ0ID09PSAwKSBzaGlwLnBhcmVudE5vZGUuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgICAgICBpZiAocGxheWVyQm9hcmQuY2hlY2tJZkJvYXJkSGFzQmVlbkZ1bGx5UG9wdWxhdGVkKCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgICAgICAgICAgJ2JvZHkgPiBtYWluID4gZGl2LnBsYXllciA+IGRpdjpudGgtY2hpbGQoMyknXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBjb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgICAgICAgICAgY29uc3QgcmFuZG9tQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnJhbmRvbWl6ZScpXG4gICAgICAgICAgICByYW5kb21CdXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgICAgICAgICAgcGxheWVyQm9hcmQuaXNTdGFydEFsbG93ZWQuc2V0KHRydWUpXG4gICAgICAgIH1cbiAgICB9KVxuXG4gICAgY2VsbHMuZm9yRWFjaCgoZSwgaSkgPT4ge1xuICAgICAgICBlLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgICAgICBkcmFnU2VsZWN0aW9uID0gaVxuICAgICAgICB9KVxuICAgIH0pXG5cbiAgICBib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdlbnRlcicsICgpID0+IHtcbiAgICAgICAgZHJhZ1NlbGVjdGlvbiA9IC0xXG4gICAgfSlcbn1cblxuZXhwb3J0IHsgc2hpcERyYWcsIHRvdGFsQW1vdW50U2hpcHMgfVxuIiwiLyogZXNsaW50LWRpc2FibGUgbm8tdXNlLWJlZm9yZS1kZWZpbmUgKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLXJlc3RyaWN0ZWQtZ2xvYmFscyAqL1xuLyogZXNsaW50LWRpc2FibGUgY29uc2lzdGVudC1yZXR1cm4gKi9cbi8qIGVzbGludC1kaXNhYmxlIGltcG9ydC9uby1jeWNsZSAqL1xuLyogZXNsaW50LWRpc2FibGUgZGVmYXVsdC1jYXNlICovXG5pbXBvcnQgeyBhaVBsYXksIHNldFdhc0hpdCB9IGZyb20gJy4vYm90J1xuaW1wb3J0IHsgc2hpcERyYWcgfSBmcm9tICcuL2RyYWctYW5kLWRyb3AnXG5cbi8vIGNyZWF0ZXMgYSBkZWxheSB0byBiZSB1c2VkIGluIGFuIGFzeW5jIGZ1bmN0aW9uXG5mdW5jdGlvbiBkZWxheShkZWxheUluTXMpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICByZXNvbHZlKDIpXG4gICAgICAgIH0sIGRlbGF5SW5NcylcbiAgICB9KVxufVxuXG5jb25zdCBjaGVja0lmR2FtZU92ZXIgPSAocGxheWVyQm9hcmQsIGVuZW15Qm9hcmQpID0+IHtcbiAgICBpZiAocGxheWVyQm9hcmQuY2hlY2tJZkFsbFNoaXBzSGF2ZVN1bmsoKSkge1xuICAgICAgICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbCcpXG4gICAgICAgIGNvbnN0IG1vZGFsV2lubmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLWNvbnRlbnQgPiBwJylcbiAgICAgICAgY29uc3QgcGxheUFnYWluQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgICAgICcubW9kYWwtY29udGVudCA+IGJ1dHRvbidcbiAgICAgICAgKVxuXG4gICAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snXG4gICAgICAgIHBsYXlBZ2FpbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpXG4gICAgICAgIH0pXG5cbiAgICAgICAgbW9kYWxXaW5uZXIudGV4dENvbnRlbnQgPSAnWW91IGxvc2UhJ1xuICAgIH1cbiAgICBpZiAoZW5lbXlCb2FyZC5jaGVja0lmQWxsU2hpcHNIYXZlU3VuaygpKSB7XG4gICAgICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsJylcbiAgICAgICAgY29uc3QgbW9kYWxXaW5uZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwtY29udGVudCA+IHAnKVxuICAgICAgICBjb25zdCBwbGF5QWdhaW5CdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAgICAgJy5tb2RhbC1jb250ZW50ID4gYnV0dG9uJ1xuICAgICAgICApXG5cbiAgICAgICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9ICdibG9jaydcbiAgICAgICAgbW9kYWxXaW5uZXIudGV4dENvbnRlbnQgPSAnWW91IHdpbiEnXG4gICAgICAgIHBsYXlBZ2FpbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpXG4gICAgICAgIH0pXG4gICAgfVxufVxuXG5jb25zdCBlbmFibGVDdXJzb3IgPSAoKSA9PiB7XG4gICAgY29uc3QgY2VsbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZW5lbXktYm9hcmQgLmNlbGwnKVxuICAgIGNlbGxzLmZvckVhY2goKGNlbGwpID0+IHtcbiAgICAgICAgY2VsbC5zdHlsZSA9ICdjdXJzb3I6IHBvaW50ZXI7IHBvaW50ZXItZXZlbnRzOiBpbml0aWFsOydcbiAgICB9KVxufVxuXG5jb25zdCBkaXNhYmxlQ3Vyc29yID0gKCkgPT4ge1xuICAgIGNvbnN0IGNlbGxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmVuZW15LWJvYXJkIC5jZWxsJylcbiAgICBjZWxscy5mb3JFYWNoKChjZWxsKSA9PiB7XG4gICAgICAgIGNlbGwuc3R5bGUgPSAnY3Vyc29yOiBub3QtYWxsb3dlZDsgcG9pbnRlci1ldmVudHM6IG5vbmU7J1xuICAgIH0pXG59XG5cbmNvbnN0IHJlbmRlckF0dGFja3MgPSBhc3luYyAoXG4gICAgcGxheWVyLFxuICAgIGNvbHVtbixcbiAgICByb3csXG4gICAgZW5lbXlCb2FyZCxcbiAgICBodW1hbixcbiAgICBlbmVteSxcbiAgICBwbGF5ZXJCb2FyZFxuKSA9PiB7XG4gICAgY29uc3QgY2VsbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgIGAuJHtwbGF5ZXJ9LWJvYXJkID4gLmNlbGxbY29sdW1uPScke2NvbHVtbn0nXVtyb3c9JyR7cm93fSddYFxuICAgIClcblxuICAgIGlmIChlbmVteUJvYXJkLmdldExvY2F0aW9uKGNvbHVtbiwgcm93KT8uaXNTaGlwKSB7XG4gICAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZCgnaGl0JylcbiAgICAgICAgZW5lbXlCb2FyZC5nZXRMb2NhdGlvbihjb2x1bW4sIHJvdykuZG9tVGFyZ2V0cy5wdXNoKGNlbGwpXG4gICAgICAgIGlmIChlbmVteUJvYXJkLmdldExvY2F0aW9uKGNvbHVtbiwgcm93KS5pc1N1bmsoKSkge1xuICAgICAgICAgICAgZW5lbXlCb2FyZFxuICAgICAgICAgICAgICAgIC5nZXRMb2NhdGlvbihjb2x1bW4sIHJvdylcbiAgICAgICAgICAgICAgICAuZG9tVGFyZ2V0cy5mb3JFYWNoKChlKSA9PiBlLmNsYXNzTGlzdC5hZGQoJ3N1bmsnKSlcbiAgICAgICAgfVxuICAgICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjZWxsLmNsYXNzTGlzdC5hZGQoJ21pc3MnKVxuICAgIGVuZW15LmlzVHVybihodW1hbilcbiAgICBhd2FpdCBkZWxheSg3MDApXG5cbiAgICByZXR1cm4gZW5lbXlCb2FyZC5jaGVja0lmQWxsU2hpcHNIYXZlU3VuaygpXG4gICAgICAgID8gY2hlY2tJZkdhbWVPdmVyKHBsYXllckJvYXJkLCBlbmVteUJvYXJkKVxuICAgICAgICA6IGFpUGxheShmYWxzZSwgaHVtYW4sIGVuZW15LCB1bmRlZmluZWQsIHBsYXllckJvYXJkLCBlbmVteUJvYXJkKVxufVxuXG5jb25zdCBoYW5kbGVBdHRhY2sgPSAoY29sdW1uLCByb3csIGVuZW15Qm9hcmQsIHBsYXllcikgPT5cbiAgICBwbGF5ZXIuYXR0YWNrKGNvbHVtbiwgcm93LCBlbmVteUJvYXJkKVxuXG5jb25zdCBhdHRhY2tFbmVteUNlbGwgPSAoXG4gICAgY29sdW1uLFxuICAgIHJvdyxcbiAgICBlbmVteUJvYXJkLFxuICAgIHBsYXllckJvYXJkLFxuICAgIHBsYXllcixcbiAgICBlbmVteVxuKSA9PiB7XG4gICAgaGFuZGxlQXR0YWNrKGNvbHVtbiwgcm93LCBlbmVteUJvYXJkLCBwbGF5ZXIpXG4gICAgcmVuZGVyQXR0YWNrcygnZW5lbXknLCBjb2x1bW4sIHJvdywgZW5lbXlCb2FyZCwgcGxheWVyLCBlbmVteSwgcGxheWVyQm9hcmQpXG59XG5cbi8vIHJlbmRlcnMgYXR0YWNrIGZvciBwMiAoQUkpXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVuZGVyQXR0YWNrUDIoXG4gICAgcDEsXG4gICAgcDIsXG4gICAgcG9zMSxcbiAgICBwb3MyLFxuICAgIHBsYXllckJvYXJkLFxuICAgIGVuZW15Qm9hcmRcbikge1xuICAgIGxldCBpc1N1bmsgPSBmYWxzZVxuICAgIGNvbnN0IGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgICBgLnBsYXllci1ib2FyZCA+IC5jZWxsW2NvbHVtbj0nJHtwb3MxfSddW3Jvdz0nJHtwb3MyfSddYFxuICAgIClcblxuICAgIGNvbnN0IGF0dGFjayA9IHAyLmF0dGFjayhwb3MxLCBwb3MyLCBwbGF5ZXJCb2FyZClcblxuICAgIGlmIChhdHRhY2sgPT09ICdZb3UgaGF2ZSBhbHJlYWR5IGhpdCB0aGlzIHNwb3QhJykge1xuICAgICAgICBjb25zdCByZXBlYXQgPSB0cnVlXG4gICAgICAgIGFpUGxheShyZXBlYXQsIHAxLCBwMiwgdW5kZWZpbmVkLCBwbGF5ZXJCb2FyZCwgZW5lbXlCb2FyZClcbiAgICB9XG4gICAgaWYgKGF0dGFjayA9PT0gXCJJdCdzIGEgaGl0IVwiKSB7XG4gICAgICAgIHNldFdhc0hpdChmYWxzZSlcbiAgICAgICAgZS5jbGFzc0xpc3QuYWRkKCdtaXNzJylcbiAgICB9XG4gICAgaWYgKGF0dGFjayA9PT0gJ1lvdSBoaXQgYSBzaGlwIScpIHtcbiAgICAgICAgc2V0V2FzSGl0KHRydWUsIHRydWUsIHBvczEsIHBvczIpXG4gICAgICAgIGUuY2xhc3NMaXN0LmFkZCgnaGl0JylcbiAgICAgICAgcGxheWVyQm9hcmQuZ2V0TG9jYXRpb24ocG9zMSwgcG9zMikuZG9tVGFyZ2V0cy5wdXNoKGUpXG4gICAgICAgIC8vIGlmIHNoaXAgaXMgc3VuaywgYWRkIFwic3Vua1wiIGNsYXNzXG4gICAgICAgIGlmIChwbGF5ZXJCb2FyZC5nZXRMb2NhdGlvbihwb3MxLCBwb3MyKS5pc1N1bmsoKSkge1xuICAgICAgICAgICAgcGxheWVyQm9hcmRcbiAgICAgICAgICAgICAgICAuZ2V0TG9jYXRpb24ocG9zMSwgcG9zMilcbiAgICAgICAgICAgICAgICAuZG9tVGFyZ2V0cy5mb3JFYWNoKChsb2NhdGlvbikgPT5cbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24uY2xhc3NMaXN0LmFkZCgnc3VuaycpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgaXNTdW5rID0gdHJ1ZVxuICAgICAgICAgICAgaWYgKHBsYXllckJvYXJkLmNoZWNrSWZBbGxTaGlwc0hhdmVTdW5rKCkgPT09IHRydWUpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNoZWNrSWZHYW1lT3ZlcihwbGF5ZXJCb2FyZCwgZW5lbXlCb2FyZClcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBkZWxheSgxMDAwKVxuICAgICAgICByZXR1cm4gYWlQbGF5KGZhbHNlLCBwMSwgcDIsIGlzU3VuaywgcGxheWVyQm9hcmQsIGVuZW15Qm9hcmQpXG4gICAgfVxuXG4gICAgcDEuaXNUdXJuKHAyKSAvLyBnaXZlcyB0dXJuIHRvIFAxXG59XG4vLyBodHRwczovL2pzbWFuaWZlc3QuY29tL3RoZS1wdWJsaXNoLXN1YnNjcmliZS1wYXR0ZXJuLWluLWphdmFzY3JpcHQvXG5cbmV4cG9ydCBjb25zdCBwdWJTdWIgPSAoKSA9PiB7XG4gICAgY29uc3Qgc3Vic2NyaWJlcnMgPSB7fVxuXG4gICAgZnVuY3Rpb24gcHVibGlzaChldmVudE5hbWUsIGRhdGEpIHtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHN1YnNjcmliZXJzW2V2ZW50TmFtZV0pKSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICBzdWJzY3JpYmVyc1tldmVudE5hbWVdLmZvckVhY2goKGNhbGxiYWNrKSA9PiB7XG4gICAgICAgICAgICBjYWxsYmFjayhkYXRhKVxuICAgICAgICB9KVxuICAgIH1cbiAgICBmdW5jdGlvbiBzdWJzY3JpYmUoZXZlbnROYW1lLCBjYWxsYmFjaykge1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoc3Vic2NyaWJlW2V2ZW50TmFtZV0pKSB7XG4gICAgICAgICAgICBzdWJzY3JpYmVyc1tldmVudE5hbWVdID0gW11cbiAgICAgICAgfVxuICAgICAgICBzdWJzY3JpYmVyc1tldmVudE5hbWVdLnB1c2goY2FsbGJhY2spXG4gICAgICAgIGNvbnN0IGluZGV4ID0gc3Vic2NyaWJlcnNbZXZlbnROYW1lXS5sZW5ndGggLSAxXG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlKCkge1xuICAgICAgICAgICAgICAgIHN1YnNjcmliZXJzW2V2ZW50TmFtZV0uc3BsaWNlKGluZGV4LCAxKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIHB1Ymxpc2gsXG4gICAgICAgIHN1YnNjcmliZSxcbiAgICB9XG59XG5cbmV4cG9ydCBjb25zdCByZW5kZXJQbGF5ZXJTaGlwcyA9ICh7IGdldExvY2F0aW9uIH0pID0+IHtcbiAgICBjb25zdCBwbGF5ZXJCb2FyZEFyZWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdkaXYucGxheWVyLWJvYXJkJylcblxuICAgIGZvciAobGV0IGNvbHVtbiA9IDA7IGNvbHVtbiA8IDEwOyBjb2x1bW4gKz0gMSkge1xuICAgICAgICBmb3IgKGxldCByb3cgPSAwOyByb3cgPCAxMDsgcm93ICs9IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IGNlbGwgPSBwbGF5ZXJCb2FyZEFyZWEucXVlcnlTZWxlY3RvcihcbiAgICAgICAgICAgICAgICBgLmNlbGw6bnRoLWNoaWxkKCR7cm93ICogMTAgKyBjb2x1bW4gKyAxfSlgXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBjZWxsLnNldEF0dHJpYnV0ZSgnY29sdW1uJywgY29sdW1uKVxuICAgICAgICAgICAgY2VsbC5zZXRBdHRyaWJ1dGUoJ3JvdycsIHJvdylcbiAgICAgICAgICAgIGNvbnN0IGxvY2F0aW9uID0gZ2V0TG9jYXRpb24oY29sdW1uLCByb3cpXG4gICAgICAgICAgICBpZiAobG9jYXRpb24uaXNTaGlwKSB7XG4gICAgICAgICAgICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKCdzaGlwJylcbiAgICAgICAgICAgICAgICBjZWxsLnNldEF0dHJpYnV0ZSgnc2hpcC1uYW1lJywgbG9jYXRpb24uZ2V0TmFtZSgpKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRHJhZ0FuZERyb3BGbGVldChwbGF5ZXJCb2FyZCkge1xuICAgIHJlbmRlclNoaXBTZWxlY3QoMSwgMSlcbiAgICByZW5kZXJTaGlwU2VsZWN0KDIsIDIpXG4gICAgcmVuZGVyU2hpcFNlbGVjdCgzLCAzKVxuICAgIHJlbmRlclNoaXBTZWxlY3QoNCwgNClcblxuICAgIGZ1bmN0aW9uIHJlbmRlclNoaXBTZWxlY3QoaSwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgICAgICAnYm9keSA+IG1haW4gPiBkaXYucGxheWVyID4gZGl2Om50aC1jaGlsZCgzKSdcbiAgICAgICAgKVxuICAgICAgICBjb25zdCBzaGlwQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICAgICAgc2hpcENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdzaGlwLWNvbnRhaW5lcicpXG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChzaGlwQ29udGFpbmVyKVxuXG4gICAgICAgIGNvbnN0IHNoaXBJbmZvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpXG4gICAgICAgIHNoaXBJbmZvLmNsYXNzTGlzdC5hZGQoYGluZm8tJHtpfWApXG4gICAgICAgIHNoaXBJbmZvLnRleHRDb250ZW50ID0gJzJ4J1xuICAgICAgICBzaGlwQ29udGFpbmVyLmFwcGVuZENoaWxkKHNoaXBJbmZvKVxuXG4gICAgICAgIGNvbnN0IHNoaXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgICAgICBzaGlwLmNsYXNzTGlzdC5hZGQoJ3NoaXAnKVxuICAgICAgICBzaGlwLmNsYXNzTGlzdC5hZGQoYHNoaXAtJHtpfWApXG4gICAgICAgIHNoaXAuc2V0QXR0cmlidXRlKCdkcmFnZ2FibGUnLCAndHJ1ZScpXG4gICAgICAgIHNoaXBDb250YWluZXIuYXBwZW5kQ2hpbGQoc2hpcClcblxuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGxlbmd0aDsgaiArPSAxKSB7XG4gICAgICAgICAgICBjb25zdCBjZWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICAgICAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZCgnY2VsbCcpXG4gICAgICAgICAgICBzaGlwLmFwcGVuZENoaWxkKGNlbGwpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IDU7IGkgKz0gMSkgc2hpcERyYWcoYC5zaGlwLSR7aX1gLCBwbGF5ZXJCb2FyZClcbn1cblxuZXhwb3J0IGNvbnN0IGFkZExpc3RlbmVyc1RvRW5lbXlCb2FyZCA9IChcbiAgICBwbGF5ZXJCb2FyZCxcbiAgICBlbmVteUJvYXJkLFxuICAgIHBsYXllcixcbiAgICBlbmVteSxcbiAgICBwc1xuKSA9PiB7XG4gICAgY29uc3QgZW5lbXlCb2FyZEFyZWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdkaXYuZW5lbXktYm9hcmQnKVxuXG4gICAgZm9yIChsZXQgY29sdW1uID0gMDsgY29sdW1uIDwgMTA7IGNvbHVtbiArPSAxKSB7XG4gICAgICAgIGZvciAobGV0IHJvdyA9IDA7IHJvdyA8IDEwOyByb3cgKz0gMSkge1xuICAgICAgICAgICAgLy8gQ3JlZGl0aW5nIGZvcm11bGEgdG8gY2FsY3VsYXRlIG50aC1jaGlsZCB1c2luZyBuZXN0ZWQgbG9vcDogaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvODg3MjY2Mi9tYXRoLXRvLWRldGVybWluZS1pdGVtLWluZGV4LWJhc2VkLW9uLWNvbC1yb3ctc2VsZWN0aW9uLWluLWdyaWRcbiAgICAgICAgICAgIGNvbnN0IGNlbGwgPSBlbmVteUJvYXJkQXJlYS5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAgICAgICAgIGAuY2VsbDpudGgtY2hpbGQoJHtyb3cgKiAxMCArIGNvbHVtbiArIDF9KWBcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIGNlbGwuc2V0QXR0cmlidXRlKCdjb2x1bW4nLCBjb2x1bW4pXG4gICAgICAgICAgICBjZWxsLnNldEF0dHJpYnV0ZSgncm93Jywgcm93KVxuXG4gICAgICAgICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGRpc2FibGVDdXJzb3IoKVxuICAgICAgICAgICAgICAgIGlmIChwbGF5ZXJCb2FyZC5pc1N0YXJ0QWxsb3dlZC5nZXQoKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocGxheWVyLnR1cm4uZ2V0KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBzLnB1Ymxpc2goJ2NsaWNrJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3csXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyQm9hcmQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5lbXlCb2FyZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5lbXksXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGRlbGF5KDExMDApLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHMucHVibGlzaCgnY2xpY2snLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXJCb2FyZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmVteUJvYXJkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmVteSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmFibGVDdXJzb3IoKVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRCdXR0b25MaXN0ZW5lcnMocGxheWVyQm9hcmQpIHtcbiAgICBjb25zdCByYW5kb21pemVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdidXR0b24ucmFuZG9taXplJylcblxuICAgIHJhbmRvbWl6ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgY29uc3Qgc2hpcHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGxheWVyID4gZGl2Om50aC1jaGlsZCgzKScpXG4gICAgICAgIHNoaXBzLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICAgICAgcGxheWVyQm9hcmQucmFuZG9tbHlQbGFjZVNoaXBzKClcbiAgICAgICAgcGxheWVyQm9hcmQuaXNTdGFydEFsbG93ZWQuc2V0KHRydWUpXG4gICAgICAgIHJlbmRlclBsYXllclNoaXBzKHBsYXllckJvYXJkKVxuICAgIH0pXG5cbiAgICBjb25zdCByZXNldEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbi5yZXNldCcpXG5cbiAgICByZXNldEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgbG9jYXRpb24ucmVsb2FkKClcbiAgICB9KVxufVxuXG5leHBvcnQgY29uc3QgYXR0YWNrID0gKHtcbiAgICBjb2x1bW4sXG4gICAgcm93LFxuICAgIHBsYXllckJvYXJkLFxuICAgIGVuZW15Qm9hcmQsXG4gICAgcGxheWVyLFxuICAgIGVuZW15LFxufSkgPT4ge1xuICAgIGlmICghcGxheWVyLnR1cm4uZ2V0KCkgfHwgIXBsYXllckJvYXJkLmlzU3RhcnRBbGxvd2VkLmdldCgpKSByZXR1cm5cbiAgICBhdHRhY2tFbmVteUNlbGwoY29sdW1uLCByb3csIGVuZW15Qm9hcmQsIHBsYXllckJvYXJkLCBwbGF5ZXIsIGVuZW15KVxufVxuIiwiaW1wb3J0IHsgYWRkTGlzdGVuZXJzVG9FbmVteUJvYXJkLCByZW5kZXJQbGF5ZXJTaGlwcywgcHViU3ViLCBhdHRhY2ssIGNyZWF0ZURyYWdBbmREcm9wRmxlZXQsIGFkZEJ1dHRvbkxpc3RlbmVyc30gZnJvbSAnLi9kb20nXG5cbmltcG9ydCBjcmVhdGVHYW1lQm9hcmQgZnJvbSAnLi9nYW1lYm9hcmQvZ2FtZWJvYXJkJ1xuaW1wb3J0IGNyZWF0ZVBsYXllciBmcm9tICcuL3BsYXllci9wbGF5ZXInXG5cbmNvbnN0IHBsYXllckJvYXJkID0gY3JlYXRlR2FtZUJvYXJkKClcbmNvbnN0IGVuZW15Qm9hcmQgPSBjcmVhdGVHYW1lQm9hcmQoKVxuY29uc3QgcGxheWVyID0gY3JlYXRlUGxheWVyKCdwbGF5ZXInKVxuY29uc3QgY29tcHV0ZXIgPSBjcmVhdGVQbGF5ZXIoJ2NvbXB1dGVyJylcblxucGxheWVyLmlzVHVybihjb21wdXRlcilcblxuYWRkQnV0dG9uTGlzdGVuZXJzKHBsYXllckJvYXJkKVxuXG5jcmVhdGVEcmFnQW5kRHJvcEZsZWV0KHBsYXllckJvYXJkKVxuXG5lbmVteUJvYXJkLnJhbmRvbWx5UGxhY2VTaGlwcygpXG5cbmNvbnN0IHBzID0gcHViU3ViKClcblxuYWRkTGlzdGVuZXJzVG9FbmVteUJvYXJkKHBsYXllckJvYXJkLCBlbmVteUJvYXJkLCBwbGF5ZXIsIGNvbXB1dGVyLCBwcylcblxucHMuc3Vic2NyaWJlKCdjbGljaycsIGF0dGFjaylcblxucmVuZGVyUGxheWVyU2hpcHMocGxheWVyQm9hcmQpIl0sIm5hbWVzIjpbImNyZWF0ZVNoaXAiLCJtb2R1bGUiLCJleHBvcnRzIiwiZW1wdHlDZWxsIiwiaGFzQmVlbkhpdCIsImlzU2hpcCIsIm9mZkxpbWl0cyIsImlzU3RhcnRBbGxvd2VkIiwiaW5pdGlhbGl6ZUJvYXJkIiwiZ2FtZUJvYXJkIiwiQXJyYXkiLCJmaWxsIiwibWFwIiwiY29sdW1uIiwicm93IiwiY2xlYXJCb2FyZCIsImdldExvY2F0aW9uIiwic2V0TG9jYXRpb24iLCJzaGlwIiwiT2JqZWN0IiwiYXNzaWduIiwiY3JlYXRlT2ZmTGltaXRMb2NhdGlvbiIsInVuZGVmaW5lZCIsImxvY2F0aW9uIiwiYWRkT2ZmTGltaXRBcmVhRm9yU2hpcHMiLCJjaGVja0lmTG9jYXRpb25Jc0FTaGlwT3JPZmZMaW1pdHMiLCJkaXJlY3Rpb24iLCJzaGlwTGVuZ3RoIiwiaSIsInBsYWNlU2hpcCIsImdldExlbmd0aCIsImxlbmd0aCIsImNoZWNrSWZSb3dDb29yZGluYXRlSXNWYWxpZCIsInBvc2l0aW9uIiwiYWRkT2ZmTGltaXRBcmVhRm9yVmVydGljYWxseVBvc2l0aW9uZWRTaGlwIiwiY2hlY2tJZkNvbHVtbkNvb3JkaW5hdGVJc1ZhbGlkIiwiYWRkT2ZmTGltaXRBcmVhRm9ySG9yaXpvbnRhbGx5UG9zaXRpb25lZFNoaXAiLCJtYWtlUmFuZG9tQ29vcmRpbmF0ZXMiLCJyYW5kb21Mb2NhdGlvbiIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImZsYXR0ZW5lZEdhbWVCb2FyZCIsImZsYXQiLCJmb3JFYWNoIiwiZWxlbWVudCIsImF2YWlsYWJpbGl0eSIsImF2YWlsYWJsZVNwYWNlcyIsInJhbmRvbVNoaXAiLCJwb3MxIiwicG9zMiIsImRpciIsInJvdW5kIiwiY2hlY2tJZk9mZkxpbWl0Wm9uZVdhc0NvcnJlY3RseUltcGxlbWVudGVkIiwiZmlsdGVyIiwicmVjZWl2ZUF0dGFjayIsImNoZWNrSWZBbGxTaGlwc0hhdmVTdW5rIiwiaGF2ZUFsbFNoaXBzU3VuayIsImoiLCJpc1N1bmsiLCJyYW5kb21seVBsYWNlU2hpcHMiLCJjaGVja0lmQm9hcmRIYXNCZWVuRnVsbHlQb3B1bGF0ZWQiLCJudW1PZlNoaXBDZWxscyIsInJhbmRvbUZsZWV0IiwiZ2V0Iiwic2V0IiwidmFsdWUiLCJuYW1lIiwidHVybiIsImdldE5hbWUiLCJhdHRhY2siLCJnZXRTdGF0dXMiLCJpbmNsdWRlcyIsImhpdCIsImlzVHVybiIsImVuZW15Iiwic3RhdHVzIiwiZXZlcnkiLCJkb21UYXJnZXRzIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsIm4iLCJnZXR0ZXIiLCJfX2VzTW9kdWxlIiwiZCIsImEiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJhdHRhY2tEaXJlY3Rpb24iLCJ3YXNIaXQiLCJsYXN0SGl0UG9zIiwiZmlyc3RIaXRQb3MiLCJzZWNvbmRIaXRQb3MiLCJzdXJyb3VuZGluZ1BvcyIsImF0dGFja1Rvd2FyZHMiLCJzZXRXYXNIaXQiLCJzdGF0IiwicmVnaXN0ZXJTdXJyb3VuZGluZ1BvcyIsInB1c2giLCJhaVBsYXkiLCJyZXBlYXQiLCJwMSIsInAyIiwicGxheWVyQm9hcmQiLCJlbmVteUJvYXJkIiwicG9zIiwicmVuZGVyQXR0YWNrUDIiLCJuZXdQb3MiLCJwb3AiLCJ0b3RhbEFtb3VudFNoaXBzIiwic2hpcERyYWciLCJzaGlwTmFtZSIsImFtb3VudExlZnQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJib2R5IiwiY2VsbHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY2hpbGQiLCJjaGlsZE5vZGVzIiwiZHJhZ1NlbGVjdGlvbiIsIm9mZnNldCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwidGFyZ2V0IiwicGFyZW50Tm9kZSIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImNoYW5nZURpciIsInJlbW92ZSIsInNwbGl0IiwicmVuZGVyUGxheWVyU2hpcHMiLCJmaXJzdENoaWxkIiwidGV4dENvbnRlbnQiLCJzdHlsZSIsImRpc3BsYXkiLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwiZGVsYXkiLCJkZWxheUluTXMiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJjaGVja0lmR2FtZU92ZXIiLCJtb2RhbCIsIm1vZGFsV2lubmVyIiwicGxheUFnYWluQnV0dG9uIiwicmVsb2FkIiwiYXN5bmMiLCJhZGQiLCJwbGF5ZXJCb2FyZEFyZWEiLCJjZWxsIiwic2V0QXR0cmlidXRlIiwiY29tcHV0ZXIiLCJhZGRCdXR0b25MaXN0ZW5lcnMiLCJyZW5kZXJTaGlwU2VsZWN0IiwiY29udGFpbmVyIiwic2hpcENvbnRhaW5lciIsImNyZWF0ZUVsZW1lbnQiLCJhcHBlbmRDaGlsZCIsInNoaXBJbmZvIiwiY3JlYXRlRHJhZ0FuZERyb3BGbGVldCIsInBzIiwic3Vic2NyaWJlcnMiLCJwdWJsaXNoIiwiZXZlbnROYW1lIiwiZGF0YSIsImlzQXJyYXkiLCJjYWxsYmFjayIsInN1YnNjcmliZSIsImluZGV4IiwidW5zdWJzY3JpYmUiLCJzcGxpY2UiLCJwdWJTdWIiLCJwbGF5ZXIiLCJlbmVteUJvYXJkQXJlYSIsInRoZW4iLCJhZGRMaXN0ZW5lcnNUb0VuZW15Qm9hcmQiLCJoYW5kbGVBdHRhY2siLCJodW1hbiIsInJlbmRlckF0dGFja3MiLCJhdHRhY2tFbmVteUNlbGwiXSwic291cmNlUm9vdCI6IiJ9