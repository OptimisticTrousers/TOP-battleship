(()=>{var t={653:(t,e,o)=>{const i=o(585);t.exports=()=>{const t={hasBeenHit:!1,isShip:!1,offLimits:!1},e=()=>{const e=Array(10).fill().map((()=>Array(10).fill()));for(let o=0;o<10;o++)for(let i=0;i<10;i++)e[o][i]={...t,column:o,row:i};return e};let o=e();const r=[i(5,"Carrier"),i(4,"Battleship"),i(3,"Destroyer"),i(3,"Submarine"),i(2,"Patrol Boat")],n=(t,e)=>o?.[t]?.[e],a=(e,i,r=(()=>Object.assign(t,{offLimits:!0}))())=>{if(void 0===o?.[e]?.[i])return!0;const n=o[e][i];return o[e][i]={...n,...r},!0},l=(t,e)=>{a(t-1,e-1),a(t,e-1)},c=(t,e,o,i)=>{if("vertical"===o)for(let o=0;o<i;o++){const i=n(t,e+o);if(i&&!0===i.isShip&&!0===i.offLimits)return!1}if("horizontal"===o)for(let o=0;o<i;o++){const i=n(t+o,e);if(i&&!0===i.isShip&&!0===i.offLimits)return!1}return!1},s=(t,e,i,r)=>{const s=r.getLength();if(c(n(t,e)))return!1;if("vertical"===i){if(((t,e)=>t>=0&&t+e-1<o.length)(e,s)){for(let o=0;o<s;o+=1)a(t,e+o,{...r,position:o}),a(t+1,e+o),a(t-1,e+o);return((t,e,o)=>{l(t,e),a(t,e+o),a(t+1,e+o),a(t-1,e+o),a(t+1,e-1)})(t,e,s),!0}}else if("horizontal"===i&&((t,e)=>t>=0&&t+e-1<o.length)(t,s)){for(let o=0;o<s;o+=1)a(t+o,e,{...r,position:o}),a(t+o,e+1),a(t+o,e-1);return((t,e,o)=>{l(t,e),a(t+o,e),a(t-1,e+1),a(t+o,e+1),a(t+o,e-1)})(t,e,s),!0}return!1},h=()=>{const t=0===Math.floor(2*Math.random())?"vertical":"horizontal",e=Math.floor(100*Math.random()),i=(()=>{const t=[...o.flat()];return t.forEach((t=>{!0===t.hasBeenHit?t.availability=!1:t.availability=!0})),t})()[e];return!1===i.availability?h():{elementColumn:i.column,elementRow:i.row,randomDirection:t}};return{clearBoard:()=>{o=e()},checkIfLocationIsAShipOrOffLimits:c,checkIfOffLimitZoneWasCorrectlyImplemented:t=>o.flat().filter((t=>!0===t.offLimits)).length===t+2,getLocation:n,receiveAttack:(t,e)=>{o[t][e].hasBeenHit=!0},checkIfAllShipsHaveSunk:()=>{let t=!0;for(let e=0;e<10;e++)for(let o=0;o<10;o++){const i=n(e,o);if(!1!==i.isShip&&i.isShip&&!1===i.isSunk()){t=!1;break}}return t},placeShip:s,randomlyPlaceShips:()=>{const t=[];for(let e=0;e<r.length;e+=1){const o=r[e],{randomColumn:i,randomRow:n,randomDirection:a}=h(o.getLength());s(i,n,a,o)?t.push({randomColumn:i,randomRow:n,randomDirection:a}):e-=1}return t},makeRandomCoordinates:h}}},61:t=>{t.exports=(t="player")=>({getName:()=>t,attack:(t,e,{getLocation:o,receiveAttack:i})=>{const r=o(t,e);return!1===r.hasBeenHit||r.isShip&&!1===r.getStatus().includes("unhit")?(i(t,e),r.hit?(r.hit(r.position),"You hit a ship!"):"It's a hit!"):"You have already hit this spot!"},randomPos:()=>[Math.floor(10*Math.random()),Math.floor(10*Math.random())]})},585:t=>{t.exports=(t,e="ship")=>{const o=Array(t).fill("unhit");return{getName:()=>e,getLength:()=>o.length,isSunk:()=>o.every((t=>"hit"===t)),hit:e=>{e<t&&(o[e]="hit")},getStatus:()=>o,domTargets:[],hasBeenHit:!1,offLimits:!0,isShip:!0}}}},e={};function o(i){var r=e[i];if(void 0!==r)return r.exports;var n=e[i]={exports:{}};return t[i](n,n.exports,o),n.exports}o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},o.d=(t,e)=>{for(var i in e)o.o(e,i)&&!o.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";var t=o(653),e=o.n(t),i=o(585),r=o.n(i);let n,a=!1,l=!1,c=[],s=[],h=[],u=[];function p(t,e,o,i){a=t,void 0!==e&&(l=e),void 0!==o&&(c=[o,i]),0==s.length&&void 0!==o?s=[o,i]:0!==s.length&&0==h.length&&void 0!==o&&(h=[o,i])}function d(t,e){return u=[],0!==e&&u.push([t,e-1]),9!==e&&u.push([t,e+1]),0!==t&&u.push([t-1,e]),9!==t&&u.push([t+1,e]),u}function f(t,e,o,i,r,p){let f;if(!0===i&&(c=[],s=[],h=[],u=[],a=!1,l=!1,n=""),!l&&!a)return f=e.randomPos(),S(e,o,f[0],f[1],r,p);if(0!==h.length&&a&&!t){let t;if(s[0]==h[0]-1&&(t=m("down")),s[0]==h[0]+1&&(t=m("up")),s[1]==h[1]-1&&(t=m("right")),s[1]==h[1]+1&&(t=m("left")),t[0]>=0&&t[0]<=9&&t[1]>=0&&t[1]<=9)return S(e,o,t[0],t[1],r,p)}else if(0!==h.length&&l&&!a){let t;if(c=s,h=[],"up"===n&&(t=m("down")),"down"===n&&(t=m("up")),"right"===n&&(t=m("left")),"left"===n&&(t=m("right")),t[0]>=0&&t[0]<=9&&t[1]>=0&&t[1]<=9)return S(e,o,t[0],t[1],r,p)}else if(l){0==u.length&&d(c[0],c[1]),0==u.length&&1==l&&d(s[0],s[1]);const t=u.pop();return S(e,o,t[0],t[1],r,p)}}function m(t){return"left"===t?(n="left",[c[0],c[1]-1]):"right"===t?(n="right",[c[0],c[1]+1]):"down"===t?(n="down",[c[0]+1,c[1]]):"up"===t?(n="up",[c[0]-1,c[1]]):void 0}async function S(t,e,o,i,r,n){let a=!1;const l=document.querySelector(`.player-board > .cell[column='${o}'][row='${i}']`),c=e.attack(o,i,r);if(console.log(r.getLocation(o,i)),"You have already hit this spot!"===c&&f(!0,t,e,void 0,r,n),"It's a hit!"===c&&(p(!1),l.classList.add("miss")),"You hit a ship!"===c)return p(!0,!0,o,i),l.classList.add("hit"),r.getLocation(o,i).domTargets.push(l),r.getLocation(o,i).isSunk()&&(r.getLocation(o,i).domTargets.forEach((t=>t.classList.add("sunk"))),a=!0,!0===r.checkIfAllShipsHaveSunk())?v(r,n):(await y(1e3),f(!1,t,e,a,r,n))}function y(t){return new Promise((e=>{setTimeout((()=>{e(2)}),t)}))}const g=({getLocation:t})=>{const e=document.querySelector("div.player-board");for(let o=0;o<10;o+=1)for(let i=0;i<10;i+=1){const r=e.querySelector(`.cell:nth-child(${10*i+o+1})`);r.setAttribute("column",o),r.setAttribute("row",i);const n=t(o,i);n.isShip&&(r.classList.add("ship"),r.setAttribute("ship-name",n.getName()))}},v=(t,e)=>{if(t.checkIfAllShipsHaveSunk()){const t=document.querySelector(".modal"),e=document.querySelector(".modal-content > p"),o=document.querySelector(".modal-content > button");t.style.display="block",o.addEventListener("click",(()=>{location.reload()})),e.textContent="You lose!"}if(e.checkIfAllShipsHaveSunk()){const t=document.querySelector(".modal"),e=document.querySelector(".modal-content > p"),o=document.querySelector(".modal-content > button");t.style.display="block",e.textContent="You win!",o.addEventListener("click",(()=>{location.reload()}))}},L=t=>{switch(t.clearBoard(),document.querySelectorAll(".player-board > .cell").forEach((t=>{t.classList.remove("ship"),t.classList.remove("hit"),t.classList.remove("miss")})),Math.floor(4*Math.random())){case 0:t.placeShip(9,1,"vertical",r()(5)),t.placeShip(0,3,"horizontal",r()(3)),t.placeShip(3,6,"horizontal",r()(2)),t.placeShip(6,5,"horizontal",r()(3)),t.placeShip(3,9,"horizontal",r()(4));break;case 1:t.placeShip(0,2,"horizontal",r()(5)),t.placeShip(4,5,"horizontal",r()(3)),t.placeShip(8,7,"horizontal",r()(2)),t.placeShip(5,9,"horizontal",r()(3)),t.placeShip(6,3,"horizontal",r()(4));break;case 2:t.placeShip(5,1,"horizontal",r()(5)),t.placeShip(3,3,"vertical",r()(3)),t.placeShip(0,0,"vertical",r()(2)),t.placeShip(6,5,"horizontal",r()(3)),t.placeShip(5,9,"horizontal",r()(4));break;default:t.placeShip(0,0,"horizontal",r()(5)),t.placeShip(3,4,"horizontal",r()(3)),t.placeShip(6,7,"horizontal",r()(2)),t.placeShip(9,1,"vertical",r()(3)),t.placeShip(5,9,"horizontal",r()(4))}g(t)};var k=o(61),b=o.n(k);const z=e()(),w=e()(),A=b()(),q=b()();document.querySelector("button.randomize").addEventListener("click",(()=>{L(z)})),L(z),w.placeShip(0,0,"horizontal",r()(5)),w.placeShip(3,4,"horizontal",r()(3)),w.placeShip(6,7,"horizontal",r()(2)),w.placeShip(9,1,"vertical",r()(3)),w.placeShip(5,9,"horizontal",r()(4));const B=(()=>{const t={};return{publish:function(e,o){Array.isArray(t[e])&&t[e].forEach((t=>{t(o)}))},subscribe:function e(o,i){Array.isArray(e[o])||(t[o]=[]),t[o].push(i);const r=t[o].length-1;return{unsubscribe(){t[o].splice(r,1)}}}}})();((t,e,o,i,r)=>{const n=document.querySelector("div.enemy-board");for(let a=0;a<10;a+=1)for(let l=0;l<10;l+=1){const c=n.querySelector(`.cell:nth-child(${10*l+a+1})`);c.setAttribute("column",a),c.setAttribute("row",l),c.addEventListener("click",(()=>{r.publish("click",{cell:c,column:a,row:l,playerBoard:t,enemyBoard:e,player:o,enemy:i})}),{once:!0})}})(z,w,A,q,B),B.subscribe("click",(({cell:t,column:e,row:o,playerBoard:i,enemyBoard:r,player:n,enemy:a})=>{(async(t,e,o,i,r,n)=>{((t,e,o,i)=>{i.attack(t,e,o)})(t,e,o,r),((t,e,o,i)=>{const r=document.querySelector(`.enemy-board > .cell[column='${e}'][row='${o}']`);i.getLocation(e,o)?.isShip&&(i.getLocation(e,o).domTargets.push(r),i.getLocation(e,o).isSunk()&&i.getLocation(e,o).domTargets.forEach((t=>t.classList.add("sunk")))),i.getLocation(e,o).isShip?r.classList.add("hit"):r.classList.add("miss")})(0,t,e,o),await y(700),o.checkIfAllShipsHaveSunk()?v():f(!1,r,n,void 0,i,o)})(e,o,r,i,n,a)})),g(z)})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoiMkJBR0EsTUFBTUEsRUFBYSxFQUFRLEtBbVEzQkMsRUFBT0MsUUFoUWlCLEtBQ3BCLE1BQU1DLEVBQVksQ0FBRUMsWUFBWSxFQUFPQyxRQUFRLEVBQU9DLFdBQVcsR0FFM0RDLEVBQWtCLEtBQ3BCLE1BQU1DLEVBQVlDLE1BQU0sSUFBSUMsT0FBT0MsS0FBSSxJQUFNRixNQUFNLElBQUlDLFNBQ3ZELElBQUksSUFBSUUsRUFBUSxFQUFHQSxFQUFTLEdBQUlBLElBQzVCLElBQUksSUFBSUMsRUFBSyxFQUFHQSxFQUFNLEdBQUlBLElBQ3RCTCxFQUFVSSxHQUFRQyxHQUFPLElBQUlWLEVBQVdTLFNBQVFDLE9BR3hELE9BQU9MLEdBSVgsSUFBSUEsRUFBWUQsSUFFaEIsTUFBTU8sRUFBUSxDQUNWZCxFQUFXLEVBQUcsV0FDZEEsRUFBVyxFQUFHLGNBQ2RBLEVBQVcsRUFBRyxhQUNkQSxFQUFXLEVBQUcsYUFDZEEsRUFBVyxFQUFHLGdCQU9aZSxFQUFjLENBQUNILEVBQVFDLElBQVFMLElBQVlJLEtBQVVDLEdBRXJERyxFQUFjLENBQUNKLEVBQVFDLEVBQUtJLEVBTEgsS0FDM0JDLE9BQU9DLE9BQU9oQixFQUFXLENBQUVHLFdBQVcsSUFJRGMsTUFDckMsUUFBbUNDLElBQS9CYixJQUFZSSxLQUFVQyxHQUFvQixPQUFPLEVBQ3JELE1BQU1TLEVBQVdkLEVBQVVJLEdBQVFDLEdBR25DLE9BREFMLEVBQVVJLEdBQVFDLEdBQU8sSUFBSVMsS0FBYUwsSUFDbkMsR0FrQkxNLEVBQTBCLENBQUNYLEVBQVFDLEtBRXJDRyxFQUFZSixFQUFTLEVBQUdDLEVBQU0sR0FFOUJHLEVBQVlKLEVBQVFDLEVBQU0sSUE4Q3hCVyxFQUFvQyxDQUN0Q1osRUFDQUMsRUFDQVksRUFDQUMsS0FFQSxHQUFrQixhQUFkRCxFQUNBLElBQUssSUFBSUUsRUFBSSxFQUFHQSxFQUFJRCxFQUFZQyxJQUFLLENBQ2pDLE1BQU1MLEVBQVdQLEVBQVlILEVBQVFDLEVBQU1jLEdBQzNDLEdBQUlMLElBRXdCLElBQXBCQSxFQUFTakIsU0FDYyxJQUF2QmlCLEVBQVNoQixVQUVULE9BQU8sRUFNdkIsR0FBa0IsZUFBZG1CLEVBQ0EsSUFBSyxJQUFJRSxFQUFJLEVBQUdBLEVBQUlELEVBQVlDLElBQUssQ0FDakMsTUFBTUwsRUFBV1AsRUFBWUgsRUFBU2UsRUFBR2QsR0FDekMsR0FBSVMsSUFFd0IsSUFBcEJBLEVBQVNqQixTQUNjLElBQXZCaUIsRUFBU2hCLFVBRVQsT0FBTyxFQU12QixPQUFPLEdBR0xzQixFQUFZLENBQUNoQixFQUFRQyxFQUFLWSxFQUFXUixLQUN2QyxNQUFNUyxFQUFhVCxFQUFLWSxZQUN4QixHQUFJTCxFQUFrQ1QsRUFBWUgsRUFBUUMsSUFDdEQsT0FBTyxFQUNYLEdBQWtCLGFBQWRZLEdBQ0EsR0E5QzRCLEVBQUNaLEVBQUthLElBQ3RDYixHQUFPLEdBQUtBLEVBQU1hLEVBQWEsRUFBSWxCLEVBQVVzQixPQTZDckNDLENBQTRCbEIsRUFBS2EsR0FBYSxDQUM5QyxJQUFLLElBQUlDLEVBQUksRUFBR0EsRUFBSUQsRUFBWUMsR0FBSyxFQUNqQ1gsRUFBWUosRUFBUUMsRUFBTWMsRUFBRyxJQUFJVixFQUFNZSxTQUFVTCxJQUNqRFgsRUFBWUosRUFBUyxFQUFHQyxFQUFNYyxHQUM5QlgsRUFBWUosRUFBUyxFQUFHQyxFQUFNYyxHQU9sQyxNQTlFdUMsRUFDL0NmLEVBQ0FDLEVBQ0FhLEtBSUFILEVBQXdCWCxFQUFRQyxHQUVoQ0csRUFBWUosRUFBUUMsRUFBTWEsR0FFMUJWLEVBQVlKLEVBQVMsRUFBR0MsRUFBTWEsR0FFOUJWLEVBQVlKLEVBQVMsRUFBR0MsRUFBTWEsR0FFOUJWLEVBQVlKLEVBQVMsRUFBR0MsRUFBTSxJQTBEdEJvQixDQUNJckIsRUFDQUMsRUFDQWEsSUFFRyxRQUVSLEdBQWtCLGVBQWRELEdBOUR3QixFQUFDYixFQUFRYyxJQUM1Q2QsR0FBVSxHQUFLQSxFQUFTYyxFQUFhLEVBQUlsQixFQUFVc0IsT0E4RDNDSSxDQUErQnRCLEVBQVFjLEdBQWEsQ0FDcEQsSUFBSyxJQUFJQyxFQUFJLEVBQUdBLEVBQUlELEVBQVlDLEdBQUssRUFDakNYLEVBQVlKLEVBQVNlLEVBQUlkLEVBQUssSUFBSUksRUFBTWUsU0FBVUwsSUFFbERYLEVBQVlKLEVBQVNlLEVBQUdkLEVBQU0sR0FDOUJHLEVBQVlKLEVBQVNlLEVBQUdkLEVBQU0sR0FPbEMsTUEvR3lDLEVBQ2pERCxFQUNBQyxFQUNBYSxLQUlBSCxFQUF3QlgsRUFBUUMsR0FFaENHLEVBQVlKLEVBQVNjLEVBQVliLEdBRWpDRyxFQUFZSixFQUFTLEVBQUdDLEVBQU0sR0FFOUJHLEVBQVlKLEVBQVNjLEVBQVliLEVBQU0sR0FFdkNHLEVBQVlKLEVBQVNjLEVBQVliLEVBQU0sSUEyRi9Cc0IsQ0FDSXZCLEVBQ0FDLEVBQ0FhLElBRUcsRUFHZixPQUFPLEdBa0JMVSxFQUF3QixLQUMxQixNQUFNQyxFQUNnQyxJQUFsQ0MsS0FBS0MsTUFBc0IsRUFBaEJELEtBQUtFLFVBQXNCLFdBQWEsYUFDakRDLEVBQWlCSCxLQUFLQyxNQUFzQixJQUFoQkQsS0FBS0UsVUFHakNsQixFQXRCa0IsTUFFeEIsTUFBTW9CLEVBQXFCLElBQUlsQyxFQUFVbUMsUUFXckMsT0FUQUQsRUFBbUJFLFNBQVNDLEtBQ0UsSUFBdkJBLEVBQVF6QyxXQUNQeUMsRUFBUUMsY0FBZSxFQUd2QkQsRUFBUUMsY0FBYyxLQUl2QkosR0FPZ0JLLEdBRVNOLEdBRXBDLE9BQTZCLElBQTFCbkIsRUFBU3dCLGFBQ0RWLElBT0osQ0FBRVksY0FKYTFCLEVBQVNWLE9BSVBxQyxXQUhMM0IsRUFBU1QsSUFHUXdCLG9CQW9DeEMsTUFBTyxDQUNIYSxXQVRnQixLQUNoQjFDLEVBQVlELEtBU1ppQixvQ0FDQTJCLDJDQWpCZ0R6QixHQUNoRGxCLEVBQVVtQyxPQUFPUyxRQUFRUCxJQUFrQyxJQUF0QkEsRUFBUXZDLFlBQ3hDd0IsU0FDTEosRUFBYSxFQWViWCxjQUNBc0MsY0F2QmtCLENBQUN6QyxFQUFRQyxLQUMzQkwsRUFBVUksR0FBUUMsR0FBS1QsWUFBYSxHQXVCcENrRCx3QkFyTjRCLEtBRTVCLElBQUlDLEdBQWtCLEVBQzFCLElBQUssSUFBSTVCLEVBQUksRUFBR0EsRUFBSSxHQUFJQSxJQUN0QixJQUFLLElBQUk2QixFQUFJLEVBQUdBLEVBQUksR0FBSUEsSUFBSyxDQUMzQixNQUFNbEMsRUFBV1AsRUFBWVksRUFBRzZCLEdBQ2hDLElBQXVCLElBQXBCbEMsRUFBU2pCLFFBQ1RpQixFQUFTakIsU0FBZ0MsSUFBdEJpQixFQUFTbUMsU0FBbUIsQ0FDL0NGLEdBQW1CLEVBQ25CLE9BSVAsT0FBT0EsR0F5TUgzQixZQUNBOEIsbUJBekN1QixLQUN2QixNQUFNQyxFQUFjLEdBQ3BCLElBQUssSUFBSWhDLEVBQUksRUFBR0EsRUFBSWIsRUFBTWdCLE9BQVFILEdBQUssRUFBRyxDQUN0QyxNQUFNVixFQUFPSCxFQUFNYSxJQUNiLGFBQUVpQyxFQUFZLFVBQUVDLEVBQVMsZ0JBQUV4QixHQUM3QkQsRUFBc0JuQixFQUFLWSxhQUMzQkQsRUFBVWdDLEVBQWNDLEVBQVd4QixFQUFpQnBCLEdBQ3BEMEMsRUFBWUcsS0FBSyxDQUFFRixlQUFjQyxZQUFXeEIsb0JBRTVDVixHQUFLLEVBR2IsT0FBT2dDLEdBOEJQdkIsMkIsT0NwT1JuQyxFQUFPQyxRQS9CYyxDQUFDNkQsRUFBTyxZQXdCbEIsQ0FDSEMsUUF4QlksSUFBTUQsRUF5QmxCRSxPQXZCVyxDQUFDckQsRUFBUUMsR0FBT0UsY0FBYXNDLG9CQUN4QyxNQUFNL0IsRUFBV1AsRUFBWUgsRUFBUUMsR0FDckMsT0FBNEIsSUFBeEJTLEVBQVNsQixZQUF5QmtCLEVBQVNqQixTQUFxRCxJQUEzQ2lCLEVBQVM0QyxZQUFZQyxTQUFTLFVBQ25GZCxFQUFjekMsRUFBUUMsR0FDbkJTLEVBQVM4QyxLQUVSOUMsRUFBUzhDLElBQUk5QyxFQUFTVSxVQUNmLG1CQUVKLGVBR0osbUNBWVBxQyxVQVRjLElBR1gsQ0FGSS9CLEtBQUtDLE1BQXNCLEdBQWhCRCxLQUFLRSxVQUNoQkYsS0FBS0MsTUFBc0IsR0FBaEJELEtBQUtFLGMsUUNhL0J2QyxFQUFPQyxRQWpDWSxDQUFDNEIsRUFBUWlDLEVBQU8sVUFJL0IsTUFBTU8sRUFBUzdELE1BQU1xQixHQUFRcEIsS0FBSyxTQWdCbEMsTUFBTyxDQUNIc0QsUUFMWSxJQUFPRCxFQU1uQmxDLFVBaEJjLElBQU15QyxFQUFPeEMsT0FpQjNCMkIsT0FMVyxJQUFNYSxFQUFPQyxPQUFPdkMsR0FBMEIsUUFBYkEsSUFNNUNvQyxJQWRTcEMsSUFDTEEsRUFBV0YsSUFDWHdDLEVBQU90QyxHQUFZLFFBYXZCa0MsVUFqQmMsSUFBTUksRUFrQnBCRSxXQXhCYSxHQXlCYnBFLFlBQVksRUFDWkUsV0FBVyxFQUNYRCxRQUFRLE1DNUJab0UsRUFBMkIsR0FHL0IsU0FBU0MsRUFBb0JDLEdBRTVCLElBQUlDLEVBQWVILEVBQXlCRSxHQUM1QyxRQUFxQnRELElBQWpCdUQsRUFDSCxPQUFPQSxFQUFhMUUsUUFHckIsSUFBSUQsRUFBU3dFLEVBQXlCRSxHQUFZLENBR2pEekUsUUFBUyxJQU9WLE9BSEEyRSxFQUFvQkYsR0FBVTFFLEVBQVFBLEVBQU9DLFFBQVN3RSxHQUcvQ3pFLEVBQU9DLFFDcEJmd0UsRUFBb0JJLEVBQUs3RSxJQUN4QixJQUFJOEUsRUFBUzlFLEdBQVVBLEVBQU8rRSxXQUM3QixJQUFPL0UsRUFBaUIsUUFDeEIsSUFBTSxFQUVQLE9BREF5RSxFQUFvQk8sRUFBRUYsRUFBUSxDQUFFRyxFQUFHSCxJQUM1QkEsR0NMUkwsRUFBb0JPLEVBQUksQ0FBQy9FLEVBQVNpRixLQUNqQyxJQUFJLElBQUlDLEtBQU9ELEVBQ1hULEVBQW9CVyxFQUFFRixFQUFZQyxLQUFTVixFQUFvQlcsRUFBRW5GLEVBQVNrRixJQUM1RWxFLE9BQU9vRSxlQUFlcEYsRUFBU2tGLEVBQUssQ0FBRUcsWUFBWSxFQUFNQyxJQUFLTCxFQUFXQyxNQ0ozRVYsRUFBb0JXLEVBQUksQ0FBQ0ksRUFBS0MsSUFBVXhFLE9BQU95RSxVQUFVQyxlQUFlQyxLQUFLSixFQUFLQyxHLDJEQ0dsRixJQU1JSSxFQU5BQyxHQUFTLEVBQ1QsR0FBUyxFQUNUQyxFQUFhLEdBQ2JDLEVBQWMsR0FDZEMsRUFBZSxHQUNmQyxFQUFpQixHQUdyQixTQUFTQyxFQUFVQyxFQUFPQyxFQUFNQyxFQUFNQyxHQUNwQ1QsRUFBU00sT0FDSWhGLElBQVRpRixJQUFvQixFQUFTQSxRQUNwQmpGLElBQVRrRixJQUFvQlAsRUFBYSxDQUFDTyxFQUFNQyxJQUNsQixHQUF0QlAsRUFBWW5FLGFBQXdCVCxJQUFUa0YsRUFBb0JOLEVBQWMsQ0FBQ00sRUFBTUMsR0FFL0MsSUFBdkJQLEVBQVluRSxRQUNXLEdBQXZCb0UsRUFBYXBFLGFBQ0pULElBQVRrRixJQUVBTCxFQUFlLENBQUNLLEVBQU1DLElBTTFCLFNBQVNDLEVBQXVCRixFQUFNQyxHQU1wQyxPQUxBTCxFQUFpQixHQUNKLElBQVRLLEdBQVlMLEVBQWVyQyxLQUFLLENBQUN5QyxFQUFNQyxFQUFPLElBQ3JDLElBQVRBLEdBQVlMLEVBQWVyQyxLQUFLLENBQUN5QyxFQUFNQyxFQUFPLElBQ3JDLElBQVRELEdBQVlKLEVBQWVyQyxLQUFLLENBQUN5QyxFQUFPLEVBQUdDLElBQ2xDLElBQVRELEdBQVlKLEVBQWVyQyxLQUFLLENBQUN5QyxFQUFPLEVBQUdDLElBQ3hDTCxFQUdULFNBQVNPLEVBQU9DLEVBQVFDLEVBQUlDLEVBQUlwRCxFQUFRcUQsRUFBYUMsR0FDbkQsSUFBSUMsRUFVSixJQVRlLElBQVh2RCxJQUNGdUMsRUFBYSxHQUNiQyxFQUFjLEdBQ2RDLEVBQWUsR0FDZkMsRUFBaUIsR0FDakJKLEdBQVMsRUFDVCxHQUFTLEVBQ1RELEVBQWtCLEtBRWYsSUFBV0MsRUFHZCxPQUZBaUIsRUFBTUosRUFBR3ZDLFlBRUY0QyxFQUFlTCxFQUFJQyxFQUFJRyxFQUFJLEdBQUlBLEVBQUksR0FBSUYsRUFBYUMsR0FDdEQsR0FBNEIsSUFBeEJiLEVBQWFwRSxRQUFnQmlFLElBQVdZLEVBQVEsQ0FDekQsSUFBSU8sRUFLSixHQUpJakIsRUFBWSxJQUFNQyxFQUFhLEdBQUssSUFBR2dCLEVBQVNDLEVBQWMsU0FDOURsQixFQUFZLElBQU1DLEVBQWEsR0FBSyxJQUFHZ0IsRUFBU0MsRUFBYyxPQUM5RGxCLEVBQVksSUFBTUMsRUFBYSxHQUFLLElBQUdnQixFQUFTQyxFQUFjLFVBQzlEbEIsRUFBWSxJQUFNQyxFQUFhLEdBQUssSUFBR2dCLEVBQVNDLEVBQWMsU0FDOURELEVBQU8sSUFBTSxHQUFLQSxFQUFPLElBQU0sR0FBS0EsRUFBTyxJQUFNLEdBQUtBLEVBQU8sSUFBTSxFQUNyRSxPQUFPRCxFQUFlTCxFQUFJQyxFQUFJSyxFQUFPLEdBQUlBLEVBQU8sR0FBSUosRUFBYUMsUUFDOUQsR0FBNEIsSUFBeEJiLEVBQWFwRSxRQUFnQixJQUFXaUUsRUFBUSxDQUd6RCxJQUFJbUIsRUFLSixHQVBBbEIsRUFBYUMsRUFDYkMsRUFBZSxHQUVTLE9BQXBCSixJQUEwQm9CLEVBQVNDLEVBQWMsU0FDN0IsU0FBcEJyQixJQUE0Qm9CLEVBQVNDLEVBQWMsT0FDL0IsVUFBcEJyQixJQUE2Qm9CLEVBQVNDLEVBQWMsU0FDaEMsU0FBcEJyQixJQUE0Qm9CLEVBQVNDLEVBQWMsVUFDbkRELEVBQU8sSUFBTSxHQUFLQSxFQUFPLElBQU0sR0FBS0EsRUFBTyxJQUFNLEdBQUtBLEVBQU8sSUFBTSxFQUNyRSxPQUFPRCxFQUFlTCxFQUFJQyxFQUFJSyxFQUFPLEdBQUlBLEVBQU8sR0FBSUosRUFBYUMsUUFDOUQsR0FBSSxFQUFRLENBQ1ksR0FBekJaLEVBQWVyRSxRQUNqQjJFLEVBQXVCVCxFQUFXLEdBQUlBLEVBQVcsSUFDdEIsR0FBekJHLEVBQWVyRSxRQUF5QixHQUFWLEdBQ2hDMkUsRUFBdUJSLEVBQVksR0FBSUEsRUFBWSxJQUNyRCxNQUFNaUIsRUFBU2YsRUFBZWlCLE1BQzlCLE9BQU9ILEVBQWVMLEVBQUlDLEVBQUlLLEVBQU8sR0FBSUEsRUFBTyxHQUFJSixFQUFhQyxJQUlyRSxTQUFTSSxFQUFjRSxHQUNyQixNQUFZLFNBQVJBLEdBQ0Z2QixFQUFrQixPQUNYLENBQUNFLEVBQVcsR0FBSUEsRUFBVyxHQUFLLElBRTdCLFVBQVJxQixHQUNGdkIsRUFBa0IsUUFDWCxDQUFDRSxFQUFXLEdBQUlBLEVBQVcsR0FBSyxJQUU3QixTQUFScUIsR0FDRnZCLEVBQWtCLE9BQ1gsQ0FBQ0UsRUFBVyxHQUFLLEVBQUdBLEVBQVcsS0FFNUIsT0FBUnFCLEdBQ0Z2QixFQUFrQixLQUNYLENBQUNFLEVBQVcsR0FBSyxFQUFHQSxFQUFXLFVBRnhDLEVDeUJLc0IsZUFBZUwsRUFBZUwsRUFBSUMsRUFBSU4sRUFBTUMsRUFBTU0sRUFBYUMsR0FDcEUsSUFBSXRELEdBQVMsRUFDYixNQUFNOEQsRUFBSUMsU0FBU0MsY0FDYixpQ0FBaUNsQixZQUFlQyxPQUdoRHZDLEVBQVM0QyxFQUFHNUMsT0FBT3NDLEVBQU1DLEVBQU1NLEdBV3JDLEdBVEVZLFFBQVFDLElBQUliLEVBQVkvRixZQUFZd0YsRUFBTUMsSUFDN0Isb0NBQVh2QyxHQUVGeUMsR0FEZSxFQUNBRSxFQUFJQyxPQUFJeEYsRUFBV3lGLEVBQWFDLEdBRWxDLGdCQUFYOUMsSUFDRm1DLEdBQVUsR0FDVm1CLEVBQUVLLFVBQVVDLElBQUksU0FFSCxvQkFBWDVELEVBS0YsT0FKQW1DLEdBQVUsR0FBTSxFQUFNRyxFQUFNQyxHQUM1QmUsRUFBRUssVUFBVUMsSUFBSSxPQUNoQmYsRUFBWS9GLFlBQVl3RixFQUFNQyxHQUFNaEMsV0FBV1YsS0FBS3lELEdBRWhEVCxFQUFZL0YsWUFBWXdGLEVBQU1DLEdBQU0vQyxXQUN0Q3FELEVBQVkvRixZQUFZd0YsRUFBTUMsR0FBTWhDLFdBQVc1QixTQUFTMkUsR0FDdERBLEVBQUVLLFVBQVVDLElBQUksVUFFbEJwRSxHQUFTLEdBQ3FDLElBQTFDcUQsRUFBWXhELDJCQUEyQ3dFLEVBQWdCaEIsRUFBYUMsVUFFcEZnQixFQUFNLEtBQ0xyQixHQUFPLEVBQU9FLEVBQUlDLEVBQUlwRCxFQUFRcUQsRUFBYUMsSUF1Q3RELFNBQVNnQixFQUFNQyxHQUNiLE9BQU8sSUFBSUMsU0FBU0MsSUFDbEJDLFlBQVcsS0FDVEQsRUFBUSxLQUNQRixNQUlBLE1BQU1JLEVBQW9CLEVBQUdySCxrQkFDaEMsTUFBTXNILEVBQWtCYixTQUFTQyxjQUFjLG9CQUUvQyxJQUFLLElBQUk3RyxFQUFTLEVBQUdBLEVBQVMsR0FBSUEsR0FBVSxFQUN4QyxJQUFLLElBQUlDLEVBQU0sRUFBR0EsRUFBTSxHQUFJQSxHQUFPLEVBQUcsQ0FDbEMsTUFBTXlILEVBQU9ELEVBQWdCWixjQUN6QixtQkFBeUIsR0FBTjVHLEVBQVdELEVBQVMsTUFFM0MwSCxFQUFLQyxhQUFhLFNBQVUzSCxHQUM1QjBILEVBQUtDLGFBQWEsTUFBTzFILEdBQ3pCLE1BQU1TLEVBQVdQLEVBQVlILEVBQVFDLEdBQ2pDUyxFQUFTakIsU0FDVGlJLEVBQUtWLFVBQVVDLElBQUksUUFDbkJTLEVBQUtDLGFBQWEsWUFBYWpILEVBQVMwQyxjQU1sRDhELEVBQWtCLENBQUNoQixFQUFhQyxLQUNsQyxHQUFJRCxFQUFZeEQsMEJBQTJCLENBQ3ZDLE1BQU1rRixFQUFRaEIsU0FBU0MsY0FBYyxVQUMvQmdCLEVBQWNqQixTQUFTQyxjQUFjLHNCQUNyQ2lCLEVBQWtCbEIsU0FBU0MsY0FDN0IsMkJBR0plLEVBQU1HLE1BQU1DLFFBQVUsUUFDdEJGLEVBQWdCRyxpQkFBaUIsU0FBUyxLQUN0Q3ZILFNBQVN3SCxZQUdiTCxFQUFZTSxZQUFjLFlBRTlCLEdBQUloQyxFQUFXekQsMEJBQTJCLENBQ3RDLE1BQU1rRixFQUFRaEIsU0FBU0MsY0FBYyxVQUMvQmdCLEVBQWNqQixTQUFTQyxjQUFjLHNCQUNyQ2lCLEVBQWtCbEIsU0FBU0MsY0FDN0IsMkJBR0plLEVBQU1HLE1BQU1DLFFBQVUsUUFDdEJILEVBQVlNLFlBQWMsV0FDMUJMLEVBQWdCRyxpQkFBaUIsU0FBUyxLQUN0Q3ZILFNBQVN3SCxjQXVEUkUsRUFBcUJ4SSxJQU05QixPQUpBQSxFQUFVMEMsYUFkSXNFLFNBQVN5QixpQkFBaUIseUJBRWxDckcsU0FBUTBGLElBQ1ZBLEVBQUtWLFVBQVVzQixPQUFPLFFBQ3RCWixFQUFLVixVQUFVc0IsT0FBTyxPQUN0QlosRUFBS1YsVUFBVXNCLE9BQU8sV0FZQTVHLEtBQUtDLE1BQXNCLEVBQWhCRCxLQUFLRSxXQUV0QyxLQUFLLEVBQ0xoQyxFQUFVb0IsVUFBVSxFQUFHLEVBQUcsV0FBWSxJQUFXLElBQ2pEcEIsRUFBVW9CLFVBQVUsRUFBRyxFQUFHLGFBQWMsSUFBVyxJQUNuRHBCLEVBQVVvQixVQUFVLEVBQUcsRUFBRyxhQUFjLElBQVcsSUFDbkRwQixFQUFVb0IsVUFBVSxFQUFHLEVBQUcsYUFBYyxJQUFXLElBQ25EcEIsRUFBVW9CLFVBQVUsRUFBRyxFQUFHLGFBQWMsSUFBVyxJQUMvQyxNQUNKLEtBQUssRUFDTHBCLEVBQVVvQixVQUFVLEVBQUcsRUFBRyxhQUFjLElBQVcsSUFDbkRwQixFQUFVb0IsVUFBVSxFQUFHLEVBQUcsYUFBYyxJQUFXLElBQ25EcEIsRUFBVW9CLFVBQVUsRUFBRyxFQUFHLGFBQWMsSUFBVyxJQUNuRHBCLEVBQVVvQixVQUFVLEVBQUcsRUFBRyxhQUFjLElBQVcsSUFDbkRwQixFQUFVb0IsVUFBVSxFQUFHLEVBQUcsYUFBYyxJQUFXLElBQy9DLE1BQ0osS0FBSyxFQUNMcEIsRUFBVW9CLFVBQVUsRUFBRyxFQUFHLGFBQWMsSUFBVyxJQUNuRHBCLEVBQVVvQixVQUFVLEVBQUcsRUFBRyxXQUFZLElBQVcsSUFDakRwQixFQUFVb0IsVUFBVSxFQUFHLEVBQUcsV0FBWSxJQUFXLElBQ2pEcEIsRUFBVW9CLFVBQVUsRUFBRyxFQUFHLGFBQWMsSUFBVyxJQUNuRHBCLEVBQVVvQixVQUFVLEVBQUcsRUFBRyxhQUFjLElBQVcsSUFDL0MsTUFDSixRQUNJcEIsRUFBVW9CLFVBQVUsRUFBRyxFQUFHLGFBQWMsSUFBVyxJQUNuRHBCLEVBQVVvQixVQUFVLEVBQUcsRUFBRyxhQUFjLElBQVcsSUFDbkRwQixFQUFVb0IsVUFBVSxFQUFHLEVBQUcsYUFBYyxJQUFXLElBQ25EcEIsRUFBVW9CLFVBQVUsRUFBRyxFQUFHLFdBQVksSUFBVyxJQUNqRHBCLEVBQVVvQixVQUFVLEVBQUcsRUFBRyxhQUFjLElBQVcsSUFJM0R3RyxFQUFrQjVILEkscUJDcFV0QixNQUFNc0csRUFBYyxNQUNkQyxFQUFhLE1BQ2IsRUFBUyxNQUNUb0MsRUFBVyxNQUVPM0IsU0FBU0MsY0FBYyxvQkFFL0JvQixpQkFBaUIsU0FBUyxLQUN0Q0csRUFBa0JsQyxNQUd0QmtDLEVBQWtCbEMsR0FFbEJDLEVBQVduRixVQUFVLEVBQUcsRUFBRyxhQUFjLElBQVcsSUFDcERtRixFQUFXbkYsVUFBVSxFQUFHLEVBQUcsYUFBYyxJQUFXLElBQ3BEbUYsRUFBV25GLFVBQVUsRUFBRyxFQUFHLGFBQWMsSUFBVyxJQUNwRG1GLEVBQVduRixVQUFVLEVBQUcsRUFBRyxXQUFZLElBQVcsSUFDbERtRixFQUFXbkYsVUFBVSxFQUFHLEVBQUcsYUFBYyxJQUFXLElBRXBELE1BQU13SCxFRGlJZ0IsTUFDbEIsTUFBTUMsRUFBYyxHQXdCcEIsTUFBTyxDQUNIQyxRQXZCSixTQUFpQkMsRUFBV0MsR0FDbkIvSSxNQUFNZ0osUUFBUUosRUFBWUUsS0FHL0JGLEVBQVlFLEdBQVczRyxTQUFTOEcsSUFDNUJBLEVBQVNGLE9BbUJiRyxVQWhCSixTQUFTQSxFQUFVSixFQUFXRyxHQUNyQmpKLE1BQU1nSixRQUFRRSxFQUFVSixNQUN6QkYsRUFBWUUsR0FBYSxJQUU3QkYsRUFBWUUsR0FBV3pGLEtBQUs0RixHQUM1QixNQUFNRSxFQUFRUCxFQUFZRSxHQUFXekgsT0FBUyxFQUU5QyxNQUFPLENBQ0grSCxjQUNJUixFQUFZRSxHQUFXTyxPQUFPRixFQUFPLFFDckoxQ0csR0QwTjZCLEVBQ3BDakQsRUFDQUMsRUFDQWlELEVBQ0FDLEVBQ0FiLEtBRUEsTUFBTWMsRUFBaUIxQyxTQUFTQyxjQUFjLG1CQUU5QyxJQUFLLElBQUk3RyxFQUFTLEVBQUdBLEVBQVMsR0FBSUEsR0FBVSxFQUN4QyxJQUFLLElBQUlDLEVBQU0sRUFBR0EsRUFBTSxHQUFJQSxHQUFPLEVBQUcsQ0FFbEMsTUFBTXlILEVBQU80QixFQUFlekMsY0FDeEIsbUJBQXlCLEdBQU41RyxFQUFXRCxFQUFTLE1BRTNDMEgsRUFBS0MsYUFBYSxTQUFVM0gsR0FDNUIwSCxFQUFLQyxhQUFhLE1BQU8xSCxHQUV6QnlILEVBQUtPLGlCQUNELFNBQ0EsS0FDSU8sRUFBR0UsUUFBUSxRQUFTLENBQ2hCaEIsT0FDQTFILFNBQ0FDLE1BQ0FpRyxjQUNBQyxhQUNBaUQsU0FDQUMsWUFHUixDQUFFRSxNQUFNLE1DdlB4QkMsQ0FBeUJ0RCxFQUFhQyxFQUFZLEVBQVFvQyxFQUFVQyxHQUVwRUEsRUFBR08sVUFBVSxTRGlUUyxFQUNsQnJCLE9BQ0ExSCxTQUNBQyxNQUNBaUcsY0FDQUMsYUFDQWlELFNBQ0FDLFlBdlRvQjNDLE9BQU8xRyxFQUFRQyxFQUFLa0csRUFBWUQsRUFBYWtELEVBQVFDLEtBSHhELEVBQUNySixFQUFRQyxFQUFLa0csRUFBWWlELEtBQzNDQSxFQUFPL0YsT0FBT3JELEVBQVFDLEVBQUtrRyxJQUszQnNELENBQWF6SixFQUFRQyxFQUFLa0csRUFBWWlELEdBN0JwQixFQUFDQSxFQUFRcEosRUFBUUMsRUFBS2tHLEtBQ3hDLE1BQU11QixFQUFPZCxTQUFTQyxjQUNsQixnQ0FBb0M3RyxZQUFpQkMsT0FHdERrRyxFQUFXaEcsWUFBWUgsRUFBUUMsSUFBTVIsU0FFcEMwRyxFQUFXaEcsWUFBWUgsRUFBUUMsR0FBSzJELFdBQVdWLEtBQUt3RSxHQUNqRHZCLEVBQVdoRyxZQUFZSCxFQUFRQyxHQUFLNEMsVUFFbkNzRCxFQUFXaEcsWUFBWUgsRUFBUUMsR0FBSzJELFdBQVc1QixTQUFTMkUsR0FBTUEsRUFBRUssVUFBVUMsSUFBSSxXQUlyRWQsRUFBV2hHLFlBQVlILEVBQVFDLEdBQ25DUixPQUNUaUksRUFBS1YsVUFBVUMsSUFBSSxPQUVuQlMsRUFBS1YsVUFBVUMsSUFBSSxTQVl2QnlDLENBQWMsRUFBUzFKLEVBQVFDLEVBQUtrRyxTQUM5QmdCLEVBQU0sS0FDTGhCLEVBQVd6RCwwQkFBNEJ3RSxJQUFvQnBCLEdBQU8sRUFBT3NELEVBQVFDLE9BQU81SSxFQUFXeUYsRUFBYUMsSUFvVHZId0QsQ0FBZ0IzSixFQUFRQyxFQUFLa0csRUFBWUQsRUFBYWtELEVBQVFDLE1DelRsRTdCLEVBQWtCdEIsSSIsInNvdXJjZXMiOlsid2VicGFjazovL3RvcC1iYXR0bGVzaGlwLy4vc3JjL2dhbWVib2FyZC9nYW1lYm9hcmQuanMiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvLi9zcmMvcGxheWVyL3BsYXllci5qcyIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC8uL3NyYy9zaGlwL3NoaXAuanMiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3RvcC1iYXR0bGVzaGlwL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvLi9zcmMvYm90LmpzIiwid2VicGFjazovL3RvcC1iYXR0bGVzaGlwLy4vc3JjL2RvbS5qcyIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcbi8qIGVzbGludC1kaXNhYmxlIG5vLW11bHRpLWFzc2lnbiAqL1xuLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLWV4cHJlc3Npb25zICovXG5jb25zdCBjcmVhdGVTaGlwID0gcmVxdWlyZSgnLi4vc2hpcC9zaGlwJylcblxuLyogZXNsaW50LWRpc2FibGUgbm8tcGFyYW0tcmVhc3NpZ24gKi9cbmNvbnN0IGNyZWF0ZUdhbWVCb2FyZCA9ICgpID0+IHtcbiAgICBjb25zdCBlbXB0eUNlbGwgPSB7IGhhc0JlZW5IaXQ6IGZhbHNlLCBpc1NoaXA6IGZhbHNlLCBvZmZMaW1pdHM6IGZhbHNlIH1cbiAgICBcbiAgICBjb25zdCBpbml0aWFsaXplQm9hcmQgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGdhbWVCb2FyZCA9IEFycmF5KDEwKS5maWxsKCkubWFwKCgpID0+IEFycmF5KDEwKS5maWxsKCkpXG4gICAgICAgIGZvcihsZXQgY29sdW1uPSAwOyBjb2x1bW4gPCAxMDsgY29sdW1uKyspe1xuICAgICAgICAgICAgZm9yKGxldCByb3c9IDA7IHJvdyA8IDEwOyByb3crKyl7XG4gICAgICAgICAgICAgICAgZ2FtZUJvYXJkW2NvbHVtbl1bcm93XSA9IHsuLi5lbXB0eUNlbGwsIGNvbHVtbiwgcm93fVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBnYW1lQm9hcmRcbiAgICBcbiAgICB9XG5cbiAgICBsZXQgZ2FtZUJvYXJkID0gaW5pdGlhbGl6ZUJvYXJkKClcblxuICAgIGNvbnN0IHNoaXBzID0gW1xuICAgICAgICBjcmVhdGVTaGlwKDUsICdDYXJyaWVyJyksXG4gICAgICAgIGNyZWF0ZVNoaXAoNCwgJ0JhdHRsZXNoaXAnKSxcbiAgICAgICAgY3JlYXRlU2hpcCgzLCAnRGVzdHJveWVyJyksXG4gICAgICAgIGNyZWF0ZVNoaXAoMywgJ1N1Ym1hcmluZScpLFxuICAgICAgICBjcmVhdGVTaGlwKDIsICdQYXRyb2wgQm9hdCcpLFxuICAgIF1cblxuXG4gICAgY29uc3QgY3JlYXRlT2ZmTGltaXRMb2NhdGlvbiA9ICgpID0+XG4gICAgICAgIE9iamVjdC5hc3NpZ24oZW1wdHlDZWxsLCB7IG9mZkxpbWl0czogdHJ1ZSB9KVxuXG4gICAgY29uc3QgZ2V0TG9jYXRpb24gPSAoY29sdW1uLCByb3cpID0+IGdhbWVCb2FyZD8uW2NvbHVtbl0/Lltyb3ddXG5cbiAgICBjb25zdCBzZXRMb2NhdGlvbiA9IChjb2x1bW4sIHJvdywgc2hpcCA9IGNyZWF0ZU9mZkxpbWl0TG9jYXRpb24oKSkgPT4ge1xuICAgICAgICBpZiAoZ2FtZUJvYXJkPy5bY29sdW1uXT8uW3Jvd10gPT09IHVuZGVmaW5lZCkgcmV0dXJuIHRydWVcbiAgICAgICAgY29uc3QgbG9jYXRpb24gPSBnYW1lQm9hcmRbY29sdW1uXVtyb3ddXG5cbiAgICAgICAgZ2FtZUJvYXJkW2NvbHVtbl1bcm93XSA9IHsuLi5sb2NhdGlvbiwgLi4uc2hpcH1cbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgY29uc3QgY2hlY2tJZkFsbFNoaXBzSGF2ZVN1bmsgPSAoKSA9PiB7XG5cbiAgICAgICAgbGV0IGhhdmVBbGxTaGlwc1N1bmsgPXRydWUgIFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTA7IGkrKykge1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAxMDsgaisrKSB7XG4gICAgICAgIGNvbnN0IGxvY2F0aW9uID0gZ2V0TG9jYXRpb24oaSwgailcbiAgICAgICAgaWYobG9jYXRpb24uaXNTaGlwID09PSBmYWxzZSkgY29udGludWVcbiAgICAgICAgaWYobG9jYXRpb24uaXNTaGlwICYmIGxvY2F0aW9uLmlzU3VuaygpID09PSBmYWxzZSl7XG4gICAgICAgICAgIGhhdmVBbGxTaGlwc1N1bmsgPSBmYWxzZSBcbiAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGhhdmVBbGxTaGlwc1N1bmsgXG4gICAgfVxuXG4gICAgY29uc3QgYWRkT2ZmTGltaXRBcmVhRm9yU2hpcHMgPSAoY29sdW1uLCByb3cpID0+IHtcbiAgICAgICAgLy8gdG9wLWxlZnRcbiAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uIC0gMSwgcm93IC0gMSlcbiAgICAgICAgLy8gdG9wXG4gICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiwgcm93IC0gMSlcbiAgICB9XG5cbiAgICBjb25zdCBhZGRPZmZMaW1pdEFyZWFGb3JIb3Jpem9udGFsbHlQb3NpdGlvbmVkU2hpcCA9IChcbiAgICAgICAgY29sdW1uLFxuICAgICAgICByb3csXG4gICAgICAgIHNoaXBMZW5ndGhcbiAgICApID0+IHtcbiAgICAgICAgLy8gcG9zaXRpb25zIHJlbGF0aXZlIHRvIHRoZSBzaGlwIGl0c2VsZihpZS4gYSBob3Jpem9udGFsIHNoaXAncyBib3R0b20gaXMgdG8gdGhlIHJpZ2h0KVxuXG4gICAgICAgIGFkZE9mZkxpbWl0QXJlYUZvclNoaXBzKGNvbHVtbiwgcm93KVxuICAgICAgICAvLyBib3R0b21cbiAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uICsgc2hpcExlbmd0aCwgcm93KVxuICAgICAgICAvLyBib3R0b20tbGVmdFxuICAgICAgICBzZXRMb2NhdGlvbihjb2x1bW4gLSAxLCByb3cgKyAxKVxuICAgICAgICAvLyBib3R0b20tcmlnaHRcbiAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uICsgc2hpcExlbmd0aCwgcm93ICsgMSlcbiAgICAgICAgLy8gdG9wLXJpZ2h0XG4gICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiArIHNoaXBMZW5ndGgsIHJvdyAtIDEpXG4gICAgfVxuXG4gICAgY29uc3QgYWRkT2ZmTGltaXRBcmVhRm9yVmVydGljYWxseVBvc2l0aW9uZWRTaGlwID0gKFxuICAgICAgICBjb2x1bW4sXG4gICAgICAgIHJvdyxcbiAgICAgICAgc2hpcExlbmd0aFxuICAgICkgPT4ge1xuICAgICAgICAvLyBwb3NpdGlvbnMgcmVsYXRpdmUgdG8gaG93IHRoZSB1c2VyIHNlZXMgaXQoaWUuIGEgdmVydGljYWwgc2hpcCdzIGJvdHRvbSBpcyB0byB0aGUgYm90dG9tKVxuXG4gICAgICAgIGFkZE9mZkxpbWl0QXJlYUZvclNoaXBzKGNvbHVtbiwgcm93KVxuICAgICAgICAvLyBib3R0b21cbiAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uLCByb3cgKyBzaGlwTGVuZ3RoKVxuICAgICAgICAvLyBib3R0b20tcmlnaHRcbiAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uICsgMSwgcm93ICsgc2hpcExlbmd0aClcbiAgICAgICAgLy8gYm90dG9tLWxlZnRcbiAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uIC0gMSwgcm93ICsgc2hpcExlbmd0aClcbiAgICAgICAgLy8gdG9wLXJpZ2h0XG4gICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiArIDEsIHJvdyAtIDEpXG4gICAgfVxuXG4gICAgY29uc3QgY2hlY2tJZkNvbHVtbkNvb3JkaW5hdGVJc1ZhbGlkID0gKGNvbHVtbiwgc2hpcExlbmd0aCkgPT5cbiAgICAgICAgY29sdW1uID49IDAgJiYgY29sdW1uICsgc2hpcExlbmd0aCAtIDEgPCBnYW1lQm9hcmQubGVuZ3RoXG5cbiAgICBjb25zdCBjaGVja0lmUm93Q29vcmRpbmF0ZUlzVmFsaWQgPSAocm93LCBzaGlwTGVuZ3RoKSA9PlxuICAgICAgICByb3cgPj0gMCAmJiByb3cgKyBzaGlwTGVuZ3RoIC0gMSA8IGdhbWVCb2FyZC5sZW5ndGhcblxuXG4gICAgY29uc3QgY2hlY2tJZkxvY2F0aW9uSXNBU2hpcE9yT2ZmTGltaXRzID0gKFxuICAgICAgICBjb2x1bW4sXG4gICAgICAgIHJvdyxcbiAgICAgICAgZGlyZWN0aW9uLFxuICAgICAgICBzaGlwTGVuZ3RoXG4gICAgKSA9PiB7XG4gICAgICAgIGlmIChkaXJlY3Rpb24gPT09ICd2ZXJ0aWNhbCcpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcExlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbG9jYXRpb24gPSBnZXRMb2NhdGlvbihjb2x1bW4sIHJvdyArIGkpXG4gICAgICAgICAgICAgICAgaWYgKGxvY2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmlzU2hpcCA9PT0gdHJ1ZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ub2ZmTGltaXRzID09PSB0cnVlXG4gICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAnaG9yaXpvbnRhbCcpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcExlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbG9jYXRpb24gPSBnZXRMb2NhdGlvbihjb2x1bW4gKyBpLCByb3cpXG4gICAgICAgICAgICAgICAgaWYgKGxvY2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmlzU2hpcCA9PT0gdHJ1ZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ub2ZmTGltaXRzID09PSB0cnVlXG4gICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICBjb25zdCBwbGFjZVNoaXAgPSAoY29sdW1uLCByb3csIGRpcmVjdGlvbiwgc2hpcCkgPT4ge1xuICAgICAgICBjb25zdCBzaGlwTGVuZ3RoID0gc2hpcC5nZXRMZW5ndGgoKVxuICAgICAgICBpZiAoY2hlY2tJZkxvY2F0aW9uSXNBU2hpcE9yT2ZmTGltaXRzKGdldExvY2F0aW9uKGNvbHVtbiwgcm93LCBkaXJlY3Rpb24sIHNoaXBMZW5ndGgpKSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAndmVydGljYWwnKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2tJZlJvd0Nvb3JkaW5hdGVJc1ZhbGlkKHJvdywgc2hpcExlbmd0aCkpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXBMZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgICAgICAgICBzZXRMb2NhdGlvbihjb2x1bW4sIHJvdyArIGksIHsuLi5zaGlwLCBwb3NpdGlvbjogaX0pXG4gICAgICAgICAgICAgICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiArIDEsIHJvdyArIGkpXG4gICAgICAgICAgICAgICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiAtIDEsIHJvdyArIGkpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGFkZE9mZkxpbWl0QXJlYUZvclZlcnRpY2FsbHlQb3NpdGlvbmVkU2hpcChcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLFxuICAgICAgICAgICAgICAgICAgICByb3csXG4gICAgICAgICAgICAgICAgICAgIHNoaXBMZW5ndGhcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPT09ICdob3Jpem9udGFsJykge1xuICAgICAgICAgICAgaWYgKGNoZWNrSWZDb2x1bW5Db29yZGluYXRlSXNWYWxpZChjb2x1bW4sIHNoaXBMZW5ndGgpKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGlwTGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uICsgaSAsIHJvdywgey4uLnNoaXAsIHBvc2l0aW9uOiBpfSlcbiAgICAgICAgICAgICAgICAgICAgLy9zZXRMb2NhdGlvbihjb2x1bW4gKyBpLCByb3csIHNoaXApXG4gICAgICAgICAgICAgICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiArIGksIHJvdyArIDEpXG4gICAgICAgICAgICAgICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiArIGksIHJvdyAtIDEpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGFkZE9mZkxpbWl0QXJlYUZvckhvcml6b250YWxseVBvc2l0aW9uZWRTaGlwKFxuICAgICAgICAgICAgICAgICAgICBjb2x1bW4sXG4gICAgICAgICAgICAgICAgICAgIHJvdyxcbiAgICAgICAgICAgICAgICAgICAgc2hpcExlbmd0aFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICAgICAgY29uc3QgYXZhaWxhYmxlU3BhY2VzID0gKCkgPT57XG5cbiAgICAgICAgY29uc3QgZmxhdHRlbmVkR2FtZUJvYXJkID0gWy4uLmdhbWVCb2FyZC5mbGF0KCldXG5cbiAgICAgICAgICAgIGZsYXR0ZW5lZEdhbWVCb2FyZC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYoZWxlbWVudC5oYXNCZWVuSGl0ID09PSB0cnVlKXtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5hdmFpbGFiaWxpdHkgPSBmYWxzZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmF2YWlsYWJpbGl0eSA9dHJ1ZSAgXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgcmV0dXJuIGZsYXR0ZW5lZEdhbWVCb2FyZFxuXG4gICAgICAgIH1cbiAgICBjb25zdCBtYWtlUmFuZG9tQ29vcmRpbmF0ZXMgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHJhbmRvbURpcmVjdGlvbiA9XG4gICAgICAgICAgICBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyKSA9PT0gMCA/ICd2ZXJ0aWNhbCcgOiAnaG9yaXpvbnRhbCdcbiAgICAgICAgY29uc3QgcmFuZG9tTG9jYXRpb24gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDApXG4gICAgICAgIGNvbnN0IGZsYXR0ZW5lZEdhbWVCb2FyZCA9IGF2YWlsYWJsZVNwYWNlcygpXG5cbiAgICAgICAgY29uc3QgbG9jYXRpb24gPSBmbGF0dGVuZWRHYW1lQm9hcmRbcmFuZG9tTG9jYXRpb25dXG5cbiAgICAgICAgaWYobG9jYXRpb24uYXZhaWxhYmlsaXR5ID09PSBmYWxzZSl7XG4gICAgICAgICAgICByZXR1cm4gbWFrZVJhbmRvbUNvb3JkaW5hdGVzKClcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGVsZW1lbnRDb2x1bW4gPSBsb2NhdGlvbi5jb2x1bW5cbiAgICAgICAgY29uc3QgZWxlbWVudFJvdyA9IGxvY2F0aW9uLnJvd1xuXG5cbiAgICAgICAgcmV0dXJuIHsgZWxlbWVudENvbHVtbiwgZWxlbWVudFJvdywgcmFuZG9tRGlyZWN0aW9uIH1cbiAgICB9XG5cbiAgICBjb25zdCByYW5kb21seVBsYWNlU2hpcHMgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHNoaXBEZXRhaWxzID0gW11cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGlwcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgY29uc3Qgc2hpcCA9IHNoaXBzW2ldXG4gICAgICAgICAgICBjb25zdCB7IHJhbmRvbUNvbHVtbiwgcmFuZG9tUm93LCByYW5kb21EaXJlY3Rpb24gfSA9XG4gICAgICAgICAgICAgICAgbWFrZVJhbmRvbUNvb3JkaW5hdGVzKHNoaXAuZ2V0TGVuZ3RoKCkpXG4gICAgICAgICAgICBpZiAocGxhY2VTaGlwKHJhbmRvbUNvbHVtbiwgcmFuZG9tUm93LCByYW5kb21EaXJlY3Rpb24sIHNoaXApKSB7XG4gICAgICAgICAgICAgICAgc2hpcERldGFpbHMucHVzaCh7IHJhbmRvbUNvbHVtbiwgcmFuZG9tUm93LCByYW5kb21EaXJlY3Rpb24gfSlcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaSAtPSAxXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNoaXBEZXRhaWxzXG4gICAgfVxuXG4gICAgY29uc3QgcmVjZWl2ZUF0dGFjayA9IChjb2x1bW4sIHJvdykgPT4ge1xuICAgICAgICBnYW1lQm9hcmRbY29sdW1uXVtyb3ddLmhhc0JlZW5IaXQgPSB0cnVlXG4gICAgfVxuXG4gICAgY29uc3QgY2hlY2tJZk9mZkxpbWl0Wm9uZVdhc0NvcnJlY3RseUltcGxlbWVudGVkID0gKHNoaXBMZW5ndGgpID0+XG4gICAgICAgIGdhbWVCb2FyZC5mbGF0KCkuZmlsdGVyKChlbGVtZW50KSA9PiBlbGVtZW50Lm9mZkxpbWl0cyA9PT0gdHJ1ZSlcbiAgICAgICAgICAgIC5sZW5ndGggPT09XG4gICAgICAgIHNoaXBMZW5ndGggKyAyXG4gICAgLy8gYWRkaW5nIHNoaXBMZW5ndGggcGx1cyB0d28gYmVjYXVzZSBmb3IgZXZlcnkgaW5jcmVhc2UgaW4gdGhlIHNpemUgb2Ygc2hpcCwgdGhlIHpvbmVzIGNvdmVyZWQgaW5jcmVhc2UgYnkgMiB1bml0c1xuXG4gICAgY29uc3QgY2xlYXJCb2FyZCAgPSAoKSA9PiB7XG4gICAgICAgIGdhbWVCb2FyZCA9IGluaXRpYWxpemVCb2FyZCgpXG4gICAgfVxuXG4gICAgY29uc3QgZ2V0Qm9hcmQgPSgpID0+IHtcbiAgICAgICAgcmV0dXJuIGdhbWVCb2FyZFxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIGNsZWFyQm9hcmQsXG4gICAgICAgIGNoZWNrSWZMb2NhdGlvbklzQVNoaXBPck9mZkxpbWl0cyxcbiAgICAgICAgY2hlY2tJZk9mZkxpbWl0Wm9uZVdhc0NvcnJlY3RseUltcGxlbWVudGVkLFxuICAgICAgICBnZXRMb2NhdGlvbixcbiAgICAgICAgcmVjZWl2ZUF0dGFjayxcbiAgICAgICAgY2hlY2tJZkFsbFNoaXBzSGF2ZVN1bmssXG4gICAgICAgIHBsYWNlU2hpcCxcbiAgICAgICAgcmFuZG9tbHlQbGFjZVNoaXBzLFxuICAgICAgICBtYWtlUmFuZG9tQ29vcmRpbmF0ZXMsXG4gICAgfVxufVxubW9kdWxlLmV4cG9ydHMgPSBjcmVhdGVHYW1lQm9hcmQiLCJjb25zdCBjcmVhdGVQbGF5ZXIgPSAobmFtZSA9ICdwbGF5ZXInKSA9PiB7XG4gICAgY29uc3QgZ2V0TmFtZSA9ICgpID0+IG5hbWVcblxuICAgIGNvbnN0IGF0dGFjayA9IChjb2x1bW4sIHJvdywgeyBnZXRMb2NhdGlvbiwgcmVjZWl2ZUF0dGFjayB9KSA9PiB7XG4gICAgICAgIGNvbnN0IGxvY2F0aW9uID0gZ2V0TG9jYXRpb24oY29sdW1uLCByb3cpXG4gICAgICAgIGlmIChsb2NhdGlvbi5oYXNCZWVuSGl0ID09PSBmYWxzZSB8fCAobG9jYXRpb24uaXNTaGlwICYmIGxvY2F0aW9uLmdldFN0YXR1cygpLmluY2x1ZGVzKCd1bmhpdCcpID09PSBmYWxzZSkpIHtcbiAgICAgICAgICAgIHJlY2VpdmVBdHRhY2soY29sdW1uLCByb3cpXG4gICAgICAgICAgICBpZihsb2NhdGlvbi5oaXQpe1xuXG4gICAgICAgICAgICAgICAgbG9jYXRpb24uaGl0KGxvY2F0aW9uLnBvc2l0aW9uKVxuICAgICAgICAgICAgICAgIHJldHVybiBcIllvdSBoaXQgYSBzaGlwIVwiXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gXCJJdCdzIGEgaGl0IVwiXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gJ1lvdSBoYXZlIGFscmVhZHkgaGl0IHRoaXMgc3BvdCEnXG4gICAgfVxuXG4gICAgICBsZXQgcmFuZG9tUG9zID0gKCkgPT4ge1xuICAgIGxldCBwb3MxID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApO1xuICAgIGxldCBwb3MyID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApO1xuICAgIHJldHVybiBbcG9zMSwgcG9zMl07XG4gIH07XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBnZXROYW1lLFxuICAgICAgICBhdHRhY2ssXG4gICAgICAgIHJhbmRvbVBvcyxcbiAgICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY3JlYXRlUGxheWVyXG4iLCJjb25zdCBjcmVhdGVTaGlwID0gKGxlbmd0aCwgbmFtZSA9ICdzaGlwJykgPT4ge1xuXG4gICAgbGV0IGRvbVRhcmdldHMgPSBbXVxuXG4gICAgY29uc3Qgc3RhdHVzID0gQXJyYXkobGVuZ3RoKS5maWxsKCd1bmhpdCcpXG5cbiAgICBjb25zdCBnZXRMZW5ndGggPSAoKSA9PiBzdGF0dXMubGVuZ3RoXG5cbiAgICBjb25zdCBnZXRTdGF0dXMgPSAoKSA9PiBzdGF0dXNcblxuICAgIGNvbnN0IGhpdCA9IChwb3NpdGlvbikgPT4ge1xuICAgICAgICBpZiAocG9zaXRpb24gPCBsZW5ndGgpIHtcbiAgICAgICAgICAgIHN0YXR1c1twb3NpdGlvbl0gPSAnaGl0J1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgZ2V0TmFtZSA9ICgpID0+ICBuYW1lXG5cbiAgICBjb25zdCBpc1N1bmsgPSAoKSA9PiBzdGF0dXMuZXZlcnkoKHBvc2l0aW9uKSA9PiBwb3NpdGlvbiA9PT0gJ2hpdCcpXG5cbiAgICByZXR1cm4ge1xuICAgICAgICBnZXROYW1lLFxuICAgICAgICBnZXRMZW5ndGgsXG4gICAgICAgIGlzU3VuayxcbiAgICAgICAgaGl0LFxuICAgICAgICBnZXRTdGF0dXMsXG4gICAgICAgIGRvbVRhcmdldHMsXG4gICAgICAgIGhhc0JlZW5IaXQ6IGZhbHNlLFxuICAgICAgICBvZmZMaW1pdHM6IHRydWUsXG4gICAgICAgIGlzU2hpcDogdHJ1ZSxcbiAgICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY3JlYXRlU2hpcFxuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSAobW9kdWxlKSA9PiB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdCgpID0+IChtb2R1bGVbJ2RlZmF1bHQnXSkgOlxuXHRcdCgpID0+IChtb2R1bGUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8qIGVzbGludC1kaXNhYmxlIG5vLWVsc2UtcmV0dXJuICovXG5pbXBvcnQge3JlbmRlckF0dGFja1AyIH0gZnJvbSAnLi9kb20nXG5cbmxldCB3YXNIaXQgPSBmYWxzZTtcbmxldCBzdGF0dXMgPSBmYWxzZTtcbmxldCBsYXN0SGl0UG9zID0gW107XG5sZXQgZmlyc3RIaXRQb3MgPSBbXTtcbmxldCBzZWNvbmRIaXRQb3MgPSBbXTtcbmxldCBzdXJyb3VuZGluZ1BvcyA9IFtdO1xubGV0IGF0dGFja0RpcmVjdGlvbjtcblxuZnVuY3Rpb24gc2V0V2FzSGl0KHZhbHVlLCBzdGF0LCBwb3MxLCBwb3MyKSB7XG4gIHdhc0hpdCA9IHZhbHVlO1xuICBpZiAoc3RhdCAhPT0gdW5kZWZpbmVkKSBzdGF0dXMgPSBzdGF0O1xuICBpZiAocG9zMSAhPT0gdW5kZWZpbmVkKSBsYXN0SGl0UG9zID0gW3BvczEsIHBvczJdO1xuICBpZiAoZmlyc3RIaXRQb3MubGVuZ3RoID09IDAgJiYgcG9zMSAhPT0gdW5kZWZpbmVkKSBmaXJzdEhpdFBvcyA9IFtwb3MxLCBwb3MyXTtcbiAgZWxzZSBpZiAoXG4gICAgZmlyc3RIaXRQb3MubGVuZ3RoICE9PSAwICYmXG4gICAgc2Vjb25kSGl0UG9zLmxlbmd0aCA9PSAwICYmXG4gICAgcG9zMSAhPT0gdW5kZWZpbmVkXG4gIClcbiAgICBzZWNvbmRIaXRQb3MgPSBbcG9zMSwgcG9zMl07XG59XG5mdW5jdGlvbiBnZXRXYXNIaXQoKSB7XG4gIHJldHVybiBbd2FzSGl0LCBsYXN0SGl0UG9zLCBzdGF0dXNdO1xufVxuXG5mdW5jdGlvbiByZWdpc3RlclN1cnJvdW5kaW5nUG9zKHBvczEsIHBvczIpIHtcbiAgc3Vycm91bmRpbmdQb3MgPSBbXTtcbiAgaWYgKHBvczIgIT09IDApIHN1cnJvdW5kaW5nUG9zLnB1c2goW3BvczEsIHBvczIgLSAxXSk7XG4gIGlmIChwb3MyICE9PSA5KSBzdXJyb3VuZGluZ1Bvcy5wdXNoKFtwb3MxLCBwb3MyICsgMV0pO1xuICBpZiAocG9zMSAhPT0gMCkgc3Vycm91bmRpbmdQb3MucHVzaChbcG9zMSAtIDEsIHBvczJdKTtcbiAgaWYgKHBvczEgIT09IDkpIHN1cnJvdW5kaW5nUG9zLnB1c2goW3BvczEgKyAxLCBwb3MyXSk7XG4gIHJldHVybiBzdXJyb3VuZGluZ1Bvcztcbn1cblxuZnVuY3Rpb24gYWlQbGF5KHJlcGVhdCwgcDEsIHAyLCBpc1N1bmssIHBsYXllckJvYXJkLCBlbmVteUJvYXJkKSB7XG4gIGxldCBwb3M7IGxldCBwb3MxOyBsZXQgcG9zMjtcbiAgaWYgKGlzU3VuayA9PT0gdHJ1ZSkge1xuICAgIGxhc3RIaXRQb3MgPSBbXTtcbiAgICBmaXJzdEhpdFBvcyA9IFtdO1xuICAgIHNlY29uZEhpdFBvcyA9IFtdO1xuICAgIHN1cnJvdW5kaW5nUG9zID0gW107XG4gICAgd2FzSGl0ID0gZmFsc2U7XG4gICAgc3RhdHVzID0gZmFsc2U7XG4gICAgYXR0YWNrRGlyZWN0aW9uID0gXCJcIjtcbiAgfVxuICBpZiAoIXN0YXR1cyAmJiAhd2FzSGl0KSB7XG4gICAgcG9zID0gcDEucmFuZG9tUG9zKCk7XG5cbiAgICByZXR1cm4gcmVuZGVyQXR0YWNrUDIocDEsIHAyLCBwb3NbMF0sIHBvc1sxXSwgcGxheWVyQm9hcmQsIGVuZW15Qm9hcmQpO1xuICB9IGVsc2UgaWYgKHNlY29uZEhpdFBvcy5sZW5ndGggIT09IDAgJiYgd2FzSGl0ICYmICFyZXBlYXQpIHtcbiAgICBsZXQgbmV3UG9zO1xuICAgIGlmIChmaXJzdEhpdFBvc1swXSA9PSBzZWNvbmRIaXRQb3NbMF0gLSAxKSBuZXdQb3MgPSBhdHRhY2tUb3dhcmRzKFwiZG93blwiKTtcbiAgICBpZiAoZmlyc3RIaXRQb3NbMF0gPT0gc2Vjb25kSGl0UG9zWzBdICsgMSkgbmV3UG9zID0gYXR0YWNrVG93YXJkcyhcInVwXCIpO1xuICAgIGlmIChmaXJzdEhpdFBvc1sxXSA9PSBzZWNvbmRIaXRQb3NbMV0gLSAxKSBuZXdQb3MgPSBhdHRhY2tUb3dhcmRzKFwicmlnaHRcIik7XG4gICAgaWYgKGZpcnN0SGl0UG9zWzFdID09IHNlY29uZEhpdFBvc1sxXSArIDEpIG5ld1BvcyA9IGF0dGFja1Rvd2FyZHMoXCJsZWZ0XCIpO1xuICAgIGlmIChuZXdQb3NbMF0gPj0gMCAmJiBuZXdQb3NbMF0gPD0gOSAmJiBuZXdQb3NbMV0gPj0gMCAmJiBuZXdQb3NbMV0gPD0gOSlcbiAgICAgIHJldHVybiByZW5kZXJBdHRhY2tQMihwMSwgcDIsIG5ld1Bvc1swXSwgbmV3UG9zWzFdLCBwbGF5ZXJCb2FyZCwgZW5lbXlCb2FyZCk7XG4gIH0gZWxzZSBpZiAoc2Vjb25kSGl0UG9zLmxlbmd0aCAhPT0gMCAmJiBzdGF0dXMgJiYgIXdhc0hpdCkge1xuICAgIGxhc3RIaXRQb3MgPSBmaXJzdEhpdFBvcztcbiAgICBzZWNvbmRIaXRQb3MgPSBbXTtcbiAgICBsZXQgbmV3UG9zO1xuICAgIGlmIChhdHRhY2tEaXJlY3Rpb24gPT09IFwidXBcIikgbmV3UG9zID0gYXR0YWNrVG93YXJkcyhcImRvd25cIik7XG4gICAgaWYgKGF0dGFja0RpcmVjdGlvbiA9PT0gXCJkb3duXCIpIG5ld1BvcyA9IGF0dGFja1Rvd2FyZHMoXCJ1cFwiKTtcbiAgICBpZiAoYXR0YWNrRGlyZWN0aW9uID09PSBcInJpZ2h0XCIpIG5ld1BvcyA9IGF0dGFja1Rvd2FyZHMoXCJsZWZ0XCIpO1xuICAgIGlmIChhdHRhY2tEaXJlY3Rpb24gPT09IFwibGVmdFwiKSBuZXdQb3MgPSBhdHRhY2tUb3dhcmRzKFwicmlnaHRcIik7XG4gICAgaWYgKG5ld1Bvc1swXSA+PSAwICYmIG5ld1Bvc1swXSA8PSA5ICYmIG5ld1Bvc1sxXSA+PSAwICYmIG5ld1Bvc1sxXSA8PSA5KVxuICAgICAgcmV0dXJuIHJlbmRlckF0dGFja1AyKHAxLCBwMiwgbmV3UG9zWzBdLCBuZXdQb3NbMV0sIHBsYXllckJvYXJkLCBlbmVteUJvYXJkKTtcbiAgfSBlbHNlIGlmIChzdGF0dXMpIHtcbiAgICBpZiAoc3Vycm91bmRpbmdQb3MubGVuZ3RoID09IDApXG4gICAgICByZWdpc3RlclN1cnJvdW5kaW5nUG9zKGxhc3RIaXRQb3NbMF0sIGxhc3RIaXRQb3NbMV0pO1xuICAgIGlmIChzdXJyb3VuZGluZ1Bvcy5sZW5ndGggPT0gMCAmJiBzdGF0dXMgPT0gdHJ1ZSlcbiAgICAgIHJlZ2lzdGVyU3Vycm91bmRpbmdQb3MoZmlyc3RIaXRQb3NbMF0sIGZpcnN0SGl0UG9zWzFdKTtcbiAgICBjb25zdCBuZXdQb3MgPSBzdXJyb3VuZGluZ1Bvcy5wb3AoKTtcbiAgICByZXR1cm4gcmVuZGVyQXR0YWNrUDIocDEsIHAyLCBuZXdQb3NbMF0sIG5ld1Bvc1sxXSwgcGxheWVyQm9hcmQsIGVuZW15Qm9hcmQpO1xuICB9XG59XG4vLyBnZXQgcG9zIG9mIGF0dGFjayBiYXNlZCBvbiBkaXJlY3Rpb25cbmZ1bmN0aW9uIGF0dGFja1Rvd2FyZHMoZGlyKSB7XG4gIGlmIChkaXIgPT09IFwibGVmdFwiKSB7XG4gICAgYXR0YWNrRGlyZWN0aW9uID0gXCJsZWZ0XCI7XG4gICAgcmV0dXJuIFtsYXN0SGl0UG9zWzBdLCBsYXN0SGl0UG9zWzFdIC0gMV07XG4gIH1cbiAgaWYgKGRpciA9PT0gXCJyaWdodFwiKSB7XG4gICAgYXR0YWNrRGlyZWN0aW9uID0gXCJyaWdodFwiO1xuICAgIHJldHVybiBbbGFzdEhpdFBvc1swXSwgbGFzdEhpdFBvc1sxXSArIDFdO1xuICB9XG4gIGlmIChkaXIgPT09IFwiZG93blwiKSB7XG4gICAgYXR0YWNrRGlyZWN0aW9uID0gXCJkb3duXCI7XG4gICAgcmV0dXJuIFtsYXN0SGl0UG9zWzBdICsgMSwgbGFzdEhpdFBvc1sxXV07XG4gIH1cbiAgaWYgKGRpciA9PT0gXCJ1cFwiKSB7XG4gICAgYXR0YWNrRGlyZWN0aW9uID0gXCJ1cFwiO1xuICAgIHJldHVybiBbbGFzdEhpdFBvc1swXSAtIDEsIGxhc3RIaXRQb3NbMV1dO1xuICB9XG59XG5cbmV4cG9ydCB7IGFpUGxheSwgZ2V0V2FzSGl0LCBzZXRXYXNIaXQsIGxhc3RIaXRQb3MsIHN1cnJvdW5kaW5nUG9zIH07XG5cbiIsImltcG9ydCBjcmVhdGVHYW1lQm9hcmQgZnJvbSBcIi4vZ2FtZWJvYXJkL2dhbWVib2FyZFwiXG5pbXBvcnQgY3JlYXRlU2hpcCBmcm9tIFwiLi9zaGlwL3NoaXBcIlxuaW1wb3J0IHsgYWlQbGF5LCBnZXRXYXNIaXQsIHNldFdhc0hpdCwgc3Vycm91bmRpbmdQb3MgfSBmcm9tIFwiLi9ib3RcIjtcblxuY29uc3QgcmVuZGVyQXR0YWNrcyA9IChwbGF5ZXIsIGNvbHVtbiwgcm93LCBlbmVteUJvYXJkKSA9PiB7XG4gICAgY29uc3QgY2VsbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgIGAuJHtwbGF5ZXJ9LWJvYXJkID4gLmNlbGxbY29sdW1uPScke2NvbHVtbn0nXVtyb3c9JyR7cm93fSddYFxuICAgIClcblxuICAgIGlmKGVuZW15Qm9hcmQuZ2V0TG9jYXRpb24oY29sdW1uLCByb3cpPy5pc1NoaXApe1xuXG4gICAgICAgIGVuZW15Qm9hcmQuZ2V0TG9jYXRpb24oY29sdW1uLCByb3cpLmRvbVRhcmdldHMucHVzaChjZWxsKVxuICAgICAgICBpZihlbmVteUJvYXJkLmdldExvY2F0aW9uKGNvbHVtbiwgcm93KS5pc1N1bmsoKSl7XG5cbiAgICAgICAgICAgIGVuZW15Qm9hcmQuZ2V0TG9jYXRpb24oY29sdW1uLCByb3cpLmRvbVRhcmdldHMuZm9yRWFjaCgoZSkgPT4gZS5jbGFzc0xpc3QuYWRkKCdzdW5rJykpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBsb2NhdGlvbiA9IGVuZW15Qm9hcmQuZ2V0TG9jYXRpb24oY29sdW1uLCByb3cpXG4gICAgaWYgKGxvY2F0aW9uLmlzU2hpcCkge1xuICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoJ2hpdCcpXG4gICAgfSBlbHNlIHtcbiAgICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKCdtaXNzJylcbiAgICB9XG5cbn1cblxuY29uc3QgaGFuZGxlQXR0YWNrID0gKGNvbHVtbiwgcm93LCBlbmVteUJvYXJkLCBwbGF5ZXIpID0+XG4gICAgcGxheWVyLmF0dGFjayhjb2x1bW4sIHJvdywgZW5lbXlCb2FyZClcblxuY29uc3QgYXR0YWNrRW5lbXlDZWxsID0gYXN5bmMgKGNvbHVtbiwgcm93LCBlbmVteUJvYXJkLCBwbGF5ZXJCb2FyZCwgcGxheWVyLCBlbmVteSkgPT4ge1xuXG5cbiAgICBoYW5kbGVBdHRhY2soY29sdW1uLCByb3csIGVuZW15Qm9hcmQsIHBsYXllcilcbiAgICByZW5kZXJBdHRhY2tzKCdlbmVteScsIGNvbHVtbiwgcm93LCBlbmVteUJvYXJkKVxuICAgIGF3YWl0IGRlbGF5KDcwMClcbiAgICByZXR1cm4gZW5lbXlCb2FyZC5jaGVja0lmQWxsU2hpcHNIYXZlU3VuaygpID8gY2hlY2tJZkdhbWVPdmVyKCkgOiBhaVBsYXkoZmFsc2UsIHBsYXllciwgZW5lbXksIHVuZGVmaW5lZCwgcGxheWVyQm9hcmQsIGVuZW15Qm9hcmQpXG59XG5cbmNvbnN0IGlzU3BhY2VBcm91bmRIaXQgPSAoY29sdW1uLCByb3csIHBsYXllckJvYXJkKSA9PiB7XG5cbiAgICBjb25zdCBuZXh0Q29sdW1uID0gcGxheWVyQm9hcmQuZ2V0TG9jYXRpb24oY29sdW1uICsgMSwgcm93KVxuICAgIGNvbnN0IHByZXZpb3VzQ29sdW1uID0gcGxheWVyQm9hcmQuZ2V0TG9jYXRpb24oY29sdW1uIC0gMSwgcm93KVxuICAgIGNvbnN0IG5leHRSb3cgPSBwbGF5ZXJCb2FyZC5nZXRMb2NhdGlvbihjb2x1bW4sIHJvdyArIDEpXG4gICAgY29uc3QgcHJldmlvdXNSb3cgPSBwbGF5ZXJCb2FyZC5nZXRMb2NhdGlvbihjb2x1bW4sIHJvdyAtIDEpXG5cbiAgICBjb25zdCBzcGFjZXNIaXQgPSBbXVxuXG4gICAgaWYobmV4dENvbHVtbiAmJiAhbmV4dENvbHVtbi5oYXNCZWVuSGl0KXtcbiAgICAgICAgc3BhY2VzSGl0LnB1c2gobmV4dENvbHVtbilcbiAgICB9XG4gICAgaWYocHJldmlvdXNDb2x1bW4gJiYgIXByZXZpb3VzQ29sdW1uLmhhc0JlZW5IaXQpe1xuICAgICAgICBzcGFjZXNIaXQucHVzaChwcmV2aW91c0NvbHVtbilcbiAgICB9XG4gICAgaWYobmV4dFJvdyAmJiAhbmV4dFJvdy5oYXNCZWVuSGl0KXtcbiAgICAgICAgc3BhY2VzSGl0LnB1c2gobmV4dFJvdylcbiAgICB9XG4gICAgaWYocHJldmlvdXNSb3cgJiYgIXByZXZpb3VzUm93Lmhhc0JlZW5IaXQpe1xuICAgICAgICBzcGFjZXNIaXQucHVzaChwcmV2aW91c1JvdylcbiAgICB9XG5cbiAgICByZXR1cm4gc3BhY2VzSGl0XG5cbn1cblxuY29uc3QgcmFuZG9tRGlyZWN0aW9uQXR0YWNrID0gKGNvbHVtbiwgcm93LCBwbGF5ZXJCb2FyZCkgPT4ge1xuXG4gICAgY29uc3Qgc3BhY2VzSGl0ID0gaXNTcGFjZUFyb3VuZEhpdChjb2x1bW4sIHJvdywgcGxheWVyQm9hcmQpXG5cbiAgICBjb25zdCByYW5kb21JbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHNwYWNlc0hpdC5sZW5ndGgpXG5cbiAgICBpZighc3BhY2VzSGl0W3JhbmRvbUluZGV4XSkgcmV0dXJuIHJhbmRvbURpcmVjdGlvbkF0dGFjayhjb2x1bW4sIHJvdyAsIHBsYXllckJvYXJkKVxuXG4gICAgcmV0dXJuIHNwYWNlc0hpdFtyYW5kb21JbmRleF1cbn1cblxuY29uc3QgaXNSYW5kb21Db2x1bW5HcmVhdGVyVGhhbkN1cnJlbnRDb2x1bW4gPSAoY29sdW1uLCByYW5kb21Db2x1bW4pID0+IFxuICAgIHJhbmRvbUNvbHVtbiA+IGNvbHVtblxuXG5jb25zdCBpc1JhbmRvbVJvd0dyZWF0ZXJUaGFuQ3VycmVudENvbHVtbiA9IChyb3csIHJhbmRvbVJvdykgPT4gXG4gICAgcmFuZG9tUm93ID4gcm93XG5cbmNvbnN0IGxpc3RPZlJhbmRvbUNvb3JkaW5hdGVzID0gKGNvbHVtbiwgcm93LCBwbGF5ZXJCb2FyZCkgPT4ge1xuXG4gICAgICAgIGNvbnN0IGxvY2F0aW9uUHJvdG90eXBlID0ge1xuICAgICAgICAgICAgbG9jYXRpb24oKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBsYXllckJvYXJkLmdldExvY2F0aW9uKHRoaXMuY29sdW1uLCB0aGlzLnJvdylcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHRvcCA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShsb2NhdGlvblByb3RvdHlwZSksIHtcbiAgICAgICAgICAgIGNvbHVtbixcbiAgICAgICAgICAgIHJvdzogcm93IC0gMSxcbiAgICAgICAgfSlcbiAgICAgICAgY29uc3QgYm90dG9tID0gT2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKGxvY2F0aW9uUHJvdG90eXBlKSwge1xuICAgICAgICAgICAgY29sdW1uLFxuICAgICAgICAgICAgcm93OiByb3cgKyAxLFxuICAgICAgICB9KVxuICAgICAgICBjb25zdCByaWdodCA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShsb2NhdGlvblByb3RvdHlwZSksIHtcbiAgICAgICAgICAgIGNvbHVtbjogY29sdW1uICsgMSxcbiAgICAgICAgICAgIHJvdyxcbiAgICAgICAgfSlcbiAgICAgICAgY29uc3QgbGVmdCA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShsb2NhdGlvblByb3RvdHlwZSksIHtcbiAgICAgICAgICAgIGNvbHVtbjogY29sdW1uIC0gMSxcbiAgICAgICAgICAgIHJvdyxcbiAgICAgICAgfSlcbiAgICAgICAgY29uc3QgZGlyZWN0aW9ucyA9IFtdXG5cbiAgICAgICAgZGlyZWN0aW9ucy5wdXNoKHRvcClcbiAgICAgICAgZGlyZWN0aW9ucy5wdXNoKGJvdHRvbSlcbiAgICAgICAgZGlyZWN0aW9ucy5wdXNoKHJpZ2h0KVxuICAgICAgICBkaXJlY3Rpb25zLnB1c2gobGVmdClcblxuICAgICAgICByZXR1cm4gZGlyZWN0aW9uc1xufVxuXG4vLyByZW5kZXJzIGF0dGFjayBmb3IgcDIgKEFJKVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlbmRlckF0dGFja1AyKHAxLCBwMiwgcG9zMSwgcG9zMiwgcGxheWVyQm9hcmQsIGVuZW15Qm9hcmQpIHtcbiAgbGV0IGlzU3VuayA9IGZhbHNlO1xuICBjb25zdCBlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgYC5wbGF5ZXItYm9hcmQgPiAuY2VsbFtjb2x1bW49JyR7cG9zMX0nXVtyb3c9JyR7cG9zMn0nXWBcbiAgICApXG5cbiAgY29uc3QgYXR0YWNrID0gcDIuYXR0YWNrKHBvczEsIHBvczIsIHBsYXllckJvYXJkKTtcblxuICAgIGNvbnNvbGUubG9nKHBsYXllckJvYXJkLmdldExvY2F0aW9uKHBvczEsIHBvczIpKVxuICBpZiAoYXR0YWNrID09PSBcIllvdSBoYXZlIGFscmVhZHkgaGl0IHRoaXMgc3BvdCFcIikge1xuICAgIGNvbnN0IHJlcGVhdCA9IHRydWU7XG4gICAgYWlQbGF5KHJlcGVhdCwgcDEsIHAyLCB1bmRlZmluZWQsIHBsYXllckJvYXJkLCBlbmVteUJvYXJkKTtcbiAgfVxuICBpZiAoYXR0YWNrID09PSBcIkl0J3MgYSBoaXQhXCIpIHtcbiAgICBzZXRXYXNIaXQoZmFsc2UpO1xuICAgIGUuY2xhc3NMaXN0LmFkZChcIm1pc3NcIik7XG4gIH1cbiAgaWYgKGF0dGFjayA9PT0gXCJZb3UgaGl0IGEgc2hpcCFcIikge1xuICAgIHNldFdhc0hpdCh0cnVlLCB0cnVlLCBwb3MxLCBwb3MyKTtcbiAgICBlLmNsYXNzTGlzdC5hZGQoXCJoaXRcIik7XG4gICAgcGxheWVyQm9hcmQuZ2V0TG9jYXRpb24ocG9zMSwgcG9zMikuZG9tVGFyZ2V0cy5wdXNoKGUpXG4gICAgLy8gaWYgc2hpcCBpcyBzdW5rLCBhZGQgXCJzdW5rXCIgY2xhc3NcbiAgICBpZiAocGxheWVyQm9hcmQuZ2V0TG9jYXRpb24ocG9zMSwgcG9zMikuaXNTdW5rKCkpIHtcbiAgICAgIHBsYXllckJvYXJkLmdldExvY2F0aW9uKHBvczEsIHBvczIpLmRvbVRhcmdldHMuZm9yRWFjaCgoZSkgPT5cbiAgICAgICAgZS5jbGFzc0xpc3QuYWRkKFwic3Vua1wiKVxuICAgICAgKTtcbiAgICAgIGlzU3VuayA9IHRydWU7XG4gICAgICBpZiAocGxheWVyQm9hcmQuY2hlY2tJZkFsbFNoaXBzSGF2ZVN1bmsoKSA9PT0gdHJ1ZSkgcmV0dXJuIGNoZWNrSWZHYW1lT3ZlcihwbGF5ZXJCb2FyZCwgZW5lbXlCb2FyZCk7XG4gICAgfVxuICAgIGF3YWl0IGRlbGF5KDEwMDApXG4gICAgcmV0dXJuIGFpUGxheShmYWxzZSwgcDEsIHAyLCBpc1N1bmssIHBsYXllckJvYXJkLCBlbmVteUJvYXJkKTtcbiAgfVxuXG4gIC8vIHAxLmlzVHVybihwMik7IC8vIGdpdmVzIHR1cm4gdG8gUDFcbn1cbi8vIGh0dHBzOi8vanNtYW5pZmVzdC5jb20vdGhlLXB1Ymxpc2gtc3Vic2NyaWJlLXBhdHRlcm4taW4tamF2YXNjcmlwdC9cblxuZXhwb3J0IGNvbnN0IHB1YlN1YiA9ICgpID0+IHtcbiAgICBjb25zdCBzdWJzY3JpYmVycyA9IHt9XG5cbiAgICBmdW5jdGlvbiBwdWJsaXNoKGV2ZW50TmFtZSwgZGF0YSkge1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoc3Vic2NyaWJlcnNbZXZlbnROYW1lXSkpIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIHN1YnNjcmliZXJzW2V2ZW50TmFtZV0uZm9yRWFjaCgoY2FsbGJhY2spID0+IHtcbiAgICAgICAgICAgIGNhbGxiYWNrKGRhdGEpXG4gICAgICAgIH0pXG4gICAgfVxuICAgIGZ1bmN0aW9uIHN1YnNjcmliZShldmVudE5hbWUsIGNhbGxiYWNrKSB7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShzdWJzY3JpYmVbZXZlbnROYW1lXSkpIHtcbiAgICAgICAgICAgIHN1YnNjcmliZXJzW2V2ZW50TmFtZV0gPSBbXVxuICAgICAgICB9XG4gICAgICAgIHN1YnNjcmliZXJzW2V2ZW50TmFtZV0ucHVzaChjYWxsYmFjaylcbiAgICAgICAgY29uc3QgaW5kZXggPSBzdWJzY3JpYmVyc1tldmVudE5hbWVdLmxlbmd0aCAtIDFcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdW5zdWJzY3JpYmUoKSB7XG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlcnNbZXZlbnROYW1lXS5zcGxpY2UoaW5kZXgsIDEpXG4gICAgICAgICAgICB9LFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgcHVibGlzaCxcbiAgICAgICAgc3Vic2NyaWJlLFxuICAgIH1cbn1cblxuLy8gY3JlYXRlcyBhIGRlbGF5IHRvIGJlIHVzZWQgaW4gYW4gYXN5bmMgZnVuY3Rpb25cbmZ1bmN0aW9uIGRlbGF5KGRlbGF5SW5Ncykge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHJlc29sdmUoMik7XG4gICAgfSwgZGVsYXlJbk1zKTtcbiAgfSk7XG59XG5cbmV4cG9ydCBjb25zdCByZW5kZXJQbGF5ZXJTaGlwcyA9ICh7IGdldExvY2F0aW9uIH0pID0+IHtcbiAgICBjb25zdCBwbGF5ZXJCb2FyZEFyZWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdkaXYucGxheWVyLWJvYXJkJylcblxuICAgIGZvciAobGV0IGNvbHVtbiA9IDA7IGNvbHVtbiA8IDEwOyBjb2x1bW4gKz0gMSkge1xuICAgICAgICBmb3IgKGxldCByb3cgPSAwOyByb3cgPCAxMDsgcm93ICs9IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IGNlbGwgPSBwbGF5ZXJCb2FyZEFyZWEucXVlcnlTZWxlY3RvcihcbiAgICAgICAgICAgICAgICBgLmNlbGw6bnRoLWNoaWxkKCR7cm93ICogMTAgKyBjb2x1bW4gKyAxfSlgXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBjZWxsLnNldEF0dHJpYnV0ZSgnY29sdW1uJywgY29sdW1uKVxuICAgICAgICAgICAgY2VsbC5zZXRBdHRyaWJ1dGUoJ3JvdycsIHJvdylcbiAgICAgICAgICAgIGNvbnN0IGxvY2F0aW9uID0gZ2V0TG9jYXRpb24oY29sdW1uLCByb3cpXG4gICAgICAgICAgICBpZiAobG9jYXRpb24uaXNTaGlwKSB7XG4gICAgICAgICAgICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKCdzaGlwJylcbiAgICAgICAgICAgICAgICBjZWxsLnNldEF0dHJpYnV0ZSgnc2hpcC1uYW1lJywgbG9jYXRpb24uZ2V0TmFtZSgpKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG5jb25zdCBjaGVja0lmR2FtZU92ZXIgPSAocGxheWVyQm9hcmQsIGVuZW15Qm9hcmQpID0+IHtcbiAgICBpZiAocGxheWVyQm9hcmQuY2hlY2tJZkFsbFNoaXBzSGF2ZVN1bmsoKSkge1xuICAgICAgICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbCcpXG4gICAgICAgIGNvbnN0IG1vZGFsV2lubmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLWNvbnRlbnQgPiBwJylcbiAgICAgICAgY29uc3QgcGxheUFnYWluQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgICAgICcubW9kYWwtY29udGVudCA+IGJ1dHRvbidcbiAgICAgICAgKVxuXG4gICAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snXG4gICAgICAgIHBsYXlBZ2FpbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpXG4gICAgICAgIH0pXG5cbiAgICAgICAgbW9kYWxXaW5uZXIudGV4dENvbnRlbnQgPSAnWW91IGxvc2UhJ1xuICAgIH1cbiAgICBpZiAoZW5lbXlCb2FyZC5jaGVja0lmQWxsU2hpcHNIYXZlU3VuaygpKSB7XG4gICAgICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsJylcbiAgICAgICAgY29uc3QgbW9kYWxXaW5uZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwtY29udGVudCA+IHAnKVxuICAgICAgICBjb25zdCBwbGF5QWdhaW5CdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAgICAgJy5tb2RhbC1jb250ZW50ID4gYnV0dG9uJ1xuICAgICAgICApXG5cbiAgICAgICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9ICdibG9jaydcbiAgICAgICAgbW9kYWxXaW5uZXIudGV4dENvbnRlbnQgPSAnWW91IHdpbiEnXG4gICAgICAgIHBsYXlBZ2FpbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpXG4gICAgICAgIH0pXG4gICAgfVxufVxuXG5leHBvcnQgY29uc3QgYWRkTGlzdGVuZXJzVG9FbmVteUJvYXJkID0gKFxuICAgIHBsYXllckJvYXJkLFxuICAgIGVuZW15Qm9hcmQsXG4gICAgcGxheWVyLFxuICAgIGVuZW15LFxuICAgIHBzXG4pID0+IHtcbiAgICBjb25zdCBlbmVteUJvYXJkQXJlYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5lbmVteS1ib2FyZCcpXG5cbiAgICBmb3IgKGxldCBjb2x1bW4gPSAwOyBjb2x1bW4gPCAxMDsgY29sdW1uICs9IDEpIHtcbiAgICAgICAgZm9yIChsZXQgcm93ID0gMDsgcm93IDwgMTA7IHJvdyArPSAxKSB7XG4gICAgICAgICAgICAvLyBDcmVkaXRpbmcgZm9ybXVsYSB0byBjYWxjdWxhdGUgbnRoLWNoaWxkIHVzaW5nIG5lc3RlZCBsb29wOiBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy84ODcyNjYyL21hdGgtdG8tZGV0ZXJtaW5lLWl0ZW0taW5kZXgtYmFzZWQtb24tY29sLXJvdy1zZWxlY3Rpb24taW4tZ3JpZFxuICAgICAgICAgICAgY29uc3QgY2VsbCA9IGVuZW15Qm9hcmRBcmVhLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgICAgICAgICAgYC5jZWxsOm50aC1jaGlsZCgke3JvdyAqIDEwICsgY29sdW1uICsgMX0pYFxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgY2VsbC5zZXRBdHRyaWJ1dGUoJ2NvbHVtbicsIGNvbHVtbilcbiAgICAgICAgICAgIGNlbGwuc2V0QXR0cmlidXRlKCdyb3cnLCByb3cpXG5cbiAgICAgICAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICAgICAgICAnY2xpY2snLFxuICAgICAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcHMucHVibGlzaCgnY2xpY2snLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uLFxuICAgICAgICAgICAgICAgICAgICAgICAgcm93LFxuICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyQm9hcmQsXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmVteUJvYXJkLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgZW5lbXksXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7IG9uY2U6IHRydWUgfVxuICAgICAgICAgICAgKVxuICAgICAgICB9XG4gICAgfVxufVxuXG5jb25zdCBjbGVhckJvYXJkRE9NID0gKCkgPT4ge1xuICAgIGNvbnN0IGNlbGxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBsYXllci1ib2FyZCA+IC5jZWxsJylcblxuICAgIGNlbGxzLmZvckVhY2goY2VsbCA9PiB7XG4gICAgICAgIGNlbGwuY2xhc3NMaXN0LnJlbW92ZSgnc2hpcCcpXG4gICAgICAgIGNlbGwuY2xhc3NMaXN0LnJlbW92ZSgnaGl0JylcbiAgICAgICAgY2VsbC5jbGFzc0xpc3QucmVtb3ZlKCdtaXNzJylcbiAgICB9KVxuXG5cblxufVxuXG5leHBvcnQgY29uc3QgcmFuZG9taXplTGlzdGVuZXIgPSAoZ2FtZUJvYXJkKSA9PiB7XG5cbiAgICBnYW1lQm9hcmQuY2xlYXJCb2FyZCgpXG4gICAgY2xlYXJCb2FyZERPTSgpXG5cbiAgICBjb25zdCByYW5kb21Qb3NzaWJpbGl0eSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDQpXG4gICAgc3dpdGNoKHJhbmRvbVBvc3NpYmlsaXR5KXtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICBnYW1lQm9hcmQucGxhY2VTaGlwKDksIDEsICd2ZXJ0aWNhbCcsIGNyZWF0ZVNoaXAoNSkpXG4gICAgICAgIGdhbWVCb2FyZC5wbGFjZVNoaXAoMCwgMywgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDMpKVxuICAgICAgICBnYW1lQm9hcmQucGxhY2VTaGlwKDMsIDYsICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCgyKSlcbiAgICAgICAgZ2FtZUJvYXJkLnBsYWNlU2hpcCg2LCA1LCAnaG9yaXpvbnRhbCcsIGNyZWF0ZVNoaXAoMykpXG4gICAgICAgIGdhbWVCb2FyZC5wbGFjZVNoaXAoMywgOSwgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDQpKVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgZ2FtZUJvYXJkLnBsYWNlU2hpcCgwLCAyLCAnaG9yaXpvbnRhbCcsIGNyZWF0ZVNoaXAoNSkpXG4gICAgICAgIGdhbWVCb2FyZC5wbGFjZVNoaXAoNCwgNSwgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDMpKVxuICAgICAgICBnYW1lQm9hcmQucGxhY2VTaGlwKDgsIDcsICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCgyKSlcbiAgICAgICAgZ2FtZUJvYXJkLnBsYWNlU2hpcCg1LCA5LCAnaG9yaXpvbnRhbCcsIGNyZWF0ZVNoaXAoMykpXG4gICAgICAgIGdhbWVCb2FyZC5wbGFjZVNoaXAoNiwgMywgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDQpKVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgZ2FtZUJvYXJkLnBsYWNlU2hpcCg1LCAxLCAnaG9yaXpvbnRhbCcsIGNyZWF0ZVNoaXAoNSkpXG4gICAgICAgIGdhbWVCb2FyZC5wbGFjZVNoaXAoMywgMywgJ3ZlcnRpY2FsJywgY3JlYXRlU2hpcCgzKSlcbiAgICAgICAgZ2FtZUJvYXJkLnBsYWNlU2hpcCgwLCAwLCAndmVydGljYWwnLCBjcmVhdGVTaGlwKDIpKVxuICAgICAgICBnYW1lQm9hcmQucGxhY2VTaGlwKDYsIDUsICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCgzKSlcbiAgICAgICAgZ2FtZUJvYXJkLnBsYWNlU2hpcCg1LCA5LCAnaG9yaXpvbnRhbCcsIGNyZWF0ZVNoaXAoNCkpXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGdhbWVCb2FyZC5wbGFjZVNoaXAoMCwgMCwgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDUpKVxuICAgICAgICAgICAgZ2FtZUJvYXJkLnBsYWNlU2hpcCgzLCA0LCAnaG9yaXpvbnRhbCcsIGNyZWF0ZVNoaXAoMykpXG4gICAgICAgICAgICBnYW1lQm9hcmQucGxhY2VTaGlwKDYsIDcsICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCgyKSlcbiAgICAgICAgICAgIGdhbWVCb2FyZC5wbGFjZVNoaXAoOSwgMSwgJ3ZlcnRpY2FsJywgY3JlYXRlU2hpcCgzKSlcbiAgICAgICAgICAgIGdhbWVCb2FyZC5wbGFjZVNoaXAoNSwgOSwgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDQpKVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgcmVuZGVyUGxheWVyU2hpcHMoZ2FtZUJvYXJkKVxuXG59XG5cbmV4cG9ydCBjb25zdCBhdHRhY2sgPSAoe1xuICAgIGNlbGwsXG4gICAgY29sdW1uLFxuICAgIHJvdyxcbiAgICBwbGF5ZXJCb2FyZCxcbiAgICBlbmVteUJvYXJkLFxuICAgIHBsYXllcixcbiAgICBlbmVteSxcbn0pID0+IHtcbiAgICAvLyBodW1hbiBwbGF5ZXIgYXR0YWNraW5nIGNvbXB1dGVyXG4gICAgYXR0YWNrRW5lbXlDZWxsKGNvbHVtbiwgcm93LCBlbmVteUJvYXJkLCBwbGF5ZXJCb2FyZCwgcGxheWVyLCBlbmVteSlcbiAgICAvLyBjb21wdXRlciBhdHRhY2tpbmcgaHVtYW5cbiAgICAvLyBjb25zdCB7IGVsZW1lbnRDb2x1bW4sIGVsZW1lbnRSb3cgfSA9IHBsYXllckJvYXJkLm1ha2VSYW5kb21Db29yZGluYXRlcygpXG4gICAgLy8gcmVuZGVyQXR0YWNrUDIocGxheWVyLCBlbmVteSwgZWxlbWVudENvbHVtbiwgZWxlbWVudFJvdywgcGxheWVyQm9hcmQsIGVuZW15Qm9hcmQpXG4gICAgLy8gYWlQbGF5KGZhbHNlLCBwbGF5ZXIsIGVuZW15LCB1bmRlZmluZWQsIHBsYXllckJvYXJkLCBlbmVteUJvYXJkKVxufVxuIiwiaW1wb3J0IHsgYWRkTGlzdGVuZXJzVG9FbmVteUJvYXJkLCByZW5kZXJQbGF5ZXJTaGlwcyxwdWJTdWIsIHJhbmRvbWl6ZUxpc3RlbmVyLCBhdHRhY2t9IGZyb20gJy4vZG9tJ1xuXG5pbXBvcnQgY3JlYXRlR2FtZUJvYXJkIGZyb20gJy4vZ2FtZWJvYXJkL2dhbWVib2FyZCdcbmltcG9ydCBjcmVhdGVTaGlwIGZyb20gJy4vc2hpcC9zaGlwJ1xuaW1wb3J0IGNyZWF0ZVBsYXllciBmcm9tICcuL3BsYXllci9wbGF5ZXInXG5cbmNvbnN0IHBsYXllckJvYXJkID0gY3JlYXRlR2FtZUJvYXJkKClcbmNvbnN0IGVuZW15Qm9hcmQgPSBjcmVhdGVHYW1lQm9hcmQoKVxuY29uc3QgcGxheWVyID0gY3JlYXRlUGxheWVyKClcbmNvbnN0IGNvbXB1dGVyID0gY3JlYXRlUGxheWVyKClcblxuY29uc3QgcmFuZG9taXplQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYnV0dG9uLnJhbmRvbWl6ZScpXG5cbnJhbmRvbWl6ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICByYW5kb21pemVMaXN0ZW5lcihwbGF5ZXJCb2FyZClcbn0pXG5cbnJhbmRvbWl6ZUxpc3RlbmVyKHBsYXllckJvYXJkKVxuXG5lbmVteUJvYXJkLnBsYWNlU2hpcCgwLCAwLCAnaG9yaXpvbnRhbCcsIGNyZWF0ZVNoaXAoNSkpXG5lbmVteUJvYXJkLnBsYWNlU2hpcCgzLCA0LCAnaG9yaXpvbnRhbCcsIGNyZWF0ZVNoaXAoMykpXG5lbmVteUJvYXJkLnBsYWNlU2hpcCg2LCA3LCAnaG9yaXpvbnRhbCcsIGNyZWF0ZVNoaXAoMikpXG5lbmVteUJvYXJkLnBsYWNlU2hpcCg5LCAxLCAndmVydGljYWwnLCBjcmVhdGVTaGlwKDMpKVxuZW5lbXlCb2FyZC5wbGFjZVNoaXAoNSwgOSwgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDQpKVxuXG5jb25zdCBwcyA9IHB1YlN1YigpXG5cbmFkZExpc3RlbmVyc1RvRW5lbXlCb2FyZChwbGF5ZXJCb2FyZCwgZW5lbXlCb2FyZCwgcGxheWVyLCBjb21wdXRlciwgcHMpXG5cbnBzLnN1YnNjcmliZSgnY2xpY2snLCBhdHRhY2spXG5cbnJlbmRlclBsYXllclNoaXBzKHBsYXllckJvYXJkKSJdLCJuYW1lcyI6WyJjcmVhdGVTaGlwIiwibW9kdWxlIiwiZXhwb3J0cyIsImVtcHR5Q2VsbCIsImhhc0JlZW5IaXQiLCJpc1NoaXAiLCJvZmZMaW1pdHMiLCJpbml0aWFsaXplQm9hcmQiLCJnYW1lQm9hcmQiLCJBcnJheSIsImZpbGwiLCJtYXAiLCJjb2x1bW4iLCJyb3ciLCJzaGlwcyIsImdldExvY2F0aW9uIiwic2V0TG9jYXRpb24iLCJzaGlwIiwiT2JqZWN0IiwiYXNzaWduIiwiY3JlYXRlT2ZmTGltaXRMb2NhdGlvbiIsInVuZGVmaW5lZCIsImxvY2F0aW9uIiwiYWRkT2ZmTGltaXRBcmVhRm9yU2hpcHMiLCJjaGVja0lmTG9jYXRpb25Jc0FTaGlwT3JPZmZMaW1pdHMiLCJkaXJlY3Rpb24iLCJzaGlwTGVuZ3RoIiwiaSIsInBsYWNlU2hpcCIsImdldExlbmd0aCIsImxlbmd0aCIsImNoZWNrSWZSb3dDb29yZGluYXRlSXNWYWxpZCIsInBvc2l0aW9uIiwiYWRkT2ZmTGltaXRBcmVhRm9yVmVydGljYWxseVBvc2l0aW9uZWRTaGlwIiwiY2hlY2tJZkNvbHVtbkNvb3JkaW5hdGVJc1ZhbGlkIiwiYWRkT2ZmTGltaXRBcmVhRm9ySG9yaXpvbnRhbGx5UG9zaXRpb25lZFNoaXAiLCJtYWtlUmFuZG9tQ29vcmRpbmF0ZXMiLCJyYW5kb21EaXJlY3Rpb24iLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJyYW5kb21Mb2NhdGlvbiIsImZsYXR0ZW5lZEdhbWVCb2FyZCIsImZsYXQiLCJmb3JFYWNoIiwiZWxlbWVudCIsImF2YWlsYWJpbGl0eSIsImF2YWlsYWJsZVNwYWNlcyIsImVsZW1lbnRDb2x1bW4iLCJlbGVtZW50Um93IiwiY2xlYXJCb2FyZCIsImNoZWNrSWZPZmZMaW1pdFpvbmVXYXNDb3JyZWN0bHlJbXBsZW1lbnRlZCIsImZpbHRlciIsInJlY2VpdmVBdHRhY2siLCJjaGVja0lmQWxsU2hpcHNIYXZlU3VuayIsImhhdmVBbGxTaGlwc1N1bmsiLCJqIiwiaXNTdW5rIiwicmFuZG9tbHlQbGFjZVNoaXBzIiwic2hpcERldGFpbHMiLCJyYW5kb21Db2x1bW4iLCJyYW5kb21Sb3ciLCJwdXNoIiwibmFtZSIsImdldE5hbWUiLCJhdHRhY2siLCJnZXRTdGF0dXMiLCJpbmNsdWRlcyIsImhpdCIsInJhbmRvbVBvcyIsInN0YXR1cyIsImV2ZXJ5IiwiZG9tVGFyZ2V0cyIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJuIiwiZ2V0dGVyIiwiX19lc01vZHVsZSIsImQiLCJhIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiYXR0YWNrRGlyZWN0aW9uIiwid2FzSGl0IiwibGFzdEhpdFBvcyIsImZpcnN0SGl0UG9zIiwic2Vjb25kSGl0UG9zIiwic3Vycm91bmRpbmdQb3MiLCJzZXRXYXNIaXQiLCJ2YWx1ZSIsInN0YXQiLCJwb3MxIiwicG9zMiIsInJlZ2lzdGVyU3Vycm91bmRpbmdQb3MiLCJhaVBsYXkiLCJyZXBlYXQiLCJwMSIsInAyIiwicGxheWVyQm9hcmQiLCJlbmVteUJvYXJkIiwicG9zIiwicmVuZGVyQXR0YWNrUDIiLCJuZXdQb3MiLCJhdHRhY2tUb3dhcmRzIiwicG9wIiwiZGlyIiwiYXN5bmMiLCJlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29uc29sZSIsImxvZyIsImNsYXNzTGlzdCIsImFkZCIsImNoZWNrSWZHYW1lT3ZlciIsImRlbGF5IiwiZGVsYXlJbk1zIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwicmVuZGVyUGxheWVyU2hpcHMiLCJwbGF5ZXJCb2FyZEFyZWEiLCJjZWxsIiwic2V0QXR0cmlidXRlIiwibW9kYWwiLCJtb2RhbFdpbm5lciIsInBsYXlBZ2FpbkJ1dHRvbiIsInN0eWxlIiwiZGlzcGxheSIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZWxvYWQiLCJ0ZXh0Q29udGVudCIsInJhbmRvbWl6ZUxpc3RlbmVyIiwicXVlcnlTZWxlY3RvckFsbCIsInJlbW92ZSIsImNvbXB1dGVyIiwicHMiLCJzdWJzY3JpYmVycyIsInB1Ymxpc2giLCJldmVudE5hbWUiLCJkYXRhIiwiaXNBcnJheSIsImNhbGxiYWNrIiwic3Vic2NyaWJlIiwiaW5kZXgiLCJ1bnN1YnNjcmliZSIsInNwbGljZSIsInB1YlN1YiIsInBsYXllciIsImVuZW15IiwiZW5lbXlCb2FyZEFyZWEiLCJvbmNlIiwiYWRkTGlzdGVuZXJzVG9FbmVteUJvYXJkIiwiaGFuZGxlQXR0YWNrIiwicmVuZGVyQXR0YWNrcyIsImF0dGFja0VuZW15Q2VsbCJdLCJzb3VyY2VSb290IjoiIn0=