(()=>{var e={653:(e,t,o)=>{const r=o(585);e.exports=()=>{const e={hasBeenHit:!1,isShip:!1,offLimits:!1};let t=!1;const o=()=>{const t=Array(10).fill().map((()=>Array(10).fill()));for(let o=0;o<10;o++)for(let r=0;r<10;r++)t[o][r]={...e,column:o,row:r};return t};let i=o();const n=[r(5,"Carrier"),r(4,"Battleship"),r(3,"Destroyer"),r(3,"Submarine"),r(2,"Patrol Boat")],a=(e,t)=>i?.[e]?.[t],l=(t,o,r=(()=>Object.assign(e,{offLimits:!0}))())=>{if(void 0===i?.[t]?.[o])return!0;const n=i[t][o];return i[t][o]={...n,...r},!0},c=(e,t)=>{l(e-1,t-1),l(e,t-1)},s=(e,t,o,r)=>{if("vertical"===o)for(let o=0;o<r;o++){const r=a(e,t+o);if(r&&!0===r.isShip&&!0===r.offLimits)return!0}if("horizontal"===o)for(let o=0;o<r;o++){const r=a(e+o,t);if(r&&!0===r.isShip&&!0===r.offLimits)return!0}return!1},h=(e,t,o,r)=>{if(i[e][t].isShip||i[e][t].offLimits)return!1;const n=r.getLength();if(s(a(e,t)))return!1;if("vertical"===o){if(((e,t)=>e>=0&&e+t-1<i.length)(t,n)){for(let o=0;o<n;o+=1)l(e,t+o,{...r,position:o}),l(e+1,t+o),l(e-1,t+o);return((e,t,o)=>{c(e,t),l(e,t+o),l(e+1,t+o),l(e-1,t+o),l(e+1,t-1)})(e,t,n),!0}}else if("horizontal"===o&&((e,t)=>e>=0&&e+t-1<i.length)(e,n)){for(let o=0;o<n;o+=1)l(e+o,t,{...r,position:o}),l(e+o,t+1),l(e+o,t-1);return((e,t,o)=>{c(e,t),l(e+o,t),l(e-1,t+1),l(e+o,t+1),l(e+o,t-1)})(e,t,n),!0}return!1},d=()=>{const e=0===Math.floor(2*Math.random())?"vertical":"horizontal",t=Math.floor(100*Math.random()),o=(()=>{const e=[...i.flat()];return e.forEach((e=>{!0===e.hasBeenHit?e.availability=!1:e.availability=!0})),e})()[t];return!1===o.availability?d():{elementColumn:o.column,elementRow:o.row,randomDirection:e}};let u=e=>{let t=Math.floor(10*Math.random()),o=Math.floor(10*Math.random()),i=Math.round(Math.random());return(0!==i||(i="horizontal",!1!==h(t,o,i,r(e))))&&(1!==i||(i="vertical",!1!==h(t,o,i,r(e))))&&void 0};return{clearBoard:()=>{i=o()},checkIfLocationIsAShipOrOffLimits:s,checkIfOffLimitZoneWasCorrectlyImplemented:e=>i.flat().filter((e=>!0===e.offLimits)).length===e+2,getLocation:a,receiveAttack:(e,t)=>{i[e][t].hasBeenHit=!0},checkIfAllShipsHaveSunk:()=>{let e=!0;for(let t=0;t<10;t++)for(let o=0;o<10;o++){const r=a(t,o);if(!1!==r.isShip&&r.isShip&&!1===r.isSunk()){e=!1;break}}return e},placeShip:h,randomlyPlaceShips:()=>{const e=[];for(let t=0;t<n.length;t+=1){const o=n[t],{randomColumn:r,randomRow:i,randomDirection:a}=d(o.getLength());h(r,i,a,o)?e.push({randomColumn:r,randomRow:i,randomDirection:a}):t-=1}return e},makeRandomCoordinates:d,randomFleet:()=>{i=o();for(let e=0;e<2;)!1!==u(1)&&e++;for(let e=0;e<2;)!1!==u(2)&&e++;for(let e=0;e<2;)!1!==u(3)&&e++;for(let e=0;e<2;)!1!==u(4)&&e++},gameBoard:i,isStartAllowed:{get:function(){return t},set:function(e){t=e}}}}},61:e=>{e.exports=(e="player")=>({getName:()=>e,attack:(e,t,{getLocation:o,receiveAttack:r})=>{const i=o(e,t);return!1===i.hasBeenHit||i.isShip&&!1===i.getStatus().includes("unhit")?(r(e,t),i.hit?(i.hit(i.position),"You hit a ship!"):"It's a hit!"):"You have already hit this spot!"},randomPos:()=>[Math.floor(10*Math.random()),Math.floor(10*Math.random())]})},585:e=>{e.exports=(e,t="ship")=>{const o=Array(e).fill("unhit");return{getName:()=>t,getLength:()=>o.length,isSunk:()=>o.every((e=>"hit"===e)),hit:t=>{t<e&&(o[t]="hit")},getStatus:()=>o,domTargets:[],hasBeenHit:!1,offLimits:!0,isShip:!0}}}},t={};function o(r){var i=t[r];if(void 0!==i)return i.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,o),n.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=o(653),t=o.n(e),r=o(585),i=o.n(r);let n,a=!1,l=!1,c=[],s=[],h=[],d=[];function u(e,t,o,r){a=e,void 0!==t&&(l=t),void 0!==o&&(c=[o,r]),0==s.length&&void 0!==o?s=[o,r]:0!==s.length&&0==h.length&&void 0!==o&&(h=[o,r])}function p(e,t){return d=[],0!==t&&d.push([e,t-1]),9!==t&&d.push([e,t+1]),0!==e&&d.push([e-1,t]),9!==e&&d.push([e+1,t]),d}function f(e,t,o,r,i,u){let f;if(!0===r&&(c=[],s=[],h=[],d=[],a=!1,l=!1,n=""),!l&&!a)return f=t.randomPos(),y(t,o,f[0],f[1],i,u);if(0!==h.length&&a&&!e){let e;if(s[0]==h[0]-1&&(e=m("down")),s[0]==h[0]+1&&(e=m("up")),s[1]==h[1]-1&&(e=m("right")),s[1]==h[1]+1&&(e=m("left")),e[0]>=0&&e[0]<=9&&e[1]>=0&&e[1]<=9)return y(t,o,e[0],e[1],i,u)}else if(0!==h.length&&l&&!a){let e;if(c=s,h=[],"up"===n&&(e=m("down")),"down"===n&&(e=m("up")),"right"===n&&(e=m("left")),"left"===n&&(e=m("right")),e[0]>=0&&e[0]<=9&&e[1]>=0&&e[1]<=9)return y(t,o,e[0],e[1],i,u)}else if(l){0==d.length&&p(c[0],c[1]),0==d.length&&1==l&&p(s[0],s[1]);const e=d.pop();return y(t,o,e[0],e[1],i,u)}}function m(e){return"left"===e?(n="left",[c[0],c[1]-1]):"right"===e?(n="right",[c[0],c[1]+1]):"down"===e?(n="down",[c[0]+1,c[1]]):"up"===e?(n="up",[c[0]-1,c[1]]):void 0}let S=0;function v(e,t){let o=2;const r=document.querySelector(e),n=document.querySelector("body"),a=document.querySelectorAll(".player-board > .cell"),l=r.childNodes;let c,s,h="horizontal";l[0]&&l[0].addEventListener("mouseenter",(()=>s=0)),l[1]&&l[1].addEventListener("mouseenter",(()=>s=-1)),l[2]&&l[2].addEventListener("mouseenter",(()=>s=-2)),l[3]&&l[3].addEventListener("mouseenter",(()=>s=-3)),r.addEventListener("click",(e=>function(e){"horizontal"===h?(h="vertical",e.target.parentNode.classList.toggle("rotated")):(h="horizontal",e.target.parentNode.classList.toggle("rotated"))}(e))),r.addEventListener("dragstart",(e=>{for(let e=0;e<10;e++)t.gameBoard[e].forEach(((e,t)=>{(e.offLimits||e.isShip)&&document.querySelector(`.player-board > .cell[column='${e.column}'][row='${e.row}']`).classList.toggle("not-available")}))})),r.addEventListener("dragend",((n,a)=>{if(document.querySelectorAll(".not-available").forEach((e=>e.classList.remove("not-available"))),-1===c)return;let l,d,u=`${c}`;c<10?(l=0,d=c):(u=u.split(""),l=1*u[0],d=1*u[1]),"horizontal"===h&&(d+=s),"vertical"===h&&(l+=s),d<0||".ship-1"===e&&!1===t.placeShip(d,l,h,i()(1))||".ship-2"===e&&!1===t.placeShip(d,l,h,i()(2))||".ship-3"===e&&!1===t.placeShip(d,l,h,i()(3))||".ship-4"===e&&!1===t.placeShip(d,l,h,i()(4))||(L(t),o-=1,S++,8===S&&t.isStartAllowed.set(!0),r.parentNode.firstChild.textContent=`${o}x`,0===o&&(r.parentNode.style.display="none"),document.querySelectorAll(".ship-container").forEach((e=>"none"===e.style.display))&&t.isStartAllowed.set(!0))})),a.forEach(((e,t)=>{e.addEventListener("dragover",(e=>{e.preventDefault(),c=t}))})),n.addEventListener("dragenter",(()=>{c=-1}))}async function y(e,t,o,r,i,n){let a=!1;const l=document.querySelector(`.player-board > .cell[column='${o}'][row='${r}']`),c=t.attack(o,r,i);if("You have already hit this spot!"===c&&f(!0,e,t,void 0,i,n),"It's a hit!"===c&&(u(!1),l.classList.add("miss")),"You hit a ship!"===c)return u(!0,!0,o,r),l.classList.add("hit"),i.getLocation(o,r).domTargets.push(l),i.getLocation(o,r).isSunk()&&(i.getLocation(o,r).domTargets.forEach((e=>e.classList.add("sunk"))),a=!0,!0===i.checkIfAllShipsHaveSunk())?b(i,n):(await g(1e3),f(!1,e,t,a,i,n))}function g(e){return new Promise((t=>{setTimeout((()=>{t(2)}),e)}))}const L=({getLocation:e})=>{const t=document.querySelector("div.player-board");for(let o=0;o<10;o+=1)for(let r=0;r<10;r+=1){const i=t.querySelector(`.cell:nth-child(${10*r+o+1})`);i.setAttribute("column",o),i.setAttribute("row",r);const n=e(o,r);n.isShip&&(i.classList.add("ship"),i.setAttribute("ship-name",n.getName()))}},b=(e,t)=>{if(e.checkIfAllShipsHaveSunk()){const e=document.querySelector(".modal"),t=document.querySelector(".modal-content > p"),o=document.querySelector(".modal-content > button");e.style.display="block",o.addEventListener("click",(()=>{location.reload()})),t.textContent="You lose!"}if(t.checkIfAllShipsHaveSunk()){const e=document.querySelector(".modal"),t=document.querySelector(".modal-content > p"),o=document.querySelector(".modal-content > button");e.style.display="block",t.textContent="You win!",o.addEventListener("click",(()=>{location.reload()}))}};var k=o(61),z=o.n(k);const A=t()(),w=t()(),E=z()(),q=z()();document.querySelector("button.randomize").addEventListener("click",(()=>{(e=>{switch(e.clearBoard(),document.querySelectorAll(".player-board > .cell").forEach((e=>{e.classList.remove("ship"),e.classList.remove("hit"),e.classList.remove("miss")})),Math.floor(4*Math.random())){case 0:e.placeShip(9,1,"vertical",i()(5)),e.placeShip(0,3,"horizontal",i()(3)),e.placeShip(3,6,"horizontal",i()(2)),e.placeShip(6,5,"horizontal",i()(3)),e.placeShip(3,9,"horizontal",i()(4));break;case 1:e.placeShip(0,2,"horizontal",i()(5)),e.placeShip(4,5,"horizontal",i()(3)),e.placeShip(8,7,"horizontal",i()(2)),e.placeShip(5,9,"horizontal",i()(3)),e.placeShip(6,3,"horizontal",i()(4));break;case 2:e.placeShip(5,1,"horizontal",i()(5)),e.placeShip(3,3,"vertical",i()(3)),e.placeShip(0,0,"vertical",i()(2)),e.placeShip(6,5,"horizontal",i()(3)),e.placeShip(5,9,"horizontal",i()(4));break;default:e.placeShip(0,0,"horizontal",i()(5)),e.placeShip(3,4,"horizontal",i()(3)),e.placeShip(6,7,"horizontal",i()(2)),e.placeShip(9,1,"vertical",i()(3)),e.placeShip(5,9,"horizontal",i()(4))}L(e)})(w)})),function(e){function t(e,t){const o=document.querySelector("body > main > div.player > div:nth-child(4)"),r=document.createElement("div");r.classList.add("ship-container"),o.appendChild(r);const i=document.createElement("span");i.classList.add(`info-${e}`),i.textContent="2x",r.appendChild(i);const n=document.createElement("div");n.classList.add("ship"),n.classList.add(`ship-${e}`),n.setAttribute("draggable","true"),r.appendChild(n);for(let e=0;e<t;e++){const e=document.createElement("div");e.classList.add("cell"),n.appendChild(e)}}t(1,1),t(2,2),t(3,3),t(4,4);for(let t=1;t<5;t++)v(`.ship-${t}`,e)}(A),w.placeShip(0,0,"horizontal",i()(5)),w.placeShip(3,4,"horizontal",i()(3)),w.placeShip(6,7,"horizontal",i()(2)),w.placeShip(9,1,"vertical",i()(3)),w.placeShip(5,9,"horizontal",i()(4));const M=(()=>{const e={};return{publish:function(t,o){Array.isArray(e[t])&&e[t].forEach((e=>{e(o)}))},subscribe:function t(o,r){Array.isArray(t[o])||(e[o]=[]),e[o].push(r);const i=e[o].length-1;return{unsubscribe(){e[o].splice(i,1)}}}}})();((e,t,o,r,i)=>{const n=document.querySelector("div.enemy-board");for(let a=0;a<10;a+=1)for(let l=0;l<10;l+=1){const c=n.querySelector(`.cell:nth-child(${10*l+a+1})`);c.setAttribute("column",a),c.setAttribute("row",l),c.addEventListener("click",(()=>{i.publish("click",{cell:c,column:a,row:l,playerBoard:e,enemyBoard:t,player:o,enemy:r})}),{once:!0})}})(A,w,E,q,M),M.subscribe("click",(({cell:e,column:t,row:o,playerBoard:r,enemyBoard:i,player:n,enemy:a})=>{(async(e,t,o,r,i,n)=>{((e,t,o,r)=>{r.attack(e,t,o)})(e,t,o,i),((e,t,o,r)=>{const i=document.querySelector(`.enemy-board > .cell[column='${t}'][row='${o}']`);r.getLocation(t,o)?.isShip&&(r.getLocation(t,o).domTargets.push(i),r.getLocation(t,o).isSunk()&&r.getLocation(t,o).domTargets.forEach((e=>e.classList.add("sunk")))),r.getLocation(t,o).isShip?i.classList.add("hit"):i.classList.add("miss")})(0,e,t,o),await g(700),o.checkIfAllShipsHaveSunk()?b(r,o):f(!1,i,n,void 0,r,o)})(t,o,i,r,n,a)})),L(A)})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQVdyRyxZQUFZSCxFQUFRQyxJQUFNVCxTQUVwQ2dILEVBQVdyRyxZQUFZSCxFQUFRQyxHQUFLb0UsV0FBV2QsS0FBSzZGLEdBQ2pENUMsRUFBV3JHLFlBQVlILEVBQVFDLEdBQUtpRCxVQUVuQ3NELEVBQVdyRyxZQUFZSCxFQUFRQyxHQUFLb0UsV0FBV3JDLFNBQVM0RixHQUFNQSxFQUFFRyxVQUFVYSxJQUFJLFdBSXJFcEMsRUFBV3JHLFlBQVlILEVBQVFDLEdBQ25DVCxPQUNUNEosRUFBS3JCLFVBQVVhLElBQUksT0FFbkJRLEVBQUtyQixVQUFVYSxJQUFJLFNBWXZCd0MsQ0FBYyxFQUFTcEwsRUFBUUMsRUFBS3VHLFNBQzlCc0MsRUFBTSxLQUNMdEMsRUFBV3pELDBCQUE0QjhGLEVBQWdCdEMsRUFBYUMsR0FBY0wsR0FBTyxFQUFPMkUsRUFBUUMsT0FBT3RLLEVBQVc4RixFQUFhQyxJQXFWOUk2RSxDQUFnQnJMLEVBQVFDLEVBQUt1RyxFQUFZRCxFQUFhdUUsRUFBUUMsTUMxVmxFM0MsRUFBa0I3QixJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvLi9zcmMvZ2FtZWJvYXJkL2dhbWVib2FyZC5qcyIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC8uL3NyYy9wbGF5ZXIvcGxheWVyLmpzIiwid2VicGFjazovL3RvcC1iYXR0bGVzaGlwLy4vc3JjL3NoaXAvc2hpcC5qcyIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC8uL3NyYy9ib3QuanMiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvLi9zcmMvZHJhZy1hbmQtZHJvcC5qcyIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC8uL3NyYy9kb20uanMiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1tdWx0aS1hc3NpZ24gKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC1leHByZXNzaW9ucyAqL1xuY29uc3QgY3JlYXRlU2hpcCA9IHJlcXVpcmUoJy4uL3NoaXAvc2hpcCcpXG5cbi8qIGVzbGludC1kaXNhYmxlIG5vLXBhcmFtLXJlYXNzaWduICovXG5jb25zdCBjcmVhdGVHYW1lQm9hcmQgPSAoKSA9PiB7XG4gICAgY29uc3QgZW1wdHlDZWxsID0geyBoYXNCZWVuSGl0OiBmYWxzZSwgaXNTaGlwOiBmYWxzZSwgb2ZmTGltaXRzOiBmYWxzZSB9XG5cbiAgICBsZXQgaXNTdGFydEFsbG93ZWQgPSBmYWxzZVxuICAgIFxuICAgIGNvbnN0IGluaXRpYWxpemVCb2FyZCA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgZ2FtZUJvYXJkID0gQXJyYXkoMTApLmZpbGwoKS5tYXAoKCkgPT4gQXJyYXkoMTApLmZpbGwoKSlcbiAgICAgICAgZm9yKGxldCBjb2x1bW49IDA7IGNvbHVtbiA8IDEwOyBjb2x1bW4rKyl7XG4gICAgICAgICAgICBmb3IobGV0IHJvdz0gMDsgcm93IDwgMTA7IHJvdysrKXtcbiAgICAgICAgICAgICAgICBnYW1lQm9hcmRbY29sdW1uXVtyb3ddID0gey4uLmVtcHR5Q2VsbCwgY29sdW1uLCByb3d9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGdhbWVCb2FyZFxuICAgIFxuICAgIH1cblxuICAgIGxldCBnYW1lQm9hcmQgPSBpbml0aWFsaXplQm9hcmQoKVxuXG4gICAgY29uc3Qgc2hpcHMgPSBbXG4gICAgICAgIGNyZWF0ZVNoaXAoNSwgJ0NhcnJpZXInKSxcbiAgICAgICAgY3JlYXRlU2hpcCg0LCAnQmF0dGxlc2hpcCcpLFxuICAgICAgICBjcmVhdGVTaGlwKDMsICdEZXN0cm95ZXInKSxcbiAgICAgICAgY3JlYXRlU2hpcCgzLCAnU3VibWFyaW5lJyksXG4gICAgICAgIGNyZWF0ZVNoaXAoMiwgJ1BhdHJvbCBCb2F0JyksXG4gICAgXVxuXG5cbiAgICBjb25zdCBjcmVhdGVPZmZMaW1pdExvY2F0aW9uID0gKCkgPT5cbiAgICAgICAgT2JqZWN0LmFzc2lnbihlbXB0eUNlbGwsIHsgb2ZmTGltaXRzOiB0cnVlIH0pXG5cbiAgICBjb25zdCBnZXRMb2NhdGlvbiA9IChjb2x1bW4sIHJvdykgPT4gZ2FtZUJvYXJkPy5bY29sdW1uXT8uW3Jvd11cblxuICAgIGNvbnN0IHNldExvY2F0aW9uID0gKGNvbHVtbiwgcm93LCBzaGlwID0gY3JlYXRlT2ZmTGltaXRMb2NhdGlvbigpKSA9PiB7XG4gICAgICAgIGlmIChnYW1lQm9hcmQ/Lltjb2x1bW5dPy5bcm93XSA9PT0gdW5kZWZpbmVkKSByZXR1cm4gdHJ1ZVxuICAgICAgICBjb25zdCBsb2NhdGlvbiA9IGdhbWVCb2FyZFtjb2x1bW5dW3Jvd11cblxuICAgICAgICBnYW1lQm9hcmRbY29sdW1uXVtyb3ddID0gey4uLmxvY2F0aW9uLCAuLi5zaGlwfVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICBjb25zdCBjaGVja0lmQWxsU2hpcHNIYXZlU3VuayA9ICgpID0+IHtcblxuICAgICAgICBsZXQgaGF2ZUFsbFNoaXBzU3VuayA9dHJ1ZSAgXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDEwOyBqKyspIHtcbiAgICAgICAgY29uc3QgbG9jYXRpb24gPSBnZXRMb2NhdGlvbihpLCBqKVxuICAgICAgICBpZihsb2NhdGlvbi5pc1NoaXAgPT09IGZhbHNlKSBjb250aW51ZVxuICAgICAgICBpZihsb2NhdGlvbi5pc1NoaXAgJiYgbG9jYXRpb24uaXNTdW5rKCkgPT09IGZhbHNlKXtcbiAgICAgICAgICAgaGF2ZUFsbFNoaXBzU3VuayA9IGZhbHNlIFxuICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gaGF2ZUFsbFNoaXBzU3VuayBcbiAgICB9XG5cbiAgICBjb25zdCBhZGRPZmZMaW1pdEFyZWFGb3JTaGlwcyA9IChjb2x1bW4sIHJvdykgPT4ge1xuICAgICAgICAvLyB0b3AtbGVmdFxuICAgICAgICBzZXRMb2NhdGlvbihjb2x1bW4gLSAxLCByb3cgLSAxKVxuICAgICAgICAvLyB0b3BcbiAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uLCByb3cgLSAxKVxuICAgIH1cblxuICAgIGNvbnN0IGFkZE9mZkxpbWl0QXJlYUZvckhvcml6b250YWxseVBvc2l0aW9uZWRTaGlwID0gKFxuICAgICAgICBjb2x1bW4sXG4gICAgICAgIHJvdyxcbiAgICAgICAgc2hpcExlbmd0aFxuICAgICkgPT4ge1xuICAgICAgICAvLyBwb3NpdGlvbnMgcmVsYXRpdmUgdG8gdGhlIHNoaXAgaXRzZWxmKGllLiBhIGhvcml6b250YWwgc2hpcCdzIGJvdHRvbSBpcyB0byB0aGUgcmlnaHQpXG5cbiAgICAgICAgYWRkT2ZmTGltaXRBcmVhRm9yU2hpcHMoY29sdW1uLCByb3cpXG4gICAgICAgIC8vIGJvdHRvbVxuICAgICAgICBzZXRMb2NhdGlvbihjb2x1bW4gKyBzaGlwTGVuZ3RoLCByb3cpXG4gICAgICAgIC8vIGJvdHRvbS1sZWZ0XG4gICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiAtIDEsIHJvdyArIDEpXG4gICAgICAgIC8vIGJvdHRvbS1yaWdodFxuICAgICAgICBzZXRMb2NhdGlvbihjb2x1bW4gKyBzaGlwTGVuZ3RoLCByb3cgKyAxKVxuICAgICAgICAvLyB0b3AtcmlnaHRcbiAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uICsgc2hpcExlbmd0aCwgcm93IC0gMSlcbiAgICB9XG5cbiAgICBjb25zdCBhZGRPZmZMaW1pdEFyZWFGb3JWZXJ0aWNhbGx5UG9zaXRpb25lZFNoaXAgPSAoXG4gICAgICAgIGNvbHVtbixcbiAgICAgICAgcm93LFxuICAgICAgICBzaGlwTGVuZ3RoXG4gICAgKSA9PiB7XG4gICAgICAgIC8vIHBvc2l0aW9ucyByZWxhdGl2ZSB0byBob3cgdGhlIHVzZXIgc2VlcyBpdChpZS4gYSB2ZXJ0aWNhbCBzaGlwJ3MgYm90dG9tIGlzIHRvIHRoZSBib3R0b20pXG5cbiAgICAgICAgYWRkT2ZmTGltaXRBcmVhRm9yU2hpcHMoY29sdW1uLCByb3cpXG4gICAgICAgIC8vIGJvdHRvbVxuICAgICAgICBzZXRMb2NhdGlvbihjb2x1bW4sIHJvdyArIHNoaXBMZW5ndGgpXG4gICAgICAgIC8vIGJvdHRvbS1yaWdodFxuICAgICAgICBzZXRMb2NhdGlvbihjb2x1bW4gKyAxLCByb3cgKyBzaGlwTGVuZ3RoKVxuICAgICAgICAvLyBib3R0b20tbGVmdFxuICAgICAgICBzZXRMb2NhdGlvbihjb2x1bW4gLSAxLCByb3cgKyBzaGlwTGVuZ3RoKVxuICAgICAgICAvLyB0b3AtcmlnaHRcbiAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uICsgMSwgcm93IC0gMSlcbiAgICB9XG5cbiAgICBjb25zdCBjaGVja0lmQ29sdW1uQ29vcmRpbmF0ZUlzVmFsaWQgPSAoY29sdW1uLCBzaGlwTGVuZ3RoKSA9PlxuICAgICAgICBjb2x1bW4gPj0gMCAmJiBjb2x1bW4gKyBzaGlwTGVuZ3RoIC0gMSA8IGdhbWVCb2FyZC5sZW5ndGhcblxuICAgIGNvbnN0IGNoZWNrSWZSb3dDb29yZGluYXRlSXNWYWxpZCA9IChyb3csIHNoaXBMZW5ndGgpID0+XG4gICAgICAgIHJvdyA+PSAwICYmIHJvdyArIHNoaXBMZW5ndGggLSAxIDwgZ2FtZUJvYXJkLmxlbmd0aFxuXG5cbiAgICBjb25zdCBjaGVja0lmTG9jYXRpb25Jc0FTaGlwT3JPZmZMaW1pdHMgPSAoXG4gICAgICAgIGNvbHVtbixcbiAgICAgICAgcm93LFxuICAgICAgICBkaXJlY3Rpb24sXG4gICAgICAgIHNoaXBMZW5ndGhcbiAgICApID0+IHtcbiAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gJ3ZlcnRpY2FsJykge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGlwTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsb2NhdGlvbiA9IGdldExvY2F0aW9uKGNvbHVtbiwgcm93ICsgaSlcbiAgICAgICAgICAgICAgICBpZiAobG9jYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24uaXNTaGlwID09PSB0cnVlICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5vZmZMaW1pdHMgPT09IHRydWVcbiAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gJ2hvcml6b250YWwnKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXBMZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2F0aW9uID0gZ2V0TG9jYXRpb24oY29sdW1uICsgaSwgcm93KVxuICAgICAgICAgICAgICAgIGlmIChsb2NhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5pc1NoaXAgPT09IHRydWUgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLm9mZkxpbWl0cyA9PT0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgICAvLyBtYWtlcyB0aWxlcyBhcm91bmQgc2hpcCBcInJlc2VydmVkXCJcbiAgbGV0IHJlc2VydmVBcm91bmQgPSAocG9zMSwgcG9zMikgPT4ge1xuICAgIGZ1bmN0aW9uIGNlbGwobjEsIG4yKSB7XG4gICAgICBpZiAocG9zMSArIG4xID4gOSB8fCBwb3MxICsgbjEgPCAwKSByZXR1cm47XG4gICAgICBpZiAoT2JqZWN0LmlzKGdhbWVCb2FyZFtwb3MxICsgbjFdW3BvczIgKyBuMl0sIGVtcHR5Q2VsbCkpXG4gICAgICAgIGdhbWVCb2FyZFtwb3MxICsgbjFdW3BvczIgKyBuMl0ub2ZmTGltaXRzID0gdHJ1ZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcmVzZXJ2ZUNlbGwocm93KSB7XG4gICAgICBjZWxsKHJvdywgLTEpO1xuICAgICAgY2VsbChyb3csIDApO1xuICAgICAgY2VsbChyb3csIDEpO1xuICAgIH1cbiAgICByZXNlcnZlQ2VsbCgtMSk7XG4gICAgcmVzZXJ2ZUNlbGwoMCk7XG4gICAgcmVzZXJ2ZUNlbGwoMSk7XG4gIH07XG5cbmNvbnN0IHBsYWNlU2hpcCA9IChjb2x1bW4sIHJvdywgZGlyZWN0aW9uLCBzaGlwKSA9PiB7XG4gICAgaWYoZ2FtZUJvYXJkW2NvbHVtbl1bcm93XS5pc1NoaXAgfHwgZ2FtZUJvYXJkW2NvbHVtbl1bcm93XS5vZmZMaW1pdHMpIHJldHVybiBmYWxzZVxuICAgICAgICBjb25zdCBzaGlwTGVuZ3RoID0gc2hpcC5nZXRMZW5ndGgoKVxuICAgICAgICBpZiAoY2hlY2tJZkxvY2F0aW9uSXNBU2hpcE9yT2ZmTGltaXRzKGdldExvY2F0aW9uKGNvbHVtbiwgcm93LCBkaXJlY3Rpb24sIHNoaXBMZW5ndGgpKSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAndmVydGljYWwnKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2tJZlJvd0Nvb3JkaW5hdGVJc1ZhbGlkKHJvdywgc2hpcExlbmd0aCkpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXBMZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgICAgICAgICBzZXRMb2NhdGlvbihjb2x1bW4sIHJvdyArIGksIHsuLi5zaGlwLCBwb3NpdGlvbjogaX0pXG4gICAgICAgICAgICAgICAgICAgIC8vcmVzZXJ2ZUFyb3VuZChjb2x1bW4sIHJvdyArIGkpXG4gICAgICAgICAgICAgICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiArIDEsIHJvdyArIGkpXG4gICAgICAgICAgICAgICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiAtIDEsIHJvdyArIGkpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGFkZE9mZkxpbWl0QXJlYUZvclZlcnRpY2FsbHlQb3NpdGlvbmVkU2hpcChcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLFxuICAgICAgICAgICAgICAgICAgICByb3csXG4gICAgICAgICAgICAgICAgICAgIHNoaXBMZW5ndGhcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPT09ICdob3Jpem9udGFsJykge1xuICAgICAgICAgICAgaWYgKGNoZWNrSWZDb2x1bW5Db29yZGluYXRlSXNWYWxpZChjb2x1bW4sIHNoaXBMZW5ndGgpKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGlwTGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uICsgaSAsIHJvdywgey4uLnNoaXAsIHBvc2l0aW9uOiBpfSlcbiAgICAgICAgICAgICAgICAgICAgLy9yZXNlcnZlQXJvdW5kKGNvbHVtbiArIGksIHJvdylcbiAgICAgICAgICAgICAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uICsgaSwgcm93ICsgMSlcbiAgICAgICAgICAgICAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uICsgaSwgcm93IC0gMSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYWRkT2ZmTGltaXRBcmVhRm9ySG9yaXpvbnRhbGx5UG9zaXRpb25lZFNoaXAoXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbixcbiAgICAgICAgICAgICAgICAgICAgcm93LFxuICAgICAgICAgICAgICAgICAgICBzaGlwTGVuZ3RoXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgICAgICBjb25zdCBhdmFpbGFibGVTcGFjZXMgPSAoKSA9PntcblxuICAgICAgICBjb25zdCBmbGF0dGVuZWRHYW1lQm9hcmQgPSBbLi4uZ2FtZUJvYXJkLmZsYXQoKV1cblxuICAgICAgICAgICAgZmxhdHRlbmVkR2FtZUJvYXJkLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBpZihlbGVtZW50Lmhhc0JlZW5IaXQgPT09IHRydWUpe1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmF2YWlsYWJpbGl0eSA9IGZhbHNlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuYXZhaWxhYmlsaXR5ID10cnVlICBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICByZXR1cm4gZmxhdHRlbmVkR2FtZUJvYXJkXG5cbiAgICAgICAgfVxuICAgIGNvbnN0IG1ha2VSYW5kb21Db29yZGluYXRlcyA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgcmFuZG9tRGlyZWN0aW9uID1cbiAgICAgICAgICAgIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDIpID09PSAwID8gJ3ZlcnRpY2FsJyA6ICdob3Jpem9udGFsJ1xuICAgICAgICBjb25zdCByYW5kb21Mb2NhdGlvbiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMClcbiAgICAgICAgY29uc3QgZmxhdHRlbmVkR2FtZUJvYXJkID0gYXZhaWxhYmxlU3BhY2VzKClcblxuICAgICAgICBjb25zdCBsb2NhdGlvbiA9IGZsYXR0ZW5lZEdhbWVCb2FyZFtyYW5kb21Mb2NhdGlvbl1cblxuICAgICAgICBpZihsb2NhdGlvbi5hdmFpbGFiaWxpdHkgPT09IGZhbHNlKXtcbiAgICAgICAgICAgIHJldHVybiBtYWtlUmFuZG9tQ29vcmRpbmF0ZXMoKVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZWxlbWVudENvbHVtbiA9IGxvY2F0aW9uLmNvbHVtblxuICAgICAgICBjb25zdCBlbGVtZW50Um93ID0gbG9jYXRpb24ucm93XG5cblxuICAgICAgICByZXR1cm4geyBlbGVtZW50Q29sdW1uLCBlbGVtZW50Um93LCByYW5kb21EaXJlY3Rpb24gfVxuICAgIH1cblxuICAvLyBjcmVhdGVzIGEgc2hpcCB3aXRoIHJhbmRvbSBwb3MgYW5kIG9yaWVudGF0aW9uXG4gIGxldCByYW5kb21TaGlwID0gKGxlbmd0aCkgPT4ge1xuICAgIGxldCBwb3MxID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApO1xuICAgIGxldCBwb3MyID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApO1xuICAgIGxldCBkaXIgPSBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkpO1xuXG4gICAgaWYgKGRpciA9PT0gMCkge1xuICAgICAgZGlyID0gXCJob3Jpem9udGFsXCI7XG4gICAgICBpZiAocGxhY2VTaGlwKHBvczEsIHBvczIsIGRpciwgY3JlYXRlU2hpcChsZW5ndGgpKSA9PT0gZmFsc2UpIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoZGlyID09PSAxKSB7XG4gICAgICBkaXIgPSBcInZlcnRpY2FsXCI7XG4gICAgICBpZiAocGxhY2VTaGlwKHBvczEsIHBvczIsIGRpciwgY3JlYXRlU2hpcChsZW5ndGgpKSA9PT0gZmFsc2UpIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH07XG5cbiAgICBsZXQgcmFuZG9tRmxlZXQgPSAoKSA9PiB7XG4gICAgICAgIGdhbWVCb2FyZCA9IGluaXRpYWxpemVCb2FyZCgpXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCAyOykge1xuICAgICAgICAgICAgaWYocmFuZG9tU2hpcCgxKSA9PT0gZmFsc2UpIGNvbnRpbnVlIFxuICAgICAgICAgICAgaSsrXG4gICAgICAgIH1cblxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgMjspIHtcbiAgICAgICAgICAgIGlmKHJhbmRvbVNoaXAoMikgPT09IGZhbHNlKSBjb250aW51ZSBcbiAgICAgICAgICAgIGkrK1xuICAgICAgICB9XG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCAyOykge1xuICAgICAgICAgICAgaWYocmFuZG9tU2hpcCgzKSA9PT0gZmFsc2UpIGNvbnRpbnVlIFxuICAgICAgICAgICAgaSsrXG4gICAgICAgIH1cbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IDI7KSB7XG4gICAgICAgICAgICBpZihyYW5kb21TaGlwKDQpID09PSBmYWxzZSkgY29udGludWUgXG4gICAgICAgICAgICBpKytcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHJhbmRvbWx5UGxhY2VTaGlwcyA9ICgpID0+IHtcbiAgICAgICAgY29uc3Qgc2hpcERldGFpbHMgPSBbXVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXBzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICBjb25zdCBzaGlwID0gc2hpcHNbaV1cbiAgICAgICAgICAgIGNvbnN0IHsgcmFuZG9tQ29sdW1uLCByYW5kb21Sb3csIHJhbmRvbURpcmVjdGlvbiB9ID1cbiAgICAgICAgICAgICAgICBtYWtlUmFuZG9tQ29vcmRpbmF0ZXMoc2hpcC5nZXRMZW5ndGgoKSlcbiAgICAgICAgICAgIGlmIChwbGFjZVNoaXAocmFuZG9tQ29sdW1uLCByYW5kb21Sb3csIHJhbmRvbURpcmVjdGlvbiwgc2hpcCkpIHtcbiAgICAgICAgICAgICAgICBzaGlwRGV0YWlscy5wdXNoKHsgcmFuZG9tQ29sdW1uLCByYW5kb21Sb3csIHJhbmRvbURpcmVjdGlvbiB9KVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpIC09IDFcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2hpcERldGFpbHNcbiAgICB9XG5cbiAgICBjb25zdCByZWNlaXZlQXR0YWNrID0gKGNvbHVtbiwgcm93KSA9PiB7XG4gICAgICAgIGdhbWVCb2FyZFtjb2x1bW5dW3Jvd10uaGFzQmVlbkhpdCA9IHRydWVcbiAgICB9XG5cbiAgICBjb25zdCBjaGVja0lmT2ZmTGltaXRab25lV2FzQ29ycmVjdGx5SW1wbGVtZW50ZWQgPSAoc2hpcExlbmd0aCkgPT5cbiAgICAgICAgZ2FtZUJvYXJkLmZsYXQoKS5maWx0ZXIoKGVsZW1lbnQpID0+IGVsZW1lbnQub2ZmTGltaXRzID09PSB0cnVlKVxuICAgICAgICAgICAgLmxlbmd0aCA9PT1cbiAgICAgICAgc2hpcExlbmd0aCArIDJcbiAgICAvLyBhZGRpbmcgc2hpcExlbmd0aCBwbHVzIHR3byBiZWNhdXNlIGZvciBldmVyeSBpbmNyZWFzZSBpbiB0aGUgc2l6ZSBvZiBzaGlwLCB0aGUgem9uZXMgY292ZXJlZCBpbmNyZWFzZSBieSAyIHVuaXRzXG5cbiAgICBjb25zdCBjbGVhckJvYXJkICA9ICgpID0+IHtcbiAgICAgICAgZ2FtZUJvYXJkID0gaW5pdGlhbGl6ZUJvYXJkKClcbiAgICB9XG5cbiAgICBjb25zdCBnZXRCb2FyZCA9ICgpID0+IGdhbWVCb2FyZFxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgY2xlYXJCb2FyZCxcbiAgICAgICAgY2hlY2tJZkxvY2F0aW9uSXNBU2hpcE9yT2ZmTGltaXRzLFxuICAgICAgICBjaGVja0lmT2ZmTGltaXRab25lV2FzQ29ycmVjdGx5SW1wbGVtZW50ZWQsXG4gICAgICAgIGdldExvY2F0aW9uLFxuICAgICAgICByZWNlaXZlQXR0YWNrLFxuICAgICAgICBjaGVja0lmQWxsU2hpcHNIYXZlU3VuayxcbiAgICAgICAgcGxhY2VTaGlwLFxuICAgICAgICByYW5kb21seVBsYWNlU2hpcHMsXG4gICAgICAgIG1ha2VSYW5kb21Db29yZGluYXRlcyxcbiAgICAgICAgcmFuZG9tRmxlZXQsXG4gICAgICAgIGdhbWVCb2FyZCxcbiAgICAgICAgaXNTdGFydEFsbG93ZWQgOiB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpc1N0YXJ0QWxsb3dlZFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpc1N0YXJ0QWxsb3dlZCA9IHZhbHVlXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5tb2R1bGUuZXhwb3J0cyA9IGNyZWF0ZUdhbWVCb2FyZCIsImNvbnN0IGNyZWF0ZVBsYXllciA9IChuYW1lID0gJ3BsYXllcicpID0+IHtcbiAgICBjb25zdCBnZXROYW1lID0gKCkgPT4gbmFtZVxuXG4gICAgY29uc3QgYXR0YWNrID0gKGNvbHVtbiwgcm93LCB7IGdldExvY2F0aW9uLCByZWNlaXZlQXR0YWNrIH0pID0+IHtcbiAgICAgICAgY29uc3QgbG9jYXRpb24gPSBnZXRMb2NhdGlvbihjb2x1bW4sIHJvdylcbiAgICAgICAgaWYgKGxvY2F0aW9uLmhhc0JlZW5IaXQgPT09IGZhbHNlIHx8IChsb2NhdGlvbi5pc1NoaXAgJiYgbG9jYXRpb24uZ2V0U3RhdHVzKCkuaW5jbHVkZXMoJ3VuaGl0JykgPT09IGZhbHNlKSkge1xuICAgICAgICAgICAgcmVjZWl2ZUF0dGFjayhjb2x1bW4sIHJvdylcbiAgICAgICAgICAgIGlmKGxvY2F0aW9uLmhpdCl7XG5cbiAgICAgICAgICAgICAgICBsb2NhdGlvbi5oaXQobG9jYXRpb24ucG9zaXRpb24pXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiWW91IGhpdCBhIHNoaXAhXCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBcIkl0J3MgYSBoaXQhXCJcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAnWW91IGhhdmUgYWxyZWFkeSBoaXQgdGhpcyBzcG90ISdcbiAgICB9XG5cbiAgICAgIGxldCByYW5kb21Qb3MgPSAoKSA9PiB7XG4gICAgbGV0IHBvczEgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCk7XG4gICAgbGV0IHBvczIgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCk7XG4gICAgcmV0dXJuIFtwb3MxLCBwb3MyXTtcbiAgfTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIGdldE5hbWUsXG4gICAgICAgIGF0dGFjayxcbiAgICAgICAgcmFuZG9tUG9zLFxuICAgIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjcmVhdGVQbGF5ZXJcbiIsImNvbnN0IGNyZWF0ZVNoaXAgPSAobGVuZ3RoLCBuYW1lID0gJ3NoaXAnKSA9PiB7XG5cbiAgICBsZXQgZG9tVGFyZ2V0cyA9IFtdXG5cbiAgICBjb25zdCBzdGF0dXMgPSBBcnJheShsZW5ndGgpLmZpbGwoJ3VuaGl0JylcblxuICAgIGNvbnN0IGdldExlbmd0aCA9ICgpID0+IHN0YXR1cy5sZW5ndGhcblxuICAgIGNvbnN0IGdldFN0YXR1cyA9ICgpID0+IHN0YXR1c1xuXG4gICAgY29uc3QgaGl0ID0gKHBvc2l0aW9uKSA9PiB7XG4gICAgICAgIGlmIChwb3NpdGlvbiA8IGxlbmd0aCkge1xuICAgICAgICAgICAgc3RhdHVzW3Bvc2l0aW9uXSA9ICdoaXQnXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBnZXROYW1lID0gKCkgPT4gIG5hbWVcblxuICAgIGNvbnN0IGlzU3VuayA9ICgpID0+IHN0YXR1cy5ldmVyeSgocG9zaXRpb24pID0+IHBvc2l0aW9uID09PSAnaGl0JylcblxuICAgIHJldHVybiB7XG4gICAgICAgIGdldE5hbWUsXG4gICAgICAgIGdldExlbmd0aCxcbiAgICAgICAgaXNTdW5rLFxuICAgICAgICBoaXQsXG4gICAgICAgIGdldFN0YXR1cyxcbiAgICAgICAgZG9tVGFyZ2V0cyxcbiAgICAgICAgaGFzQmVlbkhpdDogZmFsc2UsXG4gICAgICAgIG9mZkxpbWl0czogdHJ1ZSxcbiAgICAgICAgaXNTaGlwOiB0cnVlLFxuICAgIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjcmVhdGVTaGlwXG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbl9fd2VicGFja19yZXF1aXJlX18ubiA9IChtb2R1bGUpID0+IHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0KCkgPT4gKG1vZHVsZVsnZGVmYXVsdCddKSA6XG5cdFx0KCkgPT4gKG1vZHVsZSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLyogZXNsaW50LWRpc2FibGUgbm8tZWxzZS1yZXR1cm4gKi9cbmltcG9ydCB7cmVuZGVyQXR0YWNrUDIgfSBmcm9tICcuL2RvbSdcblxubGV0IHdhc0hpdCA9IGZhbHNlO1xubGV0IHN0YXR1cyA9IGZhbHNlO1xubGV0IGxhc3RIaXRQb3MgPSBbXTtcbmxldCBmaXJzdEhpdFBvcyA9IFtdO1xubGV0IHNlY29uZEhpdFBvcyA9IFtdO1xubGV0IHN1cnJvdW5kaW5nUG9zID0gW107XG5sZXQgYXR0YWNrRGlyZWN0aW9uO1xuXG5mdW5jdGlvbiBzZXRXYXNIaXQodmFsdWUsIHN0YXQsIHBvczEsIHBvczIpIHtcbiAgd2FzSGl0ID0gdmFsdWU7XG4gIGlmIChzdGF0ICE9PSB1bmRlZmluZWQpIHN0YXR1cyA9IHN0YXQ7XG4gIGlmIChwb3MxICE9PSB1bmRlZmluZWQpIGxhc3RIaXRQb3MgPSBbcG9zMSwgcG9zMl07XG4gIGlmIChmaXJzdEhpdFBvcy5sZW5ndGggPT0gMCAmJiBwb3MxICE9PSB1bmRlZmluZWQpIGZpcnN0SGl0UG9zID0gW3BvczEsIHBvczJdO1xuICBlbHNlIGlmIChcbiAgICBmaXJzdEhpdFBvcy5sZW5ndGggIT09IDAgJiZcbiAgICBzZWNvbmRIaXRQb3MubGVuZ3RoID09IDAgJiZcbiAgICBwb3MxICE9PSB1bmRlZmluZWRcbiAgKVxuICAgIHNlY29uZEhpdFBvcyA9IFtwb3MxLCBwb3MyXTtcbn1cbmZ1bmN0aW9uIGdldFdhc0hpdCgpIHtcbiAgcmV0dXJuIFt3YXNIaXQsIGxhc3RIaXRQb3MsIHN0YXR1c107XG59XG5cbmZ1bmN0aW9uIHJlZ2lzdGVyU3Vycm91bmRpbmdQb3MocG9zMSwgcG9zMikge1xuICBzdXJyb3VuZGluZ1BvcyA9IFtdO1xuICBpZiAocG9zMiAhPT0gMCkgc3Vycm91bmRpbmdQb3MucHVzaChbcG9zMSwgcG9zMiAtIDFdKTtcbiAgaWYgKHBvczIgIT09IDkpIHN1cnJvdW5kaW5nUG9zLnB1c2goW3BvczEsIHBvczIgKyAxXSk7XG4gIGlmIChwb3MxICE9PSAwKSBzdXJyb3VuZGluZ1Bvcy5wdXNoKFtwb3MxIC0gMSwgcG9zMl0pO1xuICBpZiAocG9zMSAhPT0gOSkgc3Vycm91bmRpbmdQb3MucHVzaChbcG9zMSArIDEsIHBvczJdKTtcbiAgcmV0dXJuIHN1cnJvdW5kaW5nUG9zO1xufVxuXG5mdW5jdGlvbiBhaVBsYXkocmVwZWF0LCBwMSwgcDIsIGlzU3VuaywgcGxheWVyQm9hcmQsIGVuZW15Qm9hcmQpIHtcbiAgbGV0IHBvczsgbGV0IHBvczE7IGxldCBwb3MyO1xuICBpZiAoaXNTdW5rID09PSB0cnVlKSB7XG4gICAgbGFzdEhpdFBvcyA9IFtdO1xuICAgIGZpcnN0SGl0UG9zID0gW107XG4gICAgc2Vjb25kSGl0UG9zID0gW107XG4gICAgc3Vycm91bmRpbmdQb3MgPSBbXTtcbiAgICB3YXNIaXQgPSBmYWxzZTtcbiAgICBzdGF0dXMgPSBmYWxzZTtcbiAgICBhdHRhY2tEaXJlY3Rpb24gPSBcIlwiO1xuICB9XG4gIGlmICghc3RhdHVzICYmICF3YXNIaXQpIHtcbiAgICBwb3MgPSBwMS5yYW5kb21Qb3MoKTtcblxuICAgIHJldHVybiByZW5kZXJBdHRhY2tQMihwMSwgcDIsIHBvc1swXSwgcG9zWzFdLCBwbGF5ZXJCb2FyZCwgZW5lbXlCb2FyZCk7XG4gIH0gZWxzZSBpZiAoc2Vjb25kSGl0UG9zLmxlbmd0aCAhPT0gMCAmJiB3YXNIaXQgJiYgIXJlcGVhdCkge1xuICAgIGxldCBuZXdQb3M7XG4gICAgaWYgKGZpcnN0SGl0UG9zWzBdID09IHNlY29uZEhpdFBvc1swXSAtIDEpIG5ld1BvcyA9IGF0dGFja1Rvd2FyZHMoXCJkb3duXCIpO1xuICAgIGlmIChmaXJzdEhpdFBvc1swXSA9PSBzZWNvbmRIaXRQb3NbMF0gKyAxKSBuZXdQb3MgPSBhdHRhY2tUb3dhcmRzKFwidXBcIik7XG4gICAgaWYgKGZpcnN0SGl0UG9zWzFdID09IHNlY29uZEhpdFBvc1sxXSAtIDEpIG5ld1BvcyA9IGF0dGFja1Rvd2FyZHMoXCJyaWdodFwiKTtcbiAgICBpZiAoZmlyc3RIaXRQb3NbMV0gPT0gc2Vjb25kSGl0UG9zWzFdICsgMSkgbmV3UG9zID0gYXR0YWNrVG93YXJkcyhcImxlZnRcIik7XG4gICAgaWYgKG5ld1Bvc1swXSA+PSAwICYmIG5ld1Bvc1swXSA8PSA5ICYmIG5ld1Bvc1sxXSA+PSAwICYmIG5ld1Bvc1sxXSA8PSA5KVxuICAgICAgcmV0dXJuIHJlbmRlckF0dGFja1AyKHAxLCBwMiwgbmV3UG9zWzBdLCBuZXdQb3NbMV0sIHBsYXllckJvYXJkLCBlbmVteUJvYXJkKTtcbiAgfSBlbHNlIGlmIChzZWNvbmRIaXRQb3MubGVuZ3RoICE9PSAwICYmIHN0YXR1cyAmJiAhd2FzSGl0KSB7XG4gICAgbGFzdEhpdFBvcyA9IGZpcnN0SGl0UG9zO1xuICAgIHNlY29uZEhpdFBvcyA9IFtdO1xuICAgIGxldCBuZXdQb3M7XG4gICAgaWYgKGF0dGFja0RpcmVjdGlvbiA9PT0gXCJ1cFwiKSBuZXdQb3MgPSBhdHRhY2tUb3dhcmRzKFwiZG93blwiKTtcbiAgICBpZiAoYXR0YWNrRGlyZWN0aW9uID09PSBcImRvd25cIikgbmV3UG9zID0gYXR0YWNrVG93YXJkcyhcInVwXCIpO1xuICAgIGlmIChhdHRhY2tEaXJlY3Rpb24gPT09IFwicmlnaHRcIikgbmV3UG9zID0gYXR0YWNrVG93YXJkcyhcImxlZnRcIik7XG4gICAgaWYgKGF0dGFja0RpcmVjdGlvbiA9PT0gXCJsZWZ0XCIpIG5ld1BvcyA9IGF0dGFja1Rvd2FyZHMoXCJyaWdodFwiKTtcbiAgICBpZiAobmV3UG9zWzBdID49IDAgJiYgbmV3UG9zWzBdIDw9IDkgJiYgbmV3UG9zWzFdID49IDAgJiYgbmV3UG9zWzFdIDw9IDkpXG4gICAgICByZXR1cm4gcmVuZGVyQXR0YWNrUDIocDEsIHAyLCBuZXdQb3NbMF0sIG5ld1Bvc1sxXSwgcGxheWVyQm9hcmQsIGVuZW15Qm9hcmQpO1xuICB9IGVsc2UgaWYgKHN0YXR1cykge1xuICAgIGlmIChzdXJyb3VuZGluZ1Bvcy5sZW5ndGggPT0gMClcbiAgICAgIHJlZ2lzdGVyU3Vycm91bmRpbmdQb3MobGFzdEhpdFBvc1swXSwgbGFzdEhpdFBvc1sxXSk7XG4gICAgaWYgKHN1cnJvdW5kaW5nUG9zLmxlbmd0aCA9PSAwICYmIHN0YXR1cyA9PSB0cnVlKVxuICAgICAgcmVnaXN0ZXJTdXJyb3VuZGluZ1BvcyhmaXJzdEhpdFBvc1swXSwgZmlyc3RIaXRQb3NbMV0pO1xuICAgIGNvbnN0IG5ld1BvcyA9IHN1cnJvdW5kaW5nUG9zLnBvcCgpO1xuICAgIHJldHVybiByZW5kZXJBdHRhY2tQMihwMSwgcDIsIG5ld1Bvc1swXSwgbmV3UG9zWzFdLCBwbGF5ZXJCb2FyZCwgZW5lbXlCb2FyZCk7XG4gIH1cbn1cbi8vIGdldCBwb3Mgb2YgYXR0YWNrIGJhc2VkIG9uIGRpcmVjdGlvblxuZnVuY3Rpb24gYXR0YWNrVG93YXJkcyhkaXIpIHtcbiAgaWYgKGRpciA9PT0gXCJsZWZ0XCIpIHtcbiAgICBhdHRhY2tEaXJlY3Rpb24gPSBcImxlZnRcIjtcbiAgICByZXR1cm4gW2xhc3RIaXRQb3NbMF0sIGxhc3RIaXRQb3NbMV0gLSAxXTtcbiAgfVxuICBpZiAoZGlyID09PSBcInJpZ2h0XCIpIHtcbiAgICBhdHRhY2tEaXJlY3Rpb24gPSBcInJpZ2h0XCI7XG4gICAgcmV0dXJuIFtsYXN0SGl0UG9zWzBdLCBsYXN0SGl0UG9zWzFdICsgMV07XG4gIH1cbiAgaWYgKGRpciA9PT0gXCJkb3duXCIpIHtcbiAgICBhdHRhY2tEaXJlY3Rpb24gPSBcImRvd25cIjtcbiAgICByZXR1cm4gW2xhc3RIaXRQb3NbMF0gKyAxLCBsYXN0SGl0UG9zWzFdXTtcbiAgfVxuICBpZiAoZGlyID09PSBcInVwXCIpIHtcbiAgICBhdHRhY2tEaXJlY3Rpb24gPSBcInVwXCI7XG4gICAgcmV0dXJuIFtsYXN0SGl0UG9zWzBdIC0gMSwgbGFzdEhpdFBvc1sxXV07XG4gIH1cbn1cblxuZXhwb3J0IHsgYWlQbGF5LCBnZXRXYXNIaXQsIHNldFdhc0hpdCwgbGFzdEhpdFBvcywgc3Vycm91bmRpbmdQb3MgfTtcblxuIiwiaW1wb3J0IHtyZW5kZXJQbGF5ZXJTaGlwc30gZnJvbSAnLi9kb20nXG5pbXBvcnQgY3JlYXRlU2hpcCBmcm9tICcuL3NoaXAvc2hpcCdcblxubGV0IHRvdGFsQW1vdW50U2hpcHMgPSAwXG5cbmZ1bmN0aW9uIHNoaXBEcmFnKHNoaXBOYW1lLCBwbGF5ZXJCb2FyZCkge1xuICAgIGxldCBhbW91bnRMZWZ0ID0gMlxuXG4gICAgY29uc3Qgc2hpcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2hpcE5hbWUpXG4gICAgY29uc3QgYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKVxuICAgIGNvbnN0IGNlbGxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBsYXllci1ib2FyZCA+IC5jZWxsJylcbiAgICBjb25zdCBjaGlsZCA9IHNoaXAuY2hpbGROb2Rlc1xuICAgIGxldCBkcmFnU2VsZWN0aW9uO1xuICAgIGxldCBvZmZzZXQ7XG4gICAgbGV0IGRpciA9IFwiaG9yaXpvbnRhbFwiXG5cbiAgICBpZihjaGlsZFswXSkgY2hpbGRbMF0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsICgpID0+IChvZmZzZXQgPSAwKSlcbiAgICBpZihjaGlsZFsxXSkgY2hpbGRbMV0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsICgpID0+IChvZmZzZXQgPSAtMSkpXG4gICAgaWYoY2hpbGRbMl0pIGNoaWxkWzJdLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCAoKSA9PiAob2Zmc2V0ID0gLTIpKVxuICAgIGlmKGNoaWxkWzNdKSBjaGlsZFszXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgKCkgPT4gKG9mZnNldCA9IC0zKSlcblxuICAgIHNoaXAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiBjaGFuZ2VEaXIoZSkpXG5cbiAgICBzaGlwLmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnc3RhcnRcIiwgKGUpID0+IHtcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IDEwOyBpKyspe1xuICAgICAgICAgICAgcGxheWVyQm9hcmQuZ2FtZUJvYXJkW2ldLmZvckVhY2goKGUsIGopID0+IHtcbiAgICAgICAgICAgICAgICBpZihlLm9mZkxpbWl0cyB8fCBlLmlzU2hpcClcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAucGxheWVyLWJvYXJkID4gLmNlbGxbY29sdW1uPScke2UuY29sdW1ufSddW3Jvdz0nJHtlLnJvd30nXWApLmNsYXNzTGlzdC50b2dnbGUoXCJub3QtYXZhaWxhYmxlXCIpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgfSlcblxuICAgIHNoaXAuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2VuZCcsIChlLCBpKSA9PiB7XG5cbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5ub3QtYXZhaWxhYmxlXCIpLmZvckVhY2goKGUpID0+IGUuY2xhc3NMaXN0LnJlbW92ZShcIm5vdC1hdmFpbGFibGVcIikpXG5cbiAgICAgICAgaWYoZHJhZ1NlbGVjdGlvbiA9PT0gLTEpIHJldHVyblxuXG4gICAgICAgIGxldCBwb3MxO1xuICAgICAgICBsZXQgcG9zMjtcbiAgICAgICAgbGV0IHBvcyA9IGAkeyAgZHJhZ1NlbGVjdGlvbn1gXG5cbiAgICAgICAgaWYoZHJhZ1NlbGVjdGlvbiA8IDEwKSB7XG4gICAgICAgICAgICBwb3MxID0gMDtcbiAgICAgICAgICAgIHBvczIgPSBkcmFnU2VsZWN0aW9uXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwb3MgPSBwb3Muc3BsaXQoXCJcIilcbiAgICAgICAgICAgIHBvczEgPSBwb3NbMF0gKiAxXG4gICAgICAgICAgICBwb3MyID0gcG9zWzFdICogMVxuICAgICAgICB9XG5cbiAgICAgICAgaWYoZGlyID09PSBcImhvcml6b250YWxcIikgcG9zMiArPSBvZmZzZXRcbiAgICAgICAgaWYoZGlyID09PSBcInZlcnRpY2FsXCIpIHBvczEgKz0gb2Zmc2V0XG5cbiAgICAgICAgaWYocG9zMiA8IDApIHJldHVyblxuXG4gICAgICAgIGlmKHNoaXBOYW1lID09PSBcIi5zaGlwLTFcIil7XG4gICAgICAgICAgICBpZihwbGF5ZXJCb2FyZC5wbGFjZVNoaXAocG9zMiwgcG9zMSwgZGlyLCBjcmVhdGVTaGlwKDEpKSA9PT0gZmFsc2UpIHJldHVyblxuICAgICAgICAgICAgfVxuICAgICAgICBpZihzaGlwTmFtZSA9PT0gXCIuc2hpcC0yXCIpe1xuXG4gICAgICAgICAgICBpZihwbGF5ZXJCb2FyZC5wbGFjZVNoaXAocG9zMiwgcG9zMSwgZGlyLCBjcmVhdGVTaGlwKDIpKSA9PT0gZmFsc2UpIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIGlmKHNoaXBOYW1lID09PSBcIi5zaGlwLTNcIikge1xuXG4gICAgICAgICAgICBpZihwbGF5ZXJCb2FyZC5wbGFjZVNoaXAocG9zMiwgcG9zMSwgZGlyLCBjcmVhdGVTaGlwKDMpKSA9PT0gZmFsc2UpIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIGlmKHNoaXBOYW1lID09PSBcIi5zaGlwLTRcIikge1xuXG4gICAgICAgICAgICBpZihwbGF5ZXJCb2FyZC5wbGFjZVNoaXAocG9zMiwgcG9zMSwgZGlyLCBjcmVhdGVTaGlwKDQpKSA9PT0gZmFsc2UpIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgcmVuZGVyUGxheWVyU2hpcHMocGxheWVyQm9hcmQpXG5cbiAgICAgICAgYW1vdW50TGVmdCAtPSAxXG4gICAgICAgIHRvdGFsQW1vdW50U2hpcHMrK1xuXG4gICAgICAgIGlmKHRvdGFsQW1vdW50U2hpcHMgPT09IDgpIHBsYXllckJvYXJkLmlzU3RhcnRBbGxvd2VkLnNldCh0cnVlKVxuICAgICAgICBzaGlwLnBhcmVudE5vZGUuZmlyc3RDaGlsZC50ZXh0Q29udGVudCA9IGAke2Ftb3VudExlZnR9eGBcbiAgICAgICAgaWYoYW1vdW50TGVmdCA9PT0gMCkgc2hpcC5wYXJlbnROb2RlLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIiBcbiAgICAgICAgaWYoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNoaXAtY29udGFpbmVyJykuZm9yRWFjaCgoY29udGFpbmVyKSA9PiBjb250YWluZXIuc3R5bGUuZGlzcGxheSA9PT0gXCJub25lXCIpKSB7XG4gICAgICAgICAgICBwbGF5ZXJCb2FyZC5pc1N0YXJ0QWxsb3dlZC5zZXQodHJ1ZSlcbiAgICAgICAgICAgIC8vY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImJvZHkgPiBtYWluID4gZGl2LnBsYXllciA+IC5zaGlwc1wiKVxuICAgICAgICAgICAgLy9jb250YWluZXIuc3R5bGUuZGlzcGxheSA9XCJub25lXCJcbiAgICAgICAgfVxuICAgIH0pXG5cbiAgICBjZWxscy5mb3JFYWNoKChlLCBpKSA9PiB7XG4gICAgICAgIGUuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdvdmVyXCIsIChlKSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgICAgIGRyYWdTZWxlY3Rpb24gPSBpIFxuICAgICAgICB9KVxuICAgIH0pXG5cbiAgICBib2R5LmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnZW50ZXJcIiwgKCkgPT4ge1xuICAgICAgICBkcmFnU2VsZWN0aW9uID0gLTFcbiAgICB9KVxuXG4gICAgZnVuY3Rpb24gY2hhbmdlRGlyKGUpIHtcbiAgICAgICAgaWYoZGlyID09PSBcImhvcml6b250YWxcIikge1xuICAgICAgICAgICAgZGlyID0gXCJ2ZXJ0aWNhbFwiXG4gICAgICAgICAgICBlLnRhcmdldC5wYXJlbnROb2RlLmNsYXNzTGlzdC50b2dnbGUoXCJyb3RhdGVkXCIpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkaXIgPSBcImhvcml6b250YWxcIjtcbiAgICAgICAgICAgIGUudGFyZ2V0LnBhcmVudE5vZGUuY2xhc3NMaXN0LnRvZ2dsZShcInJvdGF0ZWRcIilcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IHtzaGlwRHJhZywgdG90YWxBbW91bnRTaGlwc30iLCJpbXBvcnQgY3JlYXRlR2FtZUJvYXJkIGZyb20gXCIuL2dhbWVib2FyZC9nYW1lYm9hcmRcIlxuaW1wb3J0IGNyZWF0ZVNoaXAgZnJvbSBcIi4vc2hpcC9zaGlwXCJcbmltcG9ydCB7IGFpUGxheSwgZ2V0V2FzSGl0LCBzZXRXYXNIaXQsIHN1cnJvdW5kaW5nUG9zIH0gZnJvbSBcIi4vYm90XCI7XG5pbXBvcnQgeyBzaGlwRHJhZyB9IGZyb20gXCIuL2RyYWctYW5kLWRyb3BcIjtcblxuY29uc3QgcmVuZGVyQXR0YWNrcyA9IChwbGF5ZXIsIGNvbHVtbiwgcm93LCBlbmVteUJvYXJkKSA9PiB7XG4gICAgY29uc3QgY2VsbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgIGAuJHtwbGF5ZXJ9LWJvYXJkID4gLmNlbGxbY29sdW1uPScke2NvbHVtbn0nXVtyb3c9JyR7cm93fSddYFxuICAgIClcblxuICAgIGlmKGVuZW15Qm9hcmQuZ2V0TG9jYXRpb24oY29sdW1uLCByb3cpPy5pc1NoaXApe1xuXG4gICAgICAgIGVuZW15Qm9hcmQuZ2V0TG9jYXRpb24oY29sdW1uLCByb3cpLmRvbVRhcmdldHMucHVzaChjZWxsKVxuICAgICAgICBpZihlbmVteUJvYXJkLmdldExvY2F0aW9uKGNvbHVtbiwgcm93KS5pc1N1bmsoKSl7XG5cbiAgICAgICAgICAgIGVuZW15Qm9hcmQuZ2V0TG9jYXRpb24oY29sdW1uLCByb3cpLmRvbVRhcmdldHMuZm9yRWFjaCgoZSkgPT4gZS5jbGFzc0xpc3QuYWRkKCdzdW5rJykpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBsb2NhdGlvbiA9IGVuZW15Qm9hcmQuZ2V0TG9jYXRpb24oY29sdW1uLCByb3cpXG4gICAgaWYgKGxvY2F0aW9uLmlzU2hpcCkge1xuICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoJ2hpdCcpXG4gICAgfSBlbHNlIHtcbiAgICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKCdtaXNzJylcbiAgICB9XG5cbn1cblxuY29uc3QgaGFuZGxlQXR0YWNrID0gKGNvbHVtbiwgcm93LCBlbmVteUJvYXJkLCBwbGF5ZXIpID0+XG4gICAgcGxheWVyLmF0dGFjayhjb2x1bW4sIHJvdywgZW5lbXlCb2FyZClcblxuY29uc3QgYXR0YWNrRW5lbXlDZWxsID0gYXN5bmMgKGNvbHVtbiwgcm93LCBlbmVteUJvYXJkLCBwbGF5ZXJCb2FyZCwgcGxheWVyLCBlbmVteSkgPT4ge1xuXG5cbiAgICBoYW5kbGVBdHRhY2soY29sdW1uLCByb3csIGVuZW15Qm9hcmQsIHBsYXllcilcbiAgICByZW5kZXJBdHRhY2tzKCdlbmVteScsIGNvbHVtbiwgcm93LCBlbmVteUJvYXJkKVxuICAgIGF3YWl0IGRlbGF5KDcwMClcbiAgICByZXR1cm4gZW5lbXlCb2FyZC5jaGVja0lmQWxsU2hpcHNIYXZlU3VuaygpID8gY2hlY2tJZkdhbWVPdmVyKHBsYXllckJvYXJkLCBlbmVteUJvYXJkKSA6IGFpUGxheShmYWxzZSwgcGxheWVyLCBlbmVteSwgdW5kZWZpbmVkLCBwbGF5ZXJCb2FyZCwgZW5lbXlCb2FyZClcbn1cblxuY29uc3QgaXNTcGFjZUFyb3VuZEhpdCA9IChjb2x1bW4sIHJvdywgcGxheWVyQm9hcmQpID0+IHtcblxuICAgIGNvbnN0IG5leHRDb2x1bW4gPSBwbGF5ZXJCb2FyZC5nZXRMb2NhdGlvbihjb2x1bW4gKyAxLCByb3cpXG4gICAgY29uc3QgcHJldmlvdXNDb2x1bW4gPSBwbGF5ZXJCb2FyZC5nZXRMb2NhdGlvbihjb2x1bW4gLSAxLCByb3cpXG4gICAgY29uc3QgbmV4dFJvdyA9IHBsYXllckJvYXJkLmdldExvY2F0aW9uKGNvbHVtbiwgcm93ICsgMSlcbiAgICBjb25zdCBwcmV2aW91c1JvdyA9IHBsYXllckJvYXJkLmdldExvY2F0aW9uKGNvbHVtbiwgcm93IC0gMSlcblxuICAgIGNvbnN0IHNwYWNlc0hpdCA9IFtdXG5cbiAgICBpZihuZXh0Q29sdW1uICYmICFuZXh0Q29sdW1uLmhhc0JlZW5IaXQpe1xuICAgICAgICBzcGFjZXNIaXQucHVzaChuZXh0Q29sdW1uKVxuICAgIH1cbiAgICBpZihwcmV2aW91c0NvbHVtbiAmJiAhcHJldmlvdXNDb2x1bW4uaGFzQmVlbkhpdCl7XG4gICAgICAgIHNwYWNlc0hpdC5wdXNoKHByZXZpb3VzQ29sdW1uKVxuICAgIH1cbiAgICBpZihuZXh0Um93ICYmICFuZXh0Um93Lmhhc0JlZW5IaXQpe1xuICAgICAgICBzcGFjZXNIaXQucHVzaChuZXh0Um93KVxuICAgIH1cbiAgICBpZihwcmV2aW91c1JvdyAmJiAhcHJldmlvdXNSb3cuaGFzQmVlbkhpdCl7XG4gICAgICAgIHNwYWNlc0hpdC5wdXNoKHByZXZpb3VzUm93KVxuICAgIH1cblxuICAgIHJldHVybiBzcGFjZXNIaXRcblxufVxuXG5jb25zdCByYW5kb21EaXJlY3Rpb25BdHRhY2sgPSAoY29sdW1uLCByb3csIHBsYXllckJvYXJkKSA9PiB7XG5cbiAgICBjb25zdCBzcGFjZXNIaXQgPSBpc1NwYWNlQXJvdW5kSGl0KGNvbHVtbiwgcm93LCBwbGF5ZXJCb2FyZClcblxuICAgIGNvbnN0IHJhbmRvbUluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogc3BhY2VzSGl0Lmxlbmd0aClcblxuICAgIGlmKCFzcGFjZXNIaXRbcmFuZG9tSW5kZXhdKSByZXR1cm4gcmFuZG9tRGlyZWN0aW9uQXR0YWNrKGNvbHVtbiwgcm93ICwgcGxheWVyQm9hcmQpXG5cbiAgICByZXR1cm4gc3BhY2VzSGl0W3JhbmRvbUluZGV4XVxufVxuXG5jb25zdCBpc1JhbmRvbUNvbHVtbkdyZWF0ZXJUaGFuQ3VycmVudENvbHVtbiA9IChjb2x1bW4sIHJhbmRvbUNvbHVtbikgPT4gXG4gICAgcmFuZG9tQ29sdW1uID4gY29sdW1uXG5cbmNvbnN0IGlzUmFuZG9tUm93R3JlYXRlclRoYW5DdXJyZW50Q29sdW1uID0gKHJvdywgcmFuZG9tUm93KSA9PiBcbiAgICByYW5kb21Sb3cgPiByb3dcblxuY29uc3QgbGlzdE9mUmFuZG9tQ29vcmRpbmF0ZXMgPSAoY29sdW1uLCByb3csIHBsYXllckJvYXJkKSA9PiB7XG5cbiAgICAgICAgY29uc3QgbG9jYXRpb25Qcm90b3R5cGUgPSB7XG4gICAgICAgICAgICBsb2NhdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGxheWVyQm9hcmQuZ2V0TG9jYXRpb24odGhpcy5jb2x1bW4sIHRoaXMucm93KVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdG9wID0gT2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKGxvY2F0aW9uUHJvdG90eXBlKSwge1xuICAgICAgICAgICAgY29sdW1uLFxuICAgICAgICAgICAgcm93OiByb3cgLSAxLFxuICAgICAgICB9KVxuICAgICAgICBjb25zdCBib3R0b20gPSBPYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUobG9jYXRpb25Qcm90b3R5cGUpLCB7XG4gICAgICAgICAgICBjb2x1bW4sXG4gICAgICAgICAgICByb3c6IHJvdyArIDEsXG4gICAgICAgIH0pXG4gICAgICAgIGNvbnN0IHJpZ2h0ID0gT2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKGxvY2F0aW9uUHJvdG90eXBlKSwge1xuICAgICAgICAgICAgY29sdW1uOiBjb2x1bW4gKyAxLFxuICAgICAgICAgICAgcm93LFxuICAgICAgICB9KVxuICAgICAgICBjb25zdCBsZWZ0ID0gT2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKGxvY2F0aW9uUHJvdG90eXBlKSwge1xuICAgICAgICAgICAgY29sdW1uOiBjb2x1bW4gLSAxLFxuICAgICAgICAgICAgcm93LFxuICAgICAgICB9KVxuICAgICAgICBjb25zdCBkaXJlY3Rpb25zID0gW11cblxuICAgICAgICBkaXJlY3Rpb25zLnB1c2godG9wKVxuICAgICAgICBkaXJlY3Rpb25zLnB1c2goYm90dG9tKVxuICAgICAgICBkaXJlY3Rpb25zLnB1c2gocmlnaHQpXG4gICAgICAgIGRpcmVjdGlvbnMucHVzaChsZWZ0KVxuXG4gICAgICAgIHJldHVybiBkaXJlY3Rpb25zXG59XG5cbi8vIHJlbmRlcnMgYXR0YWNrIGZvciBwMiAoQUkpXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVuZGVyQXR0YWNrUDIocDEsIHAyLCBwb3MxLCBwb3MyLCBwbGF5ZXJCb2FyZCwgZW5lbXlCb2FyZCkge1xuICBsZXQgaXNTdW5rID0gZmFsc2U7XG4gIGNvbnN0IGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgICBgLnBsYXllci1ib2FyZCA+IC5jZWxsW2NvbHVtbj0nJHtwb3MxfSddW3Jvdz0nJHtwb3MyfSddYFxuICAgIClcblxuICBjb25zdCBhdHRhY2sgPSBwMi5hdHRhY2socG9zMSwgcG9zMiwgcGxheWVyQm9hcmQpO1xuXG4gIGlmIChhdHRhY2sgPT09IFwiWW91IGhhdmUgYWxyZWFkeSBoaXQgdGhpcyBzcG90IVwiKSB7XG4gICAgY29uc3QgcmVwZWF0ID0gdHJ1ZTtcbiAgICBhaVBsYXkocmVwZWF0LCBwMSwgcDIsIHVuZGVmaW5lZCwgcGxheWVyQm9hcmQsIGVuZW15Qm9hcmQpO1xuICB9XG4gIGlmIChhdHRhY2sgPT09IFwiSXQncyBhIGhpdCFcIikge1xuICAgIHNldFdhc0hpdChmYWxzZSk7XG4gICAgZS5jbGFzc0xpc3QuYWRkKFwibWlzc1wiKTtcbiAgfVxuICBpZiAoYXR0YWNrID09PSBcIllvdSBoaXQgYSBzaGlwIVwiKSB7XG4gICAgc2V0V2FzSGl0KHRydWUsIHRydWUsIHBvczEsIHBvczIpO1xuICAgIGUuY2xhc3NMaXN0LmFkZChcImhpdFwiKTtcbiAgICBwbGF5ZXJCb2FyZC5nZXRMb2NhdGlvbihwb3MxLCBwb3MyKS5kb21UYXJnZXRzLnB1c2goZSlcbiAgICAvLyBpZiBzaGlwIGlzIHN1bmssIGFkZCBcInN1bmtcIiBjbGFzc1xuICAgIGlmIChwbGF5ZXJCb2FyZC5nZXRMb2NhdGlvbihwb3MxLCBwb3MyKS5pc1N1bmsoKSkge1xuICAgICAgcGxheWVyQm9hcmQuZ2V0TG9jYXRpb24ocG9zMSwgcG9zMikuZG9tVGFyZ2V0cy5mb3JFYWNoKChlKSA9PlxuICAgICAgICBlLmNsYXNzTGlzdC5hZGQoXCJzdW5rXCIpXG4gICAgICApO1xuICAgICAgaXNTdW5rID0gdHJ1ZTtcbiAgICAgIGlmIChwbGF5ZXJCb2FyZC5jaGVja0lmQWxsU2hpcHNIYXZlU3VuaygpID09PSB0cnVlKSByZXR1cm4gY2hlY2tJZkdhbWVPdmVyKHBsYXllckJvYXJkLCBlbmVteUJvYXJkKTtcbiAgICB9XG4gICAgYXdhaXQgZGVsYXkoMTAwMClcbiAgICByZXR1cm4gYWlQbGF5KGZhbHNlLCBwMSwgcDIsIGlzU3VuaywgcGxheWVyQm9hcmQsIGVuZW15Qm9hcmQpO1xuICB9XG5cbiAgLy8gcDEuaXNUdXJuKHAyKTsgLy8gZ2l2ZXMgdHVybiB0byBQMVxufVxuLy8gaHR0cHM6Ly9qc21hbmlmZXN0LmNvbS90aGUtcHVibGlzaC1zdWJzY3JpYmUtcGF0dGVybi1pbi1qYXZhc2NyaXB0L1xuXG5leHBvcnQgY29uc3QgcHViU3ViID0gKCkgPT4ge1xuICAgIGNvbnN0IHN1YnNjcmliZXJzID0ge31cblxuICAgIGZ1bmN0aW9uIHB1Ymxpc2goZXZlbnROYW1lLCBkYXRhKSB7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShzdWJzY3JpYmVyc1tldmVudE5hbWVdKSkge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgc3Vic2NyaWJlcnNbZXZlbnROYW1lXS5mb3JFYWNoKChjYWxsYmFjaykgPT4ge1xuICAgICAgICAgICAgY2FsbGJhY2soZGF0YSlcbiAgICAgICAgfSlcbiAgICB9XG4gICAgZnVuY3Rpb24gc3Vic2NyaWJlKGV2ZW50TmFtZSwgY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHN1YnNjcmliZVtldmVudE5hbWVdKSkge1xuICAgICAgICAgICAgc3Vic2NyaWJlcnNbZXZlbnROYW1lXSA9IFtdXG4gICAgICAgIH1cbiAgICAgICAgc3Vic2NyaWJlcnNbZXZlbnROYW1lXS5wdXNoKGNhbGxiYWNrKVxuICAgICAgICBjb25zdCBpbmRleCA9IHN1YnNjcmliZXJzW2V2ZW50TmFtZV0ubGVuZ3RoIC0gMVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB1bnN1YnNjcmliZSgpIHtcbiAgICAgICAgICAgICAgICBzdWJzY3JpYmVyc1tldmVudE5hbWVdLnNwbGljZShpbmRleCwgMSlcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBwdWJsaXNoLFxuICAgICAgICBzdWJzY3JpYmUsXG4gICAgfVxufVxuXG4vLyBjcmVhdGVzIGEgZGVsYXkgdG8gYmUgdXNlZCBpbiBhbiBhc3luYyBmdW5jdGlvblxuZnVuY3Rpb24gZGVsYXkoZGVsYXlJbk1zKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgcmVzb2x2ZSgyKTtcbiAgICB9LCBkZWxheUluTXMpO1xuICB9KTtcbn1cblxuZXhwb3J0IGNvbnN0IHJlbmRlclBsYXllclNoaXBzID0gKHsgZ2V0TG9jYXRpb24gfSkgPT4ge1xuICAgIGNvbnN0IHBsYXllckJvYXJkQXJlYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5wbGF5ZXItYm9hcmQnKVxuXG4gICAgZm9yIChsZXQgY29sdW1uID0gMDsgY29sdW1uIDwgMTA7IGNvbHVtbiArPSAxKSB7XG4gICAgICAgIGZvciAobGV0IHJvdyA9IDA7IHJvdyA8IDEwOyByb3cgKz0gMSkge1xuICAgICAgICAgICAgY29uc3QgY2VsbCA9IHBsYXllckJvYXJkQXJlYS5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAgICAgICAgIGAuY2VsbDpudGgtY2hpbGQoJHtyb3cgKiAxMCArIGNvbHVtbiArIDF9KWBcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIGNlbGwuc2V0QXR0cmlidXRlKCdjb2x1bW4nLCBjb2x1bW4pXG4gICAgICAgICAgICBjZWxsLnNldEF0dHJpYnV0ZSgncm93Jywgcm93KVxuICAgICAgICAgICAgY29uc3QgbG9jYXRpb24gPSBnZXRMb2NhdGlvbihjb2x1bW4sIHJvdylcbiAgICAgICAgICAgIGlmIChsb2NhdGlvbi5pc1NoaXApIHtcbiAgICAgICAgICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoJ3NoaXAnKVxuICAgICAgICAgICAgICAgIGNlbGwuc2V0QXR0cmlidXRlKCdzaGlwLW5hbWUnLCBsb2NhdGlvbi5nZXROYW1lKCkpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmNvbnN0IGNoZWNrSWZHYW1lT3ZlciA9IChwbGF5ZXJCb2FyZCwgZW5lbXlCb2FyZCkgPT4ge1xuICAgIGlmIChwbGF5ZXJCb2FyZC5jaGVja0lmQWxsU2hpcHNIYXZlU3VuaygpKSB7XG4gICAgICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsJylcbiAgICAgICAgY29uc3QgbW9kYWxXaW5uZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwtY29udGVudCA+IHAnKVxuICAgICAgICBjb25zdCBwbGF5QWdhaW5CdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAgICAgJy5tb2RhbC1jb250ZW50ID4gYnV0dG9uJ1xuICAgICAgICApXG5cbiAgICAgICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9ICdibG9jaydcbiAgICAgICAgcGxheUFnYWluQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKClcbiAgICAgICAgfSlcblxuICAgICAgICBtb2RhbFdpbm5lci50ZXh0Q29udGVudCA9ICdZb3UgbG9zZSEnXG4gICAgfVxuICAgIGlmIChlbmVteUJvYXJkLmNoZWNrSWZBbGxTaGlwc0hhdmVTdW5rKCkpIHtcbiAgICAgICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwnKVxuICAgICAgICBjb25zdCBtb2RhbFdpbm5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC1jb250ZW50ID4gcCcpXG4gICAgICAgIGNvbnN0IHBsYXlBZ2FpbkJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgICAgICAnLm1vZGFsLWNvbnRlbnQgPiBidXR0b24nXG4gICAgICAgIClcblxuICAgICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJ1xuICAgICAgICBtb2RhbFdpbm5lci50ZXh0Q29udGVudCA9ICdZb3Ugd2luISdcbiAgICAgICAgcGxheUFnYWluQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKClcbiAgICAgICAgfSlcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVEcmFnQW5kRHJvcEZsZWV0KHBsYXllckJvYXJkKSB7XG4gICAgcmVuZGVyU2hpcFNlbGVjdCgxLCAxKVxuICAgIHJlbmRlclNoaXBTZWxlY3QoMiwgMilcbiAgICByZW5kZXJTaGlwU2VsZWN0KDMsIDMpXG4gICAgcmVuZGVyU2hpcFNlbGVjdCg0LCA0KVxuXG4gICAgZnVuY3Rpb24gcmVuZGVyU2hpcFNlbGVjdChpLCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImJvZHkgPiBtYWluID4gZGl2LnBsYXllciA+IGRpdjpudGgtY2hpbGQoNClcIilcbiAgICAgICAgY29uc3Qgc2hpcENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgICAgIHNoaXBDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnc2hpcC1jb250YWluZXInKVxuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoc2hpcENvbnRhaW5lcilcblxuICAgICAgICBjb25zdCBzaGlwSW5mbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpXG4gICAgICAgIHNoaXBJbmZvLmNsYXNzTGlzdC5hZGQoYGluZm8tJHtpfWApXG4gICAgICAgIHNoaXBJbmZvLnRleHRDb250ZW50ID0gXCIyeFwiXG4gICAgICAgIHNoaXBDb250YWluZXIuYXBwZW5kQ2hpbGQoc2hpcEluZm8pXG5cbiAgICAgICAgY29uc3Qgc2hpcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIilcbiAgICAgICAgc2hpcC5jbGFzc0xpc3QuYWRkKFwic2hpcFwiKVxuICAgICAgICBzaGlwLmNsYXNzTGlzdC5hZGQoYHNoaXAtJHtpfWApXG4gICAgICAgIHNoaXAuc2V0QXR0cmlidXRlKFwiZHJhZ2dhYmxlXCIsIFwidHJ1ZVwiKVxuICAgICAgICBzaGlwQ29udGFpbmVyLmFwcGVuZENoaWxkKHNoaXApXG5cbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBjZWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKVxuICAgICAgICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKFwiY2VsbFwiKVxuICAgICAgICAgICAgc2hpcC5hcHBlbmRDaGlsZChjZWxsKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZm9yKGxldCBpID0gMTsgaSA8IDU7IGkrKykgc2hpcERyYWcoYC5zaGlwLSR7aX1gLCBwbGF5ZXJCb2FyZClcbn1cblxuZXhwb3J0IGNvbnN0IGFkZExpc3RlbmVyc1RvRW5lbXlCb2FyZCA9IChcbiAgICBwbGF5ZXJCb2FyZCxcbiAgICBlbmVteUJvYXJkLFxuICAgIHBsYXllcixcbiAgICBlbmVteSxcbiAgICBwc1xuKSA9PiB7XG4gICAgY29uc3QgZW5lbXlCb2FyZEFyZWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdkaXYuZW5lbXktYm9hcmQnKVxuXG4gICAgZm9yIChsZXQgY29sdW1uID0gMDsgY29sdW1uIDwgMTA7IGNvbHVtbiArPSAxKSB7XG4gICAgICAgIGZvciAobGV0IHJvdyA9IDA7IHJvdyA8IDEwOyByb3cgKz0gMSkge1xuICAgICAgICAgICAgLy8gQ3JlZGl0aW5nIGZvcm11bGEgdG8gY2FsY3VsYXRlIG50aC1jaGlsZCB1c2luZyBuZXN0ZWQgbG9vcDogaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvODg3MjY2Mi9tYXRoLXRvLWRldGVybWluZS1pdGVtLWluZGV4LWJhc2VkLW9uLWNvbC1yb3ctc2VsZWN0aW9uLWluLWdyaWRcbiAgICAgICAgICAgIGNvbnN0IGNlbGwgPSBlbmVteUJvYXJkQXJlYS5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAgICAgICAgIGAuY2VsbDpudGgtY2hpbGQoJHtyb3cgKiAxMCArIGNvbHVtbiArIDF9KWBcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIGNlbGwuc2V0QXR0cmlidXRlKCdjb2x1bW4nLCBjb2x1bW4pXG4gICAgICAgICAgICBjZWxsLnNldEF0dHJpYnV0ZSgncm93Jywgcm93KVxuXG4gICAgICAgICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgICAgICAgJ2NsaWNrJyxcbiAgICAgICAgICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHBzLnB1Ymxpc2goJ2NsaWNrJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbixcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllckJvYXJkLFxuICAgICAgICAgICAgICAgICAgICAgICAgZW5lbXlCb2FyZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllcixcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZW15LFxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgeyBvbmNlOiB0cnVlIH1cbiAgICAgICAgICAgIClcbiAgICAgICAgfVxuICAgIH1cbn1cblxuY29uc3QgY2xlYXJCb2FyZERPTSA9ICgpID0+IHtcbiAgICBjb25zdCBjZWxscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wbGF5ZXItYm9hcmQgPiAuY2VsbCcpXG5cbiAgICBjZWxscy5mb3JFYWNoKGNlbGwgPT4ge1xuICAgICAgICBjZWxsLmNsYXNzTGlzdC5yZW1vdmUoJ3NoaXAnKVxuICAgICAgICBjZWxsLmNsYXNzTGlzdC5yZW1vdmUoJ2hpdCcpXG4gICAgICAgIGNlbGwuY2xhc3NMaXN0LnJlbW92ZSgnbWlzcycpXG4gICAgfSlcblxuXG5cbn1cblxuZXhwb3J0IGNvbnN0IHJhbmRvbWl6ZUxpc3RlbmVyID0gKGdhbWVCb2FyZCkgPT4ge1xuXG4gICAgZ2FtZUJvYXJkLmNsZWFyQm9hcmQoKVxuICAgIGNsZWFyQm9hcmRET00oKVxuXG4gICAgY29uc3QgcmFuZG9tUG9zc2liaWxpdHkgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA0KVxuICAgIHN3aXRjaChyYW5kb21Qb3NzaWJpbGl0eSl7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgZ2FtZUJvYXJkLnBsYWNlU2hpcCg5LCAxLCAndmVydGljYWwnLCBjcmVhdGVTaGlwKDUpKVxuICAgICAgICBnYW1lQm9hcmQucGxhY2VTaGlwKDAsIDMsICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCgzKSlcbiAgICAgICAgZ2FtZUJvYXJkLnBsYWNlU2hpcCgzLCA2LCAnaG9yaXpvbnRhbCcsIGNyZWF0ZVNoaXAoMikpXG4gICAgICAgIGdhbWVCb2FyZC5wbGFjZVNoaXAoNiwgNSwgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDMpKVxuICAgICAgICBnYW1lQm9hcmQucGxhY2VTaGlwKDMsIDksICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCg0KSlcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgIGdhbWVCb2FyZC5wbGFjZVNoaXAoMCwgMiwgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDUpKVxuICAgICAgICBnYW1lQm9hcmQucGxhY2VTaGlwKDQsIDUsICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCgzKSlcbiAgICAgICAgZ2FtZUJvYXJkLnBsYWNlU2hpcCg4LCA3LCAnaG9yaXpvbnRhbCcsIGNyZWF0ZVNoaXAoMikpXG4gICAgICAgIGdhbWVCb2FyZC5wbGFjZVNoaXAoNSwgOSwgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDMpKVxuICAgICAgICBnYW1lQm9hcmQucGxhY2VTaGlwKDYsIDMsICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCg0KSlcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgIGdhbWVCb2FyZC5wbGFjZVNoaXAoNSwgMSwgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDUpKVxuICAgICAgICBnYW1lQm9hcmQucGxhY2VTaGlwKDMsIDMsICd2ZXJ0aWNhbCcsIGNyZWF0ZVNoaXAoMykpXG4gICAgICAgIGdhbWVCb2FyZC5wbGFjZVNoaXAoMCwgMCwgJ3ZlcnRpY2FsJywgY3JlYXRlU2hpcCgyKSlcbiAgICAgICAgZ2FtZUJvYXJkLnBsYWNlU2hpcCg2LCA1LCAnaG9yaXpvbnRhbCcsIGNyZWF0ZVNoaXAoMykpXG4gICAgICAgIGdhbWVCb2FyZC5wbGFjZVNoaXAoNSwgOSwgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDQpKVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBnYW1lQm9hcmQucGxhY2VTaGlwKDAsIDAsICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCg1KSlcbiAgICAgICAgICAgIGdhbWVCb2FyZC5wbGFjZVNoaXAoMywgNCwgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDMpKVxuICAgICAgICAgICAgZ2FtZUJvYXJkLnBsYWNlU2hpcCg2LCA3LCAnaG9yaXpvbnRhbCcsIGNyZWF0ZVNoaXAoMikpXG4gICAgICAgICAgICBnYW1lQm9hcmQucGxhY2VTaGlwKDksIDEsICd2ZXJ0aWNhbCcsIGNyZWF0ZVNoaXAoMykpXG4gICAgICAgICAgICBnYW1lQm9hcmQucGxhY2VTaGlwKDUsIDksICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCg0KSlcbiAgICAgICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIHJlbmRlclBsYXllclNoaXBzKGdhbWVCb2FyZClcblxufVxuXG5leHBvcnQgY29uc3QgYXR0YWNrID0gKHtcbiAgICBjZWxsLFxuICAgIGNvbHVtbixcbiAgICByb3csXG4gICAgcGxheWVyQm9hcmQsXG4gICAgZW5lbXlCb2FyZCxcbiAgICBwbGF5ZXIsXG4gICAgZW5lbXksXG59KSA9PiB7XG5cbiAgICAvLyBodW1hbiBwbGF5ZXIgYXR0YWNraW5nIGNvbXB1dGVyXG4gICAgYXR0YWNrRW5lbXlDZWxsKGNvbHVtbiwgcm93LCBlbmVteUJvYXJkLCBwbGF5ZXJCb2FyZCwgcGxheWVyLCBlbmVteSlcbiAgICAvLyBjb21wdXRlciBhdHRhY2tpbmcgaHVtYW5cbiAgICAvLyBjb25zdCB7IGVsZW1lbnRDb2x1bW4sIGVsZW1lbnRSb3cgfSA9IHBsYXllckJvYXJkLm1ha2VSYW5kb21Db29yZGluYXRlcygpXG4gICAgLy8gcmVuZGVyQXR0YWNrUDIocGxheWVyLCBlbmVteSwgZWxlbWVudENvbHVtbiwgZWxlbWVudFJvdywgcGxheWVyQm9hcmQsIGVuZW15Qm9hcmQpXG4gICAgLy8gYWlQbGF5KGZhbHNlLCBwbGF5ZXIsIGVuZW15LCB1bmRlZmluZWQsIHBsYXllckJvYXJkLCBlbmVteUJvYXJkKVxufVxuIiwiaW1wb3J0IHsgYWRkTGlzdGVuZXJzVG9FbmVteUJvYXJkLCByZW5kZXJQbGF5ZXJTaGlwcyxwdWJTdWIsIHJhbmRvbWl6ZUxpc3RlbmVyLCBhdHRhY2ssIGNyZWF0ZURyYWdBbmREcm9wRmxlZXR9IGZyb20gJy4vZG9tJ1xuXG5pbXBvcnQgY3JlYXRlR2FtZUJvYXJkIGZyb20gJy4vZ2FtZWJvYXJkL2dhbWVib2FyZCdcbmltcG9ydCBjcmVhdGVTaGlwIGZyb20gJy4vc2hpcC9zaGlwJ1xuaW1wb3J0IGNyZWF0ZVBsYXllciBmcm9tICcuL3BsYXllci9wbGF5ZXInXG5cbmNvbnN0IHBsYXllckJvYXJkID0gY3JlYXRlR2FtZUJvYXJkKClcbmNvbnN0IGVuZW15Qm9hcmQgPSBjcmVhdGVHYW1lQm9hcmQoKVxuY29uc3QgcGxheWVyID0gY3JlYXRlUGxheWVyKClcbmNvbnN0IGNvbXB1dGVyID0gY3JlYXRlUGxheWVyKClcblxuY29uc3QgcmFuZG9taXplQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYnV0dG9uLnJhbmRvbWl6ZScpXG5cbnJhbmRvbWl6ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcblxuICAgIHJhbmRvbWl6ZUxpc3RlbmVyKGVuZW15Qm9hcmQpXG59KVxuXG5jcmVhdGVEcmFnQW5kRHJvcEZsZWV0KHBsYXllckJvYXJkKVxuXG5lbmVteUJvYXJkLnBsYWNlU2hpcCgwLCAwLCAnaG9yaXpvbnRhbCcsIGNyZWF0ZVNoaXAoNSkpXG5lbmVteUJvYXJkLnBsYWNlU2hpcCgzLCA0LCAnaG9yaXpvbnRhbCcsIGNyZWF0ZVNoaXAoMykpXG5lbmVteUJvYXJkLnBsYWNlU2hpcCg2LCA3LCAnaG9yaXpvbnRhbCcsIGNyZWF0ZVNoaXAoMikpXG5lbmVteUJvYXJkLnBsYWNlU2hpcCg5LCAxLCAndmVydGljYWwnLCBjcmVhdGVTaGlwKDMpKVxuZW5lbXlCb2FyZC5wbGFjZVNoaXAoNSwgOSwgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDQpKVxuXG5jb25zdCBwcyA9IHB1YlN1YigpXG5cbmFkZExpc3RlbmVyc1RvRW5lbXlCb2FyZChwbGF5ZXJCb2FyZCwgZW5lbXlCb2FyZCwgcGxheWVyLCBjb21wdXRlciwgcHMpXG5cbnBzLnN1YnNjcmliZSgnY2xpY2snLCBhdHRhY2spXG5cbnJlbmRlclBsYXllclNoaXBzKHBsYXllckJvYXJkKSJdLCJuYW1lcyI6WyJjcmVhdGVTaGlwIiwibW9kdWxlIiwiZXhwb3J0cyIsImVtcHR5Q2VsbCIsImhhc0JlZW5IaXQiLCJpc1NoaXAiLCJvZmZMaW1pdHMiLCJpc1N0YXJ0QWxsb3dlZCIsImluaXRpYWxpemVCb2FyZCIsImdhbWVCb2FyZCIsIkFycmF5IiwiZmlsbCIsIm1hcCIsImNvbHVtbiIsInJvdyIsInNoaXBzIiwiZ2V0TG9jYXRpb24iLCJzZXRMb2NhdGlvbiIsInNoaXAiLCJPYmplY3QiLCJhc3NpZ24iLCJjcmVhdGVPZmZMaW1pdExvY2F0aW9uIiwidW5kZWZpbmVkIiwibG9jYXRpb24iLCJhZGRPZmZMaW1pdEFyZWFGb3JTaGlwcyIsImNoZWNrSWZMb2NhdGlvbklzQVNoaXBPck9mZkxpbWl0cyIsImRpcmVjdGlvbiIsInNoaXBMZW5ndGgiLCJpIiwicGxhY2VTaGlwIiwiZ2V0TGVuZ3RoIiwibGVuZ3RoIiwiY2hlY2tJZlJvd0Nvb3JkaW5hdGVJc1ZhbGlkIiwicG9zaXRpb24iLCJhZGRPZmZMaW1pdEFyZWFGb3JWZXJ0aWNhbGx5UG9zaXRpb25lZFNoaXAiLCJjaGVja0lmQ29sdW1uQ29vcmRpbmF0ZUlzVmFsaWQiLCJhZGRPZmZMaW1pdEFyZWFGb3JIb3Jpem9udGFsbHlQb3NpdGlvbmVkU2hpcCIsIm1ha2VSYW5kb21Db29yZGluYXRlcyIsInJhbmRvbURpcmVjdGlvbiIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInJhbmRvbUxvY2F0aW9uIiwiZmxhdHRlbmVkR2FtZUJvYXJkIiwiZmxhdCIsImZvckVhY2giLCJlbGVtZW50IiwiYXZhaWxhYmlsaXR5IiwiYXZhaWxhYmxlU3BhY2VzIiwiZWxlbWVudENvbHVtbiIsImVsZW1lbnRSb3ciLCJyYW5kb21TaGlwIiwicG9zMSIsInBvczIiLCJkaXIiLCJyb3VuZCIsImNsZWFyQm9hcmQiLCJjaGVja0lmT2ZmTGltaXRab25lV2FzQ29ycmVjdGx5SW1wbGVtZW50ZWQiLCJmaWx0ZXIiLCJyZWNlaXZlQXR0YWNrIiwiY2hlY2tJZkFsbFNoaXBzSGF2ZVN1bmsiLCJoYXZlQWxsU2hpcHNTdW5rIiwiaiIsImlzU3VuayIsInJhbmRvbWx5UGxhY2VTaGlwcyIsInNoaXBEZXRhaWxzIiwicmFuZG9tQ29sdW1uIiwicmFuZG9tUm93IiwicHVzaCIsInJhbmRvbUZsZWV0IiwiZ2V0Iiwic2V0IiwidmFsdWUiLCJuYW1lIiwiZ2V0TmFtZSIsImF0dGFjayIsImdldFN0YXR1cyIsImluY2x1ZGVzIiwiaGl0IiwicmFuZG9tUG9zIiwic3RhdHVzIiwiZXZlcnkiLCJkb21UYXJnZXRzIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsIm4iLCJnZXR0ZXIiLCJfX2VzTW9kdWxlIiwiZCIsImEiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJhdHRhY2tEaXJlY3Rpb24iLCJ3YXNIaXQiLCJsYXN0SGl0UG9zIiwiZmlyc3RIaXRQb3MiLCJzZWNvbmRIaXRQb3MiLCJzdXJyb3VuZGluZ1BvcyIsInNldFdhc0hpdCIsInN0YXQiLCJyZWdpc3RlclN1cnJvdW5kaW5nUG9zIiwiYWlQbGF5IiwicmVwZWF0IiwicDEiLCJwMiIsInBsYXllckJvYXJkIiwiZW5lbXlCb2FyZCIsInBvcyIsInJlbmRlckF0dGFja1AyIiwibmV3UG9zIiwiYXR0YWNrVG93YXJkcyIsInBvcCIsInRvdGFsQW1vdW50U2hpcHMiLCJzaGlwRHJhZyIsInNoaXBOYW1lIiwiYW1vdW50TGVmdCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImJvZHkiLCJjZWxscyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjaGlsZCIsImNoaWxkTm9kZXMiLCJkcmFnU2VsZWN0aW9uIiwib2Zmc2V0IiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJ0YXJnZXQiLCJwYXJlbnROb2RlIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiY2hhbmdlRGlyIiwicmVtb3ZlIiwic3BsaXQiLCJyZW5kZXJQbGF5ZXJTaGlwcyIsImZpcnN0Q2hpbGQiLCJ0ZXh0Q29udGVudCIsInN0eWxlIiwiZGlzcGxheSIsImNvbnRhaW5lciIsInByZXZlbnREZWZhdWx0IiwiYXN5bmMiLCJhZGQiLCJjaGVja0lmR2FtZU92ZXIiLCJkZWxheSIsImRlbGF5SW5NcyIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsInBsYXllckJvYXJkQXJlYSIsImNlbGwiLCJzZXRBdHRyaWJ1dGUiLCJtb2RhbCIsIm1vZGFsV2lubmVyIiwicGxheUFnYWluQnV0dG9uIiwicmVsb2FkIiwiY29tcHV0ZXIiLCJyYW5kb21pemVMaXN0ZW5lciIsInJlbmRlclNoaXBTZWxlY3QiLCJzaGlwQ29udGFpbmVyIiwiY3JlYXRlRWxlbWVudCIsImFwcGVuZENoaWxkIiwic2hpcEluZm8iLCJjcmVhdGVEcmFnQW5kRHJvcEZsZWV0IiwicHMiLCJzdWJzY3JpYmVycyIsInB1Ymxpc2giLCJldmVudE5hbWUiLCJkYXRhIiwiaXNBcnJheSIsImNhbGxiYWNrIiwic3Vic2NyaWJlIiwiaW5kZXgiLCJ1bnN1YnNjcmliZSIsInNwbGljZSIsInB1YlN1YiIsInBsYXllciIsImVuZW15IiwiZW5lbXlCb2FyZEFyZWEiLCJvbmNlIiwiYWRkTGlzdGVuZXJzVG9FbmVteUJvYXJkIiwiaGFuZGxlQXR0YWNrIiwicmVuZGVyQXR0YWNrcyIsImF0dGFja0VuZW15Q2VsbCJdLCJzb3VyY2VSb290IjoiIn0=