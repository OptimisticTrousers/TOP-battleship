(()=>{var t={653:(t,e,r)=>{const o=r(585),n=()=>{const t={hasBeenHit:!1,isShip:!1,offLimits:!1},e=Array(10).fill(JSON.parse(JSON.stringify(t))).map((()=>Array(10).fill(JSON.parse(JSON.stringify(t))))),r=[o(5),o(4),o(3),o(3),o(2)],n=(t,r)=>e?.[t]?.[r],i=(t,r,o,i)=>{const a=i.getLength();if("vertical"===o){if(r+a<=10){for(let o=0;o<a;o+=1)e[t][r+o]=i;return!0}}else if("horizontal"===o&&t+a<=10){for(let o=0;o<a;o+=1)e[t+o][r]=i;return((t,r,o)=>{const i=n(t+o,r);i&&console.log(i),console.log(e)})(t,r,a),!0}return!1},a=()=>{const t=0===Math.floor(2*Math.random())?"vertical":"horizontal";return{randomColumn:Math.floor(10*Math.random()),randomRow:Math.floor(10*Math.random()),randomDirection:t}};return{getShotLocation:n,receiveAttack:(t,r)=>{e[t][r].hasBeenHit=!0},checkIfAllShipsHaveSunk:()=>e.flat().every((t=>!1===t.isShip||!0===t.isShip&&!0===t.hasBeenHit&&t.getStatus().every((t=>"hit"===t)))),placeShip:i,randomlyPlaceShips:()=>{const t=[];for(let e=0;e<r.length;e+=1){const{randomColumn:o,randomRow:s,randomDirection:l}=a(),c=r[e],h=n(o,s);!0===h.isShip||!0===h.offLimits||!1===i(o,s,l,c)?e-=1:t.push({randomColumn:o,randomRow:s,randomDirection:l})}return t}}};n().placeShip(0,0,"horizontal",o(3)),t.exports=n},585:t=>{t.exports=t=>{const e=Array(t).fill("unhit");return{getLength:()=>e.length,isSunk:()=>e.every((t=>"hit"===t)),hit:r=>{r<t&&(e[r]="hit")},getStatus:()=>e,isShip:!0}}}},e={};function r(o){var n=e[o];if(void 0!==n)return n.exports;var i=e[o]={exports:{}};return t[o](i,i.exports,r),i.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var o in e)r.o(e,o)&&!r.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";var t=r(653);const e=r.n(t)()();e.randomlyPlaceShips(),(({getShotLocation:t})=>{const e=document.querySelector("div.player-board");for(let r=0;r<10;r+=1)for(let o=0;o<10;o+=1){const n=document.createElement("div");n.classList.add("cell"),t(o,r).isShip&&n.classList.add("ship"),e.appendChild(n)}})(e)})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YmF0dGxlc2hpcC8uL3NyYy9nYW1lYm9hcmQvZ2FtZWJvYXJkLmpzIiwid2VicGFjazovL3RvcC1iYXR0bGVzaGlwLy4vc3JjL3NoaXAvc2hpcC5qcyIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC8uL3NyYy9kb20uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLWV4cHJlc3Npb25zICovXG5jb25zdCBjcmVhdGVTaGlwID0gcmVxdWlyZSgnLi4vc2hpcC9zaGlwJylcblxuLyogZXNsaW50LWRpc2FibGUgbm8tcGFyYW0tcmVhc3NpZ24gKi9cbmNvbnN0IGNyZWF0ZUdhbWVCb2FyZCA9ICgpID0+IHtcbiAgICBjb25zdCBlbXB0eUNlbGwgPSB7IGhhc0JlZW5IaXQ6IGZhbHNlLCBpc1NoaXA6IGZhbHNlLCBvZmZMaW1pdHM6IGZhbHNlIH1cbiAgICBjb25zdCBnYW1lQm9hcmQgPSBBcnJheSgxMClcbiAgICAgICAgLmZpbGwoSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlbXB0eUNlbGwpKSlcbiAgICAgICAgLm1hcCgoKSA9PiBBcnJheSgxMCkuZmlsbChKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGVtcHR5Q2VsbCkpKSlcblxuICAgIGNvbnN0IHNoaXBzID0gW1xuICAgICAgICBjcmVhdGVTaGlwKDUpLFxuICAgICAgICBjcmVhdGVTaGlwKDQpLFxuICAgICAgICBjcmVhdGVTaGlwKDMpLFxuICAgICAgICBjcmVhdGVTaGlwKDMpLFxuICAgICAgICBjcmVhdGVTaGlwKDIpLFxuICAgIF1cblxuICAgIGNvbnN0IGNoZWNrSWZBbGxTaGlwc0hhdmVTdW5rID0gKCkgPT5cbiAgICAgICAgZ2FtZUJvYXJkLmZsYXQoKS5ldmVyeShcbiAgICAgICAgICAgIChwb3NpdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChwb3NpdGlvbi5pc1NoaXAgPT09IGZhbHNlKSByZXR1cm4gdHJ1ZVxuICAgICAgICAgICAgICAgIGlmIChwb3NpdGlvbi5pc1NoaXAgPT09IHRydWUgJiYgcG9zaXRpb24uaGFzQmVlbkhpdCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcG9zaXRpb24uZ2V0U3RhdHVzKCkuZXZlcnkoKHVuaXQpID0+IHVuaXQgPT09ICdoaXQnKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gKHBvc2l0aW9uLmlzU2hpcCA9PT0gZmFsc2UpIHx8XG4gICAgICAgICAgICAvLyAocG9zaXRpb24uaXNTaGlwID09PSB0cnVlICYmIHBvc2l0aW9uLmhhc0JlZW5IaXQgPT09IHRydWUpXG4gICAgICAgIClcblxuICAgIGNvbnN0IGdldFNob3RMb2NhdGlvbiA9IChjb2x1bW4sIHJvdykgPT4gZ2FtZUJvYXJkPy5bY29sdW1uXT8uW3Jvd11cblxuICAgIGNvbnN0IGFkZE9mZkxpbWl0QXJlYUZvclNoaXBzID0gKGNvbHVtbiwgcm93LCBzaGlwTGVuZ3RoKSA9PiB7XG4gICAgICAgIGNvbnN0IHRvcCA9IGdhbWVCb2FyZD8uW2NvbHVtbl0/Lltyb3cgLSAxXVxuICAgICAgICBjb25zdCBsZWZ0ID0gZ2FtZUJvYXJkPy5bY29sdW1uIC0gMV0/Lltyb3ddXG4gICAgICAgIGNvbnN0IHRvcFJpZ2h0ID0gZ2FtZUJvYXJkPy5bY29sdW1uICsgMV0/Lltyb3cgLSAxXVxuICAgICAgICBjb25zdCB0b3BMZWZ0ID0gZ2FtZUJvYXJkPy5bY29sdW1uIC0gMV0/Lltyb3cgLSAxXVxuICAgICAgICBjb25zdCBib3R0b21SaWdodCA9IGdhbWVCb2FyZD8uW2NvbHVtbiArIDFdPy5bcm93ICsgc2hpcExlbmd0aF1cbiAgICAgICAgY29uc3QgbGVmdFJpZ2h0ID0gZ2FtZUJvYXJkPy5bY29sdW1uIC0gMV0/Lltyb3cgKyBzaGlwTGVuZ3RoXVxuXG4gICAgICAgIGlmICh0b3ApIHtcbiAgICAgICAgICAgIHRvcC5vZmZMaW1pdHMgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxlZnQpIHtcbiAgICAgICAgICAgIGxlZnQub2ZmTGltaXRzID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGlmICh0b3BSaWdodCkge1xuICAgICAgICAgICAgdG9wUmlnaHQub2ZmTGltaXRzID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGlmICh0b3BMZWZ0KSB7XG4gICAgICAgICAgICB0b3BMZWZ0Lm9mZkxpbWl0cyA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBpZiAoYm90dG9tUmlnaHQpIHtcbiAgICAgICAgICAgIGJvdHRvbVJpZ2h0Lm9mZkxpbWl0cyA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBpZiAobGVmdFJpZ2h0KSB7XG4gICAgICAgICAgICBsZWZ0UmlnaHQub2ZmTGltaXRzID0gdHJ1ZVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgYWRkT2ZmTGltaXRBcmVhRm9ySG9yaXpvbnRhbGx5UG9zaXRpb25lZFNoaXAgPSAoXG4gICAgICAgIGNvbHVtbixcbiAgICAgICAgcm93LFxuICAgICAgICBzaGlwTGVuZ3RoXG4gICAgKSA9PiB7XG4gICAgICAgIGNvbnN0IHJpZ2h0ID0gZ2V0U2hvdExvY2F0aW9uKGNvbHVtbiArIHNoaXBMZW5ndGgsIHJvdylcbiAgICAgICAgLy8gYWRkT2ZmTGltaXRBcmVhRm9yU2hpcHMoY29sdW1uLCByb3csIHNoaXBMZW5ndGgpXG5cbiAgICAgICAgaWYgKHJpZ2h0KSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhyaWdodClcbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmxvZyhnYW1lQm9hcmQpXG4gICAgfVxuXG4gICAgY29uc3QgYWRkT2ZmTGltaXRBcmVhRm9yVmVydGljYWxseVBvc2l0aW9uZWRTaGlwID0gKFxuICAgICAgICBjb2x1bW4sXG4gICAgICAgIHJvdyxcbiAgICAgICAgc2hpcExlbmd0aFxuICAgICkgPT4ge1xuICAgICAgICBjb25zdCBib3R0b20gPSBnYW1lQm9hcmQ/Lltjb2x1bW5dPy5bcm93ICsgc2hpcExlbmd0aF1cblxuICAgICAgICBhZGRPZmZMaW1pdEFyZWFGb3JTaGlwcyhjb2x1bW4sIHJvdywgc2hpcExlbmd0aClcblxuICAgICAgICBpZiAoYm90dG9tKSB7XG4gICAgICAgICAgICBib3R0b20ub2ZmTGltaXRzID0gdHJ1ZVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgcGxhY2VTaGlwID0gKGNvbHVtbiwgcm93LCBkaXJlY3Rpb24sIHNoaXApID0+IHtcbiAgICAgICAgY29uc3Qgc2hpcExlbmd0aCA9IHNoaXAuZ2V0TGVuZ3RoKClcbiAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gJ3ZlcnRpY2FsJykge1xuICAgICAgICAgICAgaWYgKHJvdyArIHNoaXBMZW5ndGggPD0gMTApIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXBMZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgICAgICAgICBnYW1lQm9hcmRbY29sdW1uXVtyb3cgKyBpXSA9IHNoaXBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gYWRkT2ZmTGltaXRBcmVhRm9yVmVydGljYWxseVBvc2l0aW9uZWRTaGlwKGNvbHVtbiwgcm93LCBzaGlwTGVuZ3RoKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09PSAnaG9yaXpvbnRhbCcpIHtcbiAgICAgICAgICAgIGlmIChjb2x1bW4gKyBzaGlwTGVuZ3RoIDw9IDEwKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGlwTGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgZ2FtZUJvYXJkW2NvbHVtbiArIGldW3Jvd10gPSBzaGlwXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGFkZE9mZkxpbWl0QXJlYUZvckhvcml6b250YWxseVBvc2l0aW9uZWRTaGlwKFxuICAgICAgICAgICAgICAgICAgICBjb2x1bW4sXG4gICAgICAgICAgICAgICAgICAgIHJvdyxcbiAgICAgICAgICAgICAgICAgICAgc2hpcExlbmd0aFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIGNvbnN0IG1ha2VSYW5kb21Db29yZGluYXRlcyA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgcmFuZG9tRGlyZWN0aW9uID1cbiAgICAgICAgICAgIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDIpID09PSAwID8gJ3ZlcnRpY2FsJyA6ICdob3Jpem9udGFsJ1xuICAgICAgICBjb25zdCByYW5kb21Db2x1bW4gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMClcbiAgICAgICAgY29uc3QgcmFuZG9tUm93ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApXG4gICAgICAgIHJldHVybiB7IHJhbmRvbUNvbHVtbiwgcmFuZG9tUm93LCByYW5kb21EaXJlY3Rpb24gfVxuICAgIH1cblxuICAgIGNvbnN0IHJhbmRvbWx5UGxhY2VTaGlwcyA9ICgpID0+IHtcbiAgICAgICAgY29uc3Qgc2hpcERldGFpbHMgPSBbXVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXBzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICBjb25zdCB7IHJhbmRvbUNvbHVtbiwgcmFuZG9tUm93LCByYW5kb21EaXJlY3Rpb24gfSA9XG4gICAgICAgICAgICAgICAgbWFrZVJhbmRvbUNvb3JkaW5hdGVzKClcbiAgICAgICAgICAgIGNvbnN0IHNoaXAgPSBzaGlwc1tpXVxuICAgICAgICAgICAgY29uc3QgbG9jYXRpb24gPSBnZXRTaG90TG9jYXRpb24ocmFuZG9tQ29sdW1uLCByYW5kb21Sb3cpXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgbG9jYXRpb24uaXNTaGlwID09PSB0cnVlIHx8XG4gICAgICAgICAgICAgICAgbG9jYXRpb24ub2ZmTGltaXRzID09PSB0cnVlIHx8XG4gICAgICAgICAgICAgICAgcGxhY2VTaGlwKHJhbmRvbUNvbHVtbiwgcmFuZG9tUm93LCByYW5kb21EaXJlY3Rpb24sIHNoaXApID09PVxuICAgICAgICAgICAgICAgICAgICBmYWxzZVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgaSAtPSAxXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNoaXBEZXRhaWxzLnB1c2goeyByYW5kb21Db2x1bW4sIHJhbmRvbVJvdywgcmFuZG9tRGlyZWN0aW9uIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNoaXBEZXRhaWxzXG4gICAgfVxuXG4gICAgY29uc3QgcmVjZWl2ZUF0dGFjayA9IChjb2x1bW4sIHJvdykgPT4ge1xuICAgICAgICBnYW1lQm9hcmRbY29sdW1uXVtyb3ddLmhhc0JlZW5IaXQgPSB0cnVlXG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgZ2V0U2hvdExvY2F0aW9uLFxuICAgICAgICByZWNlaXZlQXR0YWNrLFxuICAgICAgICBjaGVja0lmQWxsU2hpcHNIYXZlU3VuayxcbiAgICAgICAgcGxhY2VTaGlwLFxuICAgICAgICByYW5kb21seVBsYWNlU2hpcHMsXG4gICAgfVxufVxuXG5jb25zdCBib2IgPSBjcmVhdGVHYW1lQm9hcmQoKVxuYm9iLnBsYWNlU2hpcCgwLCAwLCAnaG9yaXpvbnRhbCcsIGNyZWF0ZVNoaXAoMykpXG5cbm1vZHVsZS5leHBvcnRzID0gY3JlYXRlR2FtZUJvYXJkXG4iLCJjb25zdCBjcmVhdGVTaGlwID0gKGxlbmd0aCkgPT4ge1xuICAgIGNvbnN0IHN0YXR1cyA9IEFycmF5KGxlbmd0aCkuZmlsbCgndW5oaXQnKVxuXG4gICAgY29uc3QgZ2V0TGVuZ3RoID0gKCkgPT4gc3RhdHVzLmxlbmd0aFxuXG4gICAgY29uc3QgZ2V0U3RhdHVzID0gKCkgPT4gc3RhdHVzXG5cbiAgICBjb25zdCBoaXQgPSAocG9zaXRpb24pID0+IHtcbiAgICAgICAgaWYgKHBvc2l0aW9uIDwgbGVuZ3RoKSB7XG4gICAgICAgICAgICBzdGF0dXNbcG9zaXRpb25dID0gJ2hpdCdcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGlzU3VuayA9ICgpID0+IHN0YXR1cy5ldmVyeSgocG9zaXRpb24pID0+IHBvc2l0aW9uID09PSAnaGl0JylcblxuICAgIHJldHVybiB7XG4gICAgICAgIGdldExlbmd0aCxcbiAgICAgICAgaXNTdW5rLFxuICAgICAgICBoaXQsXG4gICAgICAgIGdldFN0YXR1cyxcbiAgICAgICAgaXNTaGlwOiB0cnVlLFxuICAgIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjcmVhdGVTaGlwXG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbl9fd2VicGFja19yZXF1aXJlX18ubiA9IChtb2R1bGUpID0+IHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0KCkgPT4gKG1vZHVsZVsnZGVmYXVsdCddKSA6XG5cdFx0KCkgPT4gKG1vZHVsZSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiaW1wb3J0IHJlbmRlclBsYXllckJvYXJkIGZyb20gJy4vZG9tJ1xuaW1wb3J0IGNyZWF0ZUdhbWVCb2FyZCBmcm9tICcuL2dhbWVib2FyZC9nYW1lYm9hcmQnXG5cbmNvbnN0IHBsYXllckJvYXJkID0gY3JlYXRlR2FtZUJvYXJkKClcbnBsYXllckJvYXJkLnJhbmRvbWx5UGxhY2VTaGlwcygpXG5cbnJlbmRlclBsYXllckJvYXJkKHBsYXllckJvYXJkKVxuIiwiY29uc3QgcmVuZGVyUGxheWVyQm9hcmQgPSAoe2dldFNob3RMb2NhdGlvbn0pID0+IHtcbiAgICBjb25zdCBwbGF5ZXJCb2FyZEFyZWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdkaXYucGxheWVyLWJvYXJkJylcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTA7IGkgKz0gMSkge1xuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDEwOyBqICs9IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IGNlbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgICAgICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKCdjZWxsJylcbiAgICAgICAgICAgIGlmIChnZXRTaG90TG9jYXRpb24oaiwgaSkuaXNTaGlwKSB7XG4gICAgICAgICAgICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKCdzaGlwJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBsYXllckJvYXJkQXJlYS5hcHBlbmRDaGlsZChjZWxsKVxuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCByZW5kZXJQbGF5ZXJCb2FyZCJdLCJuYW1lcyI6WyJjcmVhdGVTaGlwIiwiY3JlYXRlR2FtZUJvYXJkIiwiZW1wdHlDZWxsIiwiaGFzQmVlbkhpdCIsImlzU2hpcCIsIm9mZkxpbWl0cyIsImdhbWVCb2FyZCIsIkFycmF5IiwiZmlsbCIsIkpTT04iLCJwYXJzZSIsInN0cmluZ2lmeSIsIm1hcCIsInNoaXBzIiwiZ2V0U2hvdExvY2F0aW9uIiwiY29sdW1uIiwicm93IiwicGxhY2VTaGlwIiwiZGlyZWN0aW9uIiwic2hpcCIsInNoaXBMZW5ndGgiLCJnZXRMZW5ndGgiLCJpIiwicmlnaHQiLCJjb25zb2xlIiwibG9nIiwiYWRkT2ZmTGltaXRBcmVhRm9ySG9yaXpvbnRhbGx5UG9zaXRpb25lZFNoaXAiLCJtYWtlUmFuZG9tQ29vcmRpbmF0ZXMiLCJyYW5kb21EaXJlY3Rpb24iLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJyYW5kb21Db2x1bW4iLCJyYW5kb21Sb3ciLCJyZWNlaXZlQXR0YWNrIiwiY2hlY2tJZkFsbFNoaXBzSGF2ZVN1bmsiLCJmbGF0IiwiZXZlcnkiLCJwb3NpdGlvbiIsImdldFN0YXR1cyIsInVuaXQiLCJyYW5kb21seVBsYWNlU2hpcHMiLCJzaGlwRGV0YWlscyIsImxlbmd0aCIsImxvY2F0aW9uIiwicHVzaCIsIm1vZHVsZSIsImV4cG9ydHMiLCJzdGF0dXMiLCJpc1N1bmsiLCJoaXQiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwibiIsImdldHRlciIsIl9fZXNNb2R1bGUiLCJkIiwiYSIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsInBsYXllckJvYXJkIiwicGxheWVyQm9hcmRBcmVhIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaiIsImNlbGwiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwiYXBwZW5kQ2hpbGQiXSwic291cmNlUm9vdCI6IiJ9