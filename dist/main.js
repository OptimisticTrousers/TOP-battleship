(()=>{var e={653:(e,t,o)=>{const r=o(585);e.exports=()=>{const e={hasBeenHit:!1,isShip:!1,offLimits:!1},t=(()=>{const t=Array(10).fill().map((()=>Array(10).fill()));for(let o=0;o<10;o++)for(let r=0;r<10;r++)t[o][r]={...e,column:o,row:r};return t})(),o=[r(5,"Carrier"),r(4,"Battleship"),r(3,"Destroyer"),r(3,"Submarine"),r(2,"Patrol Boat")],n=(e,o)=>t?.[e]?.[o],i=(o,r,n=(()=>Object.assign(e,{offLimits:!0}))())=>{if(void 0===t?.[o]?.[r])return!0;const i=t[o][r];return t[o][r]={...i,...n},!0},l=(e,t)=>{i(e-1,t-1),i(e,t-1)},a=(e,o,r,a)=>{if((e=>!0===e.isShip||!0===e.offLimits)(n(e,o)))return!1;const c=a.getLength();if("vertical"===r){if(((e,o)=>e>=0&&e+o-1<t.length)(o,c)){for(let t=0;t<c;t+=1)i(e,o+t,{...a,position:t}),i(e+1,o+t),i(e-1,o+t);return((e,t,o)=>{l(e,t),i(e,t+o),i(e+1,t+o),i(e-1,t+o),i(e+1,t-1)})(e,o,c),!0}}else if("horizontal"===r&&((e,o)=>e>=0&&e+o-1<t.length)(e,c)){for(let t=0;t<c;t+=1)i(e+t,o,{...a,position:t}),i(e+t,o+1),i(e+t,o-1);return((e,t,o)=>{l(e,t),i(e+o,t),i(e-1,t+1),i(e+o,t+1),i(e+o,t-1)})(e,o,c),!0}return!1},c=()=>{const e=0===Math.floor(2*Math.random())?"vertical":"horizontal",o=Math.floor(100*Math.random()),r=(()=>{const e=[...t.flat()];return e.forEach((e=>{!0===e.hasBeenHit?e.availability=!1:e.availability=!0})),e})()[o];if(!1===r.availability)return c();const n=r.column,i=r.row;return console.log(r),{elementColumn:n,elementRow:i,randomDirection:e}};return{checkIfOffLimitZoneWasCorrectlyImplemented:e=>t.flat().filter((e=>!0===e.offLimits)).length===e+2,getLocation:n,receiveAttack:(e,o)=>{t[e][o].hasBeenHit=!0},checkIfAllShipsHaveSunk:()=>{let e=!0;for(let t=0;t<10;t++)for(let o=0;o<10;o++){const r=n(t,o);if(!1!==r.isShip&&r.isShip&&!1===r.isSunk()){e=!1;break}}return e},placeShip:a,randomlyPlaceShips:()=>{const e=[];for(let t=0;t<o.length;t+=1){const r=o[t],{randomColumn:n,randomRow:i,randomDirection:l}=c(r.getLength());a(n,i,l,r)?e.push({randomColumn:n,randomRow:i,randomDirection:l}):t-=1}return e},makeRandomCoordinates:c}}},61:e=>{e.exports=(e="player")=>({getName:()=>e,attack:(e,t,{getLocation:o,receiveAttack:r})=>{const n=o(e,t);return!1===n.hasBeenHit||n.isShip&&!1===n.getStatus().includes("unhit")?(r(e,t),n.hit&&n.hit(n.position),"It's a hit!"):"You have already hit this spot!"}})},585:e=>{e.exports=(e,t="ship")=>{const o=Array(e).fill("unhit");return{name:t,getLength:()=>o.length,isSunk:()=>o.every((e=>"hit"===e)),hit:t=>{t<e&&(o[t]="hit")},getStatus:()=>o,hasBeenHit:!1,isShip:!0}}}},t={};function o(r){var n=t[r];if(void 0!==n)return n.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,o),i.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=(e,t,o,r)=>{const n=document.querySelector(`.${e}-board > .cell[column='${t}'][row='${o}']`);r.getLocation(t,o).isShip?n.classList.add("hit"):n.classList.add("miss")},t=(e,t,o,r)=>r.attack(e,t,o);var r=o(653),n=o.n(r),i=o(585),l=o.n(i),a=o(61),c=o.n(a);const s=n()(),u=n()(),h=c()(),p=c()();s.placeShip(0,0,"horizontal",l()(5)),s.placeShip(3,4,"horizontal",l()(3)),s.placeShip(6,7,"horizontal",l()(2)),s.placeShip(9,1,"vertical",l()(3)),s.placeShip(5,9,"horizontal",l()(4)),u.placeShip(0,0,"horizontal",l()(5)),u.placeShip(3,4,"horizontal",l()(3)),u.placeShip(6,7,"horizontal",l()(2)),u.placeShip(9,1,"vertical",l()(3)),u.placeShip(5,9,"horizontal",l()(4));const d=(()=>{const e={};return{publish:function(t,o){Array.isArray(e[t])&&e[t].forEach((e=>{e(o)}))},subscribe:function t(o,r){Array.isArray(t[o])||(e[o]=[]),e[o].push(r);const n=e[o].length-1;return{unsubscribe(){e[o].splice(n,1)}}}}})();((e,t,o,r,n)=>{const i=document.querySelector("div.enemy-board");for(let l=0;l<10;l+=1)for(let a=0;a<10;a+=1){const c=i.querySelector(`.cell:nth-child(${10*a+l+1})`);c.setAttribute("column",l),c.setAttribute("row",a),c.addEventListener("click",(()=>{n.publish("click",{cell:c,column:l,row:a,playerBoard:e,enemyBoard:t,player:o,enemy:r})}),{once:!0})}})(s,u,h,p,d),d.subscribe("click",(({cell:o,column:r,row:n,playerBoard:i,enemyBoard:l,player:a,enemy:c})=>{((o,r,n,i)=>{t(o,r,n,i),e("enemy",o,r,n)})(r,n,l,a),((o,r)=>{const{elementColumn:n,elementRow:i}=o.makeRandomCoordinates();t(n,i,o,r),e("player",n,i,o)})(i,c),((e,t)=>{if(e.checkIfAllShipsHaveSunk()){const e=document.querySelector(".modal"),t=document.querySelector(".modal-content > p"),o=document.querySelector(".modal-content > button");e.style.display="block",o.addEventListener("click",(()=>{location.reload()})),t.textContent="You win!"}if(t.checkIfAllShipsHaveSunk()){const e=document.querySelector(".modal"),t=document.querySelector(".modal-content > p"),o=document.querySelector(".modal-content > button");e.style.display="block",t.textContent="You lose!",o.addEventListener("click",(()=>{location.reload()}))}})(i,l)})),(({getLocation:e})=>{const t=document.querySelector("div.player-board");for(let o=0;o<10;o+=1)for(let r=0;r<10;r+=1){const n=t.querySelector(`.cell:nth-child(${10*r+o+1})`);n.setAttribute("column",o),n.setAttribute("row",r),e(r,o).isShip&&n.classList.add("ship")}})(s)})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TUFqR0EsR0FBR2hGLGtCQUNoQyxNQUFNcUgsRUFBa0JuQyxTQUFTQyxjQUFjLG9CQUUvQyxJQUFLLElBQUl2RixFQUFTLEVBQUdBLEVBQVMsR0FBSUEsR0FBVSxFQUN4QyxJQUFLLElBQUlDLEVBQU0sRUFBR0EsRUFBTSxHQUFJQSxHQUFPLEVBQUcsQ0FDbEMsTUFBTW9GLEVBQU9vQyxFQUFnQmxDLGNBQ3pCLG1CQUF5QixHQUFOdEYsRUFBV0QsRUFBUyxNQUUzQ3FGLEVBQUtzQixhQUFhLFNBQVUzRyxHQUM1QnFGLEVBQUtzQixhQUFhLE1BQU8xRyxHQUNyQkcsRUFBWUgsRUFBS0QsR0FBUU4sUUFDekIyRixFQUFLRyxVQUFVQyxJQUFJLFVDcENuQ2lDLENBQWtCL0IsSSIsInNvdXJjZXMiOlsid2VicGFjazovL3RvcC1iYXR0bGVzaGlwLy4vc3JjL2dhbWVib2FyZC9nYW1lYm9hcmQuanMiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvLi9zcmMvcGxheWVyL3BsYXllci5qcyIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC8uL3NyYy9zaGlwL3NoaXAuanMiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3RvcC1iYXR0bGVzaGlwL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvLi9zcmMvZG9tLmpzIiwid2VicGFjazovL3RvcC1iYXR0bGVzaGlwLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlxuLyogZXNsaW50LWRpc2FibGUgbm8tbXVsdGktYXNzaWduICovXG4vKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtZXhwcmVzc2lvbnMgKi9cbmNvbnN0IGNyZWF0ZVNoaXAgPSByZXF1aXJlKCcuLi9zaGlwL3NoaXAnKVxuXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1wYXJhbS1yZWFzc2lnbiAqL1xuY29uc3QgY3JlYXRlR2FtZUJvYXJkID0gKCkgPT4ge1xuICAgIGNvbnN0IGVtcHR5Q2VsbCA9IHsgaGFzQmVlbkhpdDogZmFsc2UsIGlzU2hpcDogZmFsc2UsIG9mZkxpbWl0czogZmFsc2UgfVxuICAgIFxuICAgIGNvbnN0IGluaXRpYWxpemVCb2FyZCA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgZ2FtZUJvYXJkID0gQXJyYXkoMTApLmZpbGwoKS5tYXAoKCkgPT4gQXJyYXkoMTApLmZpbGwoKSlcbiAgICAgICAgZm9yKGxldCBjb2x1bW49IDA7IGNvbHVtbiA8IDEwOyBjb2x1bW4rKyl7XG4gICAgICAgICAgICBmb3IobGV0IHJvdz0gMDsgcm93IDwgMTA7IHJvdysrKXtcbiAgICAgICAgICAgICAgICBnYW1lQm9hcmRbY29sdW1uXVtyb3ddID0gey4uLmVtcHR5Q2VsbCwgY29sdW1uLCByb3d9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGdhbWVCb2FyZFxuICAgIFxuICAgIH1cblxuICAgIGNvbnN0IGdhbWVCb2FyZCA9IGluaXRpYWxpemVCb2FyZCgpXG5cbiAgICBjb25zdCBzaGlwcyA9IFtcbiAgICAgICAgY3JlYXRlU2hpcCg1LCAnQ2FycmllcicpLFxuICAgICAgICBjcmVhdGVTaGlwKDQsICdCYXR0bGVzaGlwJyksXG4gICAgICAgIGNyZWF0ZVNoaXAoMywgJ0Rlc3Ryb3llcicpLFxuICAgICAgICBjcmVhdGVTaGlwKDMsICdTdWJtYXJpbmUnKSxcbiAgICAgICAgY3JlYXRlU2hpcCgyLCAnUGF0cm9sIEJvYXQnKSxcbiAgICBdXG5cblxuICAgIGNvbnN0IGNyZWF0ZU9mZkxpbWl0TG9jYXRpb24gPSAoKSA9PlxuICAgICAgICBPYmplY3QuYXNzaWduKGVtcHR5Q2VsbCwgeyBvZmZMaW1pdHM6IHRydWUgfSlcblxuICAgIGNvbnN0IGdldExvY2F0aW9uID0gKGNvbHVtbiwgcm93KSA9PiBnYW1lQm9hcmQ/Lltjb2x1bW5dPy5bcm93XVxuXG4gICAgY29uc3Qgc2V0TG9jYXRpb24gPSAoY29sdW1uLCByb3csIHNoaXAgPSBjcmVhdGVPZmZMaW1pdExvY2F0aW9uKCkpID0+IHtcbiAgICAgICAgaWYgKGdhbWVCb2FyZD8uW2NvbHVtbl0/Lltyb3ddID09PSB1bmRlZmluZWQpIHJldHVybiB0cnVlXG4gICAgICAgIGNvbnN0IGxvY2F0aW9uID0gZ2FtZUJvYXJkW2NvbHVtbl1bcm93XVxuXG4gICAgICAgIGdhbWVCb2FyZFtjb2x1bW5dW3Jvd10gPSB7Li4ubG9jYXRpb24sIC4uLnNoaXB9XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIGNvbnN0IGNoZWNrSWZBbGxTaGlwc0hhdmVTdW5rID0gKCkgPT4ge1xuXG4gICAgICAgIGxldCBoYXZlQWxsU2hpcHNTdW5rID10cnVlICBcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwOyBpKyspIHtcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgMTA7IGorKykge1xuICAgICAgICBjb25zdCBsb2NhdGlvbiA9IGdldExvY2F0aW9uKGksIGopXG4gICAgICAgIGlmKGxvY2F0aW9uLmlzU2hpcCA9PT0gZmFsc2UpIGNvbnRpbnVlXG4gICAgICAgIGlmKGxvY2F0aW9uLmlzU2hpcCAmJiBsb2NhdGlvbi5pc1N1bmsoKSA9PT0gZmFsc2Upe1xuICAgICAgICAgICBoYXZlQWxsU2hpcHNTdW5rID0gZmFsc2UgXG4gICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBoYXZlQWxsU2hpcHNTdW5rIFxuICAgIH1cblxuICAgIGNvbnN0IGFkZE9mZkxpbWl0QXJlYUZvclNoaXBzID0gKGNvbHVtbiwgcm93KSA9PiB7XG4gICAgICAgIC8vIHRvcC1sZWZ0XG4gICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiAtIDEsIHJvdyAtIDEpXG4gICAgICAgIC8vIHRvcFxuICAgICAgICBzZXRMb2NhdGlvbihjb2x1bW4sIHJvdyAtIDEpXG4gICAgfVxuXG4gICAgY29uc3QgYWRkT2ZmTGltaXRBcmVhRm9ySG9yaXpvbnRhbGx5UG9zaXRpb25lZFNoaXAgPSAoXG4gICAgICAgIGNvbHVtbixcbiAgICAgICAgcm93LFxuICAgICAgICBzaGlwTGVuZ3RoXG4gICAgKSA9PiB7XG4gICAgICAgIC8vIHBvc2l0aW9ucyByZWxhdGl2ZSB0byB0aGUgc2hpcCBpdHNlbGYoaWUuIGEgaG9yaXpvbnRhbCBzaGlwJ3MgYm90dG9tIGlzIHRvIHRoZSByaWdodClcblxuICAgICAgICBhZGRPZmZMaW1pdEFyZWFGb3JTaGlwcyhjb2x1bW4sIHJvdylcbiAgICAgICAgLy8gYm90dG9tXG4gICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiArIHNoaXBMZW5ndGgsIHJvdylcbiAgICAgICAgLy8gYm90dG9tLWxlZnRcbiAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uIC0gMSwgcm93ICsgMSlcbiAgICAgICAgLy8gYm90dG9tLXJpZ2h0XG4gICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiArIHNoaXBMZW5ndGgsIHJvdyArIDEpXG4gICAgICAgIC8vIHRvcC1yaWdodFxuICAgICAgICBzZXRMb2NhdGlvbihjb2x1bW4gKyBzaGlwTGVuZ3RoLCByb3cgLSAxKVxuICAgIH1cblxuICAgIGNvbnN0IGFkZE9mZkxpbWl0QXJlYUZvclZlcnRpY2FsbHlQb3NpdGlvbmVkU2hpcCA9IChcbiAgICAgICAgY29sdW1uLFxuICAgICAgICByb3csXG4gICAgICAgIHNoaXBMZW5ndGhcbiAgICApID0+IHtcbiAgICAgICAgLy8gcG9zaXRpb25zIHJlbGF0aXZlIHRvIGhvdyB0aGUgdXNlciBzZWVzIGl0KGllLiBhIHZlcnRpY2FsIHNoaXAncyBib3R0b20gaXMgdG8gdGhlIGJvdHRvbSlcblxuICAgICAgICBhZGRPZmZMaW1pdEFyZWFGb3JTaGlwcyhjb2x1bW4sIHJvdylcbiAgICAgICAgLy8gYm90dG9tXG4gICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiwgcm93ICsgc2hpcExlbmd0aClcbiAgICAgICAgLy8gYm90dG9tLXJpZ2h0XG4gICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiArIDEsIHJvdyArIHNoaXBMZW5ndGgpXG4gICAgICAgIC8vIGJvdHRvbS1sZWZ0XG4gICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiAtIDEsIHJvdyArIHNoaXBMZW5ndGgpXG4gICAgICAgIC8vIHRvcC1yaWdodFxuICAgICAgICBzZXRMb2NhdGlvbihjb2x1bW4gKyAxLCByb3cgLSAxKVxuICAgIH1cblxuICAgIGNvbnN0IGNoZWNrSWZDb2x1bW5Db29yZGluYXRlSXNWYWxpZCA9IChjb2x1bW4sIHNoaXBMZW5ndGgpID0+XG4gICAgICAgIGNvbHVtbiA+PSAwICYmIGNvbHVtbiArIHNoaXBMZW5ndGggLSAxIDwgZ2FtZUJvYXJkLmxlbmd0aFxuXG4gICAgY29uc3QgY2hlY2tJZlJvd0Nvb3JkaW5hdGVJc1ZhbGlkID0gKHJvdywgc2hpcExlbmd0aCkgPT5cbiAgICAgICAgcm93ID49IDAgJiYgcm93ICsgc2hpcExlbmd0aCAtIDEgPCBnYW1lQm9hcmQubGVuZ3RoXG5cbiAgICBjb25zdCBjaGVja0lmTG9jYXRpb25Jc0FTaGlwT3JPZmZMaW1pdHMgPSAobG9jYXRpb24pID0+IHtcbiAgICAgICAgaWYgKGxvY2F0aW9uLmlzU2hpcCA9PT0gdHJ1ZSB8fCBsb2NhdGlvbi5vZmZMaW1pdHMgPT09IHRydWUpIHJldHVybiB0cnVlXG5cbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgY29uc3QgcGxhY2VTaGlwID0gKGNvbHVtbiwgcm93LCBkaXJlY3Rpb24sIHNoaXApID0+IHtcbiAgICAgICAgaWYgKGNoZWNrSWZMb2NhdGlvbklzQVNoaXBPck9mZkxpbWl0cyhnZXRMb2NhdGlvbihjb2x1bW4sIHJvdykpKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIGNvbnN0IHNoaXBMZW5ndGggPSBzaGlwLmdldExlbmd0aCgpXG4gICAgICAgIGlmIChkaXJlY3Rpb24gPT09ICd2ZXJ0aWNhbCcpIHtcbiAgICAgICAgICAgIGlmIChjaGVja0lmUm93Q29vcmRpbmF0ZUlzVmFsaWQocm93LCBzaGlwTGVuZ3RoKSkge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcExlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiwgcm93ICsgaSwgey4uLnNoaXAsIHBvc2l0aW9uOiBpfSlcbiAgICAgICAgICAgICAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uICsgMSwgcm93ICsgaSlcbiAgICAgICAgICAgICAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uIC0gMSwgcm93ICsgaSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYWRkT2ZmTGltaXRBcmVhRm9yVmVydGljYWxseVBvc2l0aW9uZWRTaGlwKFxuICAgICAgICAgICAgICAgICAgICBjb2x1bW4sXG4gICAgICAgICAgICAgICAgICAgIHJvdyxcbiAgICAgICAgICAgICAgICAgICAgc2hpcExlbmd0aFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PT0gJ2hvcml6b250YWwnKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2tJZkNvbHVtbkNvb3JkaW5hdGVJc1ZhbGlkKGNvbHVtbiwgc2hpcExlbmd0aCkpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXBMZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgICAgICAgICBzZXRMb2NhdGlvbihjb2x1bW4gKyBpICwgcm93LCB7Li4uc2hpcCwgcG9zaXRpb246IGl9KVxuICAgICAgICAgICAgICAgICAgICAvL3NldExvY2F0aW9uKGNvbHVtbiArIGksIHJvdywgc2hpcClcbiAgICAgICAgICAgICAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uICsgaSwgcm93ICsgMSlcbiAgICAgICAgICAgICAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uICsgaSwgcm93IC0gMSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYWRkT2ZmTGltaXRBcmVhRm9ySG9yaXpvbnRhbGx5UG9zaXRpb25lZFNoaXAoXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbixcbiAgICAgICAgICAgICAgICAgICAgcm93LFxuICAgICAgICAgICAgICAgICAgICBzaGlwTGVuZ3RoXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgICAgICBjb25zdCBhdmFpbGFibGVTcGFjZXMgPSAoKSA9PntcblxuICAgICAgICBjb25zdCBmbGF0dGVuZWRHYW1lQm9hcmQgPSBbLi4uZ2FtZUJvYXJkLmZsYXQoKV1cblxuICAgICAgICAgICAgZmxhdHRlbmVkR2FtZUJvYXJkLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBpZihlbGVtZW50Lmhhc0JlZW5IaXQgPT09IHRydWUpe1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmF2YWlsYWJpbGl0eSA9IGZhbHNlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuYXZhaWxhYmlsaXR5ID10cnVlICBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICByZXR1cm4gZmxhdHRlbmVkR2FtZUJvYXJkXG5cbiAgICAgICAgfVxuICAgIGNvbnN0IG1ha2VSYW5kb21Db29yZGluYXRlcyA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgcmFuZG9tRGlyZWN0aW9uID1cbiAgICAgICAgICAgIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDIpID09PSAwID8gJ3ZlcnRpY2FsJyA6ICdob3Jpem9udGFsJ1xuICAgICAgICBjb25zdCByYW5kb21Mb2NhdGlvbiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMClcbiAgICAgICAgY29uc3QgZmxhdHRlbmVkR2FtZUJvYXJkID0gYXZhaWxhYmxlU3BhY2VzKClcblxuICAgICAgICBjb25zdCBsb2NhdGlvbiA9IGZsYXR0ZW5lZEdhbWVCb2FyZFtyYW5kb21Mb2NhdGlvbl1cblxuICAgICAgICBpZihsb2NhdGlvbi5hdmFpbGFiaWxpdHkgPT09IGZhbHNlKXtcbiAgICAgICAgICAgIHJldHVybiBtYWtlUmFuZG9tQ29vcmRpbmF0ZXMoKVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZWxlbWVudENvbHVtbiA9IGxvY2F0aW9uLmNvbHVtblxuICAgICAgICBjb25zdCBlbGVtZW50Um93ID0gbG9jYXRpb24ucm93XG5cbiAgICAgICAgY29uc29sZS5sb2cobG9jYXRpb24pXG5cblxuICAgICAgICByZXR1cm4geyBlbGVtZW50Q29sdW1uLCBlbGVtZW50Um93LCByYW5kb21EaXJlY3Rpb24gfVxuICAgIH1cblxuICAgIGNvbnN0IHJhbmRvbWx5UGxhY2VTaGlwcyA9ICgpID0+IHtcbiAgICAgICAgY29uc3Qgc2hpcERldGFpbHMgPSBbXVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXBzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICBjb25zdCBzaGlwID0gc2hpcHNbaV1cbiAgICAgICAgICAgIGNvbnN0IHsgcmFuZG9tQ29sdW1uLCByYW5kb21Sb3csIHJhbmRvbURpcmVjdGlvbiB9ID1cbiAgICAgICAgICAgICAgICBtYWtlUmFuZG9tQ29vcmRpbmF0ZXMoc2hpcC5nZXRMZW5ndGgoKSlcbiAgICAgICAgICAgIGlmIChwbGFjZVNoaXAocmFuZG9tQ29sdW1uLCByYW5kb21Sb3csIHJhbmRvbURpcmVjdGlvbiwgc2hpcCkpIHtcbiAgICAgICAgICAgICAgICBzaGlwRGV0YWlscy5wdXNoKHsgcmFuZG9tQ29sdW1uLCByYW5kb21Sb3csIHJhbmRvbURpcmVjdGlvbiB9KVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpIC09IDFcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2hpcERldGFpbHNcbiAgICB9XG5cbiAgICBjb25zdCByZWNlaXZlQXR0YWNrID0gKGNvbHVtbiwgcm93KSA9PiB7XG4gICAgICAgIGdhbWVCb2FyZFtjb2x1bW5dW3Jvd10uaGFzQmVlbkhpdCA9IHRydWVcbiAgICB9XG5cbiAgICBjb25zdCBjaGVja0lmT2ZmTGltaXRab25lV2FzQ29ycmVjdGx5SW1wbGVtZW50ZWQgPSAoc2hpcExlbmd0aCkgPT5cbiAgICAgICAgZ2FtZUJvYXJkLmZsYXQoKS5maWx0ZXIoKGVsZW1lbnQpID0+IGVsZW1lbnQub2ZmTGltaXRzID09PSB0cnVlKVxuICAgICAgICAgICAgLmxlbmd0aCA9PT1cbiAgICAgICAgc2hpcExlbmd0aCArIDJcbiAgICAvLyBhZGRpbmcgc2hpcExlbmd0aCBwbHVzIHR3byBiZWNhdXNlIGZvciBldmVyeSBpbmNyZWFzZSBpbiB0aGUgc2l6ZSBvZiBzaGlwLCB0aGUgem9uZXMgY292ZXJlZCBpbmNyZWFzZSBieSAyIHVuaXRzXG5cbiAgICByZXR1cm4ge1xuICAgICAgICBjaGVja0lmT2ZmTGltaXRab25lV2FzQ29ycmVjdGx5SW1wbGVtZW50ZWQsXG4gICAgICAgIGdldExvY2F0aW9uLFxuICAgICAgICByZWNlaXZlQXR0YWNrLFxuICAgICAgICBjaGVja0lmQWxsU2hpcHNIYXZlU3VuayxcbiAgICAgICAgcGxhY2VTaGlwLFxuICAgICAgICByYW5kb21seVBsYWNlU2hpcHMsXG4gICAgICAgIG1ha2VSYW5kb21Db29yZGluYXRlcyxcbiAgICB9XG59XG5tb2R1bGUuZXhwb3J0cyA9IGNyZWF0ZUdhbWVCb2FyZCIsImNvbnN0IGNyZWF0ZVBsYXllciA9IChuYW1lID0gJ3BsYXllcicpID0+IHtcbiAgICBjb25zdCBnZXROYW1lID0gKCkgPT4gbmFtZVxuXG4gICAgY29uc3QgYXR0YWNrID0gKGNvbHVtbiwgcm93LCB7IGdldExvY2F0aW9uLCByZWNlaXZlQXR0YWNrIH0pID0+IHtcbiAgICAgICAgY29uc3QgbG9jYXRpb24gPSBnZXRMb2NhdGlvbihjb2x1bW4sIHJvdylcbiAgICAgICAgaWYgKGxvY2F0aW9uLmhhc0JlZW5IaXQgPT09IGZhbHNlIHx8IChsb2NhdGlvbi5pc1NoaXAgJiYgbG9jYXRpb24uZ2V0U3RhdHVzKCkuaW5jbHVkZXMoJ3VuaGl0JykgPT09IGZhbHNlKSkge1xuICAgICAgICAgICAgcmVjZWl2ZUF0dGFjayhjb2x1bW4sIHJvdylcbiAgICAgICAgICAgIGlmKGxvY2F0aW9uLmhpdCl7XG5cbiAgICAgICAgICAgICAgICBsb2NhdGlvbi5oaXQobG9jYXRpb24ucG9zaXRpb24pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gXCJJdCdzIGEgaGl0IVwiXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gJ1lvdSBoYXZlIGFscmVhZHkgaGl0IHRoaXMgc3BvdCEnXG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgZ2V0TmFtZSxcbiAgICAgICAgYXR0YWNrLFxuICAgIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjcmVhdGVQbGF5ZXJcbiIsImNvbnN0IGNyZWF0ZVNoaXAgPSAobGVuZ3RoLCBuYW1lID0gJ3NoaXAnKSA9PiB7XG5cbiAgICBjb25zdCBzdGF0dXMgPSBBcnJheShsZW5ndGgpLmZpbGwoJ3VuaGl0JylcblxuICAgIGNvbnN0IGdldExlbmd0aCA9ICgpID0+IHN0YXR1cy5sZW5ndGhcblxuICAgIGNvbnN0IGdldFN0YXR1cyA9ICgpID0+IHN0YXR1c1xuXG4gICAgY29uc3QgaGl0ID0gKHBvc2l0aW9uKSA9PiB7XG4gICAgICAgIGlmIChwb3NpdGlvbiA8IGxlbmd0aCkge1xuICAgICAgICAgICAgc3RhdHVzW3Bvc2l0aW9uXSA9ICdoaXQnXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBpc1N1bmsgPSAoKSA9PiBzdGF0dXMuZXZlcnkoKHBvc2l0aW9uKSA9PiBwb3NpdGlvbiA9PT0gJ2hpdCcpXG5cbiAgICByZXR1cm4ge1xuICAgICAgICBuYW1lLFxuICAgICAgICBnZXRMZW5ndGgsXG4gICAgICAgIGlzU3VuayxcbiAgICAgICAgaGl0LFxuICAgICAgICBnZXRTdGF0dXMsXG4gICAgICAgIGhhc0JlZW5IaXQ6IGZhbHNlLFxuICAgICAgICBpc1NoaXA6IHRydWUsXG4gICAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGNyZWF0ZVNoaXBcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gKG1vZHVsZSkgPT4ge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHQoKSA9PiAobW9kdWxlWydkZWZhdWx0J10pIDpcblx0XHQoKSA9PiAobW9kdWxlKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCJjb25zdCByZW5kZXJBdHRhY2tzID0gKHBsYXllciwgY29sdW1uLCByb3csIGVuZW15Qm9hcmQpID0+IHtcbiAgICBjb25zdCBjZWxsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgYC4ke3BsYXllcn0tYm9hcmQgPiAuY2VsbFtjb2x1bW49JyR7Y29sdW1ufSddW3Jvdz0nJHtyb3d9J11gXG4gICAgKVxuXG4gICAgY29uc3QgbG9jYXRpb24gPSBlbmVteUJvYXJkLmdldExvY2F0aW9uKGNvbHVtbiwgcm93KVxuICAgIGlmIChsb2NhdGlvbi5pc1NoaXApIHtcbiAgICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKCdoaXQnKVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZCgnbWlzcycpXG4gICAgfVxufVxuXG5jb25zdCBoYW5kbGVBdHRhY2sgPSAoY29sdW1uLCByb3csIGVuZW15Qm9hcmQsIHBsYXllcikgPT5cbiAgICBwbGF5ZXIuYXR0YWNrKGNvbHVtbiwgcm93LCBlbmVteUJvYXJkKVxuXG5jb25zdCBhdHRhY2tFbmVteUNlbGwgPSAoY29sdW1uLCByb3csIGVuZW15Qm9hcmQsIHBsYXllcikgPT4ge1xuICAgIGhhbmRsZUF0dGFjayhjb2x1bW4sIHJvdywgZW5lbXlCb2FyZCwgcGxheWVyKVxuICAgIHJlbmRlckF0dGFja3MoJ2VuZW15JywgY29sdW1uLCByb3csIGVuZW15Qm9hcmQpXG59XG5cbmNvbnN0IGF0dGFja1BsYXllckNlbGwgPSAocGxheWVyQm9hcmQsIGVuZW15KSA9PiB7XG4gICAgY29uc3QgeyBlbGVtZW50Q29sdW1uICwgZWxlbWVudFJvd30gPSBwbGF5ZXJCb2FyZC5tYWtlUmFuZG9tQ29vcmRpbmF0ZXMoKVxuICAgIGhhbmRsZUF0dGFjayhlbGVtZW50Q29sdW1uLCBlbGVtZW50Um93LCBwbGF5ZXJCb2FyZCwgZW5lbXkpXG4gICAgcmVuZGVyQXR0YWNrcygncGxheWVyJywgZWxlbWVudENvbHVtbiwgZWxlbWVudFJvdywgcGxheWVyQm9hcmQpXG59XG4vLyBodHRwczovL2pzbWFuaWZlc3QuY29tL3RoZS1wdWJsaXNoLXN1YnNjcmliZS1wYXR0ZXJuLWluLWphdmFzY3JpcHQvXG5cbmV4cG9ydCBjb25zdCBwdWJTdWIgPSAoKSA9PiB7XG4gICAgY29uc3Qgc3Vic2NyaWJlcnMgPSB7fVxuXG4gICAgZnVuY3Rpb24gcHVibGlzaChldmVudE5hbWUsIGRhdGEpIHtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHN1YnNjcmliZXJzW2V2ZW50TmFtZV0pKSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICBzdWJzY3JpYmVyc1tldmVudE5hbWVdLmZvckVhY2goKGNhbGxiYWNrKSA9PiB7XG4gICAgICAgICAgICBjYWxsYmFjayhkYXRhKVxuICAgICAgICB9KVxuICAgIH1cbiAgICBmdW5jdGlvbiBzdWJzY3JpYmUoZXZlbnROYW1lLCBjYWxsYmFjaykge1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoc3Vic2NyaWJlW2V2ZW50TmFtZV0pKSB7XG4gICAgICAgICAgICBzdWJzY3JpYmVyc1tldmVudE5hbWVdID0gW11cbiAgICAgICAgfVxuICAgICAgICBzdWJzY3JpYmVyc1tldmVudE5hbWVdLnB1c2goY2FsbGJhY2spXG4gICAgICAgIGNvbnN0IGluZGV4ID0gc3Vic2NyaWJlcnNbZXZlbnROYW1lXS5sZW5ndGggLSAxXG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlKCkge1xuICAgICAgICAgICAgICAgIHN1YnNjcmliZXJzW2V2ZW50TmFtZV0uc3BsaWNlKGluZGV4LCAxKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIHB1Ymxpc2gsXG4gICAgICAgIHN1YnNjcmliZSxcbiAgICB9XG59XG5cbmV4cG9ydCBjb25zdCByZW5kZXJQbGF5ZXJTaGlwcyA9ICh7IGdldExvY2F0aW9uIH0pID0+IHtcbiAgICBjb25zdCBwbGF5ZXJCb2FyZEFyZWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdkaXYucGxheWVyLWJvYXJkJylcblxuICAgIGZvciAobGV0IGNvbHVtbiA9IDA7IGNvbHVtbiA8IDEwOyBjb2x1bW4gKz0gMSkge1xuICAgICAgICBmb3IgKGxldCByb3cgPSAwOyByb3cgPCAxMDsgcm93ICs9IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IGNlbGwgPSBwbGF5ZXJCb2FyZEFyZWEucXVlcnlTZWxlY3RvcihcbiAgICAgICAgICAgICAgICBgLmNlbGw6bnRoLWNoaWxkKCR7cm93ICogMTAgKyBjb2x1bW4gKyAxfSlgXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBjZWxsLnNldEF0dHJpYnV0ZSgnY29sdW1uJywgY29sdW1uKVxuICAgICAgICAgICAgY2VsbC5zZXRBdHRyaWJ1dGUoJ3JvdycsIHJvdylcbiAgICAgICAgICAgIGlmIChnZXRMb2NhdGlvbihyb3csIGNvbHVtbikuaXNTaGlwKSB7XG4gICAgICAgICAgICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKCdzaGlwJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cblxuY29uc3QgY2hlY2tJZkdhbWVPdmVyID0gKHBsYXllckJvYXJkLCBlbmVteUJvYXJkKSA9PiB7XG4gICAgaWYocGxheWVyQm9hcmQuY2hlY2tJZkFsbFNoaXBzSGF2ZVN1bmsoKSl7XG4gICAgICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsJyk7XG4gICAgICAgIGNvbnN0IG1vZGFsV2lubmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLWNvbnRlbnQgPiBwJylcbiAgICAgICAgY29uc3QgcGxheUFnYWluQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLWNvbnRlbnQgPiBidXR0b24nKVxuXG4gICAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCJcbiAgICAgICAgcGxheUFnYWluQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKClcbiAgICAgICAgfSlcblxuICAgICAgICBtb2RhbFdpbm5lci50ZXh0Q29udGVudCA9ICdZb3Ugd2luISdcblxuXG4gICAgfVxuICAgIGlmKGVuZW15Qm9hcmQuY2hlY2tJZkFsbFNoaXBzSGF2ZVN1bmsoKSl7XG4gICAgICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsJyk7XG4gICAgICAgIGNvbnN0IG1vZGFsV2lubmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLWNvbnRlbnQgPiBwJylcbiAgICAgICAgY29uc3QgcGxheUFnYWluQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLWNvbnRlbnQgPiBidXR0b24nKVxuXG4gICAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCJcbiAgICAgICAgbW9kYWxXaW5uZXIudGV4dENvbnRlbnQgPSAnWW91IGxvc2UhJ1xuICAgICAgICBwbGF5QWdhaW5CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKVxuICAgICAgICB9KVxuICAgIH1cbn1cblxuZXhwb3J0IGNvbnN0IGFkZExpc3RlbmVyc1RvRW5lbXlCb2FyZCA9IChcbiAgICBwbGF5ZXJCb2FyZCxcbiAgICBlbmVteUJvYXJkLFxuICAgIHBsYXllcixcbiAgICBlbmVteSxcbiAgICBwc1xuKSA9PiB7XG4gICAgY29uc3QgZW5lbXlCb2FyZEFyZWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdkaXYuZW5lbXktYm9hcmQnKVxuXG4gICAgZm9yIChsZXQgY29sdW1uID0gMDsgY29sdW1uIDwgMTA7IGNvbHVtbiArPSAxKSB7XG4gICAgICAgIGZvciAobGV0IHJvdyA9IDA7IHJvdyA8IDEwOyByb3cgKz0gMSkge1xuICAgICAgICAgICAgLy8gQ3JlZGl0aW5nIGZvcm11bGEgdG8gY2FsY3VsYXRlIG50aC1jaGlsZCB1c2luZyBuZXN0ZWQgbG9vcDogaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvODg3MjY2Mi9tYXRoLXRvLWRldGVybWluZS1pdGVtLWluZGV4LWJhc2VkLW9uLWNvbC1yb3ctc2VsZWN0aW9uLWluLWdyaWRcbiAgICAgICAgICAgIGNvbnN0IGNlbGwgPSBlbmVteUJvYXJkQXJlYS5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAgICAgICAgIGAuY2VsbDpudGgtY2hpbGQoJHtyb3cgKiAxMCArIGNvbHVtbiArIDF9KWBcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIGNlbGwuc2V0QXR0cmlidXRlKCdjb2x1bW4nLCBjb2x1bW4pXG4gICAgICAgICAgICBjZWxsLnNldEF0dHJpYnV0ZSgncm93Jywgcm93KVxuXG4gICAgICAgICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgICAgICAgJ2NsaWNrJyxcbiAgICAgICAgICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHBzLnB1Ymxpc2goJ2NsaWNrJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbixcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllckJvYXJkLFxuICAgICAgICAgICAgICAgICAgICAgICAgZW5lbXlCb2FyZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllcixcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZW15LFxuICAgICAgICAgICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7IG9uY2U6IHRydWUgfVxuICAgICAgICAgICAgKVxuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgY29uc3QgYXR0YWNrID0gKHtcbiAgICBjZWxsLFxuICAgIGNvbHVtbixcbiAgICByb3csXG4gICAgcGxheWVyQm9hcmQsXG4gICAgZW5lbXlCb2FyZCxcbiAgICBwbGF5ZXIsXG4gICAgZW5lbXksXG59KSA9PiB7XG4gICAgLy8gaHVtYW4gcGxheWVyIGF0dGFja2luZyBjb21wdXRlclxuICAgIGF0dGFja0VuZW15Q2VsbChjb2x1bW4sIHJvdywgZW5lbXlCb2FyZCwgcGxheWVyKVxuICAgIC8vIGNvbXB1dGVyIGF0dGFja2luZyBodW1hblxuICAgIGF0dGFja1BsYXllckNlbGwocGxheWVyQm9hcmQsIGVuZW15KVxuXG4gICAgY2hlY2tJZkdhbWVPdmVyKHBsYXllckJvYXJkLCBlbmVteUJvYXJkKVxuXG59XG4iLCJpbXBvcnQgeyBhZGRMaXN0ZW5lcnNUb0VuZW15Qm9hcmQsIHJlbmRlclBsYXllclNoaXBzLHB1YlN1YiwgYXR0YWNrfSBmcm9tICcuL2RvbSdcblxuaW1wb3J0IGNyZWF0ZUdhbWVCb2FyZCBmcm9tICcuL2dhbWVib2FyZC9nYW1lYm9hcmQnXG5pbXBvcnQgY3JlYXRlU2hpcCBmcm9tICcuL3NoaXAvc2hpcCdcbmltcG9ydCBjcmVhdGVQbGF5ZXIgZnJvbSAnLi9wbGF5ZXIvcGxheWVyJ1xuXG5jb25zdCBwbGF5ZXJCb2FyZCA9IGNyZWF0ZUdhbWVCb2FyZCgpXG5jb25zdCBlbmVteUJvYXJkID0gY3JlYXRlR2FtZUJvYXJkKClcblxuY29uc3QgcGxheWVyID0gY3JlYXRlUGxheWVyKClcblxuY29uc3QgY29tcHV0ZXIgPSBjcmVhdGVQbGF5ZXIoKVxuXG5wbGF5ZXJCb2FyZC5wbGFjZVNoaXAoMCwgMCwgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDUpKVxucGxheWVyQm9hcmQucGxhY2VTaGlwKDMsIDQsICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCgzKSlcbnBsYXllckJvYXJkLnBsYWNlU2hpcCg2LCA3LCAnaG9yaXpvbnRhbCcsIGNyZWF0ZVNoaXAoMikpXG5wbGF5ZXJCb2FyZC5wbGFjZVNoaXAoOSwgMSwgJ3ZlcnRpY2FsJywgY3JlYXRlU2hpcCgzKSlcbnBsYXllckJvYXJkLnBsYWNlU2hpcCg1LCA5LCAnaG9yaXpvbnRhbCcsIGNyZWF0ZVNoaXAoNCkpXG5cbmVuZW15Qm9hcmQucGxhY2VTaGlwKDAsIDAsICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCg1KSlcbmVuZW15Qm9hcmQucGxhY2VTaGlwKDMsIDQsICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCgzKSlcbmVuZW15Qm9hcmQucGxhY2VTaGlwKDYsIDcsICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCgyKSlcbmVuZW15Qm9hcmQucGxhY2VTaGlwKDksIDEsICd2ZXJ0aWNhbCcsIGNyZWF0ZVNoaXAoMykpXG5lbmVteUJvYXJkLnBsYWNlU2hpcCg1LCA5LCAnaG9yaXpvbnRhbCcsIGNyZWF0ZVNoaXAoNCkpXG5cbmNvbnN0IHBzID0gcHViU3ViKClcblxuYWRkTGlzdGVuZXJzVG9FbmVteUJvYXJkKHBsYXllckJvYXJkLCBlbmVteUJvYXJkLCBwbGF5ZXIsIGNvbXB1dGVyLCBwcylcblxucHMuc3Vic2NyaWJlKCdjbGljaycsIGF0dGFjaylcblxuXG5cblxucmVuZGVyUGxheWVyU2hpcHMocGxheWVyQm9hcmQpIl0sIm5hbWVzIjpbImNyZWF0ZVNoaXAiLCJtb2R1bGUiLCJleHBvcnRzIiwiZW1wdHlDZWxsIiwiaGFzQmVlbkhpdCIsImlzU2hpcCIsIm9mZkxpbWl0cyIsImdhbWVCb2FyZCIsIkFycmF5IiwiZmlsbCIsIm1hcCIsImNvbHVtbiIsInJvdyIsImluaXRpYWxpemVCb2FyZCIsInNoaXBzIiwiZ2V0TG9jYXRpb24iLCJzZXRMb2NhdGlvbiIsInNoaXAiLCJPYmplY3QiLCJhc3NpZ24iLCJjcmVhdGVPZmZMaW1pdExvY2F0aW9uIiwidW5kZWZpbmVkIiwibG9jYXRpb24iLCJhZGRPZmZMaW1pdEFyZWFGb3JTaGlwcyIsInBsYWNlU2hpcCIsImRpcmVjdGlvbiIsImNoZWNrSWZMb2NhdGlvbklzQVNoaXBPck9mZkxpbWl0cyIsInNoaXBMZW5ndGgiLCJnZXRMZW5ndGgiLCJsZW5ndGgiLCJjaGVja0lmUm93Q29vcmRpbmF0ZUlzVmFsaWQiLCJpIiwicG9zaXRpb24iLCJhZGRPZmZMaW1pdEFyZWFGb3JWZXJ0aWNhbGx5UG9zaXRpb25lZFNoaXAiLCJjaGVja0lmQ29sdW1uQ29vcmRpbmF0ZUlzVmFsaWQiLCJhZGRPZmZMaW1pdEFyZWFGb3JIb3Jpem9udGFsbHlQb3NpdGlvbmVkU2hpcCIsIm1ha2VSYW5kb21Db29yZGluYXRlcyIsInJhbmRvbURpcmVjdGlvbiIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInJhbmRvbUxvY2F0aW9uIiwiZmxhdHRlbmVkR2FtZUJvYXJkIiwiZmxhdCIsImZvckVhY2giLCJlbGVtZW50IiwiYXZhaWxhYmlsaXR5IiwiYXZhaWxhYmxlU3BhY2VzIiwiZWxlbWVudENvbHVtbiIsImVsZW1lbnRSb3ciLCJjb25zb2xlIiwibG9nIiwiY2hlY2tJZk9mZkxpbWl0Wm9uZVdhc0NvcnJlY3RseUltcGxlbWVudGVkIiwiZmlsdGVyIiwicmVjZWl2ZUF0dGFjayIsImNoZWNrSWZBbGxTaGlwc0hhdmVTdW5rIiwiaGF2ZUFsbFNoaXBzU3VuayIsImoiLCJpc1N1bmsiLCJyYW5kb21seVBsYWNlU2hpcHMiLCJzaGlwRGV0YWlscyIsInJhbmRvbUNvbHVtbiIsInJhbmRvbVJvdyIsInB1c2giLCJuYW1lIiwiZ2V0TmFtZSIsImF0dGFjayIsImdldFN0YXR1cyIsImluY2x1ZGVzIiwiaGl0Iiwic3RhdHVzIiwiZXZlcnkiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwibiIsImdldHRlciIsIl9fZXNNb2R1bGUiLCJkIiwiYSIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsInJlbmRlckF0dGFja3MiLCJwbGF5ZXIiLCJlbmVteUJvYXJkIiwiY2VsbCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNsYXNzTGlzdCIsImFkZCIsImhhbmRsZUF0dGFjayIsInBsYXllckJvYXJkIiwiY29tcHV0ZXIiLCJwcyIsInN1YnNjcmliZXJzIiwicHVibGlzaCIsImV2ZW50TmFtZSIsImRhdGEiLCJpc0FycmF5IiwiY2FsbGJhY2siLCJzdWJzY3JpYmUiLCJpbmRleCIsInVuc3Vic2NyaWJlIiwic3BsaWNlIiwicHViU3ViIiwiZW5lbXkiLCJlbmVteUJvYXJkQXJlYSIsInNldEF0dHJpYnV0ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJvbmNlIiwiYWRkTGlzdGVuZXJzVG9FbmVteUJvYXJkIiwiYXR0YWNrRW5lbXlDZWxsIiwiYXR0YWNrUGxheWVyQ2VsbCIsIm1vZGFsIiwibW9kYWxXaW5uZXIiLCJwbGF5QWdhaW5CdXR0b24iLCJzdHlsZSIsImRpc3BsYXkiLCJyZWxvYWQiLCJ0ZXh0Q29udGVudCIsImNoZWNrSWZHYW1lT3ZlciIsInBsYXllckJvYXJkQXJlYSIsInJlbmRlclBsYXllclNoaXBzIl0sInNvdXJjZVJvb3QiOiIifQ==