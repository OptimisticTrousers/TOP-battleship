(()=>{var t={653:(t,e,o)=>{const r=o(585);t.exports=()=>{const t={hasBeenHit:!1,isShip:!1,offLimits:!1},e=(()=>{const e=Array(10).fill().map((()=>Array(10).fill()));for(let o=0;o<10;o++)for(let r=0;r<10;r++)e[o][r]={...t,column:o,row:r};return e})(),o=[r(5,"Carrier"),r(4,"Battleship"),r(3,"Destroyer"),r(3,"Submarine"),r(2,"Patrol Boat")],n=(t,o)=>e?.[t]?.[o],i=(o,r,n=(()=>Object.assign(t,{offLimits:!0}))())=>{if(void 0===e?.[o]?.[r])return!0;const i=e[o][r];return e[o][r]={...i,...n},!0},a=(t,e)=>{i(t-1,e-1),i(t,e-1)},c=(t,e,o,r)=>{if("vertical"===o)for(let o=0;o<r;o++){const r=n(t,e+o);if(r&&!0===r.isShip&&!0===r.offLimits)return!1}if("horizontal"===o)for(let o=0;o<r;o++){const r=n(t+o,e);if(r&&!0===r.isShip&&!0===r.offLimits)return!1}return!1},l=(t,o,r,l)=>{const s=l.getLength();if(c(n(t,o)))return!1;if("vertical"===r){if(((t,o)=>t>=0&&t+o-1<e.length)(o,s)){for(let e=0;e<s;e+=1)i(t,o+e,{...l,position:e}),i(t+1,o+e),i(t-1,o+e);return((t,e,o)=>{a(t,e),i(t,e+o),i(t+1,e+o),i(t-1,e+o),i(t+1,e-1)})(t,o,s),!0}}else if("horizontal"===r&&((t,o)=>t>=0&&t+o-1<e.length)(t,s)){for(let e=0;e<s;e+=1)i(t+e,o,{...l,position:e}),i(t+e,o+1),i(t+e,o-1);return((t,e,o)=>{a(t,e),i(t+o,e),i(t-1,e+1),i(t+o,e+1),i(t+o,e-1)})(t,o,s),!0}return!1},s=()=>{const t=0===Math.floor(2*Math.random())?"vertical":"horizontal",o=Math.floor(100*Math.random()),r=(()=>{const t=[...e.flat()];return t.forEach((t=>{!0===t.hasBeenHit?t.availability=!1:t.availability=!0})),t})()[o];return!1===r.availability?s():{elementColumn:r.column,elementRow:r.row,randomDirection:t}};return{checkIfLocationIsAShipOrOffLimits:c,checkIfOffLimitZoneWasCorrectlyImplemented:t=>e.flat().filter((t=>!0===t.offLimits)).length===t+2,getLocation:n,receiveAttack:(t,o)=>{e[t][o].hasBeenHit=!0},checkIfAllShipsHaveSunk:()=>{let t=!0;for(let e=0;e<10;e++)for(let o=0;o<10;o++){const r=n(e,o);if(!1!==r.isShip&&r.isShip&&!1===r.isSunk()){t=!1;break}}return t},placeShip:l,randomlyPlaceShips:()=>{const t=[];for(let e=0;e<o.length;e+=1){const r=o[e],{randomColumn:n,randomRow:i,randomDirection:a}=s(r.getLength());l(n,i,a,r)?t.push({randomColumn:n,randomRow:i,randomDirection:a}):e-=1}return t},makeRandomCoordinates:s}}},61:t=>{t.exports=(t="player")=>({getName:()=>t,attack:(t,e,{getLocation:o,receiveAttack:r})=>{const n=o(t,e);return!1===n.hasBeenHit||n.isShip&&!1===n.getStatus().includes("unhit")?(r(t,e),n.hit?(n.hit(n.position),"You hit a ship!"):"It's a hit!"):"You have already hit this spot!"}})},585:t=>{t.exports=(t,e="ship")=>{const o=Array(t).fill("unhit");return{getName:()=>e,getLength:()=>o.length,isSunk:()=>o.every((t=>"hit"===t)),hit:e=>{e<t&&(o[e]="hit")},getStatus:()=>o,hasBeenHit:!1,offLimits:!0,isShip:!0}}}},e={};function o(r){var n=e[r];if(void 0!==n)return n.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,o),i.exports}o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},o.d=(t,e)=>{for(var r in e)o.o(e,r)&&!o.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";const t=(t,e,o,r)=>{const n=document.querySelector(`.${t}-board > .cell[column='${e}'][row='${o}']`);r.getLocation(e,o).isShip?n.classList.add("hit"):n.classList.add("miss")},e=(t,e,o,r)=>r.attack(t,e,o),r=(t,e,o)=>{const n=((t,e,o)=>{const r=o.getLocation(t+1,e),n=o.getLocation(t-1,e),i=o.getLocation(t,e+1),a=o.getLocation(t,e-1),c=[];return r&&!r.hasBeenHit&&c.push(r),n&&!n.hasBeenHit&&c.push(n),i&&!i.hasBeenHit&&c.push(i),a&&!a.hasBeenHit&&c.push(a),c})(t,e,o),i=Math.floor(Math.random()*n.length);return n[i]?n[i]:r(t,e,o)},n=(t,e,o)=>{const r={location(){return o.getLocation(this.column,this.row)}},n=Object.assign(Object.create(r),{column:t,row:e-1}),i=Object.assign(Object.create(r),{column:t,row:e+1}),a=Object.assign(Object.create(r),{column:t+1,row:e}),c=Object.assign(Object.create(r),{column:t-1,row:e}),l=[];return l.push(n),l.push(i),l.push(a),l.push(c),l},i=(o,a,c,l,s)=>{const u=o.getLocation(c,l);if("You hit a ship!"===e(c,l,o,a)){const t=r(c,l,o),e=t.column,h=n(c,l,o).filter((t=>void 0!==t.column&&void 0!==t.row)),m=t.row;if(u.isShip&&!1===u.isSunk())switch(Math.floor(Math.random()*h.length)){case 0:i(o,a,h[0].column,h[0].row,u);break;case 1:i(o,a,h[1].column,h[1].row,u);break;case 2:i(o,a,h[2].column,h[2].row,u);break;case 3:i(o,a,h[3].column,h[3].row,u)}setTimeout((()=>{i(o,a,e,m,s)}),700)}else if(u&&!1===u.isShip&&s&&!0===s.isShip){let t,e;s.getLength(),s.column>c&&(e=s.column-(s.column-c)),s.column<c&&(e=s.column+(c-s.column)),s.row>l&&(t=s.row-(s.row-l)),s.row<l&&(t=s.row+(l-s.row)),setTimeout((()=>{!1===s.isSunk()&&i(o,a,e,t,s)}),700)}setTimeout((()=>{t("player",c,l,o)}),700)};var a=o(653),c=o.n(a),l=o(585),s=o.n(l),u=o(61),h=o.n(u);const m=c()(),p=c()(),d=h()(),f=h()();s()(5,"Carrier"),s()(4,"Battleship"),s()(3,"Destroyer"),s()(3,"Submarine"),s()(2,"Patrol Boat"),m.placeShip(0,0,"horizontal",s()(5)),m.placeShip(3,4,"horizontal",s()(3)),m.placeShip(6,7,"horizontal",s()(2)),m.placeShip(9,1,"vertical",s()(3)),m.placeShip(5,9,"horizontal",s()(4)),p.placeShip(0,0,"horizontal",s()(5)),p.placeShip(3,4,"horizontal",s()(3)),p.placeShip(6,7,"horizontal",s()(2)),p.placeShip(9,1,"vertical",s()(3)),p.placeShip(5,9,"horizontal",s()(4));const S=(()=>{const t={};return{publish:function(e,o){Array.isArray(t[e])&&t[e].forEach((t=>{t(o)}))},subscribe:function e(o,r){Array.isArray(e[o])||(t[o]=[]),t[o].push(r);const n=t[o].length-1;return{unsubscribe(){t[o].splice(n,1)}}}}})();((t,e,o,r,n)=>{const i=document.querySelector("div.enemy-board");for(let a=0;a<10;a+=1)for(let c=0;c<10;c+=1){const l=i.querySelector(`.cell:nth-child(${10*c+a+1})`);l.setAttribute("column",a),l.setAttribute("row",c),l.addEventListener("click",(()=>{n.publish("click",{cell:l,column:a,row:c,playerBoard:t,enemyBoard:e,player:o,enemy:r})}),{once:!0})}})(m,p,d,f,S),S.subscribe("click",(({cell:o,column:r,row:n,playerBoard:a,enemyBoard:c,player:l,enemy:s})=>{((o,r,n,i)=>{e(o,r,n,i),t("enemy",o,r,n)})(r,n,c,l);const{elementColumn:u,elementRow:h}=a.makeRandomCoordinates();i(a,s,u,h),((t,e)=>{if(t.checkIfAllShipsHaveSunk()){const t=document.querySelector(".modal"),e=document.querySelector(".modal-content > p"),o=document.querySelector(".modal-content > button");t.style.display="block",o.addEventListener("click",(()=>{location.reload()})),e.textContent="You lose!"}if(e.checkIfAllShipsHaveSunk()){const t=document.querySelector(".modal"),e=document.querySelector(".modal-content > p"),o=document.querySelector(".modal-content > button");t.style.display="block",e.textContent="You win!",o.addEventListener("click",(()=>{location.reload()}))}})(a,c)})),(({getLocation:t})=>{const e=document.querySelector("div.player-board");for(let o=0;o<10;o+=1)for(let r=0;r<10;r+=1){const n=e.querySelector(`.cell:nth-child(${10*r+o+1})`);n.setAttribute("column",o),n.setAttribute("row",r);const i=t(o,r);i.isShip&&(n.classList.add("ship"),n.setAttribute("ship-name",i.getName()),n.setAttribute("draggable",!0))}})(m)})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoiMkJBR0EsTUFBTUEsRUFBYSxFQUFRLEtBMFAzQkMsRUFBT0MsUUF2UGlCLEtBQ3BCLE1BQU1DLEVBQVksQ0FBRUMsWUFBWSxFQUFPQyxRQUFRLEVBQU9DLFdBQVcsR0FhM0RDLEVBWGtCLE1BQ3BCLE1BQU1BLEVBQVlDLE1BQU0sSUFBSUMsT0FBT0MsS0FBSSxJQUFNRixNQUFNLElBQUlDLFNBQ3ZELElBQUksSUFBSUUsRUFBUSxFQUFHQSxFQUFTLEdBQUlBLElBQzVCLElBQUksSUFBSUMsRUFBSyxFQUFHQSxFQUFNLEdBQUlBLElBQ3RCTCxFQUFVSSxHQUFRQyxHQUFPLElBQUlULEVBQVdRLFNBQVFDLE9BR3hELE9BQU9MLEdBSU9NLEdBRVpDLEVBQVEsQ0FDVmQsRUFBVyxFQUFHLFdBQ2RBLEVBQVcsRUFBRyxjQUNkQSxFQUFXLEVBQUcsYUFDZEEsRUFBVyxFQUFHLGFBQ2RBLEVBQVcsRUFBRyxnQkFPWmUsRUFBYyxDQUFDSixFQUFRQyxJQUFRTCxJQUFZSSxLQUFVQyxHQUVyREksRUFBYyxDQUFDTCxFQUFRQyxFQUFLSyxFQUxILEtBQzNCQyxPQUFPQyxPQUFPaEIsRUFBVyxDQUFFRyxXQUFXLElBSURjLE1BQ3JDLFFBQW1DQyxJQUEvQmQsSUFBWUksS0FBVUMsR0FBb0IsT0FBTyxFQUNyRCxNQUFNVSxFQUFXZixFQUFVSSxHQUFRQyxHQUduQyxPQURBTCxFQUFVSSxHQUFRQyxHQUFPLElBQUlVLEtBQWFMLElBQ25DLEdBa0JMTSxFQUEwQixDQUFDWixFQUFRQyxLQUVyQ0ksRUFBWUwsRUFBUyxFQUFHQyxFQUFNLEdBRTlCSSxFQUFZTCxFQUFRQyxFQUFNLElBOEN4QlksRUFBb0MsQ0FDdENiLEVBQ0FDLEVBQ0FhLEVBQ0FDLEtBRUEsR0FBa0IsYUFBZEQsRUFDQSxJQUFLLElBQUlFLEVBQUksRUFBR0EsRUFBSUQsRUFBWUMsSUFBSyxDQUNqQyxNQUFNTCxFQUFXUCxFQUFZSixFQUFRQyxFQUFNZSxHQUMzQyxHQUFJTCxJQUV3QixJQUFwQkEsRUFBU2pCLFNBQ2MsSUFBdkJpQixFQUFTaEIsVUFFVCxPQUFPLEVBTXZCLEdBQWtCLGVBQWRtQixFQUNBLElBQUssSUFBSUUsRUFBSSxFQUFHQSxFQUFJRCxFQUFZQyxJQUFLLENBQ2pDLE1BQU1MLEVBQVdQLEVBQVlKLEVBQVNnQixFQUFHZixHQUN6QyxHQUFJVSxJQUV3QixJQUFwQkEsRUFBU2pCLFNBQ2MsSUFBdkJpQixFQUFTaEIsVUFFVCxPQUFPLEVBTXZCLE9BQU8sR0FHTHNCLEVBQVksQ0FBQ2pCLEVBQVFDLEVBQUthLEVBQVdSLEtBQ3ZDLE1BQU1TLEVBQWFULEVBQUtZLFlBQ3hCLEdBQUlMLEVBQWtDVCxFQUFZSixFQUFRQyxJQUN0RCxPQUFPLEVBQ1gsR0FBa0IsYUFBZGEsR0FDQSxHQTlDNEIsRUFBQ2IsRUFBS2MsSUFDdENkLEdBQU8sR0FBS0EsRUFBTWMsRUFBYSxFQUFJbkIsRUFBVXVCLE9BNkNyQ0MsQ0FBNEJuQixFQUFLYyxHQUFhLENBQzlDLElBQUssSUFBSUMsRUFBSSxFQUFHQSxFQUFJRCxFQUFZQyxHQUFLLEVBQ2pDWCxFQUFZTCxFQUFRQyxFQUFNZSxFQUFHLElBQUlWLEVBQU1lLFNBQVVMLElBQ2pEWCxFQUFZTCxFQUFTLEVBQUdDLEVBQU1lLEdBQzlCWCxFQUFZTCxFQUFTLEVBQUdDLEVBQU1lLEdBT2xDLE1BOUV1QyxFQUMvQ2hCLEVBQ0FDLEVBQ0FjLEtBSUFILEVBQXdCWixFQUFRQyxHQUVoQ0ksRUFBWUwsRUFBUUMsRUFBTWMsR0FFMUJWLEVBQVlMLEVBQVMsRUFBR0MsRUFBTWMsR0FFOUJWLEVBQVlMLEVBQVMsRUFBR0MsRUFBTWMsR0FFOUJWLEVBQVlMLEVBQVMsRUFBR0MsRUFBTSxJQTBEdEJxQixDQUNJdEIsRUFDQUMsRUFDQWMsSUFFRyxRQUVSLEdBQWtCLGVBQWRELEdBOUR3QixFQUFDZCxFQUFRZSxJQUM1Q2YsR0FBVSxHQUFLQSxFQUFTZSxFQUFhLEVBQUluQixFQUFVdUIsT0E4RDNDSSxDQUErQnZCLEVBQVFlLEdBQWEsQ0FDcEQsSUFBSyxJQUFJQyxFQUFJLEVBQUdBLEVBQUlELEVBQVlDLEdBQUssRUFDakNYLEVBQVlMLEVBQVNnQixFQUFJZixFQUFLLElBQUlLLEVBQU1lLFNBQVVMLElBRWxEWCxFQUFZTCxFQUFTZ0IsRUFBR2YsRUFBTSxHQUM5QkksRUFBWUwsRUFBU2dCLEVBQUdmLEVBQU0sR0FPbEMsTUEvR3lDLEVBQ2pERCxFQUNBQyxFQUNBYyxLQUlBSCxFQUF3QlosRUFBUUMsR0FFaENJLEVBQVlMLEVBQVNlLEVBQVlkLEdBRWpDSSxFQUFZTCxFQUFTLEVBQUdDLEVBQU0sR0FFOUJJLEVBQVlMLEVBQVNlLEVBQVlkLEVBQU0sR0FFdkNJLEVBQVlMLEVBQVNlLEVBQVlkLEVBQU0sSUEyRi9CdUIsQ0FDSXhCLEVBQ0FDLEVBQ0FjLElBRUcsRUFHZixPQUFPLEdBa0JMVSxFQUF3QixLQUMxQixNQUFNQyxFQUNnQyxJQUFsQ0MsS0FBS0MsTUFBc0IsRUFBaEJELEtBQUtFLFVBQXNCLFdBQWEsYUFDakRDLEVBQWlCSCxLQUFLQyxNQUFzQixJQUFoQkQsS0FBS0UsVUFHakNsQixFQXRCa0IsTUFFeEIsTUFBTW9CLEVBQXFCLElBQUluQyxFQUFVb0MsUUFXckMsT0FUQUQsRUFBbUJFLFNBQVNDLEtBQ0UsSUFBdkJBLEVBQVF6QyxXQUNQeUMsRUFBUUMsY0FBZSxFQUd2QkQsRUFBUUMsY0FBYyxLQUl2QkosR0FPZ0JLLEdBRVNOLEdBRXBDLE9BQTZCLElBQTFCbkIsRUFBU3dCLGFBQ0RWLElBT0osQ0FBRVksY0FKYTFCLEVBQVNYLE9BSVBzQyxXQUhMM0IsRUFBU1YsSUFHUXlCLG9CQTRCeEMsTUFBTyxDQUNIYixvQ0FDQTBCLDJDQVJnRHhCLEdBQ2hEbkIsRUFBVW9DLE9BQU9RLFFBQVFOLElBQWtDLElBQXRCQSxFQUFRdkMsWUFDeEN3QixTQUNMSixFQUFhLEVBTWJYLGNBQ0FxQyxjQWRrQixDQUFDekMsRUFBUUMsS0FDM0JMLEVBQVVJLEdBQVFDLEdBQUtSLFlBQWEsR0FjcENpRCx3QkE1TTRCLEtBRTVCLElBQUlDLEdBQWtCLEVBQzFCLElBQUssSUFBSTNCLEVBQUksRUFBR0EsRUFBSSxHQUFJQSxJQUN0QixJQUFLLElBQUk0QixFQUFJLEVBQUdBLEVBQUksR0FBSUEsSUFBSyxDQUMzQixNQUFNakMsRUFBV1AsRUFBWVksRUFBRzRCLEdBQ2hDLElBQXVCLElBQXBCakMsRUFBU2pCLFFBQ1RpQixFQUFTakIsU0FBZ0MsSUFBdEJpQixFQUFTa0MsU0FBbUIsQ0FDL0NGLEdBQW1CLEVBQ25CLE9BSVAsT0FBT0EsR0FnTUgxQixZQUNBNkIsbUJBaEN1QixLQUN2QixNQUFNQyxFQUFjLEdBQ3BCLElBQUssSUFBSS9CLEVBQUksRUFBR0EsRUFBSWIsRUFBTWdCLE9BQVFILEdBQUssRUFBRyxDQUN0QyxNQUFNVixFQUFPSCxFQUFNYSxJQUNiLGFBQUVnQyxFQUFZLFVBQUVDLEVBQVMsZ0JBQUV2QixHQUM3QkQsRUFBc0JuQixFQUFLWSxhQUMzQkQsRUFBVStCLEVBQWNDLEVBQVd2QixFQUFpQnBCLEdBQ3BEeUMsRUFBWUcsS0FBSyxDQUFFRixlQUFjQyxZQUFXdkIsb0JBRTVDVixHQUFLLEVBR2IsT0FBTytCLEdBcUJQdEIsMkIsT0NsT1JuQyxFQUFPQyxRQXhCYyxDQUFDNEQsRUFBTyxZQWtCbEIsQ0FDSEMsUUFsQlksSUFBTUQsRUFtQmxCRSxPQWpCVyxDQUFDckQsRUFBUUMsR0FBT0csY0FBYXFDLG9CQUN4QyxNQUFNOUIsRUFBV1AsRUFBWUosRUFBUUMsR0FDckMsT0FBNEIsSUFBeEJVLEVBQVNsQixZQUF5QmtCLEVBQVNqQixTQUFxRCxJQUEzQ2lCLEVBQVMyQyxZQUFZQyxTQUFTLFVBQ25GZCxFQUFjekMsRUFBUUMsR0FDbkJVLEVBQVM2QyxLQUVSN0MsRUFBUzZDLElBQUk3QyxFQUFTVSxVQUNmLG1CQUVKLGVBR0osc0MsUUNlZi9CLEVBQU9DLFFBOUJZLENBQUM0QixFQUFRZ0MsRUFBTyxVQUUvQixNQUFNTSxFQUFTNUQsTUFBTXNCLEdBQVFyQixLQUFLLFNBZ0JsQyxNQUFPLENBQ0hzRCxRQUxZLElBQU9ELEVBTW5CakMsVUFoQmMsSUFBTXVDLEVBQU90QyxPQWlCM0IwQixPQUxXLElBQU1ZLEVBQU9DLE9BQU9yQyxHQUEwQixRQUFiQSxJQU01Q21DLElBZFNuQyxJQUNMQSxFQUFXRixJQUNYc0MsRUFBT3BDLEdBQVksUUFhdkJpQyxVQWpCYyxJQUFNRyxFQWtCcEJoRSxZQUFZLEVBQ1pFLFdBQVcsRUFDWEQsUUFBUSxNQ3pCWmlFLEVBQTJCLEdBRy9CLFNBQVNDLEVBQW9CQyxHQUU1QixJQUFJQyxFQUFlSCxFQUF5QkUsR0FDNUMsUUFBcUJuRCxJQUFqQm9ELEVBQ0gsT0FBT0EsRUFBYXZFLFFBR3JCLElBQUlELEVBQVNxRSxFQUF5QkUsR0FBWSxDQUdqRHRFLFFBQVMsSUFPVixPQUhBd0UsRUFBb0JGLEdBQVV2RSxFQUFRQSxFQUFPQyxRQUFTcUUsR0FHL0N0RSxFQUFPQyxRQ3BCZnFFLEVBQW9CSSxFQUFLMUUsSUFDeEIsSUFBSTJFLEVBQVMzRSxHQUFVQSxFQUFPNEUsV0FDN0IsSUFBTzVFLEVBQWlCLFFBQ3hCLElBQU0sRUFFUCxPQURBc0UsRUFBb0JPLEVBQUVGLEVBQVEsQ0FBRUcsRUFBR0gsSUFDNUJBLEdDTFJMLEVBQW9CTyxFQUFJLENBQUM1RSxFQUFTOEUsS0FDakMsSUFBSSxJQUFJQyxLQUFPRCxFQUNYVCxFQUFvQlcsRUFBRUYsRUFBWUMsS0FBU1YsRUFBb0JXLEVBQUVoRixFQUFTK0UsSUFDNUUvRCxPQUFPaUUsZUFBZWpGLEVBQVMrRSxFQUFLLENBQUVHLFlBQVksRUFBTUMsSUFBS0wsRUFBV0MsTUNKM0VWLEVBQW9CVyxFQUFJLENBQUNJLEVBQUtDLElBQVVyRSxPQUFPc0UsVUFBVUMsZUFBZUMsS0FBS0osRUFBS0MsRyxtQkNBbEYsTUFBTUksRUFBZ0IsQ0FBQ0MsRUFBUWpGLEVBQVFDLEVBQUtpRixLQUN4QyxNQUFNQyxFQUFPQyxTQUFTQyxjQUNsQixJQUFJSiwyQkFBZ0NqRixZQUFpQkMsT0FHeENpRixFQUFXOUUsWUFBWUosRUFBUUMsR0FDbkNQLE9BQ1R5RixFQUFLRyxVQUFVQyxJQUFJLE9BRW5CSixFQUFLRyxVQUFVQyxJQUFJLFNBSXJCQyxFQUFlLENBQUN4RixFQUFRQyxFQUFLaUYsRUFBWUQsSUFDM0NBLEVBQU81QixPQUFPckQsRUFBUUMsRUFBS2lGLEdBaUN6Qk8sRUFBd0IsQ0FBQ3pGLEVBQVFDLEVBQUt5RixLQUV4QyxNQUFNQyxFQTVCZSxFQUFDM0YsRUFBUUMsRUFBS3lGLEtBRW5DLE1BQU1FLEVBQWFGLEVBQVl0RixZQUFZSixFQUFTLEVBQUdDLEdBQ2pENEYsRUFBaUJILEVBQVl0RixZQUFZSixFQUFTLEVBQUdDLEdBQ3JENkYsRUFBVUosRUFBWXRGLFlBQVlKLEVBQVFDLEVBQU0sR0FDaEQ4RixFQUFjTCxFQUFZdEYsWUFBWUosRUFBUUMsRUFBTSxHQUVwRDBGLEVBQVksR0FlbEIsT0FiR0MsSUFBZUEsRUFBV25HLFlBQ3pCa0csRUFBVXpDLEtBQUswQyxHQUVoQkMsSUFBbUJBLEVBQWVwRyxZQUNqQ2tHLEVBQVV6QyxLQUFLMkMsR0FFaEJDLElBQVlBLEVBQVFyRyxZQUNuQmtHLEVBQVV6QyxLQUFLNEMsR0FFaEJDLElBQWdCQSxFQUFZdEcsWUFDM0JrRyxFQUFVekMsS0FBSzZDLEdBR1pKLEdBTVdLLENBQWlCaEcsRUFBUUMsRUFBS3lGLEdBRTFDTyxFQUFjdEUsS0FBS0MsTUFBTUQsS0FBS0UsU0FBVzhELEVBQVV4RSxRQUV6RCxPQUFJd0UsRUFBVU0sR0FFUE4sRUFBVU0sR0FGa0JSLEVBQXNCekYsRUFBUUMsRUFBTXlGLElBV3JFUSxFQUEwQixDQUFDbEcsRUFBUUMsRUFBS3lGLEtBRXRDLE1BQU1TLEVBQW9CLENBQ3RCeEYsV0FDSSxPQUFPK0UsRUFBWXRGLFlBQVlnRyxLQUFLcEcsT0FBUW9HLEtBQUtuRyxPQUluRG9HLEVBQU05RixPQUFPQyxPQUFPRCxPQUFPK0YsT0FBT0gsR0FBb0IsQ0FDeERuRyxTQUNBQyxJQUFLQSxFQUFNLElBRVRzRyxFQUFTaEcsT0FBT0MsT0FBT0QsT0FBTytGLE9BQU9ILEdBQW9CLENBQzNEbkcsU0FDQUMsSUFBS0EsRUFBTSxJQUVUdUcsRUFBUWpHLE9BQU9DLE9BQU9ELE9BQU8rRixPQUFPSCxHQUFvQixDQUMxRG5HLE9BQVFBLEVBQVMsRUFDakJDLFFBRUV3RyxFQUFPbEcsT0FBT0MsT0FBT0QsT0FBTytGLE9BQU9ILEdBQW9CLENBQ3pEbkcsT0FBUUEsRUFBUyxFQUNqQkMsUUFFRXlHLEVBQWEsR0FPbkIsT0FMQUEsRUFBV3hELEtBQUttRCxHQUNoQkssRUFBV3hELEtBQUtxRCxHQUNoQkcsRUFBV3hELEtBQUtzRCxHQUNoQkUsRUFBV3hELEtBQUt1RCxHQUVUQyxHQXNCVEMsRUFBbUIsQ0FBQ2pCLEVBQWFrQixFQUFPdkUsRUFBZUMsRUFBWXVFLEtBQ2pFLE1BQU1sRyxFQUFXK0UsRUFBWXRGLFlBQVlpQyxFQUFlQyxHQUM1RCxHQUFtRSxvQkFBaEVrRCxFQUFhbkQsRUFBZUMsRUFBWW9ELEVBQWFrQixHQUE2QixDQUdqRixNQUFNRSxFQUFpQnJCLEVBQXNCcEQsRUFBZUMsRUFBWW9ELEdBQ2xFcUIsRUFBdUJELEVBQWU5RyxPQUd0Q2dILEVBRGFkLEVBQXdCN0QsRUFBZUMsRUFBWW9ELEdBQ2hDbEQsUUFBUU4sUUFBK0J4QixJQUFuQndCLEVBQVFsQyxhQUF3Q1UsSUFBaEJ3QixFQUFRakMsTUFDNUZnSCxFQUFvQkgsRUFBZTdHLElBQ2pDLEdBQUdVLEVBQVNqQixTQUFnQyxJQUF0QmlCLEVBQVNrQyxTQUkzQixPQUZlbEIsS0FBS0MsTUFBTUQsS0FBS0UsU0FBV21GLEVBQW1CN0YsU0FHekQsS0FBSyxFQUNHd0YsRUFBaUJqQixFQUFha0IsRUFBT0ksRUFBbUIsR0FBR2hILE9BQVFnSCxFQUFtQixHQUFHL0csSUFBS1UsR0FFbEcsTUFDSixLQUFLLEVBQ0dnRyxFQUFpQmpCLEVBQWFrQixFQUFPSSxFQUFtQixHQUFHaEgsT0FBUWdILEVBQW1CLEdBQUcvRyxJQUFLVSxHQUVsRyxNQUNKLEtBQUssRUFDR2dHLEVBQWlCakIsRUFBYWtCLEVBQU9JLEVBQW1CLEdBQUdoSCxPQUFRZ0gsRUFBbUIsR0FBRy9HLElBQUtVLEdBRWxHLE1BQ0osS0FBSyxFQUNHZ0csRUFBaUJqQixFQUFha0IsRUFBT0ksRUFBbUIsR0FBR2hILE9BQVFnSCxFQUFtQixHQUFHL0csSUFBS1UsR0FPdEh1RyxZQUFXLEtBQ0hQLEVBQWlCakIsRUFBYWtCLEVBQU9HLEVBQXNCRSxFQUFtQkosS0FDbkYsVUFFRixHQUFHbEcsSUFBK0IsSUFBcEJBLEVBQVNqQixRQUFvQm1ILElBQXdDLElBQXhCQSxFQUFhbkgsT0FBZ0IsQ0FFekYsSUFBSXlILEVBQ0FDLEVBQ2VQLEVBQWEzRixZQUM3QjJGLEVBQWE3RyxPQUFTcUMsSUFDekIrRSxFQUFxQlAsRUFBYTdHLFFBQVU2RyxFQUFhN0csT0FBU3FDLElBRS9Ed0UsRUFBYTdHLE9BQVNxQyxJQUN6QitFLEVBQXFCUCxFQUFhN0csUUFBVXFDLEVBQWdCd0UsRUFBYTdHLFNBRXRFNkcsRUFBYTVHLElBQU1xQyxJQUN0QjZFLEVBQWtCTixFQUFhNUcsS0FBUTRHLEVBQWE1RyxJQUFNcUMsSUFHdkR1RSxFQUFhNUcsSUFBTXFDLElBQ3RCNkUsRUFBa0JOLEVBQWE1RyxLQUFPcUMsRUFBYXVFLEVBQWE1RyxNQUloRWlILFlBQVcsTUFFc0IsSUFBMUJMLEVBQWFoRSxVQUVoQjhELEVBQWlCakIsRUFBYWtCLEVBQU9RLEVBQW9CRCxFQUFpQk4sS0FFNUUsS0FJTkssWUFBVyxLQUVYbEMsRUFBYyxTQUFVM0MsRUFBZUMsRUFBWW9ELEtBQ2hELE0seURDeExQLE1BQU1BLEVBQWMsTUFDZFIsRUFBYSxNQUViLEVBQVMsTUFFVG1DLEVBQVcsTUFJVCxJQUFXLEVBQUcsV0FDZCxJQUFXLEVBQUcsY0FDZCxJQUFXLEVBQUcsYUFDZCxJQUFXLEVBQUcsYUFDZCxJQUFXLEVBQUcsZUFFdEIzQixFQUFZekUsVUFBVSxFQUFHLEVBQUcsYUFBYyxJQUFXLElBQ3JEeUUsRUFBWXpFLFVBQVUsRUFBRyxFQUFHLGFBQWMsSUFBVyxJQUNyRHlFLEVBQVl6RSxVQUFVLEVBQUcsRUFBRyxhQUFjLElBQVcsSUFDckR5RSxFQUFZekUsVUFBVSxFQUFHLEVBQUcsV0FBWSxJQUFXLElBQ25EeUUsRUFBWXpFLFVBQVUsRUFBRyxFQUFHLGFBQWMsSUFBVyxJQUVyRGlFLEVBQVdqRSxVQUFVLEVBQUcsRUFBRyxhQUFjLElBQVcsSUFDcERpRSxFQUFXakUsVUFBVSxFQUFHLEVBQUcsYUFBYyxJQUFXLElBQ3BEaUUsRUFBV2pFLFVBQVUsRUFBRyxFQUFHLGFBQWMsSUFBVyxJQUNwRGlFLEVBQVdqRSxVQUFVLEVBQUcsRUFBRyxXQUFZLElBQVcsSUFDbERpRSxFQUFXakUsVUFBVSxFQUFHLEVBQUcsYUFBYyxJQUFXLElBRXBELE1BQU1xRyxFRGtLZ0IsTUFDbEIsTUFBTUMsRUFBYyxHQXdCcEIsTUFBTyxDQUNIQyxRQXZCSixTQUFpQkMsRUFBV0MsR0FDbkI3SCxNQUFNOEgsUUFBUUosRUFBWUUsS0FHL0JGLEVBQVlFLEdBQVd4RixTQUFTMkYsSUFDNUJBLEVBQVNGLE9BbUJiRyxVQWhCSixTQUFTQSxFQUFVSixFQUFXRyxHQUNyQi9ILE1BQU04SCxRQUFRRSxFQUFVSixNQUN6QkYsRUFBWUUsR0FBYSxJQUU3QkYsRUFBWUUsR0FBV3ZFLEtBQUswRSxHQUM1QixNQUFNRSxFQUFRUCxFQUFZRSxHQUFXdEcsT0FBUyxFQUU5QyxNQUFPLENBQ0g0RyxjQUNJUixFQUFZRSxHQUFXTyxPQUFPRixFQUFPLFFDdEwxQ0csR0QwVjZCLEVBQ3BDdkMsRUFDQVIsRUFDQUQsRUFDQTJCLEVBQ0FVLEtBRUEsTUFBTVksRUFBaUI5QyxTQUFTQyxjQUFjLG1CQUU5QyxJQUFLLElBQUlyRixFQUFTLEVBQUdBLEVBQVMsR0FBSUEsR0FBVSxFQUN4QyxJQUFLLElBQUlDLEVBQU0sRUFBR0EsRUFBTSxHQUFJQSxHQUFPLEVBQUcsQ0FFbEMsTUFBTWtGLEVBQU8rQyxFQUFlN0MsY0FDeEIsbUJBQXlCLEdBQU5wRixFQUFXRCxFQUFTLE1BRTNDbUYsRUFBS2dELGFBQWEsU0FBVW5JLEdBQzVCbUYsRUFBS2dELGFBQWEsTUFBT2xJLEdBRXpCa0YsRUFBS2lELGlCQUNELFNBQ0EsS0FDSWQsRUFBR0UsUUFBUSxRQUFTLENBQ2hCckMsT0FDQW5GLFNBQ0FDLE1BQ0F5RixjQUNBUixhQUNBRCxTQUNBMkIsWUFHUixDQUFFeUIsTUFBTSxNQ3ZYeEJDLENBQXlCNUMsRUFBYVIsRUFBWSxFQUFRbUMsRUFBVUMsR0FFcEVBLEVBQUdPLFVBQVUsU0QyWFMsRUFDbEIxQyxPQUNBbkYsU0FDQUMsTUFDQXlGLGNBQ0FSLGFBQ0FELFNBQ0EyQixZQXZab0IsRUFBQzVHLEVBQVFDLEVBQUtpRixFQUFZRCxLQUM5Q08sRUFBYXhGLEVBQVFDLEVBQUtpRixFQUFZRCxHQUN0Q0QsRUFBYyxRQUFTaEYsRUFBUUMsRUFBS2lGLElBd1pwQ3FELENBQWdCdkksRUFBUUMsRUFBS2lGLEVBQVlELEdBRXpDLE1BQU0sY0FBRTVDLEVBQWEsV0FBRUMsR0FBZW9ELEVBQVlqRSx3QkFDbERrRixFQUFpQmpCLEVBQWFrQixFQUFPdkUsRUFBZUMsR0FoRmhDLEVBQUNvRCxFQUFhUixLQUNsQyxHQUFJUSxFQUFZaEQsMEJBQTJCLENBQ3ZDLE1BQU04RixFQUFRcEQsU0FBU0MsY0FBYyxVQUMvQm9ELEVBQWNyRCxTQUFTQyxjQUFjLHNCQUNyQ3FELEVBQWtCdEQsU0FBU0MsY0FDN0IsMkJBR0ptRCxFQUFNRyxNQUFNQyxRQUFVLFFBQ3RCRixFQUFnQk4saUJBQWlCLFNBQVMsS0FDdEN6SCxTQUFTa0ksWUFHYkosRUFBWUssWUFBYyxZQUU5QixHQUFJNUQsRUFBV3hDLDBCQUEyQixDQUN0QyxNQUFNOEYsRUFBUXBELFNBQVNDLGNBQWMsVUFDL0JvRCxFQUFjckQsU0FBU0MsY0FBYyxzQkFDckNxRCxFQUFrQnRELFNBQVNDLGNBQzdCLDJCQUdKbUQsRUFBTUcsTUFBTUMsUUFBVSxRQUN0QkgsRUFBWUssWUFBYyxXQUMxQkosRUFBZ0JOLGlCQUFpQixTQUFTLEtBQ3RDekgsU0FBU2tJLGNBeURqQkUsQ0FBZ0JyRCxFQUFhUixNQXRHQSxHQUFHOUUsa0JBQ2hDLE1BQU00SSxFQUFrQjVELFNBQVNDLGNBQWMsb0JBRS9DLElBQUssSUFBSXJGLEVBQVMsRUFBR0EsRUFBUyxHQUFJQSxHQUFVLEVBQ3hDLElBQUssSUFBSUMsRUFBTSxFQUFHQSxFQUFNLEdBQUlBLEdBQU8sRUFBRyxDQUNsQyxNQUFNa0YsRUFBTzZELEVBQWdCM0QsY0FDekIsbUJBQXlCLEdBQU5wRixFQUFXRCxFQUFTLE1BRTNDbUYsRUFBS2dELGFBQWEsU0FBVW5JLEdBQzVCbUYsRUFBS2dELGFBQWEsTUFBT2xJLEdBQ3pCLE1BQU1VLEVBQVdQLEVBQVlKLEVBQVFDLEdBQ2pDVSxFQUFTakIsU0FDVHlGLEVBQUtHLFVBQVVDLElBQUksUUFDbkJKLEVBQUtnRCxhQUFhLFlBQWF4SCxFQUFTeUMsV0FDeEMrQixFQUFLZ0QsYUFBYSxhQUFhLE1DL1MvQ2MsQ0FBa0J2RCxJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvLi9zcmMvZ2FtZWJvYXJkL2dhbWVib2FyZC5qcyIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC8uL3NyYy9wbGF5ZXIvcGxheWVyLmpzIiwid2VicGFjazovL3RvcC1iYXR0bGVzaGlwLy4vc3JjL3NoaXAvc2hpcC5qcyIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC8uL3NyYy9kb20uanMiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1tdWx0aS1hc3NpZ24gKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC1leHByZXNzaW9ucyAqL1xuY29uc3QgY3JlYXRlU2hpcCA9IHJlcXVpcmUoJy4uL3NoaXAvc2hpcCcpXG5cbi8qIGVzbGludC1kaXNhYmxlIG5vLXBhcmFtLXJlYXNzaWduICovXG5jb25zdCBjcmVhdGVHYW1lQm9hcmQgPSAoKSA9PiB7XG4gICAgY29uc3QgZW1wdHlDZWxsID0geyBoYXNCZWVuSGl0OiBmYWxzZSwgaXNTaGlwOiBmYWxzZSwgb2ZmTGltaXRzOiBmYWxzZSB9XG4gICAgXG4gICAgY29uc3QgaW5pdGlhbGl6ZUJvYXJkID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBnYW1lQm9hcmQgPSBBcnJheSgxMCkuZmlsbCgpLm1hcCgoKSA9PiBBcnJheSgxMCkuZmlsbCgpKVxuICAgICAgICBmb3IobGV0IGNvbHVtbj0gMDsgY29sdW1uIDwgMTA7IGNvbHVtbisrKXtcbiAgICAgICAgICAgIGZvcihsZXQgcm93PSAwOyByb3cgPCAxMDsgcm93Kyspe1xuICAgICAgICAgICAgICAgIGdhbWVCb2FyZFtjb2x1bW5dW3Jvd10gPSB7Li4uZW1wdHlDZWxsLCBjb2x1bW4sIHJvd31cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZ2FtZUJvYXJkXG4gICAgXG4gICAgfVxuXG4gICAgY29uc3QgZ2FtZUJvYXJkID0gaW5pdGlhbGl6ZUJvYXJkKClcblxuICAgIGNvbnN0IHNoaXBzID0gW1xuICAgICAgICBjcmVhdGVTaGlwKDUsICdDYXJyaWVyJyksXG4gICAgICAgIGNyZWF0ZVNoaXAoNCwgJ0JhdHRsZXNoaXAnKSxcbiAgICAgICAgY3JlYXRlU2hpcCgzLCAnRGVzdHJveWVyJyksXG4gICAgICAgIGNyZWF0ZVNoaXAoMywgJ1N1Ym1hcmluZScpLFxuICAgICAgICBjcmVhdGVTaGlwKDIsICdQYXRyb2wgQm9hdCcpLFxuICAgIF1cblxuXG4gICAgY29uc3QgY3JlYXRlT2ZmTGltaXRMb2NhdGlvbiA9ICgpID0+XG4gICAgICAgIE9iamVjdC5hc3NpZ24oZW1wdHlDZWxsLCB7IG9mZkxpbWl0czogdHJ1ZSB9KVxuXG4gICAgY29uc3QgZ2V0TG9jYXRpb24gPSAoY29sdW1uLCByb3cpID0+IGdhbWVCb2FyZD8uW2NvbHVtbl0/Lltyb3ddXG5cbiAgICBjb25zdCBzZXRMb2NhdGlvbiA9IChjb2x1bW4sIHJvdywgc2hpcCA9IGNyZWF0ZU9mZkxpbWl0TG9jYXRpb24oKSkgPT4ge1xuICAgICAgICBpZiAoZ2FtZUJvYXJkPy5bY29sdW1uXT8uW3Jvd10gPT09IHVuZGVmaW5lZCkgcmV0dXJuIHRydWVcbiAgICAgICAgY29uc3QgbG9jYXRpb24gPSBnYW1lQm9hcmRbY29sdW1uXVtyb3ddXG5cbiAgICAgICAgZ2FtZUJvYXJkW2NvbHVtbl1bcm93XSA9IHsuLi5sb2NhdGlvbiwgLi4uc2hpcH1cbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgY29uc3QgY2hlY2tJZkFsbFNoaXBzSGF2ZVN1bmsgPSAoKSA9PiB7XG5cbiAgICAgICAgbGV0IGhhdmVBbGxTaGlwc1N1bmsgPXRydWUgIFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTA7IGkrKykge1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAxMDsgaisrKSB7XG4gICAgICAgIGNvbnN0IGxvY2F0aW9uID0gZ2V0TG9jYXRpb24oaSwgailcbiAgICAgICAgaWYobG9jYXRpb24uaXNTaGlwID09PSBmYWxzZSkgY29udGludWVcbiAgICAgICAgaWYobG9jYXRpb24uaXNTaGlwICYmIGxvY2F0aW9uLmlzU3VuaygpID09PSBmYWxzZSl7XG4gICAgICAgICAgIGhhdmVBbGxTaGlwc1N1bmsgPSBmYWxzZSBcbiAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGhhdmVBbGxTaGlwc1N1bmsgXG4gICAgfVxuXG4gICAgY29uc3QgYWRkT2ZmTGltaXRBcmVhRm9yU2hpcHMgPSAoY29sdW1uLCByb3cpID0+IHtcbiAgICAgICAgLy8gdG9wLWxlZnRcbiAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uIC0gMSwgcm93IC0gMSlcbiAgICAgICAgLy8gdG9wXG4gICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiwgcm93IC0gMSlcbiAgICB9XG5cbiAgICBjb25zdCBhZGRPZmZMaW1pdEFyZWFGb3JIb3Jpem9udGFsbHlQb3NpdGlvbmVkU2hpcCA9IChcbiAgICAgICAgY29sdW1uLFxuICAgICAgICByb3csXG4gICAgICAgIHNoaXBMZW5ndGhcbiAgICApID0+IHtcbiAgICAgICAgLy8gcG9zaXRpb25zIHJlbGF0aXZlIHRvIHRoZSBzaGlwIGl0c2VsZihpZS4gYSBob3Jpem9udGFsIHNoaXAncyBib3R0b20gaXMgdG8gdGhlIHJpZ2h0KVxuXG4gICAgICAgIGFkZE9mZkxpbWl0QXJlYUZvclNoaXBzKGNvbHVtbiwgcm93KVxuICAgICAgICAvLyBib3R0b21cbiAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uICsgc2hpcExlbmd0aCwgcm93KVxuICAgICAgICAvLyBib3R0b20tbGVmdFxuICAgICAgICBzZXRMb2NhdGlvbihjb2x1bW4gLSAxLCByb3cgKyAxKVxuICAgICAgICAvLyBib3R0b20tcmlnaHRcbiAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uICsgc2hpcExlbmd0aCwgcm93ICsgMSlcbiAgICAgICAgLy8gdG9wLXJpZ2h0XG4gICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiArIHNoaXBMZW5ndGgsIHJvdyAtIDEpXG4gICAgfVxuXG4gICAgY29uc3QgYWRkT2ZmTGltaXRBcmVhRm9yVmVydGljYWxseVBvc2l0aW9uZWRTaGlwID0gKFxuICAgICAgICBjb2x1bW4sXG4gICAgICAgIHJvdyxcbiAgICAgICAgc2hpcExlbmd0aFxuICAgICkgPT4ge1xuICAgICAgICAvLyBwb3NpdGlvbnMgcmVsYXRpdmUgdG8gaG93IHRoZSB1c2VyIHNlZXMgaXQoaWUuIGEgdmVydGljYWwgc2hpcCdzIGJvdHRvbSBpcyB0byB0aGUgYm90dG9tKVxuXG4gICAgICAgIGFkZE9mZkxpbWl0QXJlYUZvclNoaXBzKGNvbHVtbiwgcm93KVxuICAgICAgICAvLyBib3R0b21cbiAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uLCByb3cgKyBzaGlwTGVuZ3RoKVxuICAgICAgICAvLyBib3R0b20tcmlnaHRcbiAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uICsgMSwgcm93ICsgc2hpcExlbmd0aClcbiAgICAgICAgLy8gYm90dG9tLWxlZnRcbiAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uIC0gMSwgcm93ICsgc2hpcExlbmd0aClcbiAgICAgICAgLy8gdG9wLXJpZ2h0XG4gICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiArIDEsIHJvdyAtIDEpXG4gICAgfVxuXG4gICAgY29uc3QgY2hlY2tJZkNvbHVtbkNvb3JkaW5hdGVJc1ZhbGlkID0gKGNvbHVtbiwgc2hpcExlbmd0aCkgPT5cbiAgICAgICAgY29sdW1uID49IDAgJiYgY29sdW1uICsgc2hpcExlbmd0aCAtIDEgPCBnYW1lQm9hcmQubGVuZ3RoXG5cbiAgICBjb25zdCBjaGVja0lmUm93Q29vcmRpbmF0ZUlzVmFsaWQgPSAocm93LCBzaGlwTGVuZ3RoKSA9PlxuICAgICAgICByb3cgPj0gMCAmJiByb3cgKyBzaGlwTGVuZ3RoIC0gMSA8IGdhbWVCb2FyZC5sZW5ndGhcblxuXG4gICAgY29uc3QgY2hlY2tJZkxvY2F0aW9uSXNBU2hpcE9yT2ZmTGltaXRzID0gKFxuICAgICAgICBjb2x1bW4sXG4gICAgICAgIHJvdyxcbiAgICAgICAgZGlyZWN0aW9uLFxuICAgICAgICBzaGlwTGVuZ3RoXG4gICAgKSA9PiB7XG4gICAgICAgIGlmIChkaXJlY3Rpb24gPT09ICd2ZXJ0aWNhbCcpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcExlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbG9jYXRpb24gPSBnZXRMb2NhdGlvbihjb2x1bW4sIHJvdyArIGkpXG4gICAgICAgICAgICAgICAgaWYgKGxvY2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmlzU2hpcCA9PT0gdHJ1ZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ub2ZmTGltaXRzID09PSB0cnVlXG4gICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAnaG9yaXpvbnRhbCcpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcExlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbG9jYXRpb24gPSBnZXRMb2NhdGlvbihjb2x1bW4gKyBpLCByb3cpXG4gICAgICAgICAgICAgICAgaWYgKGxvY2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmlzU2hpcCA9PT0gdHJ1ZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ub2ZmTGltaXRzID09PSB0cnVlXG4gICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICBjb25zdCBwbGFjZVNoaXAgPSAoY29sdW1uLCByb3csIGRpcmVjdGlvbiwgc2hpcCkgPT4ge1xuICAgICAgICBjb25zdCBzaGlwTGVuZ3RoID0gc2hpcC5nZXRMZW5ndGgoKVxuICAgICAgICBpZiAoY2hlY2tJZkxvY2F0aW9uSXNBU2hpcE9yT2ZmTGltaXRzKGdldExvY2F0aW9uKGNvbHVtbiwgcm93LCBkaXJlY3Rpb24sIHNoaXBMZW5ndGgpKSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAndmVydGljYWwnKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2tJZlJvd0Nvb3JkaW5hdGVJc1ZhbGlkKHJvdywgc2hpcExlbmd0aCkpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXBMZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgICAgICAgICBzZXRMb2NhdGlvbihjb2x1bW4sIHJvdyArIGksIHsuLi5zaGlwLCBwb3NpdGlvbjogaX0pXG4gICAgICAgICAgICAgICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiArIDEsIHJvdyArIGkpXG4gICAgICAgICAgICAgICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiAtIDEsIHJvdyArIGkpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGFkZE9mZkxpbWl0QXJlYUZvclZlcnRpY2FsbHlQb3NpdGlvbmVkU2hpcChcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLFxuICAgICAgICAgICAgICAgICAgICByb3csXG4gICAgICAgICAgICAgICAgICAgIHNoaXBMZW5ndGhcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPT09ICdob3Jpem9udGFsJykge1xuICAgICAgICAgICAgaWYgKGNoZWNrSWZDb2x1bW5Db29yZGluYXRlSXNWYWxpZChjb2x1bW4sIHNoaXBMZW5ndGgpKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGlwTGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uICsgaSAsIHJvdywgey4uLnNoaXAsIHBvc2l0aW9uOiBpfSlcbiAgICAgICAgICAgICAgICAgICAgLy9zZXRMb2NhdGlvbihjb2x1bW4gKyBpLCByb3csIHNoaXApXG4gICAgICAgICAgICAgICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiArIGksIHJvdyArIDEpXG4gICAgICAgICAgICAgICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiArIGksIHJvdyAtIDEpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGFkZE9mZkxpbWl0QXJlYUZvckhvcml6b250YWxseVBvc2l0aW9uZWRTaGlwKFxuICAgICAgICAgICAgICAgICAgICBjb2x1bW4sXG4gICAgICAgICAgICAgICAgICAgIHJvdyxcbiAgICAgICAgICAgICAgICAgICAgc2hpcExlbmd0aFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICAgICAgY29uc3QgYXZhaWxhYmxlU3BhY2VzID0gKCkgPT57XG5cbiAgICAgICAgY29uc3QgZmxhdHRlbmVkR2FtZUJvYXJkID0gWy4uLmdhbWVCb2FyZC5mbGF0KCldXG5cbiAgICAgICAgICAgIGZsYXR0ZW5lZEdhbWVCb2FyZC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYoZWxlbWVudC5oYXNCZWVuSGl0ID09PSB0cnVlKXtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5hdmFpbGFiaWxpdHkgPSBmYWxzZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmF2YWlsYWJpbGl0eSA9dHJ1ZSAgXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgcmV0dXJuIGZsYXR0ZW5lZEdhbWVCb2FyZFxuXG4gICAgICAgIH1cbiAgICBjb25zdCBtYWtlUmFuZG9tQ29vcmRpbmF0ZXMgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHJhbmRvbURpcmVjdGlvbiA9XG4gICAgICAgICAgICBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyKSA9PT0gMCA/ICd2ZXJ0aWNhbCcgOiAnaG9yaXpvbnRhbCdcbiAgICAgICAgY29uc3QgcmFuZG9tTG9jYXRpb24gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDApXG4gICAgICAgIGNvbnN0IGZsYXR0ZW5lZEdhbWVCb2FyZCA9IGF2YWlsYWJsZVNwYWNlcygpXG5cbiAgICAgICAgY29uc3QgbG9jYXRpb24gPSBmbGF0dGVuZWRHYW1lQm9hcmRbcmFuZG9tTG9jYXRpb25dXG5cbiAgICAgICAgaWYobG9jYXRpb24uYXZhaWxhYmlsaXR5ID09PSBmYWxzZSl7XG4gICAgICAgICAgICByZXR1cm4gbWFrZVJhbmRvbUNvb3JkaW5hdGVzKClcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGVsZW1lbnRDb2x1bW4gPSBsb2NhdGlvbi5jb2x1bW5cbiAgICAgICAgY29uc3QgZWxlbWVudFJvdyA9IGxvY2F0aW9uLnJvd1xuXG5cbiAgICAgICAgcmV0dXJuIHsgZWxlbWVudENvbHVtbiwgZWxlbWVudFJvdywgcmFuZG9tRGlyZWN0aW9uIH1cbiAgICB9XG5cbiAgICBjb25zdCByYW5kb21seVBsYWNlU2hpcHMgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHNoaXBEZXRhaWxzID0gW11cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGlwcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgY29uc3Qgc2hpcCA9IHNoaXBzW2ldXG4gICAgICAgICAgICBjb25zdCB7IHJhbmRvbUNvbHVtbiwgcmFuZG9tUm93LCByYW5kb21EaXJlY3Rpb24gfSA9XG4gICAgICAgICAgICAgICAgbWFrZVJhbmRvbUNvb3JkaW5hdGVzKHNoaXAuZ2V0TGVuZ3RoKCkpXG4gICAgICAgICAgICBpZiAocGxhY2VTaGlwKHJhbmRvbUNvbHVtbiwgcmFuZG9tUm93LCByYW5kb21EaXJlY3Rpb24sIHNoaXApKSB7XG4gICAgICAgICAgICAgICAgc2hpcERldGFpbHMucHVzaCh7IHJhbmRvbUNvbHVtbiwgcmFuZG9tUm93LCByYW5kb21EaXJlY3Rpb24gfSlcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaSAtPSAxXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNoaXBEZXRhaWxzXG4gICAgfVxuXG4gICAgY29uc3QgcmVjZWl2ZUF0dGFjayA9IChjb2x1bW4sIHJvdykgPT4ge1xuICAgICAgICBnYW1lQm9hcmRbY29sdW1uXVtyb3ddLmhhc0JlZW5IaXQgPSB0cnVlXG4gICAgfVxuXG4gICAgY29uc3QgY2hlY2tJZk9mZkxpbWl0Wm9uZVdhc0NvcnJlY3RseUltcGxlbWVudGVkID0gKHNoaXBMZW5ndGgpID0+XG4gICAgICAgIGdhbWVCb2FyZC5mbGF0KCkuZmlsdGVyKChlbGVtZW50KSA9PiBlbGVtZW50Lm9mZkxpbWl0cyA9PT0gdHJ1ZSlcbiAgICAgICAgICAgIC5sZW5ndGggPT09XG4gICAgICAgIHNoaXBMZW5ndGggKyAyXG4gICAgLy8gYWRkaW5nIHNoaXBMZW5ndGggcGx1cyB0d28gYmVjYXVzZSBmb3IgZXZlcnkgaW5jcmVhc2UgaW4gdGhlIHNpemUgb2Ygc2hpcCwgdGhlIHpvbmVzIGNvdmVyZWQgaW5jcmVhc2UgYnkgMiB1bml0c1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgY2hlY2tJZkxvY2F0aW9uSXNBU2hpcE9yT2ZmTGltaXRzLFxuICAgICAgICBjaGVja0lmT2ZmTGltaXRab25lV2FzQ29ycmVjdGx5SW1wbGVtZW50ZWQsXG4gICAgICAgIGdldExvY2F0aW9uLFxuICAgICAgICByZWNlaXZlQXR0YWNrLFxuICAgICAgICBjaGVja0lmQWxsU2hpcHNIYXZlU3VuayxcbiAgICAgICAgcGxhY2VTaGlwLFxuICAgICAgICByYW5kb21seVBsYWNlU2hpcHMsXG4gICAgICAgIG1ha2VSYW5kb21Db29yZGluYXRlcyxcbiAgICB9XG59XG5tb2R1bGUuZXhwb3J0cyA9IGNyZWF0ZUdhbWVCb2FyZCIsImNvbnN0IGNyZWF0ZVBsYXllciA9IChuYW1lID0gJ3BsYXllcicpID0+IHtcbiAgICBjb25zdCBnZXROYW1lID0gKCkgPT4gbmFtZVxuXG4gICAgY29uc3QgYXR0YWNrID0gKGNvbHVtbiwgcm93LCB7IGdldExvY2F0aW9uLCByZWNlaXZlQXR0YWNrIH0pID0+IHtcbiAgICAgICAgY29uc3QgbG9jYXRpb24gPSBnZXRMb2NhdGlvbihjb2x1bW4sIHJvdylcbiAgICAgICAgaWYgKGxvY2F0aW9uLmhhc0JlZW5IaXQgPT09IGZhbHNlIHx8IChsb2NhdGlvbi5pc1NoaXAgJiYgbG9jYXRpb24uZ2V0U3RhdHVzKCkuaW5jbHVkZXMoJ3VuaGl0JykgPT09IGZhbHNlKSkge1xuICAgICAgICAgICAgcmVjZWl2ZUF0dGFjayhjb2x1bW4sIHJvdylcbiAgICAgICAgICAgIGlmKGxvY2F0aW9uLmhpdCl7XG5cbiAgICAgICAgICAgICAgICBsb2NhdGlvbi5oaXQobG9jYXRpb24ucG9zaXRpb24pXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiWW91IGhpdCBhIHNoaXAhXCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBcIkl0J3MgYSBoaXQhXCJcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAnWW91IGhhdmUgYWxyZWFkeSBoaXQgdGhpcyBzcG90ISdcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBnZXROYW1lLFxuICAgICAgICBhdHRhY2ssXG4gICAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGNyZWF0ZVBsYXllclxuIiwiY29uc3QgY3JlYXRlU2hpcCA9IChsZW5ndGgsIG5hbWUgPSAnc2hpcCcpID0+IHtcblxuICAgIGNvbnN0IHN0YXR1cyA9IEFycmF5KGxlbmd0aCkuZmlsbCgndW5oaXQnKVxuXG4gICAgY29uc3QgZ2V0TGVuZ3RoID0gKCkgPT4gc3RhdHVzLmxlbmd0aFxuXG4gICAgY29uc3QgZ2V0U3RhdHVzID0gKCkgPT4gc3RhdHVzXG5cbiAgICBjb25zdCBoaXQgPSAocG9zaXRpb24pID0+IHtcbiAgICAgICAgaWYgKHBvc2l0aW9uIDwgbGVuZ3RoKSB7XG4gICAgICAgICAgICBzdGF0dXNbcG9zaXRpb25dID0gJ2hpdCdcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGdldE5hbWUgPSAoKSA9PiAgbmFtZVxuXG4gICAgY29uc3QgaXNTdW5rID0gKCkgPT4gc3RhdHVzLmV2ZXJ5KChwb3NpdGlvbikgPT4gcG9zaXRpb24gPT09ICdoaXQnKVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgZ2V0TmFtZSxcbiAgICAgICAgZ2V0TGVuZ3RoLFxuICAgICAgICBpc1N1bmssXG4gICAgICAgIGhpdCxcbiAgICAgICAgZ2V0U3RhdHVzLFxuICAgICAgICBoYXNCZWVuSGl0OiBmYWxzZSxcbiAgICAgICAgb2ZmTGltaXRzOiB0cnVlLFxuICAgICAgICBpc1NoaXA6IHRydWUsXG4gICAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGNyZWF0ZVNoaXBcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gKG1vZHVsZSkgPT4ge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHQoKSA9PiAobW9kdWxlWydkZWZhdWx0J10pIDpcblx0XHQoKSA9PiAobW9kdWxlKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCJjb25zdCByZW5kZXJBdHRhY2tzID0gKHBsYXllciwgY29sdW1uLCByb3csIGVuZW15Qm9hcmQpID0+IHtcbiAgICBjb25zdCBjZWxsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgYC4ke3BsYXllcn0tYm9hcmQgPiAuY2VsbFtjb2x1bW49JyR7Y29sdW1ufSddW3Jvdz0nJHtyb3d9J11gXG4gICAgKVxuXG4gICAgY29uc3QgbG9jYXRpb24gPSBlbmVteUJvYXJkLmdldExvY2F0aW9uKGNvbHVtbiwgcm93KVxuICAgIGlmIChsb2NhdGlvbi5pc1NoaXApIHtcbiAgICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKCdoaXQnKVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZCgnbWlzcycpXG4gICAgfVxufVxuXG5jb25zdCBoYW5kbGVBdHRhY2sgPSAoY29sdW1uLCByb3csIGVuZW15Qm9hcmQsIHBsYXllcikgPT5cbiAgICBwbGF5ZXIuYXR0YWNrKGNvbHVtbiwgcm93LCBlbmVteUJvYXJkKVxuXG5jb25zdCBhdHRhY2tFbmVteUNlbGwgPSAoY29sdW1uLCByb3csIGVuZW15Qm9hcmQsIHBsYXllcikgPT4ge1xuICAgIGhhbmRsZUF0dGFjayhjb2x1bW4sIHJvdywgZW5lbXlCb2FyZCwgcGxheWVyKVxuICAgIHJlbmRlckF0dGFja3MoJ2VuZW15JywgY29sdW1uLCByb3csIGVuZW15Qm9hcmQpXG59XG5cbmNvbnN0IGlzU3BhY2VBcm91bmRIaXQgPSAoY29sdW1uLCByb3csIHBsYXllckJvYXJkKSA9PiB7XG5cbiAgICBjb25zdCBuZXh0Q29sdW1uID0gcGxheWVyQm9hcmQuZ2V0TG9jYXRpb24oY29sdW1uICsgMSwgcm93KVxuICAgIGNvbnN0IHByZXZpb3VzQ29sdW1uID0gcGxheWVyQm9hcmQuZ2V0TG9jYXRpb24oY29sdW1uIC0gMSwgcm93KVxuICAgIGNvbnN0IG5leHRSb3cgPSBwbGF5ZXJCb2FyZC5nZXRMb2NhdGlvbihjb2x1bW4sIHJvdyArIDEpXG4gICAgY29uc3QgcHJldmlvdXNSb3cgPSBwbGF5ZXJCb2FyZC5nZXRMb2NhdGlvbihjb2x1bW4sIHJvdyAtIDEpXG5cbiAgICBjb25zdCBzcGFjZXNIaXQgPSBbXVxuXG4gICAgaWYobmV4dENvbHVtbiAmJiAhbmV4dENvbHVtbi5oYXNCZWVuSGl0KXtcbiAgICAgICAgc3BhY2VzSGl0LnB1c2gobmV4dENvbHVtbilcbiAgICB9XG4gICAgaWYocHJldmlvdXNDb2x1bW4gJiYgIXByZXZpb3VzQ29sdW1uLmhhc0JlZW5IaXQpe1xuICAgICAgICBzcGFjZXNIaXQucHVzaChwcmV2aW91c0NvbHVtbilcbiAgICB9XG4gICAgaWYobmV4dFJvdyAmJiAhbmV4dFJvdy5oYXNCZWVuSGl0KXtcbiAgICAgICAgc3BhY2VzSGl0LnB1c2gobmV4dFJvdylcbiAgICB9XG4gICAgaWYocHJldmlvdXNSb3cgJiYgIXByZXZpb3VzUm93Lmhhc0JlZW5IaXQpe1xuICAgICAgICBzcGFjZXNIaXQucHVzaChwcmV2aW91c1JvdylcbiAgICB9XG5cbiAgICByZXR1cm4gc3BhY2VzSGl0XG5cbn1cblxuY29uc3QgcmFuZG9tRGlyZWN0aW9uQXR0YWNrID0gKGNvbHVtbiwgcm93LCBwbGF5ZXJCb2FyZCkgPT4ge1xuXG4gICAgY29uc3Qgc3BhY2VzSGl0ID0gaXNTcGFjZUFyb3VuZEhpdChjb2x1bW4sIHJvdywgcGxheWVyQm9hcmQpXG5cbiAgICBjb25zdCByYW5kb21JbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHNwYWNlc0hpdC5sZW5ndGgpXG5cbiAgICBpZighc3BhY2VzSGl0W3JhbmRvbUluZGV4XSkgcmV0dXJuIHJhbmRvbURpcmVjdGlvbkF0dGFjayhjb2x1bW4sIHJvdyAsIHBsYXllckJvYXJkKVxuXG4gICAgcmV0dXJuIHNwYWNlc0hpdFtyYW5kb21JbmRleF1cbn1cblxuY29uc3QgaXNSYW5kb21Db2x1bW5HcmVhdGVyVGhhbkN1cnJlbnRDb2x1bW4gPSAoY29sdW1uLCByYW5kb21Db2x1bW4pID0+IFxuICAgIHJhbmRvbUNvbHVtbiA+IGNvbHVtblxuXG5jb25zdCBpc1JhbmRvbVJvd0dyZWF0ZXJUaGFuQ3VycmVudENvbHVtbiA9IChyb3csIHJhbmRvbVJvdykgPT4gXG4gICAgcmFuZG9tUm93ID4gcm93XG5cbmNvbnN0IGxpc3RPZlJhbmRvbUNvb3JkaW5hdGVzID0gKGNvbHVtbiwgcm93LCBwbGF5ZXJCb2FyZCkgPT4ge1xuXG4gICAgICAgIGNvbnN0IGxvY2F0aW9uUHJvdG90eXBlID0ge1xuICAgICAgICAgICAgbG9jYXRpb24oKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBsYXllckJvYXJkLmdldExvY2F0aW9uKHRoaXMuY29sdW1uLCB0aGlzLnJvdylcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHRvcCA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShsb2NhdGlvblByb3RvdHlwZSksIHtcbiAgICAgICAgICAgIGNvbHVtbixcbiAgICAgICAgICAgIHJvdzogcm93IC0gMSxcbiAgICAgICAgfSlcbiAgICAgICAgY29uc3QgYm90dG9tID0gT2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKGxvY2F0aW9uUHJvdG90eXBlKSwge1xuICAgICAgICAgICAgY29sdW1uLFxuICAgICAgICAgICAgcm93OiByb3cgKyAxLFxuICAgICAgICB9KVxuICAgICAgICBjb25zdCByaWdodCA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShsb2NhdGlvblByb3RvdHlwZSksIHtcbiAgICAgICAgICAgIGNvbHVtbjogY29sdW1uICsgMSxcbiAgICAgICAgICAgIHJvdyxcbiAgICAgICAgfSlcbiAgICAgICAgY29uc3QgbGVmdCA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShsb2NhdGlvblByb3RvdHlwZSksIHtcbiAgICAgICAgICAgIGNvbHVtbjogY29sdW1uIC0gMSxcbiAgICAgICAgICAgIHJvdyxcbiAgICAgICAgfSlcbiAgICAgICAgY29uc3QgZGlyZWN0aW9ucyA9IFtdXG5cbiAgICAgICAgZGlyZWN0aW9ucy5wdXNoKHRvcClcbiAgICAgICAgZGlyZWN0aW9ucy5wdXNoKGJvdHRvbSlcbiAgICAgICAgZGlyZWN0aW9ucy5wdXNoKHJpZ2h0KVxuICAgICAgICBkaXJlY3Rpb25zLnB1c2gobGVmdClcblxuICAgICAgICByZXR1cm4gZGlyZWN0aW9uc1xufVxuXG5jb25zdCBjaGVja0lmUm93Q29udGFpbnNTaGlwID0gKGNvbHVtbiwgcGxheWVyQm9hcmQpID0+IHtcbiAgICBmb3IobGV0IHJvdyA9IDA7IHJvdyA8IDEwOyByb3crKyl7XG4gICAgICAgIGlmKHBsYXllckJvYXJkLmdldExvY2F0aW9uKGNvbHVtbiwgcm93KS5pc1NoaXApe1xuICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2Vcbn1cblxuY29uc3QgY2hlY2tJZkNvbHVtbkNvbnRhaW5zU2hpcCA9IChyb3csIHBsYXllckJvYXJkKSA9PiB7XG5cbiAgICBmb3IobGV0IGNvbHVtbiA9IDA7IGNvbHVtbiA8IDEwOyBjb2x1bW4rKyl7XG4gICAgICAgIGlmKHBsYXllckJvYXJkLmdldExvY2F0aW9uKGNvbHVtbiwgcm93KS5pc1NoaXApe1xuICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2Vcbn1cblxuY29uc3QgYXR0YWNrUGxheWVyQ2VsbCA9IChwbGF5ZXJCb2FyZCwgZW5lbXksIGVsZW1lbnRDb2x1bW4sIGVsZW1lbnRSb3csIHByZXZMb2NhdGlvbikgPT4ge1xuICAgICAgICBjb25zdCBsb2NhdGlvbiA9IHBsYXllckJvYXJkLmdldExvY2F0aW9uKGVsZW1lbnRDb2x1bW4sIGVsZW1lbnRSb3cpXG4gICAgaWYoaGFuZGxlQXR0YWNrKGVsZW1lbnRDb2x1bW4sIGVsZW1lbnRSb3csIHBsYXllckJvYXJkLCBlbmVteSkgPT09IFwiWW91IGhpdCBhIHNoaXAhXCIpe1xuICAgICAgICBcblxuICAgICAgICBjb25zdCByYW5kb21Qb3NpdGlvbiA9IHJhbmRvbURpcmVjdGlvbkF0dGFjayhlbGVtZW50Q29sdW1uLCBlbGVtZW50Um93LCBwbGF5ZXJCb2FyZClcbiAgICAgICAgY29uc3QgcmFuZG9tUG9zaXRpb25Db2x1bW4gPSByYW5kb21Qb3NpdGlvbi5jb2x1bW5cblxuICAgICAgICBjb25zdCBkaXJlY3Rpb25zID0gbGlzdE9mUmFuZG9tQ29vcmRpbmF0ZXMoZWxlbWVudENvbHVtbiwgZWxlbWVudFJvdywgcGxheWVyQm9hcmQpXG4gICAgICAgIGNvbnN0IGZpbHRlcmVkRGlyZWN0aW9ucyA9IGRpcmVjdGlvbnMuZmlsdGVyKChlbGVtZW50KSA9PiBlbGVtZW50LmNvbHVtbiAhPT0gdW5kZWZpbmVkICYmIGVsZW1lbnQucm93ICE9PSB1bmRlZmluZWQpXG4gICAgICAgIGNvbnN0IHJhbmRvbVBvc2l0aW9uUm93ID0gcmFuZG9tUG9zaXRpb24ucm93XG4gICAgICAgICAgICAgICAgaWYobG9jYXRpb24uaXNTaGlwICYmIGxvY2F0aW9uLmlzU3VuaygpID09PSBmYWxzZSl7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmFuZG9tID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogZmlsdGVyZWREaXJlY3Rpb25zLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlZmF1bHQtY2FzZVxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2gocmFuZG9tKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0YWNrUGxheWVyQ2VsbChwbGF5ZXJCb2FyZCwgZW5lbXksIGZpbHRlcmVkRGlyZWN0aW9uc1swXS5jb2x1bW4sIGZpbHRlcmVkRGlyZWN0aW9uc1swXS5yb3csIGxvY2F0aW9uKVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dGFja1BsYXllckNlbGwocGxheWVyQm9hcmQsIGVuZW15LCBmaWx0ZXJlZERpcmVjdGlvbnNbMV0uY29sdW1uLCBmaWx0ZXJlZERpcmVjdGlvbnNbMV0ucm93LCBsb2NhdGlvbilcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRhY2tQbGF5ZXJDZWxsKHBsYXllckJvYXJkLCBlbmVteSwgZmlsdGVyZWREaXJlY3Rpb25zWzJdLmNvbHVtbiwgZmlsdGVyZWREaXJlY3Rpb25zWzJdLnJvdywgbG9jYXRpb24pXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0YWNrUGxheWVyQ2VsbChwbGF5ZXJCb2FyZCwgZW5lbXksIGZpbHRlcmVkRGlyZWN0aW9uc1szXS5jb2x1bW4sIGZpbHRlcmVkRGlyZWN0aW9uc1szXS5yb3csIGxvY2F0aW9uKVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBhdHRhY2tQbGF5ZXJDZWxsKHBsYXllckJvYXJkLCBlbmVteSwgcmFuZG9tUG9zaXRpb25Db2x1bW4sIHJhbmRvbVBvc2l0aW9uUm93LCBwcmV2TG9jYXRpb24pXG4gICAgICAgIH0sIDcwMClcbiAgICB9XG4gICAgZWxzZSBpZihsb2NhdGlvbiYmIGxvY2F0aW9uLmlzU2hpcCA9PT0gZmFsc2UgJiYgcHJldkxvY2F0aW9uICYmIHByZXZMb2NhdGlvbi5pc1NoaXAgPT09IHRydWUpe1xuXG4gICAgICAgIGxldCBwcmV2TG9jYXRpb25Sb3c7XG4gICAgICAgIGxldCBwcmV2TG9jYXRpb25Db2x1bW47XG4gICAgICAgIGNvbnN0IHNoaXBMZW5ndGggPSBwcmV2TG9jYXRpb24uZ2V0TGVuZ3RoKClcbiAgICAgICAgaWYocHJldkxvY2F0aW9uLmNvbHVtbiA+IGVsZW1lbnRDb2x1bW4gKXtcbiAgICAgICAgcHJldkxvY2F0aW9uQ29sdW1uID0gcHJldkxvY2F0aW9uLmNvbHVtbiAtIChwcmV2TG9jYXRpb24uY29sdW1uIC0gZWxlbWVudENvbHVtbilcbiAgICAgICAgfVxuICAgICAgICBpZihwcmV2TG9jYXRpb24uY29sdW1uIDwgZWxlbWVudENvbHVtbil7XG4gICAgICAgIHByZXZMb2NhdGlvbkNvbHVtbiA9IHByZXZMb2NhdGlvbi5jb2x1bW4gKyAoZWxlbWVudENvbHVtbiAtIHByZXZMb2NhdGlvbi5jb2x1bW4pXG4gICAgICAgIH1cbiAgICAgICAgaWYocHJldkxvY2F0aW9uLnJvdyA+IGVsZW1lbnRSb3cpe1xuICAgICAgICBwcmV2TG9jYXRpb25Sb3cgPSBwcmV2TG9jYXRpb24ucm93IC0gIChwcmV2TG9jYXRpb24ucm93IC0gZWxlbWVudFJvdylcblxuICAgICAgICB9XG4gICAgICAgIGlmKHByZXZMb2NhdGlvbi5yb3cgPCBlbGVtZW50Um93KXtcbiAgICAgICAgcHJldkxvY2F0aW9uUm93ID0gcHJldkxvY2F0aW9uLnJvdyArIChlbGVtZW50Um93IC0gcHJldkxvY2F0aW9uLnJvdylcblxuICAgICAgICB9XG5cbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG5cbiAgICAgICAgICAgIGlmKHByZXZMb2NhdGlvbi5pc1N1bmsoKSA9PT0gZmFsc2Upe1xuXG4gICAgICAgICAgICBhdHRhY2tQbGF5ZXJDZWxsKHBsYXllckJvYXJkLCBlbmVteSwgcHJldkxvY2F0aW9uQ29sdW1uLCBwcmV2TG9jYXRpb25Sb3csIHByZXZMb2NhdGlvbilcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSw3MDApXG4gICAgfVxuXG5cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcblxuICAgIHJlbmRlckF0dGFja3MoJ3BsYXllcicsIGVsZW1lbnRDb2x1bW4sIGVsZW1lbnRSb3csIHBsYXllckJvYXJkLCBwcmV2TG9jYXRpb24pXG4gICAgfSwgNzAwKVxuXG59XG4vLyBodHRwczovL2pzbWFuaWZlc3QuY29tL3RoZS1wdWJsaXNoLXN1YnNjcmliZS1wYXR0ZXJuLWluLWphdmFzY3JpcHQvXG5cbmV4cG9ydCBjb25zdCBwdWJTdWIgPSAoKSA9PiB7XG4gICAgY29uc3Qgc3Vic2NyaWJlcnMgPSB7fVxuXG4gICAgZnVuY3Rpb24gcHVibGlzaChldmVudE5hbWUsIGRhdGEpIHtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHN1YnNjcmliZXJzW2V2ZW50TmFtZV0pKSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICBzdWJzY3JpYmVyc1tldmVudE5hbWVdLmZvckVhY2goKGNhbGxiYWNrKSA9PiB7XG4gICAgICAgICAgICBjYWxsYmFjayhkYXRhKVxuICAgICAgICB9KVxuICAgIH1cbiAgICBmdW5jdGlvbiBzdWJzY3JpYmUoZXZlbnROYW1lLCBjYWxsYmFjaykge1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoc3Vic2NyaWJlW2V2ZW50TmFtZV0pKSB7XG4gICAgICAgICAgICBzdWJzY3JpYmVyc1tldmVudE5hbWVdID0gW11cbiAgICAgICAgfVxuICAgICAgICBzdWJzY3JpYmVyc1tldmVudE5hbWVdLnB1c2goY2FsbGJhY2spXG4gICAgICAgIGNvbnN0IGluZGV4ID0gc3Vic2NyaWJlcnNbZXZlbnROYW1lXS5sZW5ndGggLSAxXG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlKCkge1xuICAgICAgICAgICAgICAgIHN1YnNjcmliZXJzW2V2ZW50TmFtZV0uc3BsaWNlKGluZGV4LCAxKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIHB1Ymxpc2gsXG4gICAgICAgIHN1YnNjcmliZSxcbiAgICB9XG59XG5cbmNvbnN0IGNlbGxEcmFnTGlzdGVuZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBjb25zb2xlLmxvZyh0aGlzKVxufVxuXG4vL2NvbnN0IGFkZERyYWdnYWJsZVByb3BlcnRpZXMgPSAoKSA9PiB7XG5cbiAgICAvL2NvbnN0IGRyYWdnYWJsZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2VsbFtkcmFnZ2FibGU9XCJ0cnVlXCJdJylcbiAgICAvL2RyYWdnYWJsZXMuZm9yRWFjaChkcmFnZ2FibGUgPT4ge1xuICAgICAgICAvL2RyYWdnYWJsZS5hZGRFdmVudExpc3RlbmVyKCdkcmFnc3RhcnQnLCAoKSA9PiB7XG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdib2Igam9uZXMnKVxuICAgICAgICAvL30pXG4gICAgLy99KVxuLy99XG5cbmZ1bmN0aW9uIGdldERyYWdBZnRlckVsZW1lbnQoY29udGFpbmVyLCB5LCB4KXtcbiAgICBjb25zdCBkcmFnZ2FibGVFbGVtZW50cyA9IFsuLi5jb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmNlbGw6bm90KC5kcmFnZ2luZyknKV1cblxuICAgIHJldHVybiBkcmFnZ2FibGVFbGVtZW50cy5yZWR1Y2UoKGNsb3Nlc3QsIGNoaWxkKSA9PiB7XG4gICAgICAgIGNvbnN0IGJveCA9IGNoaWxkLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgICAgIGNvbnN0IG9mZnNldFkgPSB5IC0gYm94LnRvcCAtIGJveC5oZWlnaHQgLyAyXG4gICAgICAgIGNvbnN0IG9mZnNldFggPSB4IC0gYm94LmxlZnQgLSBib3gud2lkdGgvIDJcbiAgICAgICAgY29uc29sZS5sb2coY2hpbGQpXG4gICAgICAgIGlmKG9mZnNldFkgPCAwICYmIG9mZnNldFkgPiBjbG9zZXN0Lm9mZnNldFkgJiYgb2Zmc2V0WCA8IDAgJiYgb2Zmc2V0WCA+IGNsb3Nlc3Qub2Zmc2V0WCl7XG4gICAgICAgICAgICByZXR1cm4ge29mZnNldFgsIG9mZnNldFksIGVsZW1lbnQ6Y2hpbGR9XG4gICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjbG9zZXN0XG5cbiAgICB9LCB7b2Zmc2V0WDogTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZLCBvZmZzZXRZOk51bWJlci5ORUdBVElWRV9JTkZJTklUWX0pLmVsZW1lbnRcbn1cblxuY29uc3QgYWRkTGlzdGVuZXJUb0JvYXQgPSAoY2VsbHMpID0+IHtcblxuICAgIC8vVmlkZW8gZm9yIGRyYWcgYW5kIGRyb3A6IGh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9amZZV3dRcnR6ellcblxuICAgIGNvbnN0IGNlbGxzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBsYXllci1ib2FyZCcpXG4gICAgY29uc3Qgc2hpcENvbnRhaW5lciAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIGNlbGxzLmZvckVhY2goKGNlbGwsIGluZGV4KSA9PiB7XG4gICAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0JywgKCkgPT4ge1xuICAgICAgICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKCdkcmFnZ2luZycpXG4gICAgICAgIH0pXG5cbiAgICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKCdkcmFnZW5kJywgKCkgPT4ge1xuICAgICAgICAgICAgY2VsbC5jbGFzc0xpc3QucmVtb3ZlKCdkcmFnZ2luZycpXG4gICAgICAgIH0pXG4gICAgfSlcblxuICAgIGNlbGxzQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgKGV2ZW50KSA9PiB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgbGV0IGFmdGVyRWxlbWVudDtcbiAgICAgICAgY29uc3QgZHJhZ2dhYmxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRyYWdnaW5nJylcbiAgICAgICAgY29uc29sZS5sb2coYWZ0ZXJFbGVtZW50KVxuICAgICAgICBpZihhZnRlckVsZW1lbnQgPT09IG51bGwpe1xuXG4gICAgICAgICAgICBjZWxsc0NvbnRhaW5lci5hcHBlbmRDaGlsZChkcmFnZ2FibGUpXG4gICAgICAgIH0gZWxzZXtcbiAgICAgICAgICAgIGNlbGxzQ29udGFpbmVyLmluc2VydEJlZm9yZShkcmFnZ2FibGUsIGFmdGVyRWxlbWVudClcbiAgICAgICAgfVxuICAgIH0pXG59XG5cbmNvbnN0IHF1ZXJ5Q2VsbHMgPSAoKSA9PiB7XG5cbiAgICBjb25zdCBwYXRyb2xCb2F0PSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2VsbFtzaGlwLW5hbWU9XCJQYXRyb2wgQm9hdFwiXScpXG4gICAgYWRkTGlzdGVuZXJUb0JvYXQocGF0cm9sQm9hdClcblxuICAgIC8vY29uc3QgcGF0cm9sQm9hdENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG5cbiAgICBjb25zdCBzdWJtYXJpbmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2VsbFtzaGlwLW5hbWU9XCJTdWJtYXJpbmVcIl0nKVxuICAgIGFkZExpc3RlbmVyVG9Cb2F0KHN1Ym1hcmluZSlcbiAgICAvL2NvbnN0IHN1Ym1hcmluZUNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG5cbiAgICBjb25zdCBjYXJyaWVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNlbGxbc2hpcC1uYW1lPVwiQ2FycmllclwiXScpXG4gICAgYWRkTGlzdGVuZXJUb0JvYXQoY2FycmllcilcbiAgICAvL2NvbnN0IGNhcnJpZXJDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuXG4gICAgY29uc3QgYmF0dGxlU2hpcD0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNlbGxbc2hpcC1uYW1lPVwiQmF0dGxlc2hpcFwiXScpXG4gICAgYWRkTGlzdGVuZXJUb0JvYXQoYmF0dGxlU2hpcClcbiAgICAvL2NvbnN0IGJhdHRsZVNoaXBDb250YWluZXI9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG5cbiAgICBjb25zdCBkZXN0cm95ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2VsbFtzaGlwLW5hbWU9XCJEZXN0cm95ZXJcIl0nKVxuICAgIGFkZExpc3RlbmVyVG9Cb2F0KGRlc3Ryb3llcilcbiAgICAvL2NvbnN0IGRlc3Ryb3llckNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG5cblxufVxuXG5mdW5jdGlvbiBjcmVhdGVEcmFnQW5kRHJvcEZsZWV0KHBsYXllcil7XG4gICAgcmVuZGVyUGxheWVyU2hpcFNlbGVjdCgxLCAxKVxuICAgIHJlbmRlclBsYXllclNoaXBTZWxlY3QoMiwgMilcbiAgICByZW5kZXJQbGF5ZXJTaGlwU2VsZWN0KDMsIDMpXG4gICAgcmVuZGVyUGxheWVyU2hpcFNlbGVjdCg0LCA0KVxuXG4gICAgZnVuY3Rpb24gcmVuZGVyUGxheWVyU2hpcFNlbGVjdChpLCBsZW5ndGgpe1xuICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGxheWVyLWJvYXJkJylcbiAgICAgICAgY29uc3Qgc2hpcENvbnRhaW5lciA9IGRvY3VtbmV0LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgICAgIHNoaXBDb250YWluZXIuY2xhc3NMaXN0LmFkZChcInNoaXAtY29udGFpbmVyXCIpXG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChzaGlwQ29udGFpbmVyKVxuXG4gICAgICAgIGNvbnN0IHNoaXBJbmZvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIilcbiAgICAgICAgc2hpcEluZm8uY2xhc3NMaXN0LmFkZCgpXG5cbiAgICB9XG59XG5leHBvcnQgY29uc3QgcmVuZGVyUGxheWVyU2hpcHMgPSAoeyBnZXRMb2NhdGlvbiB9KSA9PiB7XG4gICAgY29uc3QgcGxheWVyQm9hcmRBcmVhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZGl2LnBsYXllci1ib2FyZCcpXG5cbiAgICBmb3IgKGxldCBjb2x1bW4gPSAwOyBjb2x1bW4gPCAxMDsgY29sdW1uICs9IDEpIHtcbiAgICAgICAgZm9yIChsZXQgcm93ID0gMDsgcm93IDwgMTA7IHJvdyArPSAxKSB7XG4gICAgICAgICAgICBjb25zdCBjZWxsID0gcGxheWVyQm9hcmRBcmVhLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgICAgICAgICAgYC5jZWxsOm50aC1jaGlsZCgke3JvdyAqIDEwICsgY29sdW1uICsgMX0pYFxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgY2VsbC5zZXRBdHRyaWJ1dGUoJ2NvbHVtbicsIGNvbHVtbilcbiAgICAgICAgICAgIGNlbGwuc2V0QXR0cmlidXRlKCdyb3cnLCByb3cpXG4gICAgICAgICAgICBjb25zdCBsb2NhdGlvbiA9IGdldExvY2F0aW9uKGNvbHVtbiwgcm93KVxuICAgICAgICAgICAgaWYgKGxvY2F0aW9uLmlzU2hpcCkge1xuICAgICAgICAgICAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZCgnc2hpcCcpXG4gICAgICAgICAgICAgICAgY2VsbC5zZXRBdHRyaWJ1dGUoJ3NoaXAtbmFtZScsIGxvY2F0aW9uLmdldE5hbWUoKSlcbiAgICAgICAgICAgICAgICBjZWxsLnNldEF0dHJpYnV0ZSgnZHJhZ2dhYmxlJywgdHJ1ZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cblxuY29uc3QgY2hlY2tJZkdhbWVPdmVyID0gKHBsYXllckJvYXJkLCBlbmVteUJvYXJkKSA9PiB7XG4gICAgaWYgKHBsYXllckJvYXJkLmNoZWNrSWZBbGxTaGlwc0hhdmVTdW5rKCkpIHtcbiAgICAgICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwnKVxuICAgICAgICBjb25zdCBtb2RhbFdpbm5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC1jb250ZW50ID4gcCcpXG4gICAgICAgIGNvbnN0IHBsYXlBZ2FpbkJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgICAgICAnLm1vZGFsLWNvbnRlbnQgPiBidXR0b24nXG4gICAgICAgIClcblxuICAgICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJ1xuICAgICAgICBwbGF5QWdhaW5CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKVxuICAgICAgICB9KVxuXG4gICAgICAgIG1vZGFsV2lubmVyLnRleHRDb250ZW50ID0gJ1lvdSBsb3NlISdcbiAgICB9XG4gICAgaWYgKGVuZW15Qm9hcmQuY2hlY2tJZkFsbFNoaXBzSGF2ZVN1bmsoKSkge1xuICAgICAgICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbCcpXG4gICAgICAgIGNvbnN0IG1vZGFsV2lubmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLWNvbnRlbnQgPiBwJylcbiAgICAgICAgY29uc3QgcGxheUFnYWluQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgICAgICcubW9kYWwtY29udGVudCA+IGJ1dHRvbidcbiAgICAgICAgKVxuXG4gICAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snXG4gICAgICAgIG1vZGFsV2lubmVyLnRleHRDb250ZW50ID0gJ1lvdSB3aW4hJ1xuICAgICAgICBwbGF5QWdhaW5CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKVxuICAgICAgICB9KVxuICAgIH1cbn1cblxuZXhwb3J0IGNvbnN0IGFkZExpc3RlbmVyc1RvRW5lbXlCb2FyZCA9IChcbiAgICBwbGF5ZXJCb2FyZCxcbiAgICBlbmVteUJvYXJkLFxuICAgIHBsYXllcixcbiAgICBlbmVteSxcbiAgICBwc1xuKSA9PiB7XG4gICAgY29uc3QgZW5lbXlCb2FyZEFyZWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdkaXYuZW5lbXktYm9hcmQnKVxuXG4gICAgZm9yIChsZXQgY29sdW1uID0gMDsgY29sdW1uIDwgMTA7IGNvbHVtbiArPSAxKSB7XG4gICAgICAgIGZvciAobGV0IHJvdyA9IDA7IHJvdyA8IDEwOyByb3cgKz0gMSkge1xuICAgICAgICAgICAgLy8gQ3JlZGl0aW5nIGZvcm11bGEgdG8gY2FsY3VsYXRlIG50aC1jaGlsZCB1c2luZyBuZXN0ZWQgbG9vcDogaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvODg3MjY2Mi9tYXRoLXRvLWRldGVybWluZS1pdGVtLWluZGV4LWJhc2VkLW9uLWNvbC1yb3ctc2VsZWN0aW9uLWluLWdyaWRcbiAgICAgICAgICAgIGNvbnN0IGNlbGwgPSBlbmVteUJvYXJkQXJlYS5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAgICAgICAgIGAuY2VsbDpudGgtY2hpbGQoJHtyb3cgKiAxMCArIGNvbHVtbiArIDF9KWBcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIGNlbGwuc2V0QXR0cmlidXRlKCdjb2x1bW4nLCBjb2x1bW4pXG4gICAgICAgICAgICBjZWxsLnNldEF0dHJpYnV0ZSgncm93Jywgcm93KVxuXG4gICAgICAgICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgICAgICAgJ2NsaWNrJyxcbiAgICAgICAgICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHBzLnB1Ymxpc2goJ2NsaWNrJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbixcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllckJvYXJkLFxuICAgICAgICAgICAgICAgICAgICAgICAgZW5lbXlCb2FyZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllcixcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZW15LFxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgeyBvbmNlOiB0cnVlIH1cbiAgICAgICAgICAgIClcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGNvbnN0IGF0dGFjayA9ICh7XG4gICAgY2VsbCxcbiAgICBjb2x1bW4sXG4gICAgcm93LFxuICAgIHBsYXllckJvYXJkLFxuICAgIGVuZW15Qm9hcmQsXG4gICAgcGxheWVyLFxuICAgIGVuZW15LFxufSkgPT4ge1xuICAgIC8vIGh1bWFuIHBsYXllciBhdHRhY2tpbmcgY29tcHV0ZXJcbiAgICBhdHRhY2tFbmVteUNlbGwoY29sdW1uLCByb3csIGVuZW15Qm9hcmQsIHBsYXllcilcbiAgICAvLyBjb21wdXRlciBhdHRhY2tpbmcgaHVtYW5cbiAgICBjb25zdCB7IGVsZW1lbnRDb2x1bW4sIGVsZW1lbnRSb3cgfSA9IHBsYXllckJvYXJkLm1ha2VSYW5kb21Db29yZGluYXRlcygpXG4gICAgYXR0YWNrUGxheWVyQ2VsbChwbGF5ZXJCb2FyZCwgZW5lbXksIGVsZW1lbnRDb2x1bW4sIGVsZW1lbnRSb3cpXG5cbiAgICBjaGVja0lmR2FtZU92ZXIocGxheWVyQm9hcmQsIGVuZW15Qm9hcmQpXG59XG4iLCJpbXBvcnQgeyBhZGRMaXN0ZW5lcnNUb0VuZW15Qm9hcmQsIHJlbmRlclBsYXllclNoaXBzLHB1YlN1YiwgYXR0YWNrfSBmcm9tICcuL2RvbSdcblxuaW1wb3J0IGNyZWF0ZUdhbWVCb2FyZCBmcm9tICcuL2dhbWVib2FyZC9nYW1lYm9hcmQnXG5pbXBvcnQgY3JlYXRlU2hpcCBmcm9tICcuL3NoaXAvc2hpcCdcbmltcG9ydCBjcmVhdGVQbGF5ZXIgZnJvbSAnLi9wbGF5ZXIvcGxheWVyJ1xuXG5jb25zdCBwbGF5ZXJCb2FyZCA9IGNyZWF0ZUdhbWVCb2FyZCgpXG5jb25zdCBlbmVteUJvYXJkID0gY3JlYXRlR2FtZUJvYXJkKClcblxuY29uc3QgcGxheWVyID0gY3JlYXRlUGxheWVyKClcblxuY29uc3QgY29tcHV0ZXIgPSBjcmVhdGVQbGF5ZXIoKVxuXG5cbiAgICBjb25zdCBzaGlwcyA9IFtcbiAgICAgICAgY3JlYXRlU2hpcCg1LCAnQ2FycmllcicpLFxuICAgICAgICBjcmVhdGVTaGlwKDQsICdCYXR0bGVzaGlwJyksXG4gICAgICAgIGNyZWF0ZVNoaXAoMywgJ0Rlc3Ryb3llcicpLFxuICAgICAgICBjcmVhdGVTaGlwKDMsICdTdWJtYXJpbmUnKSxcbiAgICAgICAgY3JlYXRlU2hpcCgyLCAnUGF0cm9sIEJvYXQnKSxcbiAgICBdXG5wbGF5ZXJCb2FyZC5wbGFjZVNoaXAoMCwgMCwgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDUpKVxucGxheWVyQm9hcmQucGxhY2VTaGlwKDMsIDQsICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCgzKSlcbnBsYXllckJvYXJkLnBsYWNlU2hpcCg2LCA3LCAnaG9yaXpvbnRhbCcsIGNyZWF0ZVNoaXAoMikpXG5wbGF5ZXJCb2FyZC5wbGFjZVNoaXAoOSwgMSwgJ3ZlcnRpY2FsJywgY3JlYXRlU2hpcCgzKSlcbnBsYXllckJvYXJkLnBsYWNlU2hpcCg1LCA5LCAnaG9yaXpvbnRhbCcsIGNyZWF0ZVNoaXAoNCkpXG5cbmVuZW15Qm9hcmQucGxhY2VTaGlwKDAsIDAsICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCg1KSlcbmVuZW15Qm9hcmQucGxhY2VTaGlwKDMsIDQsICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCgzKSlcbmVuZW15Qm9hcmQucGxhY2VTaGlwKDYsIDcsICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCgyKSlcbmVuZW15Qm9hcmQucGxhY2VTaGlwKDksIDEsICd2ZXJ0aWNhbCcsIGNyZWF0ZVNoaXAoMykpXG5lbmVteUJvYXJkLnBsYWNlU2hpcCg1LCA5LCAnaG9yaXpvbnRhbCcsIGNyZWF0ZVNoaXAoNCkpXG5cbmNvbnN0IHBzID0gcHViU3ViKClcblxuYWRkTGlzdGVuZXJzVG9FbmVteUJvYXJkKHBsYXllckJvYXJkLCBlbmVteUJvYXJkLCBwbGF5ZXIsIGNvbXB1dGVyLCBwcylcblxucHMuc3Vic2NyaWJlKCdjbGljaycsIGF0dGFjaylcblxuXG5yZW5kZXJQbGF5ZXJTaGlwcyhwbGF5ZXJCb2FyZCkiXSwibmFtZXMiOlsiY3JlYXRlU2hpcCIsIm1vZHVsZSIsImV4cG9ydHMiLCJlbXB0eUNlbGwiLCJoYXNCZWVuSGl0IiwiaXNTaGlwIiwib2ZmTGltaXRzIiwiZ2FtZUJvYXJkIiwiQXJyYXkiLCJmaWxsIiwibWFwIiwiY29sdW1uIiwicm93IiwiaW5pdGlhbGl6ZUJvYXJkIiwic2hpcHMiLCJnZXRMb2NhdGlvbiIsInNldExvY2F0aW9uIiwic2hpcCIsIk9iamVjdCIsImFzc2lnbiIsImNyZWF0ZU9mZkxpbWl0TG9jYXRpb24iLCJ1bmRlZmluZWQiLCJsb2NhdGlvbiIsImFkZE9mZkxpbWl0QXJlYUZvclNoaXBzIiwiY2hlY2tJZkxvY2F0aW9uSXNBU2hpcE9yT2ZmTGltaXRzIiwiZGlyZWN0aW9uIiwic2hpcExlbmd0aCIsImkiLCJwbGFjZVNoaXAiLCJnZXRMZW5ndGgiLCJsZW5ndGgiLCJjaGVja0lmUm93Q29vcmRpbmF0ZUlzVmFsaWQiLCJwb3NpdGlvbiIsImFkZE9mZkxpbWl0QXJlYUZvclZlcnRpY2FsbHlQb3NpdGlvbmVkU2hpcCIsImNoZWNrSWZDb2x1bW5Db29yZGluYXRlSXNWYWxpZCIsImFkZE9mZkxpbWl0QXJlYUZvckhvcml6b250YWxseVBvc2l0aW9uZWRTaGlwIiwibWFrZVJhbmRvbUNvb3JkaW5hdGVzIiwicmFuZG9tRGlyZWN0aW9uIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwicmFuZG9tTG9jYXRpb24iLCJmbGF0dGVuZWRHYW1lQm9hcmQiLCJmbGF0IiwiZm9yRWFjaCIsImVsZW1lbnQiLCJhdmFpbGFiaWxpdHkiLCJhdmFpbGFibGVTcGFjZXMiLCJlbGVtZW50Q29sdW1uIiwiZWxlbWVudFJvdyIsImNoZWNrSWZPZmZMaW1pdFpvbmVXYXNDb3JyZWN0bHlJbXBsZW1lbnRlZCIsImZpbHRlciIsInJlY2VpdmVBdHRhY2siLCJjaGVja0lmQWxsU2hpcHNIYXZlU3VuayIsImhhdmVBbGxTaGlwc1N1bmsiLCJqIiwiaXNTdW5rIiwicmFuZG9tbHlQbGFjZVNoaXBzIiwic2hpcERldGFpbHMiLCJyYW5kb21Db2x1bW4iLCJyYW5kb21Sb3ciLCJwdXNoIiwibmFtZSIsImdldE5hbWUiLCJhdHRhY2siLCJnZXRTdGF0dXMiLCJpbmNsdWRlcyIsImhpdCIsInN0YXR1cyIsImV2ZXJ5IiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsIm4iLCJnZXR0ZXIiLCJfX2VzTW9kdWxlIiwiZCIsImEiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJyZW5kZXJBdHRhY2tzIiwicGxheWVyIiwiZW5lbXlCb2FyZCIsImNlbGwiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjbGFzc0xpc3QiLCJhZGQiLCJoYW5kbGVBdHRhY2siLCJyYW5kb21EaXJlY3Rpb25BdHRhY2siLCJwbGF5ZXJCb2FyZCIsInNwYWNlc0hpdCIsIm5leHRDb2x1bW4iLCJwcmV2aW91c0NvbHVtbiIsIm5leHRSb3ciLCJwcmV2aW91c1JvdyIsImlzU3BhY2VBcm91bmRIaXQiLCJyYW5kb21JbmRleCIsImxpc3RPZlJhbmRvbUNvb3JkaW5hdGVzIiwibG9jYXRpb25Qcm90b3R5cGUiLCJ0aGlzIiwidG9wIiwiY3JlYXRlIiwiYm90dG9tIiwicmlnaHQiLCJsZWZ0IiwiZGlyZWN0aW9ucyIsImF0dGFja1BsYXllckNlbGwiLCJlbmVteSIsInByZXZMb2NhdGlvbiIsInJhbmRvbVBvc2l0aW9uIiwicmFuZG9tUG9zaXRpb25Db2x1bW4iLCJmaWx0ZXJlZERpcmVjdGlvbnMiLCJyYW5kb21Qb3NpdGlvblJvdyIsInNldFRpbWVvdXQiLCJwcmV2TG9jYXRpb25Sb3ciLCJwcmV2TG9jYXRpb25Db2x1bW4iLCJjb21wdXRlciIsInBzIiwic3Vic2NyaWJlcnMiLCJwdWJsaXNoIiwiZXZlbnROYW1lIiwiZGF0YSIsImlzQXJyYXkiLCJjYWxsYmFjayIsInN1YnNjcmliZSIsImluZGV4IiwidW5zdWJzY3JpYmUiLCJzcGxpY2UiLCJwdWJTdWIiLCJlbmVteUJvYXJkQXJlYSIsInNldEF0dHJpYnV0ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJvbmNlIiwiYWRkTGlzdGVuZXJzVG9FbmVteUJvYXJkIiwiYXR0YWNrRW5lbXlDZWxsIiwibW9kYWwiLCJtb2RhbFdpbm5lciIsInBsYXlBZ2FpbkJ1dHRvbiIsInN0eWxlIiwiZGlzcGxheSIsInJlbG9hZCIsInRleHRDb250ZW50IiwiY2hlY2tJZkdhbWVPdmVyIiwicGxheWVyQm9hcmRBcmVhIiwicmVuZGVyUGxheWVyU2hpcHMiXSwic291cmNlUm9vdCI6IiJ9