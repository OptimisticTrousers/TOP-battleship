(()=>{var t={653:(t,e,o)=>{const r=o(585);t.exports=()=>{const t={hasBeenHit:!1,isShip:!1,offLimits:!1},e=(()=>{const e=Array(10).fill().map((()=>Array(10).fill()));for(let o=0;o<10;o++)for(let r=0;r<10;r++)e[o][r]={...t,column:o,row:r};return e})(),o=[r(5,"Carrier"),r(4,"Battleship"),r(3,"Destroyer"),r(3,"Submarine"),r(2,"Patrol Boat")],n=(t,o)=>e?.[t]?.[o],i=(o,r,n=(()=>Object.assign(t,{offLimits:!0}))())=>{if(void 0===e?.[o]?.[r])return!0;const i=e[o][r];return e[o][r]={...i,...n},!0},a=(t,e)=>{i(t-1,e-1),i(t,e-1)},c=(t,e,o,r)=>{if("vertical"===o)for(let o=0;o<r;o++){const r=n(t,e+o);if(r&&!0===r.isShip&&!0===r.offLimits)return!1}if("horizontal"===o)for(let o=0;o<r;o++){const r=n(t+o,e);if(r&&!0===r.isShip&&!0===r.offLimits)return!1}return!1},l=(t,o,r,l)=>{const s=l.getLength();if(c(n(t,o)))return!1;if("vertical"===r){if(((t,o)=>t>=0&&t+o-1<e.length)(o,s)){for(let e=0;e<s;e+=1)i(t,o+e,{...l,position:e}),i(t+1,o+e),i(t-1,o+e);return((t,e,o)=>{a(t,e),i(t,e+o),i(t+1,e+o),i(t-1,e+o),i(t+1,e-1)})(t,o,s),!0}}else if("horizontal"===r&&((t,o)=>t>=0&&t+o-1<e.length)(t,s)){for(let e=0;e<s;e+=1)i(t+e,o,{...l,position:e}),i(t+e,o+1),i(t+e,o-1);return((t,e,o)=>{a(t,e),i(t+o,e),i(t-1,e+1),i(t+o,e+1),i(t+o,e-1)})(t,o,s),!0}return!1},s=()=>{const t=0===Math.floor(2*Math.random())?"vertical":"horizontal",o=Math.floor(100*Math.random()),r=(()=>{const t=[...e.flat()];return t.forEach((t=>{!0===t.hasBeenHit?t.availability=!1:t.availability=!0})),t})()[o];return!1===r.availability?s():{elementColumn:r.column,elementRow:r.row,randomDirection:t}};return{checkIfLocationIsAShipOrOffLimits:c,checkIfOffLimitZoneWasCorrectlyImplemented:t=>e.flat().filter((t=>!0===t.offLimits)).length===t+2,getLocation:n,receiveAttack:(t,o)=>{e[t][o].hasBeenHit=!0},checkIfAllShipsHaveSunk:()=>{let t=!0;for(let e=0;e<10;e++)for(let o=0;o<10;o++){const r=n(e,o);if(!1!==r.isShip&&r.isShip&&!1===r.isSunk()){t=!1;break}}return t},placeShip:l,randomlyPlaceShips:()=>{const t=[];for(let e=0;e<o.length;e+=1){const r=o[e],{randomColumn:n,randomRow:i,randomDirection:a}=s(r.getLength());l(n,i,a,r)?t.push({randomColumn:n,randomRow:i,randomDirection:a}):e-=1}return t},makeRandomCoordinates:s}}},61:t=>{t.exports=(t="player")=>({getName:()=>t,attack:(t,e,{getLocation:o,receiveAttack:r})=>{const n=o(t,e);return!1===n.hasBeenHit||n.isShip&&!1===n.getStatus().includes("unhit")?(r(t,e),n.hit?(n.hit(n.position),"You hit a ship!"):"It's a hit!"):"You have already hit this spot!"}})},585:t=>{t.exports=(t,e="ship")=>{const o=Array(t).fill("unhit");return{getName:()=>e,getLength:()=>o.length,isSunk:()=>o.every((t=>"hit"===t)),hit:e=>{e<t&&(o[e]="hit")},getStatus:()=>o,hasBeenHit:!1,offLimits:!0,isShip:!0}}}},e={};function o(r){var n=e[r];if(void 0!==n)return n.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,o),i.exports}o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},o.d=(t,e)=>{for(var r in e)o.o(e,r)&&!o.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";const t=(t,e,o,r)=>{const n=document.querySelector(`.${t}-board > .cell[column='${e}'][row='${o}']`);r.getLocation(e,o).isShip?n.classList.add("hit"):n.classList.add("miss")},e=(t,e,o,r)=>r.attack(t,e,o),r=(t,e,o)=>{const n=((t,e,o)=>{const r=o.getLocation(t+1,e),n=o.getLocation(t-1,e),i=o.getLocation(t,e+1),a=o.getLocation(t,e-1),c=[];return r&&!r.hasBeenHit&&c.push(r),n&&!n.hasBeenHit&&c.push(n),i&&!i.hasBeenHit&&c.push(i),a&&!a.hasBeenHit&&c.push(a),c})(t,e,o),i=Math.floor(Math.random()*n.length);return n[i]?n[i]:r(t,e,o)},n=(t,e,o)=>{const r={location(){return o.getLocation(this.column,this.row)}},n=Object.assign(Object.create(r),{column:t,row:e-1}),i=Object.assign(Object.create(r),{column:t,row:e+1}),a=Object.assign(Object.create(r),{column:t+1,row:e}),c=Object.assign(Object.create(r),{column:t-1,row:e}),l=[];return l.push(n),l.push(i),l.push(a),l.push(c),l},i=(o,a,c,l,s)=>{const u=o.getLocation(c,l);if("You hit a ship!"===e(c,l,o,a)){const t=r(c,l,o),e=t.column,h=n(c,l,o).filter((t=>void 0!==t.column&&void 0!==t.row)),m=t.row;if(u.isShip&&!1===u.isSunk())switch(Math.floor(Math.random()*h.length)){case 0:i(o,a,h[0].column,h[0].row,s);break;case 1:i(o,a,h[1].column,h[1].row,s);break;case 2:i(o,a,h[2].column,h[2].row,s);break;case 3:i(o,a,h[3].column,h[3].row,s)}setTimeout((()=>{i(o,a,e,m)}),700)}else if(u&&!1===u.isShip&&s&&!0===s.isShip){let t,e;s.getLength(),s.column>c&&(e=s.column-(s.column-c)),s.column<c&&(e=s.column+(c-s.column)),s.row>l&&(t=s.row-(s.row-l)),s.row<l&&(t=s.row+(l-s.row)),setTimeout((()=>{!1===s.isSunk()&&i(o,a,e,t,s)}),700)}setTimeout((()=>{t("player",c,l,o)}),700)};var a=o(653),c=o.n(a),l=o(585),s=o.n(l),u=o(61),h=o.n(u);const m=c()(),p=c()(),d=h()(),f=h()();s()(5,"Carrier"),s()(4,"Battleship"),s()(3,"Destroyer"),s()(3,"Submarine"),s()(2,"Patrol Boat"),m.placeShip(0,0,"horizontal",s()(5)),m.placeShip(3,4,"horizontal",s()(3)),m.placeShip(6,7,"horizontal",s()(2)),m.placeShip(9,1,"vertical",s()(3)),m.placeShip(5,9,"horizontal",s()(4)),p.placeShip(0,0,"horizontal",s()(5)),p.placeShip(3,4,"horizontal",s()(3)),p.placeShip(6,7,"horizontal",s()(2)),p.placeShip(9,1,"vertical",s()(3)),p.placeShip(5,9,"horizontal",s()(4));const S=(()=>{const t={};return{publish:function(e,o){Array.isArray(t[e])&&t[e].forEach((t=>{t(o)}))},subscribe:function e(o,r){Array.isArray(e[o])||(t[o]=[]),t[o].push(r);const n=t[o].length-1;return{unsubscribe(){t[o].splice(n,1)}}}}})();((t,e,o,r,n)=>{const i=document.querySelector("div.enemy-board");for(let a=0;a<10;a+=1)for(let c=0;c<10;c+=1){const l=i.querySelector(`.cell:nth-child(${10*c+a+1})`);l.setAttribute("column",a),l.setAttribute("row",c),l.addEventListener("click",(()=>{n.publish("click",{cell:l,column:a,row:c,playerBoard:t,enemyBoard:e,player:o,enemy:r})}),{once:!0})}})(m,p,d,f,S),S.subscribe("click",(({cell:o,column:r,row:n,playerBoard:a,enemyBoard:c,player:l,enemy:s})=>{((o,r,n,i)=>{e(o,r,n,i),t("enemy",o,r,n)})(r,n,c,l);const{elementColumn:u,elementRow:h}=a.makeRandomCoordinates();i(a,s,u,h),((t,e)=>{if(t.checkIfAllShipsHaveSunk()){const t=document.querySelector(".modal"),e=document.querySelector(".modal-content > p"),o=document.querySelector(".modal-content > button");t.style.display="block",o.addEventListener("click",(()=>{location.reload()})),e.textContent="You win!"}if(e.checkIfAllShipsHaveSunk()){const t=document.querySelector(".modal"),e=document.querySelector(".modal-content > p"),o=document.querySelector(".modal-content > button");t.style.display="block",e.textContent="You lose!",o.addEventListener("click",(()=>{location.reload()}))}})(a,c)})),(({getLocation:t})=>{const e=document.querySelector("div.player-board");for(let o=0;o<10;o+=1)for(let r=0;r<10;r+=1){const n=e.querySelector(`.cell:nth-child(${10*r+o+1})`);n.setAttribute("column",o),n.setAttribute("row",r);const i=t(o,r);i.isShip&&(n.classList.add("ship"),n.setAttribute("ship-name",i.getName()),n.setAttribute("draggable",!0))}})(m)})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UyxFQUFHQSxFQUFTLEdBQUlBLEdBQVUsRUFDeEMsSUFBSyxJQUFJQyxFQUFNLEVBQUdBLEVBQU0sR0FBSUEsR0FBTyxFQUFHLENBQ2xDLE1BQU1rRixFQUFPNkQsRUFBZ0IzRCxjQUN6QixtQkFBeUIsR0FBTnBGLEVBQVdELEVBQVMsTUFFM0NtRixFQUFLZ0QsYUFBYSxTQUFVbkksR0FDNUJtRixFQUFLZ0QsYUFBYSxNQUFPbEksR0FDekIsTUFBTVUsRUFBV1AsRUFBWUosRUFBUUMsR0FDakNVLEVBQVNqQixTQUNUeUYsRUFBS0csVUFBVUMsSUFBSSxRQUNuQkosRUFBS2dELGFBQWEsWUFBYXhILEVBQVN5QyxXQUN4QytCLEVBQUtnRCxhQUFhLGFBQWEsTUM3Uy9DYyxDQUFrQnZELEkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC8uL3NyYy9nYW1lYm9hcmQvZ2FtZWJvYXJkLmpzIiwid2VicGFjazovL3RvcC1iYXR0bGVzaGlwLy4vc3JjL3BsYXllci9wbGF5ZXIuanMiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvLi9zcmMvc2hpcC9zaGlwLmpzIiwid2VicGFjazovL3RvcC1iYXR0bGVzaGlwL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3RvcC1iYXR0bGVzaGlwL3dlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0Iiwid2VicGFjazovL3RvcC1iYXR0bGVzaGlwL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3RvcC1iYXR0bGVzaGlwLy4vc3JjL2RvbS5qcyIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcbi8qIGVzbGludC1kaXNhYmxlIG5vLW11bHRpLWFzc2lnbiAqL1xuLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLWV4cHJlc3Npb25zICovXG5jb25zdCBjcmVhdGVTaGlwID0gcmVxdWlyZSgnLi4vc2hpcC9zaGlwJylcblxuLyogZXNsaW50LWRpc2FibGUgbm8tcGFyYW0tcmVhc3NpZ24gKi9cbmNvbnN0IGNyZWF0ZUdhbWVCb2FyZCA9ICgpID0+IHtcbiAgICBjb25zdCBlbXB0eUNlbGwgPSB7IGhhc0JlZW5IaXQ6IGZhbHNlLCBpc1NoaXA6IGZhbHNlLCBvZmZMaW1pdHM6IGZhbHNlIH1cbiAgICBcbiAgICBjb25zdCBpbml0aWFsaXplQm9hcmQgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGdhbWVCb2FyZCA9IEFycmF5KDEwKS5maWxsKCkubWFwKCgpID0+IEFycmF5KDEwKS5maWxsKCkpXG4gICAgICAgIGZvcihsZXQgY29sdW1uPSAwOyBjb2x1bW4gPCAxMDsgY29sdW1uKyspe1xuICAgICAgICAgICAgZm9yKGxldCByb3c9IDA7IHJvdyA8IDEwOyByb3crKyl7XG4gICAgICAgICAgICAgICAgZ2FtZUJvYXJkW2NvbHVtbl1bcm93XSA9IHsuLi5lbXB0eUNlbGwsIGNvbHVtbiwgcm93fVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBnYW1lQm9hcmRcbiAgICBcbiAgICB9XG5cbiAgICBjb25zdCBnYW1lQm9hcmQgPSBpbml0aWFsaXplQm9hcmQoKVxuXG4gICAgY29uc3Qgc2hpcHMgPSBbXG4gICAgICAgIGNyZWF0ZVNoaXAoNSwgJ0NhcnJpZXInKSxcbiAgICAgICAgY3JlYXRlU2hpcCg0LCAnQmF0dGxlc2hpcCcpLFxuICAgICAgICBjcmVhdGVTaGlwKDMsICdEZXN0cm95ZXInKSxcbiAgICAgICAgY3JlYXRlU2hpcCgzLCAnU3VibWFyaW5lJyksXG4gICAgICAgIGNyZWF0ZVNoaXAoMiwgJ1BhdHJvbCBCb2F0JyksXG4gICAgXVxuXG5cbiAgICBjb25zdCBjcmVhdGVPZmZMaW1pdExvY2F0aW9uID0gKCkgPT5cbiAgICAgICAgT2JqZWN0LmFzc2lnbihlbXB0eUNlbGwsIHsgb2ZmTGltaXRzOiB0cnVlIH0pXG5cbiAgICBjb25zdCBnZXRMb2NhdGlvbiA9IChjb2x1bW4sIHJvdykgPT4gZ2FtZUJvYXJkPy5bY29sdW1uXT8uW3Jvd11cblxuICAgIGNvbnN0IHNldExvY2F0aW9uID0gKGNvbHVtbiwgcm93LCBzaGlwID0gY3JlYXRlT2ZmTGltaXRMb2NhdGlvbigpKSA9PiB7XG4gICAgICAgIGlmIChnYW1lQm9hcmQ/Lltjb2x1bW5dPy5bcm93XSA9PT0gdW5kZWZpbmVkKSByZXR1cm4gdHJ1ZVxuICAgICAgICBjb25zdCBsb2NhdGlvbiA9IGdhbWVCb2FyZFtjb2x1bW5dW3Jvd11cblxuICAgICAgICBnYW1lQm9hcmRbY29sdW1uXVtyb3ddID0gey4uLmxvY2F0aW9uLCAuLi5zaGlwfVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICBjb25zdCBjaGVja0lmQWxsU2hpcHNIYXZlU3VuayA9ICgpID0+IHtcblxuICAgICAgICBsZXQgaGF2ZUFsbFNoaXBzU3VuayA9dHJ1ZSAgXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDEwOyBqKyspIHtcbiAgICAgICAgY29uc3QgbG9jYXRpb24gPSBnZXRMb2NhdGlvbihpLCBqKVxuICAgICAgICBpZihsb2NhdGlvbi5pc1NoaXAgPT09IGZhbHNlKSBjb250aW51ZVxuICAgICAgICBpZihsb2NhdGlvbi5pc1NoaXAgJiYgbG9jYXRpb24uaXNTdW5rKCkgPT09IGZhbHNlKXtcbiAgICAgICAgICAgaGF2ZUFsbFNoaXBzU3VuayA9IGZhbHNlIFxuICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gaGF2ZUFsbFNoaXBzU3VuayBcbiAgICB9XG5cbiAgICBjb25zdCBhZGRPZmZMaW1pdEFyZWFGb3JTaGlwcyA9IChjb2x1bW4sIHJvdykgPT4ge1xuICAgICAgICAvLyB0b3AtbGVmdFxuICAgICAgICBzZXRMb2NhdGlvbihjb2x1bW4gLSAxLCByb3cgLSAxKVxuICAgICAgICAvLyB0b3BcbiAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uLCByb3cgLSAxKVxuICAgIH1cblxuICAgIGNvbnN0IGFkZE9mZkxpbWl0QXJlYUZvckhvcml6b250YWxseVBvc2l0aW9uZWRTaGlwID0gKFxuICAgICAgICBjb2x1bW4sXG4gICAgICAgIHJvdyxcbiAgICAgICAgc2hpcExlbmd0aFxuICAgICkgPT4ge1xuICAgICAgICAvLyBwb3NpdGlvbnMgcmVsYXRpdmUgdG8gdGhlIHNoaXAgaXRzZWxmKGllLiBhIGhvcml6b250YWwgc2hpcCdzIGJvdHRvbSBpcyB0byB0aGUgcmlnaHQpXG5cbiAgICAgICAgYWRkT2ZmTGltaXRBcmVhRm9yU2hpcHMoY29sdW1uLCByb3cpXG4gICAgICAgIC8vIGJvdHRvbVxuICAgICAgICBzZXRMb2NhdGlvbihjb2x1bW4gKyBzaGlwTGVuZ3RoLCByb3cpXG4gICAgICAgIC8vIGJvdHRvbS1sZWZ0XG4gICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiAtIDEsIHJvdyArIDEpXG4gICAgICAgIC8vIGJvdHRvbS1yaWdodFxuICAgICAgICBzZXRMb2NhdGlvbihjb2x1bW4gKyBzaGlwTGVuZ3RoLCByb3cgKyAxKVxuICAgICAgICAvLyB0b3AtcmlnaHRcbiAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uICsgc2hpcExlbmd0aCwgcm93IC0gMSlcbiAgICB9XG5cbiAgICBjb25zdCBhZGRPZmZMaW1pdEFyZWFGb3JWZXJ0aWNhbGx5UG9zaXRpb25lZFNoaXAgPSAoXG4gICAgICAgIGNvbHVtbixcbiAgICAgICAgcm93LFxuICAgICAgICBzaGlwTGVuZ3RoXG4gICAgKSA9PiB7XG4gICAgICAgIC8vIHBvc2l0aW9ucyByZWxhdGl2ZSB0byBob3cgdGhlIHVzZXIgc2VlcyBpdChpZS4gYSB2ZXJ0aWNhbCBzaGlwJ3MgYm90dG9tIGlzIHRvIHRoZSBib3R0b20pXG5cbiAgICAgICAgYWRkT2ZmTGltaXRBcmVhRm9yU2hpcHMoY29sdW1uLCByb3cpXG4gICAgICAgIC8vIGJvdHRvbVxuICAgICAgICBzZXRMb2NhdGlvbihjb2x1bW4sIHJvdyArIHNoaXBMZW5ndGgpXG4gICAgICAgIC8vIGJvdHRvbS1yaWdodFxuICAgICAgICBzZXRMb2NhdGlvbihjb2x1bW4gKyAxLCByb3cgKyBzaGlwTGVuZ3RoKVxuICAgICAgICAvLyBib3R0b20tbGVmdFxuICAgICAgICBzZXRMb2NhdGlvbihjb2x1bW4gLSAxLCByb3cgKyBzaGlwTGVuZ3RoKVxuICAgICAgICAvLyB0b3AtcmlnaHRcbiAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uICsgMSwgcm93IC0gMSlcbiAgICB9XG5cbiAgICBjb25zdCBjaGVja0lmQ29sdW1uQ29vcmRpbmF0ZUlzVmFsaWQgPSAoY29sdW1uLCBzaGlwTGVuZ3RoKSA9PlxuICAgICAgICBjb2x1bW4gPj0gMCAmJiBjb2x1bW4gKyBzaGlwTGVuZ3RoIC0gMSA8IGdhbWVCb2FyZC5sZW5ndGhcblxuICAgIGNvbnN0IGNoZWNrSWZSb3dDb29yZGluYXRlSXNWYWxpZCA9IChyb3csIHNoaXBMZW5ndGgpID0+XG4gICAgICAgIHJvdyA+PSAwICYmIHJvdyArIHNoaXBMZW5ndGggLSAxIDwgZ2FtZUJvYXJkLmxlbmd0aFxuXG5cbiAgICBjb25zdCBjaGVja0lmTG9jYXRpb25Jc0FTaGlwT3JPZmZMaW1pdHMgPSAoXG4gICAgICAgIGNvbHVtbixcbiAgICAgICAgcm93LFxuICAgICAgICBkaXJlY3Rpb24sXG4gICAgICAgIHNoaXBMZW5ndGhcbiAgICApID0+IHtcbiAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gJ3ZlcnRpY2FsJykge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGlwTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsb2NhdGlvbiA9IGdldExvY2F0aW9uKGNvbHVtbiwgcm93ICsgaSlcbiAgICAgICAgICAgICAgICBpZiAobG9jYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24uaXNTaGlwID09PSB0cnVlICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5vZmZMaW1pdHMgPT09IHRydWVcbiAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkaXJlY3Rpb24gPT09ICdob3Jpem9udGFsJykge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGlwTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsb2NhdGlvbiA9IGdldExvY2F0aW9uKGNvbHVtbiArIGksIHJvdylcbiAgICAgICAgICAgICAgICBpZiAobG9jYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24uaXNTaGlwID09PSB0cnVlICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5vZmZMaW1pdHMgPT09IHRydWVcbiAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIGNvbnN0IHBsYWNlU2hpcCA9IChjb2x1bW4sIHJvdywgZGlyZWN0aW9uLCBzaGlwKSA9PiB7XG4gICAgICAgIGNvbnN0IHNoaXBMZW5ndGggPSBzaGlwLmdldExlbmd0aCgpXG4gICAgICAgIGlmIChjaGVja0lmTG9jYXRpb25Jc0FTaGlwT3JPZmZMaW1pdHMoZ2V0TG9jYXRpb24oY29sdW1uLCByb3csIGRpcmVjdGlvbiwgc2hpcExlbmd0aCkpKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIGlmIChkaXJlY3Rpb24gPT09ICd2ZXJ0aWNhbCcpIHtcbiAgICAgICAgICAgIGlmIChjaGVja0lmUm93Q29vcmRpbmF0ZUlzVmFsaWQocm93LCBzaGlwTGVuZ3RoKSkge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcExlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiwgcm93ICsgaSwgey4uLnNoaXAsIHBvc2l0aW9uOiBpfSlcbiAgICAgICAgICAgICAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uICsgMSwgcm93ICsgaSlcbiAgICAgICAgICAgICAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uIC0gMSwgcm93ICsgaSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYWRkT2ZmTGltaXRBcmVhRm9yVmVydGljYWxseVBvc2l0aW9uZWRTaGlwKFxuICAgICAgICAgICAgICAgICAgICBjb2x1bW4sXG4gICAgICAgICAgICAgICAgICAgIHJvdyxcbiAgICAgICAgICAgICAgICAgICAgc2hpcExlbmd0aFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PT0gJ2hvcml6b250YWwnKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2tJZkNvbHVtbkNvb3JkaW5hdGVJc1ZhbGlkKGNvbHVtbiwgc2hpcExlbmd0aCkpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXBMZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgICAgICAgICBzZXRMb2NhdGlvbihjb2x1bW4gKyBpICwgcm93LCB7Li4uc2hpcCwgcG9zaXRpb246IGl9KVxuICAgICAgICAgICAgICAgICAgICAvL3NldExvY2F0aW9uKGNvbHVtbiArIGksIHJvdywgc2hpcClcbiAgICAgICAgICAgICAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uICsgaSwgcm93ICsgMSlcbiAgICAgICAgICAgICAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uICsgaSwgcm93IC0gMSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYWRkT2ZmTGltaXRBcmVhRm9ySG9yaXpvbnRhbGx5UG9zaXRpb25lZFNoaXAoXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbixcbiAgICAgICAgICAgICAgICAgICAgcm93LFxuICAgICAgICAgICAgICAgICAgICBzaGlwTGVuZ3RoXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgICAgICBjb25zdCBhdmFpbGFibGVTcGFjZXMgPSAoKSA9PntcblxuICAgICAgICBjb25zdCBmbGF0dGVuZWRHYW1lQm9hcmQgPSBbLi4uZ2FtZUJvYXJkLmZsYXQoKV1cblxuICAgICAgICAgICAgZmxhdHRlbmVkR2FtZUJvYXJkLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBpZihlbGVtZW50Lmhhc0JlZW5IaXQgPT09IHRydWUpe1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmF2YWlsYWJpbGl0eSA9IGZhbHNlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuYXZhaWxhYmlsaXR5ID10cnVlICBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICByZXR1cm4gZmxhdHRlbmVkR2FtZUJvYXJkXG5cbiAgICAgICAgfVxuICAgIGNvbnN0IG1ha2VSYW5kb21Db29yZGluYXRlcyA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgcmFuZG9tRGlyZWN0aW9uID1cbiAgICAgICAgICAgIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDIpID09PSAwID8gJ3ZlcnRpY2FsJyA6ICdob3Jpem9udGFsJ1xuICAgICAgICBjb25zdCByYW5kb21Mb2NhdGlvbiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMClcbiAgICAgICAgY29uc3QgZmxhdHRlbmVkR2FtZUJvYXJkID0gYXZhaWxhYmxlU3BhY2VzKClcblxuICAgICAgICBjb25zdCBsb2NhdGlvbiA9IGZsYXR0ZW5lZEdhbWVCb2FyZFtyYW5kb21Mb2NhdGlvbl1cblxuICAgICAgICBpZihsb2NhdGlvbi5hdmFpbGFiaWxpdHkgPT09IGZhbHNlKXtcbiAgICAgICAgICAgIHJldHVybiBtYWtlUmFuZG9tQ29vcmRpbmF0ZXMoKVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZWxlbWVudENvbHVtbiA9IGxvY2F0aW9uLmNvbHVtblxuICAgICAgICBjb25zdCBlbGVtZW50Um93ID0gbG9jYXRpb24ucm93XG5cblxuICAgICAgICByZXR1cm4geyBlbGVtZW50Q29sdW1uLCBlbGVtZW50Um93LCByYW5kb21EaXJlY3Rpb24gfVxuICAgIH1cblxuICAgIGNvbnN0IHJhbmRvbWx5UGxhY2VTaGlwcyA9ICgpID0+IHtcbiAgICAgICAgY29uc3Qgc2hpcERldGFpbHMgPSBbXVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXBzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICBjb25zdCBzaGlwID0gc2hpcHNbaV1cbiAgICAgICAgICAgIGNvbnN0IHsgcmFuZG9tQ29sdW1uLCByYW5kb21Sb3csIHJhbmRvbURpcmVjdGlvbiB9ID1cbiAgICAgICAgICAgICAgICBtYWtlUmFuZG9tQ29vcmRpbmF0ZXMoc2hpcC5nZXRMZW5ndGgoKSlcbiAgICAgICAgICAgIGlmIChwbGFjZVNoaXAocmFuZG9tQ29sdW1uLCByYW5kb21Sb3csIHJhbmRvbURpcmVjdGlvbiwgc2hpcCkpIHtcbiAgICAgICAgICAgICAgICBzaGlwRGV0YWlscy5wdXNoKHsgcmFuZG9tQ29sdW1uLCByYW5kb21Sb3csIHJhbmRvbURpcmVjdGlvbiB9KVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpIC09IDFcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2hpcERldGFpbHNcbiAgICB9XG5cbiAgICBjb25zdCByZWNlaXZlQXR0YWNrID0gKGNvbHVtbiwgcm93KSA9PiB7XG4gICAgICAgIGdhbWVCb2FyZFtjb2x1bW5dW3Jvd10uaGFzQmVlbkhpdCA9IHRydWVcbiAgICB9XG5cbiAgICBjb25zdCBjaGVja0lmT2ZmTGltaXRab25lV2FzQ29ycmVjdGx5SW1wbGVtZW50ZWQgPSAoc2hpcExlbmd0aCkgPT5cbiAgICAgICAgZ2FtZUJvYXJkLmZsYXQoKS5maWx0ZXIoKGVsZW1lbnQpID0+IGVsZW1lbnQub2ZmTGltaXRzID09PSB0cnVlKVxuICAgICAgICAgICAgLmxlbmd0aCA9PT1cbiAgICAgICAgc2hpcExlbmd0aCArIDJcbiAgICAvLyBhZGRpbmcgc2hpcExlbmd0aCBwbHVzIHR3byBiZWNhdXNlIGZvciBldmVyeSBpbmNyZWFzZSBpbiB0aGUgc2l6ZSBvZiBzaGlwLCB0aGUgem9uZXMgY292ZXJlZCBpbmNyZWFzZSBieSAyIHVuaXRzXG5cbiAgICByZXR1cm4ge1xuICAgICAgICBjaGVja0lmTG9jYXRpb25Jc0FTaGlwT3JPZmZMaW1pdHMsXG4gICAgICAgIGNoZWNrSWZPZmZMaW1pdFpvbmVXYXNDb3JyZWN0bHlJbXBsZW1lbnRlZCxcbiAgICAgICAgZ2V0TG9jYXRpb24sXG4gICAgICAgIHJlY2VpdmVBdHRhY2ssXG4gICAgICAgIGNoZWNrSWZBbGxTaGlwc0hhdmVTdW5rLFxuICAgICAgICBwbGFjZVNoaXAsXG4gICAgICAgIHJhbmRvbWx5UGxhY2VTaGlwcyxcbiAgICAgICAgbWFrZVJhbmRvbUNvb3JkaW5hdGVzLFxuICAgIH1cbn1cbm1vZHVsZS5leHBvcnRzID0gY3JlYXRlR2FtZUJvYXJkIiwiY29uc3QgY3JlYXRlUGxheWVyID0gKG5hbWUgPSAncGxheWVyJykgPT4ge1xuICAgIGNvbnN0IGdldE5hbWUgPSAoKSA9PiBuYW1lXG5cbiAgICBjb25zdCBhdHRhY2sgPSAoY29sdW1uLCByb3csIHsgZ2V0TG9jYXRpb24sIHJlY2VpdmVBdHRhY2sgfSkgPT4ge1xuICAgICAgICBjb25zdCBsb2NhdGlvbiA9IGdldExvY2F0aW9uKGNvbHVtbiwgcm93KVxuICAgICAgICBpZiAobG9jYXRpb24uaGFzQmVlbkhpdCA9PT0gZmFsc2UgfHwgKGxvY2F0aW9uLmlzU2hpcCAmJiBsb2NhdGlvbi5nZXRTdGF0dXMoKS5pbmNsdWRlcygndW5oaXQnKSA9PT0gZmFsc2UpKSB7XG4gICAgICAgICAgICByZWNlaXZlQXR0YWNrKGNvbHVtbiwgcm93KVxuICAgICAgICAgICAgaWYobG9jYXRpb24uaGl0KXtcblxuICAgICAgICAgICAgICAgIGxvY2F0aW9uLmhpdChsb2NhdGlvbi5wb3NpdGlvbilcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJZb3UgaGl0IGEgc2hpcCFcIlxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFwiSXQncyBhIGhpdCFcIlxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuICdZb3UgaGF2ZSBhbHJlYWR5IGhpdCB0aGlzIHNwb3QhJ1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIGdldE5hbWUsXG4gICAgICAgIGF0dGFjayxcbiAgICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY3JlYXRlUGxheWVyXG4iLCJjb25zdCBjcmVhdGVTaGlwID0gKGxlbmd0aCwgbmFtZSA9ICdzaGlwJykgPT4ge1xuXG4gICAgY29uc3Qgc3RhdHVzID0gQXJyYXkobGVuZ3RoKS5maWxsKCd1bmhpdCcpXG5cbiAgICBjb25zdCBnZXRMZW5ndGggPSAoKSA9PiBzdGF0dXMubGVuZ3RoXG5cbiAgICBjb25zdCBnZXRTdGF0dXMgPSAoKSA9PiBzdGF0dXNcblxuICAgIGNvbnN0IGhpdCA9IChwb3NpdGlvbikgPT4ge1xuICAgICAgICBpZiAocG9zaXRpb24gPCBsZW5ndGgpIHtcbiAgICAgICAgICAgIHN0YXR1c1twb3NpdGlvbl0gPSAnaGl0J1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgZ2V0TmFtZSA9ICgpID0+ICBuYW1lXG5cbiAgICBjb25zdCBpc1N1bmsgPSAoKSA9PiBzdGF0dXMuZXZlcnkoKHBvc2l0aW9uKSA9PiBwb3NpdGlvbiA9PT0gJ2hpdCcpXG5cbiAgICByZXR1cm4ge1xuICAgICAgICBnZXROYW1lLFxuICAgICAgICBnZXRMZW5ndGgsXG4gICAgICAgIGlzU3VuayxcbiAgICAgICAgaGl0LFxuICAgICAgICBnZXRTdGF0dXMsXG4gICAgICAgIGhhc0JlZW5IaXQ6IGZhbHNlLFxuICAgICAgICBvZmZMaW1pdHM6IHRydWUsXG4gICAgICAgIGlzU2hpcDogdHJ1ZSxcbiAgICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY3JlYXRlU2hpcFxuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSAobW9kdWxlKSA9PiB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdCgpID0+IChtb2R1bGVbJ2RlZmF1bHQnXSkgOlxuXHRcdCgpID0+IChtb2R1bGUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsImNvbnN0IHJlbmRlckF0dGFja3MgPSAocGxheWVyLCBjb2x1bW4sIHJvdywgZW5lbXlCb2FyZCkgPT4ge1xuICAgIGNvbnN0IGNlbGwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgICBgLiR7cGxheWVyfS1ib2FyZCA+IC5jZWxsW2NvbHVtbj0nJHtjb2x1bW59J11bcm93PScke3Jvd30nXWBcbiAgICApXG5cbiAgICBjb25zdCBsb2NhdGlvbiA9IGVuZW15Qm9hcmQuZ2V0TG9jYXRpb24oY29sdW1uLCByb3cpXG4gICAgaWYgKGxvY2F0aW9uLmlzU2hpcCkge1xuICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoJ2hpdCcpXG4gICAgfSBlbHNlIHtcbiAgICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKCdtaXNzJylcbiAgICB9XG59XG5cbmNvbnN0IGhhbmRsZUF0dGFjayA9IChjb2x1bW4sIHJvdywgZW5lbXlCb2FyZCwgcGxheWVyKSA9PlxuICAgIHBsYXllci5hdHRhY2soY29sdW1uLCByb3csIGVuZW15Qm9hcmQpXG5cbmNvbnN0IGF0dGFja0VuZW15Q2VsbCA9IChjb2x1bW4sIHJvdywgZW5lbXlCb2FyZCwgcGxheWVyKSA9PiB7XG4gICAgaGFuZGxlQXR0YWNrKGNvbHVtbiwgcm93LCBlbmVteUJvYXJkLCBwbGF5ZXIpXG4gICAgcmVuZGVyQXR0YWNrcygnZW5lbXknLCBjb2x1bW4sIHJvdywgZW5lbXlCb2FyZClcbn1cblxuY29uc3QgaXNTcGFjZUFyb3VuZEhpdCA9IChjb2x1bW4sIHJvdywgcGxheWVyQm9hcmQpID0+IHtcblxuICAgIGNvbnN0IG5leHRDb2x1bW4gPSBwbGF5ZXJCb2FyZC5nZXRMb2NhdGlvbihjb2x1bW4gKyAxLCByb3cpXG4gICAgY29uc3QgcHJldmlvdXNDb2x1bW4gPSBwbGF5ZXJCb2FyZC5nZXRMb2NhdGlvbihjb2x1bW4gLSAxLCByb3cpXG4gICAgY29uc3QgbmV4dFJvdyA9IHBsYXllckJvYXJkLmdldExvY2F0aW9uKGNvbHVtbiwgcm93ICsgMSlcbiAgICBjb25zdCBwcmV2aW91c1JvdyA9IHBsYXllckJvYXJkLmdldExvY2F0aW9uKGNvbHVtbiwgcm93IC0gMSlcblxuICAgIGNvbnN0IHNwYWNlc0hpdCA9IFtdXG5cbiAgICBpZihuZXh0Q29sdW1uICYmICFuZXh0Q29sdW1uLmhhc0JlZW5IaXQpe1xuICAgICAgICBzcGFjZXNIaXQucHVzaChuZXh0Q29sdW1uKVxuICAgIH1cbiAgICBpZihwcmV2aW91c0NvbHVtbiAmJiAhcHJldmlvdXNDb2x1bW4uaGFzQmVlbkhpdCl7XG4gICAgICAgIHNwYWNlc0hpdC5wdXNoKHByZXZpb3VzQ29sdW1uKVxuICAgIH1cbiAgICBpZihuZXh0Um93ICYmICFuZXh0Um93Lmhhc0JlZW5IaXQpe1xuICAgICAgICBzcGFjZXNIaXQucHVzaChuZXh0Um93KVxuICAgIH1cbiAgICBpZihwcmV2aW91c1JvdyAmJiAhcHJldmlvdXNSb3cuaGFzQmVlbkhpdCl7XG4gICAgICAgIHNwYWNlc0hpdC5wdXNoKHByZXZpb3VzUm93KVxuICAgIH1cblxuICAgIHJldHVybiBzcGFjZXNIaXRcblxufVxuXG5jb25zdCByYW5kb21EaXJlY3Rpb25BdHRhY2sgPSAoY29sdW1uLCByb3csIHBsYXllckJvYXJkKSA9PiB7XG5cbiAgICBjb25zdCBzcGFjZXNIaXQgPSBpc1NwYWNlQXJvdW5kSGl0KGNvbHVtbiwgcm93LCBwbGF5ZXJCb2FyZClcblxuICAgIGNvbnN0IHJhbmRvbUluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogc3BhY2VzSGl0Lmxlbmd0aClcblxuICAgIGlmKCFzcGFjZXNIaXRbcmFuZG9tSW5kZXhdKSByZXR1cm4gcmFuZG9tRGlyZWN0aW9uQXR0YWNrKGNvbHVtbiwgcm93ICwgcGxheWVyQm9hcmQpXG5cbiAgICByZXR1cm4gc3BhY2VzSGl0W3JhbmRvbUluZGV4XVxufVxuXG5jb25zdCBpc1JhbmRvbUNvbHVtbkdyZWF0ZXJUaGFuQ3VycmVudENvbHVtbiA9IChjb2x1bW4sIHJhbmRvbUNvbHVtbikgPT4gXG4gICAgcmFuZG9tQ29sdW1uID4gY29sdW1uXG5cbmNvbnN0IGlzUmFuZG9tUm93R3JlYXRlclRoYW5DdXJyZW50Q29sdW1uID0gKHJvdywgcmFuZG9tUm93KSA9PiBcbiAgICByYW5kb21Sb3cgPiByb3dcblxuY29uc3QgbGlzdE9mUmFuZG9tQ29vcmRpbmF0ZXMgPSAoY29sdW1uLCByb3csIHBsYXllckJvYXJkKSA9PiB7XG5cbiAgICAgICAgY29uc3QgbG9jYXRpb25Qcm90b3R5cGUgPSB7XG4gICAgICAgICAgICBsb2NhdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGxheWVyQm9hcmQuZ2V0TG9jYXRpb24odGhpcy5jb2x1bW4sIHRoaXMucm93KVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdG9wID0gT2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKGxvY2F0aW9uUHJvdG90eXBlKSwge1xuICAgICAgICAgICAgY29sdW1uLFxuICAgICAgICAgICAgcm93OiByb3cgLSAxLFxuICAgICAgICB9KVxuICAgICAgICBjb25zdCBib3R0b20gPSBPYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUobG9jYXRpb25Qcm90b3R5cGUpLCB7XG4gICAgICAgICAgICBjb2x1bW4sXG4gICAgICAgICAgICByb3c6IHJvdyArIDEsXG4gICAgICAgIH0pXG4gICAgICAgIGNvbnN0IHJpZ2h0ID0gT2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKGxvY2F0aW9uUHJvdG90eXBlKSwge1xuICAgICAgICAgICAgY29sdW1uOiBjb2x1bW4gKyAxLFxuICAgICAgICAgICAgcm93LFxuICAgICAgICB9KVxuICAgICAgICBjb25zdCBsZWZ0ID0gT2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKGxvY2F0aW9uUHJvdG90eXBlKSwge1xuICAgICAgICAgICAgY29sdW1uOiBjb2x1bW4gLSAxLFxuICAgICAgICAgICAgcm93LFxuICAgICAgICB9KVxuICAgICAgICBjb25zdCBkaXJlY3Rpb25zID0gW11cblxuICAgICAgICBkaXJlY3Rpb25zLnB1c2godG9wKVxuICAgICAgICBkaXJlY3Rpb25zLnB1c2goYm90dG9tKVxuICAgICAgICBkaXJlY3Rpb25zLnB1c2gocmlnaHQpXG4gICAgICAgIGRpcmVjdGlvbnMucHVzaChsZWZ0KVxuXG4gICAgICAgIHJldHVybiBkaXJlY3Rpb25zXG59XG5cbmNvbnN0IGNoZWNrSWZSb3dDb250YWluc1NoaXAgPSAoY29sdW1uLCBwbGF5ZXJCb2FyZCkgPT4ge1xuICAgIGZvcihsZXQgcm93ID0gMDsgcm93IDwgMTA7IHJvdysrKXtcbiAgICAgICAgaWYocGxheWVyQm9hcmQuZ2V0TG9jYXRpb24oY29sdW1uLCByb3cpLmlzU2hpcCl7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxufVxuXG5jb25zdCBjaGVja0lmQ29sdW1uQ29udGFpbnNTaGlwID0gKHJvdywgcGxheWVyQm9hcmQpID0+IHtcblxuICAgIGZvcihsZXQgY29sdW1uID0gMDsgY29sdW1uIDwgMTA7IGNvbHVtbisrKXtcbiAgICAgICAgaWYocGxheWVyQm9hcmQuZ2V0TG9jYXRpb24oY29sdW1uLCByb3cpLmlzU2hpcCl7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxufVxuXG5jb25zdCBhdHRhY2tQbGF5ZXJDZWxsID0gKHBsYXllckJvYXJkLCBlbmVteSwgZWxlbWVudENvbHVtbiwgZWxlbWVudFJvdywgcHJldkxvY2F0aW9uKSA9PiB7XG4gICAgICAgIGNvbnN0IGxvY2F0aW9uID0gcGxheWVyQm9hcmQuZ2V0TG9jYXRpb24oZWxlbWVudENvbHVtbiwgZWxlbWVudFJvdylcbiAgICBpZihoYW5kbGVBdHRhY2soZWxlbWVudENvbHVtbiwgZWxlbWVudFJvdywgcGxheWVyQm9hcmQsIGVuZW15KSA9PT0gXCJZb3UgaGl0IGEgc2hpcCFcIil7XG4gICAgICAgIFxuXG4gICAgICAgIGNvbnN0IHJhbmRvbVBvc2l0aW9uID0gcmFuZG9tRGlyZWN0aW9uQXR0YWNrKGVsZW1lbnRDb2x1bW4sIGVsZW1lbnRSb3csIHBsYXllckJvYXJkKVxuICAgICAgICBjb25zdCByYW5kb21Qb3NpdGlvbkNvbHVtbiA9IHJhbmRvbVBvc2l0aW9uLmNvbHVtblxuXG4gICAgICAgIGNvbnN0IGRpcmVjdGlvbnMgPSBsaXN0T2ZSYW5kb21Db29yZGluYXRlcyhlbGVtZW50Q29sdW1uLCBlbGVtZW50Um93LCBwbGF5ZXJCb2FyZClcbiAgICAgICAgY29uc3QgZmlsdGVyZWREaXJlY3Rpb25zID0gZGlyZWN0aW9ucy5maWx0ZXIoKGVsZW1lbnQpID0+IGVsZW1lbnQuY29sdW1uICE9PSB1bmRlZmluZWQgJiYgZWxlbWVudC5yb3cgIT09IHVuZGVmaW5lZClcbiAgICAgICAgY29uc3QgcmFuZG9tUG9zaXRpb25Sb3cgPSByYW5kb21Qb3NpdGlvbi5yb3dcbiAgICAgICAgICAgICAgICBpZihsb2NhdGlvbi5pc1NoaXAgJiYgbG9jYXRpb24uaXNTdW5rKCkgPT09IGZhbHNlKXtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCByYW5kb20gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBmaWx0ZXJlZERpcmVjdGlvbnMubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZGVmYXVsdC1jYXNlXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaChyYW5kb20pe1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRhY2tQbGF5ZXJDZWxsKHBsYXllckJvYXJkLCBlbmVteSwgZmlsdGVyZWREaXJlY3Rpb25zWzBdLmNvbHVtbiwgZmlsdGVyZWREaXJlY3Rpb25zWzBdLnJvdywgcHJldkxvY2F0aW9uKVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dGFja1BsYXllckNlbGwocGxheWVyQm9hcmQsIGVuZW15LCBmaWx0ZXJlZERpcmVjdGlvbnNbMV0uY29sdW1uLCBmaWx0ZXJlZERpcmVjdGlvbnNbMV0ucm93LCBwcmV2TG9jYXRpb24pXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0YWNrUGxheWVyQ2VsbChwbGF5ZXJCb2FyZCwgZW5lbXksIGZpbHRlcmVkRGlyZWN0aW9uc1syXS5jb2x1bW4sIGZpbHRlcmVkRGlyZWN0aW9uc1syXS5yb3csIHByZXZMb2NhdGlvbilcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRhY2tQbGF5ZXJDZWxsKHBsYXllckJvYXJkLCBlbmVteSwgZmlsdGVyZWREaXJlY3Rpb25zWzNdLmNvbHVtbiwgZmlsdGVyZWREaXJlY3Rpb25zWzNdLnJvdywgcHJldkxvY2F0aW9uKVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBhdHRhY2tQbGF5ZXJDZWxsKHBsYXllckJvYXJkLCBlbmVteSwgcmFuZG9tUG9zaXRpb25Db2x1bW4sIHJhbmRvbVBvc2l0aW9uUm93KVxuICAgICAgICB9LCA3MDApXG4gICAgfVxuICAgIGVsc2UgaWYobG9jYXRpb24mJiBsb2NhdGlvbi5pc1NoaXAgPT09IGZhbHNlICYmIHByZXZMb2NhdGlvbiAmJiBwcmV2TG9jYXRpb24uaXNTaGlwID09PSB0cnVlKXtcblxuICAgICAgICBsZXQgcHJldkxvY2F0aW9uUm93O1xuICAgICAgICBsZXQgcHJldkxvY2F0aW9uQ29sdW1uO1xuICAgICAgICBjb25zdCBzaGlwTGVuZ3RoID0gcHJldkxvY2F0aW9uLmdldExlbmd0aCgpXG4gICAgICAgIGlmKHByZXZMb2NhdGlvbi5jb2x1bW4gPiBlbGVtZW50Q29sdW1uICl7XG4gICAgICAgIHByZXZMb2NhdGlvbkNvbHVtbiA9IHByZXZMb2NhdGlvbi5jb2x1bW4gLSAocHJldkxvY2F0aW9uLmNvbHVtbiAtIGVsZW1lbnRDb2x1bW4pXG4gICAgICAgIH1cbiAgICAgICAgaWYocHJldkxvY2F0aW9uLmNvbHVtbiA8IGVsZW1lbnRDb2x1bW4pe1xuICAgICAgICBwcmV2TG9jYXRpb25Db2x1bW4gPSBwcmV2TG9jYXRpb24uY29sdW1uICsgKGVsZW1lbnRDb2x1bW4gLSBwcmV2TG9jYXRpb24uY29sdW1uKVxuICAgICAgICB9XG4gICAgICAgIGlmKHByZXZMb2NhdGlvbi5yb3cgPiBlbGVtZW50Um93KXtcbiAgICAgICAgcHJldkxvY2F0aW9uUm93ID0gcHJldkxvY2F0aW9uLnJvdyAtICAocHJldkxvY2F0aW9uLnJvdyAtIGVsZW1lbnRSb3cpXG5cbiAgICAgICAgfVxuICAgICAgICBpZihwcmV2TG9jYXRpb24ucm93IDwgZWxlbWVudFJvdyl7XG4gICAgICAgIHByZXZMb2NhdGlvblJvdyA9IHByZXZMb2NhdGlvbi5yb3cgKyAoZWxlbWVudFJvdyAtIHByZXZMb2NhdGlvbi5yb3cpXG5cbiAgICAgICAgfVxuXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuXG4gICAgICAgICAgICBpZihwcmV2TG9jYXRpb24uaXNTdW5rKCkgPT09IGZhbHNlKXtcblxuICAgICAgICAgICAgYXR0YWNrUGxheWVyQ2VsbChwbGF5ZXJCb2FyZCwgZW5lbXksIHByZXZMb2NhdGlvbkNvbHVtbiwgcHJldkxvY2F0aW9uUm93LCBwcmV2TG9jYXRpb24pXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sNzAwKVxuICAgIH1cblxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuXG4gICAgcmVuZGVyQXR0YWNrcygncGxheWVyJywgZWxlbWVudENvbHVtbiwgZWxlbWVudFJvdywgcGxheWVyQm9hcmQpXG4gICAgfSwgNzAwKVxufVxuLy8gaHR0cHM6Ly9qc21hbmlmZXN0LmNvbS90aGUtcHVibGlzaC1zdWJzY3JpYmUtcGF0dGVybi1pbi1qYXZhc2NyaXB0L1xuXG5leHBvcnQgY29uc3QgcHViU3ViID0gKCkgPT4ge1xuICAgIGNvbnN0IHN1YnNjcmliZXJzID0ge31cblxuICAgIGZ1bmN0aW9uIHB1Ymxpc2goZXZlbnROYW1lLCBkYXRhKSB7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShzdWJzY3JpYmVyc1tldmVudE5hbWVdKSkge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgc3Vic2NyaWJlcnNbZXZlbnROYW1lXS5mb3JFYWNoKChjYWxsYmFjaykgPT4ge1xuICAgICAgICAgICAgY2FsbGJhY2soZGF0YSlcbiAgICAgICAgfSlcbiAgICB9XG4gICAgZnVuY3Rpb24gc3Vic2NyaWJlKGV2ZW50TmFtZSwgY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHN1YnNjcmliZVtldmVudE5hbWVdKSkge1xuICAgICAgICAgICAgc3Vic2NyaWJlcnNbZXZlbnROYW1lXSA9IFtdXG4gICAgICAgIH1cbiAgICAgICAgc3Vic2NyaWJlcnNbZXZlbnROYW1lXS5wdXNoKGNhbGxiYWNrKVxuICAgICAgICBjb25zdCBpbmRleCA9IHN1YnNjcmliZXJzW2V2ZW50TmFtZV0ubGVuZ3RoIC0gMVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB1bnN1YnNjcmliZSgpIHtcbiAgICAgICAgICAgICAgICBzdWJzY3JpYmVyc1tldmVudE5hbWVdLnNwbGljZShpbmRleCwgMSlcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBwdWJsaXNoLFxuICAgICAgICBzdWJzY3JpYmUsXG4gICAgfVxufVxuXG5jb25zdCBjZWxsRHJhZ0xpc3RlbmVyID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgY29uc29sZS5sb2codGhpcylcbn1cblxuLy9jb25zdCBhZGREcmFnZ2FibGVQcm9wZXJ0aWVzID0gKCkgPT4ge1xuXG4gICAgLy9jb25zdCBkcmFnZ2FibGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNlbGxbZHJhZ2dhYmxlPVwidHJ1ZVwiXScpXG4gICAgLy9kcmFnZ2FibGVzLmZvckVhY2goZHJhZ2dhYmxlID0+IHtcbiAgICAgICAgLy9kcmFnZ2FibGUuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0JywgKCkgPT4ge1xuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnYm9iIGpvbmVzJylcbiAgICAgICAgLy99KVxuICAgIC8vfSlcbi8vfVxuXG5mdW5jdGlvbiBnZXREcmFnQWZ0ZXJFbGVtZW50KGNvbnRhaW5lciwgeSwgeCl7XG4gICAgY29uc3QgZHJhZ2dhYmxlRWxlbWVudHMgPSBbLi4uY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jZWxsOm5vdCguZHJhZ2dpbmcpJyldXG5cbiAgICByZXR1cm4gZHJhZ2dhYmxlRWxlbWVudHMucmVkdWNlKChjbG9zZXN0LCBjaGlsZCkgPT4ge1xuICAgICAgICBjb25zdCBib3ggPSBjaGlsZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgICAgICBjb25zdCBvZmZzZXRZID0geSAtIGJveC50b3AgLSBib3guaGVpZ2h0IC8gMlxuICAgICAgICBjb25zdCBvZmZzZXRYID0geCAtIGJveC5sZWZ0IC0gYm94LndpZHRoLyAyXG4gICAgICAgIGNvbnNvbGUubG9nKGNoaWxkKVxuICAgICAgICBpZihvZmZzZXRZIDwgMCAmJiBvZmZzZXRZID4gY2xvc2VzdC5vZmZzZXRZICYmIG9mZnNldFggPCAwICYmIG9mZnNldFggPiBjbG9zZXN0Lm9mZnNldFgpe1xuICAgICAgICAgICAgcmV0dXJuIHtvZmZzZXRYLCBvZmZzZXRZLCBlbGVtZW50OmNoaWxkfVxuICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY2xvc2VzdFxuXG4gICAgfSwge29mZnNldFg6IE51bWJlci5ORUdBVElWRV9JTkZJTklUWSwgb2Zmc2V0WTpOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFl9KS5lbGVtZW50XG59XG5cbmNvbnN0IGFkZExpc3RlbmVyVG9Cb2F0ID0gKGNlbGxzKSA9PiB7XG5cbiAgICAvL1ZpZGVvIGZvciBkcmFnIGFuZCBkcm9wOiBodHRwczovL3d3dy55b3V0dWJlLmNvbS93YXRjaD92PWpmWVd3UXJ0enpZXG5cbiAgICBjb25zdCBjZWxsc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wbGF5ZXItYm9hcmQnKVxuICAgIGNvbnN0IHNoaXBDb250YWluZXIgID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICBjZWxscy5mb3JFYWNoKChjZWxsLCBpbmRleCkgPT4ge1xuICAgICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdzdGFydCcsICgpID0+IHtcbiAgICAgICAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZCgnZHJhZ2dpbmcnKVxuICAgICAgICB9KVxuXG4gICAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2VuZCcsICgpID0+IHtcbiAgICAgICAgICAgIGNlbGwuY2xhc3NMaXN0LnJlbW92ZSgnZHJhZ2dpbmcnKVxuICAgICAgICB9KVxuICAgIH0pXG5cbiAgICBjZWxsc0NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIChldmVudCkgPT4ge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgIGxldCBhZnRlckVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IGRyYWdnYWJsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kcmFnZ2luZycpXG4gICAgICAgIGNvbnNvbGUubG9nKGFmdGVyRWxlbWVudClcbiAgICAgICAgaWYoYWZ0ZXJFbGVtZW50ID09PSBudWxsKXtcblxuICAgICAgICAgICAgY2VsbHNDb250YWluZXIuYXBwZW5kQ2hpbGQoZHJhZ2dhYmxlKVxuICAgICAgICB9IGVsc2V7XG4gICAgICAgICAgICBjZWxsc0NvbnRhaW5lci5pbnNlcnRCZWZvcmUoZHJhZ2dhYmxlLCBhZnRlckVsZW1lbnQpXG4gICAgICAgIH1cbiAgICB9KVxufVxuXG5jb25zdCBxdWVyeUNlbGxzID0gKCkgPT4ge1xuXG4gICAgY29uc3QgcGF0cm9sQm9hdD0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNlbGxbc2hpcC1uYW1lPVwiUGF0cm9sIEJvYXRcIl0nKVxuICAgIGFkZExpc3RlbmVyVG9Cb2F0KHBhdHJvbEJvYXQpXG5cbiAgICAvL2NvbnN0IHBhdHJvbEJvYXRDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuXG4gICAgY29uc3Qgc3VibWFyaW5lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNlbGxbc2hpcC1uYW1lPVwiU3VibWFyaW5lXCJdJylcbiAgICBhZGRMaXN0ZW5lclRvQm9hdChzdWJtYXJpbmUpXG4gICAgLy9jb25zdCBzdWJtYXJpbmVDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuXG4gICAgY29uc3QgY2FycmllciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jZWxsW3NoaXAtbmFtZT1cIkNhcnJpZXJcIl0nKVxuICAgIGFkZExpc3RlbmVyVG9Cb2F0KGNhcnJpZXIpXG4gICAgLy9jb25zdCBjYXJyaWVyQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcblxuICAgIGNvbnN0IGJhdHRsZVNoaXA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jZWxsW3NoaXAtbmFtZT1cIkJhdHRsZXNoaXBcIl0nKVxuICAgIGFkZExpc3RlbmVyVG9Cb2F0KGJhdHRsZVNoaXApXG4gICAgLy9jb25zdCBiYXR0bGVTaGlwQ29udGFpbmVyPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuXG4gICAgY29uc3QgZGVzdHJveWVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNlbGxbc2hpcC1uYW1lPVwiRGVzdHJveWVyXCJdJylcbiAgICBhZGRMaXN0ZW5lclRvQm9hdChkZXN0cm95ZXIpXG4gICAgLy9jb25zdCBkZXN0cm95ZXJDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuXG5cbn1cblxuZnVuY3Rpb24gY3JlYXRlRHJhZ0FuZERyb3BGbGVldChwbGF5ZXIpe1xuICAgIHJlbmRlclBsYXllclNoaXBTZWxlY3QoMSwgMSlcbiAgICByZW5kZXJQbGF5ZXJTaGlwU2VsZWN0KDIsIDIpXG4gICAgcmVuZGVyUGxheWVyU2hpcFNlbGVjdCgzLCAzKVxuICAgIHJlbmRlclBsYXllclNoaXBTZWxlY3QoNCwgNClcblxuICAgIGZ1bmN0aW9uIHJlbmRlclBsYXllclNoaXBTZWxlY3QoaSwgbGVuZ3RoKXtcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBsYXllci1ib2FyZCcpXG4gICAgICAgIGNvbnN0IHNoaXBDb250YWluZXIgPSBkb2N1bW5ldC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgICAgICBzaGlwQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJzaGlwLWNvbnRhaW5lclwiKVxuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoc2hpcENvbnRhaW5lcilcblxuICAgICAgICBjb25zdCBzaGlwSW5mbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpXG4gICAgICAgIHNoaXBJbmZvLmNsYXNzTGlzdC5hZGQoKVxuXG4gICAgfVxufVxuZXhwb3J0IGNvbnN0IHJlbmRlclBsYXllclNoaXBzID0gKHsgZ2V0TG9jYXRpb24gfSkgPT4ge1xuICAgIGNvbnN0IHBsYXllckJvYXJkQXJlYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5wbGF5ZXItYm9hcmQnKVxuXG4gICAgZm9yIChsZXQgY29sdW1uID0gMDsgY29sdW1uIDwgMTA7IGNvbHVtbiArPSAxKSB7XG4gICAgICAgIGZvciAobGV0IHJvdyA9IDA7IHJvdyA8IDEwOyByb3cgKz0gMSkge1xuICAgICAgICAgICAgY29uc3QgY2VsbCA9IHBsYXllckJvYXJkQXJlYS5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAgICAgICAgIGAuY2VsbDpudGgtY2hpbGQoJHtyb3cgKiAxMCArIGNvbHVtbiArIDF9KWBcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIGNlbGwuc2V0QXR0cmlidXRlKCdjb2x1bW4nLCBjb2x1bW4pXG4gICAgICAgICAgICBjZWxsLnNldEF0dHJpYnV0ZSgncm93Jywgcm93KVxuICAgICAgICAgICAgY29uc3QgbG9jYXRpb24gPSBnZXRMb2NhdGlvbihjb2x1bW4sIHJvdylcbiAgICAgICAgICAgIGlmIChsb2NhdGlvbi5pc1NoaXApIHtcbiAgICAgICAgICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoJ3NoaXAnKVxuICAgICAgICAgICAgICAgIGNlbGwuc2V0QXR0cmlidXRlKCdzaGlwLW5hbWUnLCBsb2NhdGlvbi5nZXROYW1lKCkpXG4gICAgICAgICAgICAgICAgY2VsbC5zZXRBdHRyaWJ1dGUoJ2RyYWdnYWJsZScsIHRydWUpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmNvbnN0IGNoZWNrSWZHYW1lT3ZlciA9IChwbGF5ZXJCb2FyZCwgZW5lbXlCb2FyZCkgPT4ge1xuICAgIGlmIChwbGF5ZXJCb2FyZC5jaGVja0lmQWxsU2hpcHNIYXZlU3VuaygpKSB7XG4gICAgICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsJylcbiAgICAgICAgY29uc3QgbW9kYWxXaW5uZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwtY29udGVudCA+IHAnKVxuICAgICAgICBjb25zdCBwbGF5QWdhaW5CdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAgICAgJy5tb2RhbC1jb250ZW50ID4gYnV0dG9uJ1xuICAgICAgICApXG5cbiAgICAgICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9ICdibG9jaydcbiAgICAgICAgcGxheUFnYWluQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKClcbiAgICAgICAgfSlcblxuICAgICAgICBtb2RhbFdpbm5lci50ZXh0Q29udGVudCA9ICdZb3Ugd2luISdcbiAgICB9XG4gICAgaWYgKGVuZW15Qm9hcmQuY2hlY2tJZkFsbFNoaXBzSGF2ZVN1bmsoKSkge1xuICAgICAgICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbCcpXG4gICAgICAgIGNvbnN0IG1vZGFsV2lubmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLWNvbnRlbnQgPiBwJylcbiAgICAgICAgY29uc3QgcGxheUFnYWluQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgICAgICcubW9kYWwtY29udGVudCA+IGJ1dHRvbidcbiAgICAgICAgKVxuXG4gICAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snXG4gICAgICAgIG1vZGFsV2lubmVyLnRleHRDb250ZW50ID0gJ1lvdSBsb3NlISdcbiAgICAgICAgcGxheUFnYWluQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKClcbiAgICAgICAgfSlcbiAgICB9XG59XG5cbmV4cG9ydCBjb25zdCBhZGRMaXN0ZW5lcnNUb0VuZW15Qm9hcmQgPSAoXG4gICAgcGxheWVyQm9hcmQsXG4gICAgZW5lbXlCb2FyZCxcbiAgICBwbGF5ZXIsXG4gICAgZW5lbXksXG4gICAgcHNcbikgPT4ge1xuICAgIGNvbnN0IGVuZW15Qm9hcmRBcmVhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZGl2LmVuZW15LWJvYXJkJylcblxuICAgIGZvciAobGV0IGNvbHVtbiA9IDA7IGNvbHVtbiA8IDEwOyBjb2x1bW4gKz0gMSkge1xuICAgICAgICBmb3IgKGxldCByb3cgPSAwOyByb3cgPCAxMDsgcm93ICs9IDEpIHtcbiAgICAgICAgICAgIC8vIENyZWRpdGluZyBmb3JtdWxhIHRvIGNhbGN1bGF0ZSBudGgtY2hpbGQgdXNpbmcgbmVzdGVkIGxvb3A6IGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzg4NzI2NjIvbWF0aC10by1kZXRlcm1pbmUtaXRlbS1pbmRleC1iYXNlZC1vbi1jb2wtcm93LXNlbGVjdGlvbi1pbi1ncmlkXG4gICAgICAgICAgICBjb25zdCBjZWxsID0gZW5lbXlCb2FyZEFyZWEucXVlcnlTZWxlY3RvcihcbiAgICAgICAgICAgICAgICBgLmNlbGw6bnRoLWNoaWxkKCR7cm93ICogMTAgKyBjb2x1bW4gKyAxfSlgXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBjZWxsLnNldEF0dHJpYnV0ZSgnY29sdW1uJywgY29sdW1uKVxuICAgICAgICAgICAgY2VsbC5zZXRBdHRyaWJ1dGUoJ3JvdycsIHJvdylcblxuICAgICAgICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgICAgICAgICdjbGljaycsXG4gICAgICAgICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBwcy5wdWJsaXNoKCdjbGljaycsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW4sXG4gICAgICAgICAgICAgICAgICAgICAgICByb3csXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXJCb2FyZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZW15Qm9hcmQsXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmVteSxcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHsgb25jZTogdHJ1ZSB9XG4gICAgICAgICAgICApXG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBjb25zdCBhdHRhY2sgPSAoe1xuICAgIGNlbGwsXG4gICAgY29sdW1uLFxuICAgIHJvdyxcbiAgICBwbGF5ZXJCb2FyZCxcbiAgICBlbmVteUJvYXJkLFxuICAgIHBsYXllcixcbiAgICBlbmVteSxcbn0pID0+IHtcbiAgICAvLyBodW1hbiBwbGF5ZXIgYXR0YWNraW5nIGNvbXB1dGVyXG4gICAgYXR0YWNrRW5lbXlDZWxsKGNvbHVtbiwgcm93LCBlbmVteUJvYXJkLCBwbGF5ZXIpXG4gICAgLy8gY29tcHV0ZXIgYXR0YWNraW5nIGh1bWFuXG4gICAgY29uc3QgeyBlbGVtZW50Q29sdW1uLCBlbGVtZW50Um93IH0gPSBwbGF5ZXJCb2FyZC5tYWtlUmFuZG9tQ29vcmRpbmF0ZXMoKVxuICAgIGF0dGFja1BsYXllckNlbGwocGxheWVyQm9hcmQsIGVuZW15LCBlbGVtZW50Q29sdW1uLCBlbGVtZW50Um93KVxuXG4gICAgY2hlY2tJZkdhbWVPdmVyKHBsYXllckJvYXJkLCBlbmVteUJvYXJkKVxufVxuIiwiaW1wb3J0IHsgYWRkTGlzdGVuZXJzVG9FbmVteUJvYXJkLCByZW5kZXJQbGF5ZXJTaGlwcyxwdWJTdWIsIGF0dGFja30gZnJvbSAnLi9kb20nXG5cbmltcG9ydCBjcmVhdGVHYW1lQm9hcmQgZnJvbSAnLi9nYW1lYm9hcmQvZ2FtZWJvYXJkJ1xuaW1wb3J0IGNyZWF0ZVNoaXAgZnJvbSAnLi9zaGlwL3NoaXAnXG5pbXBvcnQgY3JlYXRlUGxheWVyIGZyb20gJy4vcGxheWVyL3BsYXllcidcblxuY29uc3QgcGxheWVyQm9hcmQgPSBjcmVhdGVHYW1lQm9hcmQoKVxuY29uc3QgZW5lbXlCb2FyZCA9IGNyZWF0ZUdhbWVCb2FyZCgpXG5cbmNvbnN0IHBsYXllciA9IGNyZWF0ZVBsYXllcigpXG5cbmNvbnN0IGNvbXB1dGVyID0gY3JlYXRlUGxheWVyKClcblxuXG4gICAgY29uc3Qgc2hpcHMgPSBbXG4gICAgICAgIGNyZWF0ZVNoaXAoNSwgJ0NhcnJpZXInKSxcbiAgICAgICAgY3JlYXRlU2hpcCg0LCAnQmF0dGxlc2hpcCcpLFxuICAgICAgICBjcmVhdGVTaGlwKDMsICdEZXN0cm95ZXInKSxcbiAgICAgICAgY3JlYXRlU2hpcCgzLCAnU3VibWFyaW5lJyksXG4gICAgICAgIGNyZWF0ZVNoaXAoMiwgJ1BhdHJvbCBCb2F0JyksXG4gICAgXVxucGxheWVyQm9hcmQucGxhY2VTaGlwKDAsIDAsICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCg1KSlcbnBsYXllckJvYXJkLnBsYWNlU2hpcCgzLCA0LCAnaG9yaXpvbnRhbCcsIGNyZWF0ZVNoaXAoMykpXG5wbGF5ZXJCb2FyZC5wbGFjZVNoaXAoNiwgNywgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDIpKVxucGxheWVyQm9hcmQucGxhY2VTaGlwKDksIDEsICd2ZXJ0aWNhbCcsIGNyZWF0ZVNoaXAoMykpXG5wbGF5ZXJCb2FyZC5wbGFjZVNoaXAoNSwgOSwgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDQpKVxuXG5lbmVteUJvYXJkLnBsYWNlU2hpcCgwLCAwLCAnaG9yaXpvbnRhbCcsIGNyZWF0ZVNoaXAoNSkpXG5lbmVteUJvYXJkLnBsYWNlU2hpcCgzLCA0LCAnaG9yaXpvbnRhbCcsIGNyZWF0ZVNoaXAoMykpXG5lbmVteUJvYXJkLnBsYWNlU2hpcCg2LCA3LCAnaG9yaXpvbnRhbCcsIGNyZWF0ZVNoaXAoMikpXG5lbmVteUJvYXJkLnBsYWNlU2hpcCg5LCAxLCAndmVydGljYWwnLCBjcmVhdGVTaGlwKDMpKVxuZW5lbXlCb2FyZC5wbGFjZVNoaXAoNSwgOSwgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDQpKVxuXG5jb25zdCBwcyA9IHB1YlN1YigpXG5cbmFkZExpc3RlbmVyc1RvRW5lbXlCb2FyZChwbGF5ZXJCb2FyZCwgZW5lbXlCb2FyZCwgcGxheWVyLCBjb21wdXRlciwgcHMpXG5cbnBzLnN1YnNjcmliZSgnY2xpY2snLCBhdHRhY2spXG5cblxucmVuZGVyUGxheWVyU2hpcHMocGxheWVyQm9hcmQpIl0sIm5hbWVzIjpbImNyZWF0ZVNoaXAiLCJtb2R1bGUiLCJleHBvcnRzIiwiZW1wdHlDZWxsIiwiaGFzQmVlbkhpdCIsImlzU2hpcCIsIm9mZkxpbWl0cyIsImdhbWVCb2FyZCIsIkFycmF5IiwiZmlsbCIsIm1hcCIsImNvbHVtbiIsInJvdyIsImluaXRpYWxpemVCb2FyZCIsInNoaXBzIiwiZ2V0TG9jYXRpb24iLCJzZXRMb2NhdGlvbiIsInNoaXAiLCJPYmplY3QiLCJhc3NpZ24iLCJjcmVhdGVPZmZMaW1pdExvY2F0aW9uIiwidW5kZWZpbmVkIiwibG9jYXRpb24iLCJhZGRPZmZMaW1pdEFyZWFGb3JTaGlwcyIsImNoZWNrSWZMb2NhdGlvbklzQVNoaXBPck9mZkxpbWl0cyIsImRpcmVjdGlvbiIsInNoaXBMZW5ndGgiLCJpIiwicGxhY2VTaGlwIiwiZ2V0TGVuZ3RoIiwibGVuZ3RoIiwiY2hlY2tJZlJvd0Nvb3JkaW5hdGVJc1ZhbGlkIiwicG9zaXRpb24iLCJhZGRPZmZMaW1pdEFyZWFGb3JWZXJ0aWNhbGx5UG9zaXRpb25lZFNoaXAiLCJjaGVja0lmQ29sdW1uQ29vcmRpbmF0ZUlzVmFsaWQiLCJhZGRPZmZMaW1pdEFyZWFGb3JIb3Jpem9udGFsbHlQb3NpdGlvbmVkU2hpcCIsIm1ha2VSYW5kb21Db29yZGluYXRlcyIsInJhbmRvbURpcmVjdGlvbiIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInJhbmRvbUxvY2F0aW9uIiwiZmxhdHRlbmVkR2FtZUJvYXJkIiwiZmxhdCIsImZvckVhY2giLCJlbGVtZW50IiwiYXZhaWxhYmlsaXR5IiwiYXZhaWxhYmxlU3BhY2VzIiwiZWxlbWVudENvbHVtbiIsImVsZW1lbnRSb3ciLCJjaGVja0lmT2ZmTGltaXRab25lV2FzQ29ycmVjdGx5SW1wbGVtZW50ZWQiLCJmaWx0ZXIiLCJyZWNlaXZlQXR0YWNrIiwiY2hlY2tJZkFsbFNoaXBzSGF2ZVN1bmsiLCJoYXZlQWxsU2hpcHNTdW5rIiwiaiIsImlzU3VuayIsInJhbmRvbWx5UGxhY2VTaGlwcyIsInNoaXBEZXRhaWxzIiwicmFuZG9tQ29sdW1uIiwicmFuZG9tUm93IiwicHVzaCIsIm5hbWUiLCJnZXROYW1lIiwiYXR0YWNrIiwiZ2V0U3RhdHVzIiwiaW5jbHVkZXMiLCJoaXQiLCJzdGF0dXMiLCJldmVyeSIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJuIiwiZ2V0dGVyIiwiX19lc01vZHVsZSIsImQiLCJhIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwicmVuZGVyQXR0YWNrcyIsInBsYXllciIsImVuZW15Qm9hcmQiLCJjZWxsIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY2xhc3NMaXN0IiwiYWRkIiwiaGFuZGxlQXR0YWNrIiwicmFuZG9tRGlyZWN0aW9uQXR0YWNrIiwicGxheWVyQm9hcmQiLCJzcGFjZXNIaXQiLCJuZXh0Q29sdW1uIiwicHJldmlvdXNDb2x1bW4iLCJuZXh0Um93IiwicHJldmlvdXNSb3ciLCJpc1NwYWNlQXJvdW5kSGl0IiwicmFuZG9tSW5kZXgiLCJsaXN0T2ZSYW5kb21Db29yZGluYXRlcyIsImxvY2F0aW9uUHJvdG90eXBlIiwidGhpcyIsInRvcCIsImNyZWF0ZSIsImJvdHRvbSIsInJpZ2h0IiwibGVmdCIsImRpcmVjdGlvbnMiLCJhdHRhY2tQbGF5ZXJDZWxsIiwiZW5lbXkiLCJwcmV2TG9jYXRpb24iLCJyYW5kb21Qb3NpdGlvbiIsInJhbmRvbVBvc2l0aW9uQ29sdW1uIiwiZmlsdGVyZWREaXJlY3Rpb25zIiwicmFuZG9tUG9zaXRpb25Sb3ciLCJzZXRUaW1lb3V0IiwicHJldkxvY2F0aW9uUm93IiwicHJldkxvY2F0aW9uQ29sdW1uIiwiY29tcHV0ZXIiLCJwcyIsInN1YnNjcmliZXJzIiwicHVibGlzaCIsImV2ZW50TmFtZSIsImRhdGEiLCJpc0FycmF5IiwiY2FsbGJhY2siLCJzdWJzY3JpYmUiLCJpbmRleCIsInVuc3Vic2NyaWJlIiwic3BsaWNlIiwicHViU3ViIiwiZW5lbXlCb2FyZEFyZWEiLCJzZXRBdHRyaWJ1dGUiLCJhZGRFdmVudExpc3RlbmVyIiwib25jZSIsImFkZExpc3RlbmVyc1RvRW5lbXlCb2FyZCIsImF0dGFja0VuZW15Q2VsbCIsIm1vZGFsIiwibW9kYWxXaW5uZXIiLCJwbGF5QWdhaW5CdXR0b24iLCJzdHlsZSIsImRpc3BsYXkiLCJyZWxvYWQiLCJ0ZXh0Q29udGVudCIsImNoZWNrSWZHYW1lT3ZlciIsInBsYXllckJvYXJkQXJlYSIsInJlbmRlclBsYXllclNoaXBzIl0sInNvdXJjZVJvb3QiOiIifQ==