(()=>{var e={653:(e,t,o)=>{const r=o(585);e.exports=()=>{const e={hasBeenHit:!1,isShip:!1,offLimits:!1},t=(()=>{const t=Array(10).fill().map((()=>Array(10).fill()));for(let o=0;o<10;o++)for(let r=0;r<10;r++)t[o][r]={...e,column:o,row:r};return t})(),o=[r(5,"Carrier"),r(4,"Battleship"),r(3,"Destroyer"),r(3,"Submarine"),r(2,"Patrol Boat")],n=(e,o)=>t?.[e]?.[o],l=(o,r,n=(()=>Object.assign(e,{offLimits:!0}))())=>{if(void 0===t?.[o]?.[r])return!0;const l=t[o][r];return t[o][r]={...l,...n},!0},i=(e,t)=>{l(e-1,t-1),l(e,t-1)},a=(e,o,r,a)=>{const c=a.getLength();if(n(e,o),"vertical"===r){if(((e,o)=>e>=0&&e+o-1<t.length)(o,c)){for(let t=0;t<c;t+=1)l(e,o+t,{...a,position:t}),l(e+1,o+t),l(e-1,o+t);return((e,t,o)=>{i(e,t),l(e,t+o),l(e+1,t+o),l(e-1,t+o),l(e+1,t-1)})(e,o,c),!0}}else if("horizontal"===r&&((e,o)=>e>=0&&e+o-1<t.length)(e,c)){for(let t=0;t<c;t+=1)l(e+t,o,{...a,position:t}),l(e+t,o+1),l(e+t,o-1);return((e,t,o)=>{i(e,t),l(e+o,t),l(e-1,t+1),l(e+o,t+1),l(e+o,t-1)})(e,o,c),!0}return!1},c=()=>{const e=0===Math.floor(2*Math.random())?"vertical":"horizontal",o=Math.floor(100*Math.random()),r=(()=>{const e=[...t.flat()];return e.forEach((e=>{!0===e.hasBeenHit?e.availability=!1:e.availability=!0})),e})()[o];return!1===r.availability?c():{elementColumn:r.column,elementRow:r.row,randomDirection:e}};return{checkIfOffLimitZoneWasCorrectlyImplemented:e=>t.flat().filter((e=>!0===e.offLimits)).length===e+2,getLocation:n,receiveAttack:(e,o)=>{t[e][o].hasBeenHit=!0},checkIfAllShipsHaveSunk:()=>{let e=!0;for(let t=0;t<10;t++)for(let o=0;o<10;o++){const r=n(t,o);if(!1!==r.isShip&&r.isShip&&!1===r.isSunk()){e=!1;break}}return e},placeShip:a,randomlyPlaceShips:()=>{const e=[];for(let t=0;t<o.length;t+=1){const r=o[t],{randomColumn:n,randomRow:l,randomDirection:i}=c(r.getLength());a(n,l,i,r)?e.push({randomColumn:n,randomRow:l,randomDirection:i}):t-=1}return e},makeRandomCoordinates:c}}},61:e=>{e.exports=(e="player")=>({getName:()=>e,attack:(e,t,{getLocation:o,receiveAttack:r})=>{const n=o(e,t);return!1===n.hasBeenHit||n.isShip&&!1===n.getStatus().includes("unhit")?(r(e,t),n.hit&&n.hit(n.position),"It's a hit!"):"You have already hit this spot!"}})},585:e=>{e.exports=(e,t="ship")=>{const o=Array(e).fill("unhit");return{getName:()=>t,getLength:()=>o.length,isSunk:()=>o.every((e=>"hit"===e)),hit:t=>{t<e&&(o[t]="hit")},getStatus:()=>o,hasBeenHit:!1,offLimits:!0,isShip:!0}}}},t={};function o(r){var n=t[r];if(void 0!==n)return n.exports;var l=t[r]={exports:{}};return e[r](l,l.exports,o),l.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=(e,t,o,r)=>{const n=document.querySelector(`.${e}-board > .cell[column='${t}'][row='${o}']`);r.getLocation(t,o).isShip?n.classList.add("hit"):n.classList.add("miss")},t=(e,t,o,r)=>r.attack(e,t,o),r=e=>{const t=document.querySelector(".player-board");e.forEach((e=>{e.addEventListener("dragstart",(()=>{e.classList.add("dragging")})),e.addEventListener("dragend",(()=>{e.classList.remove("dragging")}))})),t.addEventListener("dragover",(e=>{e.preventDefault();const o=(r=t,n=e.clientY,[...r.querySelectorAll(".cell:not(.dragging)")].reduce(((e,t)=>{const o=t.getBoundingClientRect(),r=n-o.top-o.height/2;return r<0&&r>e.offset?{offset:r,element:t}:e}),{offset:Number.NEGATIVE_INFINITY}).element);var r,n;const l=document.querySelector(".dragging");null===o?t.appendChild(l):t.insertBefore(l,o)}))};var n=o(653),l=o.n(n),i=o(585),a=o.n(i),c=o(61),s=o.n(c);const u=l()(),d=l()(),h=s()(),m=s()(),p=[a()(5,"Carrier"),a()(4,"Battleship"),a()(3,"Destroyer"),a()(3,"Submarine"),a()(2,"Patrol Boat")];u.placeShip(0,0,"horizontal",p[0]),u.placeShip(3,4,"horizontal",p[1]),u.placeShip(6,7,"horizontal",p[2]),u.placeShip(9,1,"vertical",p[3]),u.placeShip(5,9,"horizontal",p[4]),d.placeShip(0,0,"horizontal",a()(5)),d.placeShip(3,4,"horizontal",a()(3)),d.placeShip(6,7,"horizontal",a()(2)),d.placeShip(9,1,"vertical",a()(3)),d.placeShip(5,9,"horizontal",a()(4));const f=(()=>{const e={};return{publish:function(t,o){Array.isArray(e[t])&&e[t].forEach((e=>{e(o)}))},subscribe:function t(o,r){Array.isArray(t[o])||(e[o]=[]),e[o].push(r);const n=e[o].length-1;return{unsubscribe(){e[o].splice(n,1)}}}}})();((e,t,o,r,n)=>{const l=document.querySelector("div.enemy-board");for(let i=0;i<10;i+=1)for(let a=0;a<10;a+=1){const c=l.querySelector(`.cell:nth-child(${10*a+i+1})`);c.setAttribute("column",i),c.setAttribute("row",a),c.addEventListener("click",(()=>{n.publish("click",{cell:c,column:i,row:a,playerBoard:e,enemyBoard:t,player:o,enemy:r})}),{once:!0})}})(u,d,h,m,f),f.subscribe("click",(({cell:o,column:r,row:n,playerBoard:l,enemyBoard:i,player:a,enemy:c})=>{((o,r,n,l)=>{t(o,r,n,l),e("enemy",o,r,n)})(r,n,i,a),((o,r)=>{const{elementColumn:n,elementRow:l}=o.makeRandomCoordinates();t(n,l,o,r),e("player",n,l,o)})(l,c),((e,t)=>{if(e.checkIfAllShipsHaveSunk()){const e=document.querySelector(".modal"),t=document.querySelector(".modal-content > p"),o=document.querySelector(".modal-content > button");e.style.display="block",o.addEventListener("click",(()=>{location.reload()})),t.textContent="You win!"}if(t.checkIfAllShipsHaveSunk()){const e=document.querySelector(".modal"),t=document.querySelector(".modal-content > p"),o=document.querySelector(".modal-content > button");e.style.display="block",t.textContent="You lose!",o.addEventListener("click",(()=>{location.reload()}))}})(l,i)})),(({getLocation:e})=>{const t=document.querySelector("div.player-board");for(let o=0;o<10;o+=1)for(let r=0;r<10;r+=1){const n=t.querySelector(`.cell:nth-child(${10*r+o+1})`);n.setAttribute("column",o),n.setAttribute("row",r);const l=e(o,r);l.isShip&&(n.classList.add("ship"),n.setAttribute("ship-name",l.getName()),n.setAttribute("draggable",!0))}(()=>{const e=document.querySelectorAll('.cell[ship-name="Patrol Boat"]');r(e);const t=document.querySelectorAll('.cell[ship-name="Submarine"]');r(t);const o=document.querySelectorAll('.cell[ship-name="Carrier"]');r(o);const n=document.querySelectorAll('.cell[ship-name="Battleship"]');r(n);const l=document.querySelectorAll('.cell[ship-name="Destroyer"]');r(l)})()})(u)})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LElBQUksUUFDbkJKLEVBQUsrQyxhQUFhLFlBQWF0SCxFQUFTd0MsV0FDeEMrQixFQUFLK0MsYUFBYSxhQUFhLElBekM1QixNQUVmLE1BQU1jLEVBQVk1RCxTQUFTZ0IsaUJBQWlCLGtDQUM1Q1gsRUFBa0J1RCxHQUlsQixNQUFNQyxFQUFZN0QsU0FBU2dCLGlCQUFpQixnQ0FDNUNYLEVBQWtCd0QsR0FHbEIsTUFBTUMsRUFBVTlELFNBQVNnQixpQkFBaUIsOEJBQzFDWCxFQUFrQnlELEdBR2xCLE1BQU1DLEVBQVkvRCxTQUFTZ0IsaUJBQWlCLGlDQUM1Q1gsRUFBa0IwRCxHQUdsQixNQUFNQyxFQUFZaEUsU0FBU2dCLGlCQUFpQixnQ0FDNUNYLEVBQWtCMkQsSUF5Qk5DLElDeEhoQkMsQ0FBa0JwQyxJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvLi9zcmMvZ2FtZWJvYXJkL2dhbWVib2FyZC5qcyIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC8uL3NyYy9wbGF5ZXIvcGxheWVyLmpzIiwid2VicGFjazovL3RvcC1iYXR0bGVzaGlwLy4vc3JjL3NoaXAvc2hpcC5qcyIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC8uL3NyYy9kb20uanMiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1tdWx0aS1hc3NpZ24gKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC1leHByZXNzaW9ucyAqL1xuY29uc3QgY3JlYXRlU2hpcCA9IHJlcXVpcmUoJy4uL3NoaXAvc2hpcCcpXG5cbi8qIGVzbGludC1kaXNhYmxlIG5vLXBhcmFtLXJlYXNzaWduICovXG5jb25zdCBjcmVhdGVHYW1lQm9hcmQgPSAoKSA9PiB7XG4gICAgY29uc3QgZW1wdHlDZWxsID0geyBoYXNCZWVuSGl0OiBmYWxzZSwgaXNTaGlwOiBmYWxzZSwgb2ZmTGltaXRzOiBmYWxzZSB9XG4gICAgXG4gICAgY29uc3QgaW5pdGlhbGl6ZUJvYXJkID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBnYW1lQm9hcmQgPSBBcnJheSgxMCkuZmlsbCgpLm1hcCgoKSA9PiBBcnJheSgxMCkuZmlsbCgpKVxuICAgICAgICBmb3IobGV0IGNvbHVtbj0gMDsgY29sdW1uIDwgMTA7IGNvbHVtbisrKXtcbiAgICAgICAgICAgIGZvcihsZXQgcm93PSAwOyByb3cgPCAxMDsgcm93Kyspe1xuICAgICAgICAgICAgICAgIGdhbWVCb2FyZFtjb2x1bW5dW3Jvd10gPSB7Li4uZW1wdHlDZWxsLCBjb2x1bW4sIHJvd31cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZ2FtZUJvYXJkXG4gICAgXG4gICAgfVxuXG4gICAgY29uc3QgZ2FtZUJvYXJkID0gaW5pdGlhbGl6ZUJvYXJkKClcblxuICAgIGNvbnN0IHNoaXBzID0gW1xuICAgICAgICBjcmVhdGVTaGlwKDUsICdDYXJyaWVyJyksXG4gICAgICAgIGNyZWF0ZVNoaXAoNCwgJ0JhdHRsZXNoaXAnKSxcbiAgICAgICAgY3JlYXRlU2hpcCgzLCAnRGVzdHJveWVyJyksXG4gICAgICAgIGNyZWF0ZVNoaXAoMywgJ1N1Ym1hcmluZScpLFxuICAgICAgICBjcmVhdGVTaGlwKDIsICdQYXRyb2wgQm9hdCcpLFxuICAgIF1cblxuXG4gICAgY29uc3QgY3JlYXRlT2ZmTGltaXRMb2NhdGlvbiA9ICgpID0+XG4gICAgICAgIE9iamVjdC5hc3NpZ24oZW1wdHlDZWxsLCB7IG9mZkxpbWl0czogdHJ1ZSB9KVxuXG4gICAgY29uc3QgZ2V0TG9jYXRpb24gPSAoY29sdW1uLCByb3cpID0+IGdhbWVCb2FyZD8uW2NvbHVtbl0/Lltyb3ddXG5cbiAgICBjb25zdCBzZXRMb2NhdGlvbiA9IChjb2x1bW4sIHJvdywgc2hpcCA9IGNyZWF0ZU9mZkxpbWl0TG9jYXRpb24oKSkgPT4ge1xuICAgICAgICBpZiAoZ2FtZUJvYXJkPy5bY29sdW1uXT8uW3Jvd10gPT09IHVuZGVmaW5lZCkgcmV0dXJuIHRydWVcbiAgICAgICAgY29uc3QgbG9jYXRpb24gPSBnYW1lQm9hcmRbY29sdW1uXVtyb3ddXG5cbiAgICAgICAgZ2FtZUJvYXJkW2NvbHVtbl1bcm93XSA9IHsuLi5sb2NhdGlvbiwgLi4uc2hpcH1cbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgY29uc3QgY2hlY2tJZkFsbFNoaXBzSGF2ZVN1bmsgPSAoKSA9PiB7XG5cbiAgICAgICAgbGV0IGhhdmVBbGxTaGlwc1N1bmsgPXRydWUgIFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTA7IGkrKykge1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAxMDsgaisrKSB7XG4gICAgICAgIGNvbnN0IGxvY2F0aW9uID0gZ2V0TG9jYXRpb24oaSwgailcbiAgICAgICAgaWYobG9jYXRpb24uaXNTaGlwID09PSBmYWxzZSkgY29udGludWVcbiAgICAgICAgaWYobG9jYXRpb24uaXNTaGlwICYmIGxvY2F0aW9uLmlzU3VuaygpID09PSBmYWxzZSl7XG4gICAgICAgICAgIGhhdmVBbGxTaGlwc1N1bmsgPSBmYWxzZSBcbiAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGhhdmVBbGxTaGlwc1N1bmsgXG4gICAgfVxuXG4gICAgY29uc3QgYWRkT2ZmTGltaXRBcmVhRm9yU2hpcHMgPSAoY29sdW1uLCByb3cpID0+IHtcbiAgICAgICAgLy8gdG9wLWxlZnRcbiAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uIC0gMSwgcm93IC0gMSlcbiAgICAgICAgLy8gdG9wXG4gICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiwgcm93IC0gMSlcbiAgICB9XG5cbiAgICBjb25zdCBhZGRPZmZMaW1pdEFyZWFGb3JIb3Jpem9udGFsbHlQb3NpdGlvbmVkU2hpcCA9IChcbiAgICAgICAgY29sdW1uLFxuICAgICAgICByb3csXG4gICAgICAgIHNoaXBMZW5ndGhcbiAgICApID0+IHtcbiAgICAgICAgLy8gcG9zaXRpb25zIHJlbGF0aXZlIHRvIHRoZSBzaGlwIGl0c2VsZihpZS4gYSBob3Jpem9udGFsIHNoaXAncyBib3R0b20gaXMgdG8gdGhlIHJpZ2h0KVxuXG4gICAgICAgIGFkZE9mZkxpbWl0QXJlYUZvclNoaXBzKGNvbHVtbiwgcm93KVxuICAgICAgICAvLyBib3R0b21cbiAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uICsgc2hpcExlbmd0aCwgcm93KVxuICAgICAgICAvLyBib3R0b20tbGVmdFxuICAgICAgICBzZXRMb2NhdGlvbihjb2x1bW4gLSAxLCByb3cgKyAxKVxuICAgICAgICAvLyBib3R0b20tcmlnaHRcbiAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uICsgc2hpcExlbmd0aCwgcm93ICsgMSlcbiAgICAgICAgLy8gdG9wLXJpZ2h0XG4gICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiArIHNoaXBMZW5ndGgsIHJvdyAtIDEpXG4gICAgfVxuXG4gICAgY29uc3QgYWRkT2ZmTGltaXRBcmVhRm9yVmVydGljYWxseVBvc2l0aW9uZWRTaGlwID0gKFxuICAgICAgICBjb2x1bW4sXG4gICAgICAgIHJvdyxcbiAgICAgICAgc2hpcExlbmd0aFxuICAgICkgPT4ge1xuICAgICAgICAvLyBwb3NpdGlvbnMgcmVsYXRpdmUgdG8gaG93IHRoZSB1c2VyIHNlZXMgaXQoaWUuIGEgdmVydGljYWwgc2hpcCdzIGJvdHRvbSBpcyB0byB0aGUgYm90dG9tKVxuXG4gICAgICAgIGFkZE9mZkxpbWl0QXJlYUZvclNoaXBzKGNvbHVtbiwgcm93KVxuICAgICAgICAvLyBib3R0b21cbiAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uLCByb3cgKyBzaGlwTGVuZ3RoKVxuICAgICAgICAvLyBib3R0b20tcmlnaHRcbiAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uICsgMSwgcm93ICsgc2hpcExlbmd0aClcbiAgICAgICAgLy8gYm90dG9tLWxlZnRcbiAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uIC0gMSwgcm93ICsgc2hpcExlbmd0aClcbiAgICAgICAgLy8gdG9wLXJpZ2h0XG4gICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiArIDEsIHJvdyAtIDEpXG4gICAgfVxuXG4gICAgY29uc3QgY2hlY2tJZkNvbHVtbkNvb3JkaW5hdGVJc1ZhbGlkID0gKGNvbHVtbiwgc2hpcExlbmd0aCkgPT5cbiAgICAgICAgY29sdW1uID49IDAgJiYgY29sdW1uICsgc2hpcExlbmd0aCAtIDEgPCBnYW1lQm9hcmQubGVuZ3RoXG5cbiAgICBjb25zdCBjaGVja0lmUm93Q29vcmRpbmF0ZUlzVmFsaWQgPSAocm93LCBzaGlwTGVuZ3RoKSA9PlxuICAgICAgICByb3cgPj0gMCAmJiByb3cgKyBzaGlwTGVuZ3RoIC0gMSA8IGdhbWVCb2FyZC5sZW5ndGhcblxuXG4gICAgY29uc3QgY2hlY2tJZkxvY2F0aW9uSXNBU2hpcE9yT2ZmTGltaXRzID0gKFxuICAgICAgICBjb2x1bW4sXG4gICAgICAgIHJvdyxcbiAgICAgICAgZGlyZWN0aW9uLFxuICAgICAgICBzaGlwTGVuZ3RoXG4gICAgKSA9PiB7XG4gICAgICAgIGlmIChkaXJlY3Rpb24gPT09ICd2ZXJ0aWNhbCcpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcExlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbG9jYXRpb24gPSBnZXRMb2NhdGlvbihjb2x1bW4sIHJvdyArIGkpXG4gICAgICAgICAgICAgICAgaWYgKGxvY2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmlzU2hpcCA9PT0gdHJ1ZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ub2ZmTGltaXRzID09PSB0cnVlXG4gICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAnaG9yaXpvbnRhbCcpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcExlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbG9jYXRpb24gPSBnZXRMb2NhdGlvbihjb2x1bW4gKyBpLCByb3cpXG4gICAgICAgICAgICAgICAgaWYgKGxvY2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmlzU2hpcCA9PT0gdHJ1ZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ub2ZmTGltaXRzID09PSB0cnVlXG4gICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICBjb25zdCBwbGFjZVNoaXAgPSAoY29sdW1uLCByb3csIGRpcmVjdGlvbiwgc2hpcCkgPT4ge1xuICAgICAgICBjb25zdCBzaGlwTGVuZ3RoID0gc2hpcC5nZXRMZW5ndGgoKVxuICAgICAgICBpZiAoY2hlY2tJZkxvY2F0aW9uSXNBU2hpcE9yT2ZmTGltaXRzKGdldExvY2F0aW9uKGNvbHVtbiwgcm93LCBkaXJlY3Rpb24sIHNoaXBMZW5ndGgpKSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAndmVydGljYWwnKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2tJZlJvd0Nvb3JkaW5hdGVJc1ZhbGlkKHJvdywgc2hpcExlbmd0aCkpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXBMZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgICAgICAgICBzZXRMb2NhdGlvbihjb2x1bW4sIHJvdyArIGksIHsuLi5zaGlwLCBwb3NpdGlvbjogaX0pXG4gICAgICAgICAgICAgICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiArIDEsIHJvdyArIGkpXG4gICAgICAgICAgICAgICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiAtIDEsIHJvdyArIGkpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGFkZE9mZkxpbWl0QXJlYUZvclZlcnRpY2FsbHlQb3NpdGlvbmVkU2hpcChcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLFxuICAgICAgICAgICAgICAgICAgICByb3csXG4gICAgICAgICAgICAgICAgICAgIHNoaXBMZW5ndGhcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPT09ICdob3Jpem9udGFsJykge1xuICAgICAgICAgICAgaWYgKGNoZWNrSWZDb2x1bW5Db29yZGluYXRlSXNWYWxpZChjb2x1bW4sIHNoaXBMZW5ndGgpKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGlwTGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uICsgaSAsIHJvdywgey4uLnNoaXAsIHBvc2l0aW9uOiBpfSlcbiAgICAgICAgICAgICAgICAgICAgLy9zZXRMb2NhdGlvbihjb2x1bW4gKyBpLCByb3csIHNoaXApXG4gICAgICAgICAgICAgICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiArIGksIHJvdyArIDEpXG4gICAgICAgICAgICAgICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiArIGksIHJvdyAtIDEpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGFkZE9mZkxpbWl0QXJlYUZvckhvcml6b250YWxseVBvc2l0aW9uZWRTaGlwKFxuICAgICAgICAgICAgICAgICAgICBjb2x1bW4sXG4gICAgICAgICAgICAgICAgICAgIHJvdyxcbiAgICAgICAgICAgICAgICAgICAgc2hpcExlbmd0aFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICAgICAgY29uc3QgYXZhaWxhYmxlU3BhY2VzID0gKCkgPT57XG5cbiAgICAgICAgY29uc3QgZmxhdHRlbmVkR2FtZUJvYXJkID0gWy4uLmdhbWVCb2FyZC5mbGF0KCldXG5cbiAgICAgICAgICAgIGZsYXR0ZW5lZEdhbWVCb2FyZC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYoZWxlbWVudC5oYXNCZWVuSGl0ID09PSB0cnVlKXtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5hdmFpbGFiaWxpdHkgPSBmYWxzZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmF2YWlsYWJpbGl0eSA9dHJ1ZSAgXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgcmV0dXJuIGZsYXR0ZW5lZEdhbWVCb2FyZFxuXG4gICAgICAgIH1cbiAgICBjb25zdCBtYWtlUmFuZG9tQ29vcmRpbmF0ZXMgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHJhbmRvbURpcmVjdGlvbiA9XG4gICAgICAgICAgICBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyKSA9PT0gMCA/ICd2ZXJ0aWNhbCcgOiAnaG9yaXpvbnRhbCdcbiAgICAgICAgY29uc3QgcmFuZG9tTG9jYXRpb24gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDApXG4gICAgICAgIGNvbnN0IGZsYXR0ZW5lZEdhbWVCb2FyZCA9IGF2YWlsYWJsZVNwYWNlcygpXG5cbiAgICAgICAgY29uc3QgbG9jYXRpb24gPSBmbGF0dGVuZWRHYW1lQm9hcmRbcmFuZG9tTG9jYXRpb25dXG5cbiAgICAgICAgaWYobG9jYXRpb24uYXZhaWxhYmlsaXR5ID09PSBmYWxzZSl7XG4gICAgICAgICAgICByZXR1cm4gbWFrZVJhbmRvbUNvb3JkaW5hdGVzKClcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGVsZW1lbnRDb2x1bW4gPSBsb2NhdGlvbi5jb2x1bW5cbiAgICAgICAgY29uc3QgZWxlbWVudFJvdyA9IGxvY2F0aW9uLnJvd1xuXG5cbiAgICAgICAgcmV0dXJuIHsgZWxlbWVudENvbHVtbiwgZWxlbWVudFJvdywgcmFuZG9tRGlyZWN0aW9uIH1cbiAgICB9XG5cbiAgICBjb25zdCByYW5kb21seVBsYWNlU2hpcHMgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHNoaXBEZXRhaWxzID0gW11cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGlwcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgY29uc3Qgc2hpcCA9IHNoaXBzW2ldXG4gICAgICAgICAgICBjb25zdCB7IHJhbmRvbUNvbHVtbiwgcmFuZG9tUm93LCByYW5kb21EaXJlY3Rpb24gfSA9XG4gICAgICAgICAgICAgICAgbWFrZVJhbmRvbUNvb3JkaW5hdGVzKHNoaXAuZ2V0TGVuZ3RoKCkpXG4gICAgICAgICAgICBpZiAocGxhY2VTaGlwKHJhbmRvbUNvbHVtbiwgcmFuZG9tUm93LCByYW5kb21EaXJlY3Rpb24sIHNoaXApKSB7XG4gICAgICAgICAgICAgICAgc2hpcERldGFpbHMucHVzaCh7IHJhbmRvbUNvbHVtbiwgcmFuZG9tUm93LCByYW5kb21EaXJlY3Rpb24gfSlcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaSAtPSAxXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNoaXBEZXRhaWxzXG4gICAgfVxuXG4gICAgY29uc3QgcmVjZWl2ZUF0dGFjayA9IChjb2x1bW4sIHJvdykgPT4ge1xuICAgICAgICBnYW1lQm9hcmRbY29sdW1uXVtyb3ddLmhhc0JlZW5IaXQgPSB0cnVlXG4gICAgfVxuXG4gICAgY29uc3QgY2hlY2tJZk9mZkxpbWl0Wm9uZVdhc0NvcnJlY3RseUltcGxlbWVudGVkID0gKHNoaXBMZW5ndGgpID0+XG4gICAgICAgIGdhbWVCb2FyZC5mbGF0KCkuZmlsdGVyKChlbGVtZW50KSA9PiBlbGVtZW50Lm9mZkxpbWl0cyA9PT0gdHJ1ZSlcbiAgICAgICAgICAgIC5sZW5ndGggPT09XG4gICAgICAgIHNoaXBMZW5ndGggKyAyXG4gICAgLy8gYWRkaW5nIHNoaXBMZW5ndGggcGx1cyB0d28gYmVjYXVzZSBmb3IgZXZlcnkgaW5jcmVhc2UgaW4gdGhlIHNpemUgb2Ygc2hpcCwgdGhlIHpvbmVzIGNvdmVyZWQgaW5jcmVhc2UgYnkgMiB1bml0c1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgY2hlY2tJZk9mZkxpbWl0Wm9uZVdhc0NvcnJlY3RseUltcGxlbWVudGVkLFxuICAgICAgICBnZXRMb2NhdGlvbixcbiAgICAgICAgcmVjZWl2ZUF0dGFjayxcbiAgICAgICAgY2hlY2tJZkFsbFNoaXBzSGF2ZVN1bmssXG4gICAgICAgIHBsYWNlU2hpcCxcbiAgICAgICAgcmFuZG9tbHlQbGFjZVNoaXBzLFxuICAgICAgICBtYWtlUmFuZG9tQ29vcmRpbmF0ZXMsXG4gICAgfVxufVxubW9kdWxlLmV4cG9ydHMgPSBjcmVhdGVHYW1lQm9hcmQiLCJjb25zdCBjcmVhdGVQbGF5ZXIgPSAobmFtZSA9ICdwbGF5ZXInKSA9PiB7XG4gICAgY29uc3QgZ2V0TmFtZSA9ICgpID0+IG5hbWVcblxuICAgIGNvbnN0IGF0dGFjayA9IChjb2x1bW4sIHJvdywgeyBnZXRMb2NhdGlvbiwgcmVjZWl2ZUF0dGFjayB9KSA9PiB7XG4gICAgICAgIGNvbnN0IGxvY2F0aW9uID0gZ2V0TG9jYXRpb24oY29sdW1uLCByb3cpXG4gICAgICAgIGlmIChsb2NhdGlvbi5oYXNCZWVuSGl0ID09PSBmYWxzZSB8fCAobG9jYXRpb24uaXNTaGlwICYmIGxvY2F0aW9uLmdldFN0YXR1cygpLmluY2x1ZGVzKCd1bmhpdCcpID09PSBmYWxzZSkpIHtcbiAgICAgICAgICAgIHJlY2VpdmVBdHRhY2soY29sdW1uLCByb3cpXG4gICAgICAgICAgICBpZihsb2NhdGlvbi5oaXQpe1xuXG4gICAgICAgICAgICAgICAgbG9jYXRpb24uaGl0KGxvY2F0aW9uLnBvc2l0aW9uKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFwiSXQncyBhIGhpdCFcIlxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuICdZb3UgaGF2ZSBhbHJlYWR5IGhpdCB0aGlzIHNwb3QhJ1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIGdldE5hbWUsXG4gICAgICAgIGF0dGFjayxcbiAgICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY3JlYXRlUGxheWVyXG4iLCJjb25zdCBjcmVhdGVTaGlwID0gKGxlbmd0aCwgbmFtZSA9ICdzaGlwJykgPT4ge1xuXG4gICAgY29uc3Qgc3RhdHVzID0gQXJyYXkobGVuZ3RoKS5maWxsKCd1bmhpdCcpXG5cbiAgICBjb25zdCBnZXRMZW5ndGggPSAoKSA9PiBzdGF0dXMubGVuZ3RoXG5cbiAgICBjb25zdCBnZXRTdGF0dXMgPSAoKSA9PiBzdGF0dXNcblxuICAgIGNvbnN0IGhpdCA9IChwb3NpdGlvbikgPT4ge1xuICAgICAgICBpZiAocG9zaXRpb24gPCBsZW5ndGgpIHtcbiAgICAgICAgICAgIHN0YXR1c1twb3NpdGlvbl0gPSAnaGl0J1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgZ2V0TmFtZSA9ICgpID0+ICBuYW1lXG5cbiAgICBjb25zdCBpc1N1bmsgPSAoKSA9PiBzdGF0dXMuZXZlcnkoKHBvc2l0aW9uKSA9PiBwb3NpdGlvbiA9PT0gJ2hpdCcpXG5cbiAgICByZXR1cm4ge1xuICAgICAgICBnZXROYW1lLFxuICAgICAgICBnZXRMZW5ndGgsXG4gICAgICAgIGlzU3VuayxcbiAgICAgICAgaGl0LFxuICAgICAgICBnZXRTdGF0dXMsXG4gICAgICAgIGhhc0JlZW5IaXQ6IGZhbHNlLFxuICAgICAgICBvZmZMaW1pdHM6IHRydWUsXG4gICAgICAgIGlzU2hpcDogdHJ1ZSxcbiAgICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY3JlYXRlU2hpcFxuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSAobW9kdWxlKSA9PiB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdCgpID0+IChtb2R1bGVbJ2RlZmF1bHQnXSkgOlxuXHRcdCgpID0+IChtb2R1bGUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsImNvbnN0IHJlbmRlckF0dGFja3MgPSAocGxheWVyLCBjb2x1bW4sIHJvdywgZW5lbXlCb2FyZCkgPT4ge1xuICAgIGNvbnN0IGNlbGwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgICBgLiR7cGxheWVyfS1ib2FyZCA+IC5jZWxsW2NvbHVtbj0nJHtjb2x1bW59J11bcm93PScke3Jvd30nXWBcbiAgICApXG5cbiAgICBjb25zdCBsb2NhdGlvbiA9IGVuZW15Qm9hcmQuZ2V0TG9jYXRpb24oY29sdW1uLCByb3cpXG4gICAgaWYgKGxvY2F0aW9uLmlzU2hpcCkge1xuICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoJ2hpdCcpXG4gICAgfSBlbHNlIHtcbiAgICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKCdtaXNzJylcbiAgICB9XG59XG5cbmNvbnN0IGhhbmRsZUF0dGFjayA9IChjb2x1bW4sIHJvdywgZW5lbXlCb2FyZCwgcGxheWVyKSA9PlxuICAgIHBsYXllci5hdHRhY2soY29sdW1uLCByb3csIGVuZW15Qm9hcmQpXG5cbmNvbnN0IGF0dGFja0VuZW15Q2VsbCA9IChjb2x1bW4sIHJvdywgZW5lbXlCb2FyZCwgcGxheWVyKSA9PiB7XG4gICAgaGFuZGxlQXR0YWNrKGNvbHVtbiwgcm93LCBlbmVteUJvYXJkLCBwbGF5ZXIpXG4gICAgcmVuZGVyQXR0YWNrcygnZW5lbXknLCBjb2x1bW4sIHJvdywgZW5lbXlCb2FyZClcbn1cblxuY29uc3QgYXR0YWNrUGxheWVyQ2VsbCA9IChwbGF5ZXJCb2FyZCwgZW5lbXkpID0+IHtcbiAgICBjb25zdCB7IGVsZW1lbnRDb2x1bW4sIGVsZW1lbnRSb3cgfSA9IHBsYXllckJvYXJkLm1ha2VSYW5kb21Db29yZGluYXRlcygpXG4gICAgaGFuZGxlQXR0YWNrKGVsZW1lbnRDb2x1bW4sIGVsZW1lbnRSb3csIHBsYXllckJvYXJkLCBlbmVteSlcbiAgICByZW5kZXJBdHRhY2tzKCdwbGF5ZXInLCBlbGVtZW50Q29sdW1uLCBlbGVtZW50Um93LCBwbGF5ZXJCb2FyZClcbn1cbi8vIGh0dHBzOi8vanNtYW5pZmVzdC5jb20vdGhlLXB1Ymxpc2gtc3Vic2NyaWJlLXBhdHRlcm4taW4tamF2YXNjcmlwdC9cblxuZXhwb3J0IGNvbnN0IHB1YlN1YiA9ICgpID0+IHtcbiAgICBjb25zdCBzdWJzY3JpYmVycyA9IHt9XG5cbiAgICBmdW5jdGlvbiBwdWJsaXNoKGV2ZW50TmFtZSwgZGF0YSkge1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoc3Vic2NyaWJlcnNbZXZlbnROYW1lXSkpIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIHN1YnNjcmliZXJzW2V2ZW50TmFtZV0uZm9yRWFjaCgoY2FsbGJhY2spID0+IHtcbiAgICAgICAgICAgIGNhbGxiYWNrKGRhdGEpXG4gICAgICAgIH0pXG4gICAgfVxuICAgIGZ1bmN0aW9uIHN1YnNjcmliZShldmVudE5hbWUsIGNhbGxiYWNrKSB7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShzdWJzY3JpYmVbZXZlbnROYW1lXSkpIHtcbiAgICAgICAgICAgIHN1YnNjcmliZXJzW2V2ZW50TmFtZV0gPSBbXVxuICAgICAgICB9XG4gICAgICAgIHN1YnNjcmliZXJzW2V2ZW50TmFtZV0ucHVzaChjYWxsYmFjaylcbiAgICAgICAgY29uc3QgaW5kZXggPSBzdWJzY3JpYmVyc1tldmVudE5hbWVdLmxlbmd0aCAtIDFcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdW5zdWJzY3JpYmUoKSB7XG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlcnNbZXZlbnROYW1lXS5zcGxpY2UoaW5kZXgsIDEpXG4gICAgICAgICAgICB9LFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgcHVibGlzaCxcbiAgICAgICAgc3Vic2NyaWJlLFxuICAgIH1cbn1cblxuY29uc3QgY2VsbERyYWdMaXN0ZW5lciA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgIGNvbnNvbGUubG9nKHRoaXMpXG59XG5cbi8vY29uc3QgYWRkRHJhZ2dhYmxlUHJvcGVydGllcyA9ICgpID0+IHtcblxuICAgIC8vY29uc3QgZHJhZ2dhYmxlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jZWxsW2RyYWdnYWJsZT1cInRydWVcIl0nKVxuICAgIC8vZHJhZ2dhYmxlcy5mb3JFYWNoKGRyYWdnYWJsZSA9PiB7XG4gICAgICAgIC8vZHJhZ2dhYmxlLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdzdGFydCcsICgpID0+IHtcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2JvYiBqb25lcycpXG4gICAgICAgIC8vfSlcbiAgICAvL30pXG4vL31cblxuZnVuY3Rpb24gZ2V0RHJhZ0FmdGVyRWxlbWVudChjb250YWluZXIsIHkpe1xuICAgIGNvbnN0IGRyYWdnYWJsZUVsZW1lbnRzID0gWy4uLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuY2VsbDpub3QoLmRyYWdnaW5nKScpXVxuXG4gICAgcmV0dXJuIGRyYWdnYWJsZUVsZW1lbnRzLnJlZHVjZSgoY2xvc2VzdCwgY2hpbGQpID0+IHtcbiAgICAgICAgY29uc3QgYm94ID0gY2hpbGQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICAgICAgY29uc3Qgb2Zmc2V0ID0geSAtIGJveC50b3AgLSBib3guaGVpZ2h0IC8gMlxuICAgICAgICBpZihvZmZzZXQgPCAwICYmIG9mZnNldCA+IGNsb3Nlc3Qub2Zmc2V0KXtcbiAgICAgICAgICAgIHJldHVybiB7b2Zmc2V0LCBlbGVtZW50OmNoaWxkfVxuICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY2xvc2VzdFxuXG4gICAgfSwge29mZnNldDogTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZfSkuZWxlbWVudFxufVxuXG5jb25zdCBhZGRMaXN0ZW5lclRvQm9hdCA9IChjZWxscykgPT4ge1xuXG4gICAgLy9WaWRlbyBmb3IgZHJhZyBhbmQgZHJvcDogaHR0cHM6Ly93d3cueW91dHViZS5jb20vd2F0Y2g/dj1qZllXd1FydHp6WVxuXG4gICAgY29uc3QgY2VsbHNDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGxheWVyLWJvYXJkJylcbiAgICBjZWxscy5mb3JFYWNoKGNlbGwgPT4ge1xuICAgICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdzdGFydCcsICgpID0+IHtcbiAgICAgICAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZCgnZHJhZ2dpbmcnKVxuICAgICAgICB9KVxuXG4gICAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2VuZCcsICgpID0+IHtcbiAgICAgICAgICAgIGNlbGwuY2xhc3NMaXN0LnJlbW92ZSgnZHJhZ2dpbmcnKVxuICAgICAgICB9KVxuICAgIH0pXG5cbiAgICBjZWxsc0NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIChldmVudCkgPT4ge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgIGNvbnN0IGFmdGVyRWxlbWVudCA9IGdldERyYWdBZnRlckVsZW1lbnQoY2VsbHNDb250YWluZXIsIGV2ZW50LmNsaWVudFkpXG4gICAgICAgIGNvbnN0IGRyYWdnYWJsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kcmFnZ2luZycpXG4gICAgICAgIGlmKGFmdGVyRWxlbWVudCA9PT0gbnVsbCl7XG5cbiAgICAgICAgICAgIGNlbGxzQ29udGFpbmVyLmFwcGVuZENoaWxkKGRyYWdnYWJsZSlcbiAgICAgICAgfSBlbHNle1xuICAgICAgICAgICAgY2VsbHNDb250YWluZXIuaW5zZXJ0QmVmb3JlKGRyYWdnYWJsZSwgYWZ0ZXJFbGVtZW50KVxuICAgICAgICB9XG4gICAgfSlcbn1cblxuY29uc3QgcXVlcnlDZWxscyA9ICgpID0+IHtcblxuICAgIGNvbnN0IHBhdHJvbEJvYXQ9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jZWxsW3NoaXAtbmFtZT1cIlBhdHJvbCBCb2F0XCJdJylcbiAgICBhZGRMaXN0ZW5lclRvQm9hdChwYXRyb2xCb2F0KVxuXG4gICAgLy9jb25zdCBwYXRyb2xCb2F0Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcblxuICAgIGNvbnN0IHN1Ym1hcmluZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jZWxsW3NoaXAtbmFtZT1cIlN1Ym1hcmluZVwiXScpXG4gICAgYWRkTGlzdGVuZXJUb0JvYXQoc3VibWFyaW5lKVxuICAgIC8vY29uc3Qgc3VibWFyaW5lQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcblxuICAgIGNvbnN0IGNhcnJpZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2VsbFtzaGlwLW5hbWU9XCJDYXJyaWVyXCJdJylcbiAgICBhZGRMaXN0ZW5lclRvQm9hdChjYXJyaWVyKVxuICAgIC8vY29uc3QgY2FycmllckNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG5cbiAgICBjb25zdCBiYXR0bGVTaGlwPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2VsbFtzaGlwLW5hbWU9XCJCYXR0bGVzaGlwXCJdJylcbiAgICBhZGRMaXN0ZW5lclRvQm9hdChiYXR0bGVTaGlwKVxuICAgIC8vY29uc3QgYmF0dGxlU2hpcENvbnRhaW5lcj0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcblxuICAgIGNvbnN0IGRlc3Ryb3llciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jZWxsW3NoaXAtbmFtZT1cIkRlc3Ryb3llclwiXScpXG4gICAgYWRkTGlzdGVuZXJUb0JvYXQoZGVzdHJveWVyKVxuICAgIC8vY29uc3QgZGVzdHJveWVyQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcblxuXG59XG5cblxuZXhwb3J0IGNvbnN0IHJlbmRlclBsYXllclNoaXBzID0gKHsgZ2V0TG9jYXRpb24gfSkgPT4ge1xuICAgIGNvbnN0IHBsYXllckJvYXJkQXJlYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5wbGF5ZXItYm9hcmQnKVxuXG4gICAgZm9yIChsZXQgY29sdW1uID0gMDsgY29sdW1uIDwgMTA7IGNvbHVtbiArPSAxKSB7XG4gICAgICAgIGZvciAobGV0IHJvdyA9IDA7IHJvdyA8IDEwOyByb3cgKz0gMSkge1xuICAgICAgICAgICAgY29uc3QgY2VsbCA9IHBsYXllckJvYXJkQXJlYS5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAgICAgICAgIGAuY2VsbDpudGgtY2hpbGQoJHtyb3cgKiAxMCArIGNvbHVtbiArIDF9KWBcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIGNlbGwuc2V0QXR0cmlidXRlKCdjb2x1bW4nLCBjb2x1bW4pXG4gICAgICAgICAgICBjZWxsLnNldEF0dHJpYnV0ZSgncm93Jywgcm93KVxuICAgICAgICAgICAgY29uc3QgbG9jYXRpb24gPSBnZXRMb2NhdGlvbihjb2x1bW4sIHJvdylcbiAgICAgICAgICAgIGlmIChsb2NhdGlvbi5pc1NoaXApIHtcbiAgICAgICAgICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoJ3NoaXAnKVxuICAgICAgICAgICAgICAgIGNlbGwuc2V0QXR0cmlidXRlKCdzaGlwLW5hbWUnLCBsb2NhdGlvbi5nZXROYW1lKCkpXG4gICAgICAgICAgICAgICAgY2VsbC5zZXRBdHRyaWJ1dGUoJ2RyYWdnYWJsZScsIHRydWUpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgICAgICAgICAgICAgcXVlcnlDZWxscygpXG59XG5cbmNvbnN0IGNoZWNrSWZHYW1lT3ZlciA9IChwbGF5ZXJCb2FyZCwgZW5lbXlCb2FyZCkgPT4ge1xuICAgIGlmIChwbGF5ZXJCb2FyZC5jaGVja0lmQWxsU2hpcHNIYXZlU3VuaygpKSB7XG4gICAgICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsJylcbiAgICAgICAgY29uc3QgbW9kYWxXaW5uZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwtY29udGVudCA+IHAnKVxuICAgICAgICBjb25zdCBwbGF5QWdhaW5CdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAgICAgJy5tb2RhbC1jb250ZW50ID4gYnV0dG9uJ1xuICAgICAgICApXG5cbiAgICAgICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9ICdibG9jaydcbiAgICAgICAgcGxheUFnYWluQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKClcbiAgICAgICAgfSlcblxuICAgICAgICBtb2RhbFdpbm5lci50ZXh0Q29udGVudCA9ICdZb3Ugd2luISdcbiAgICB9XG4gICAgaWYgKGVuZW15Qm9hcmQuY2hlY2tJZkFsbFNoaXBzSGF2ZVN1bmsoKSkge1xuICAgICAgICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbCcpXG4gICAgICAgIGNvbnN0IG1vZGFsV2lubmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLWNvbnRlbnQgPiBwJylcbiAgICAgICAgY29uc3QgcGxheUFnYWluQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgICAgICcubW9kYWwtY29udGVudCA+IGJ1dHRvbidcbiAgICAgICAgKVxuXG4gICAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snXG4gICAgICAgIG1vZGFsV2lubmVyLnRleHRDb250ZW50ID0gJ1lvdSBsb3NlISdcbiAgICAgICAgcGxheUFnYWluQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKClcbiAgICAgICAgfSlcbiAgICB9XG59XG5cbmV4cG9ydCBjb25zdCBhZGRMaXN0ZW5lcnNUb0VuZW15Qm9hcmQgPSAoXG4gICAgcGxheWVyQm9hcmQsXG4gICAgZW5lbXlCb2FyZCxcbiAgICBwbGF5ZXIsXG4gICAgZW5lbXksXG4gICAgcHNcbikgPT4ge1xuICAgIGNvbnN0IGVuZW15Qm9hcmRBcmVhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZGl2LmVuZW15LWJvYXJkJylcblxuICAgIGZvciAobGV0IGNvbHVtbiA9IDA7IGNvbHVtbiA8IDEwOyBjb2x1bW4gKz0gMSkge1xuICAgICAgICBmb3IgKGxldCByb3cgPSAwOyByb3cgPCAxMDsgcm93ICs9IDEpIHtcbiAgICAgICAgICAgIC8vIENyZWRpdGluZyBmb3JtdWxhIHRvIGNhbGN1bGF0ZSBudGgtY2hpbGQgdXNpbmcgbmVzdGVkIGxvb3A6IGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzg4NzI2NjIvbWF0aC10by1kZXRlcm1pbmUtaXRlbS1pbmRleC1iYXNlZC1vbi1jb2wtcm93LXNlbGVjdGlvbi1pbi1ncmlkXG4gICAgICAgICAgICBjb25zdCBjZWxsID0gZW5lbXlCb2FyZEFyZWEucXVlcnlTZWxlY3RvcihcbiAgICAgICAgICAgICAgICBgLmNlbGw6bnRoLWNoaWxkKCR7cm93ICogMTAgKyBjb2x1bW4gKyAxfSlgXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBjZWxsLnNldEF0dHJpYnV0ZSgnY29sdW1uJywgY29sdW1uKVxuICAgICAgICAgICAgY2VsbC5zZXRBdHRyaWJ1dGUoJ3JvdycsIHJvdylcblxuICAgICAgICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgICAgICAgICdjbGljaycsXG4gICAgICAgICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBwcy5wdWJsaXNoKCdjbGljaycsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW4sXG4gICAgICAgICAgICAgICAgICAgICAgICByb3csXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXJCb2FyZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZW15Qm9hcmQsXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmVteSxcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHsgb25jZTogdHJ1ZSB9XG4gICAgICAgICAgICApXG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBjb25zdCBhdHRhY2sgPSAoe1xuICAgIGNlbGwsXG4gICAgY29sdW1uLFxuICAgIHJvdyxcbiAgICBwbGF5ZXJCb2FyZCxcbiAgICBlbmVteUJvYXJkLFxuICAgIHBsYXllcixcbiAgICBlbmVteSxcbn0pID0+IHtcbiAgICAvLyBodW1hbiBwbGF5ZXIgYXR0YWNraW5nIGNvbXB1dGVyXG4gICAgYXR0YWNrRW5lbXlDZWxsKGNvbHVtbiwgcm93LCBlbmVteUJvYXJkLCBwbGF5ZXIpXG4gICAgLy8gY29tcHV0ZXIgYXR0YWNraW5nIGh1bWFuXG4gICAgYXR0YWNrUGxheWVyQ2VsbChwbGF5ZXJCb2FyZCwgZW5lbXkpXG5cbiAgICBjaGVja0lmR2FtZU92ZXIocGxheWVyQm9hcmQsIGVuZW15Qm9hcmQpXG59XG4iLCJpbXBvcnQgeyBhZGRMaXN0ZW5lcnNUb0VuZW15Qm9hcmQsIHJlbmRlclBsYXllclNoaXBzLHB1YlN1YiwgYXR0YWNrfSBmcm9tICcuL2RvbSdcblxuaW1wb3J0IGNyZWF0ZUdhbWVCb2FyZCBmcm9tICcuL2dhbWVib2FyZC9nYW1lYm9hcmQnXG5pbXBvcnQgY3JlYXRlU2hpcCBmcm9tICcuL3NoaXAvc2hpcCdcbmltcG9ydCBjcmVhdGVQbGF5ZXIgZnJvbSAnLi9wbGF5ZXIvcGxheWVyJ1xuXG5jb25zdCBwbGF5ZXJCb2FyZCA9IGNyZWF0ZUdhbWVCb2FyZCgpXG5jb25zdCBlbmVteUJvYXJkID0gY3JlYXRlR2FtZUJvYXJkKClcblxuY29uc3QgcGxheWVyID0gY3JlYXRlUGxheWVyKClcblxuY29uc3QgY29tcHV0ZXIgPSBjcmVhdGVQbGF5ZXIoKVxuXG5cbiAgICBjb25zdCBzaGlwcyA9IFtcbiAgICAgICAgY3JlYXRlU2hpcCg1LCAnQ2FycmllcicpLFxuICAgICAgICBjcmVhdGVTaGlwKDQsICdCYXR0bGVzaGlwJyksXG4gICAgICAgIGNyZWF0ZVNoaXAoMywgJ0Rlc3Ryb3llcicpLFxuICAgICAgICBjcmVhdGVTaGlwKDMsICdTdWJtYXJpbmUnKSxcbiAgICAgICAgY3JlYXRlU2hpcCgyLCAnUGF0cm9sIEJvYXQnKSxcbiAgICBdXG5wbGF5ZXJCb2FyZC5wbGFjZVNoaXAoMCwgMCwgJ2hvcml6b250YWwnLCBzaGlwc1swXSlcbnBsYXllckJvYXJkLnBsYWNlU2hpcCgzLCA0LCAnaG9yaXpvbnRhbCcsIHNoaXBzWzFdKVxucGxheWVyQm9hcmQucGxhY2VTaGlwKDYsIDcsICdob3Jpem9udGFsJywgc2hpcHNbMl0pXG5wbGF5ZXJCb2FyZC5wbGFjZVNoaXAoOSwgMSwgJ3ZlcnRpY2FsJywgc2hpcHNbM10pXG5wbGF5ZXJCb2FyZC5wbGFjZVNoaXAoNSwgOSwgJ2hvcml6b250YWwnLCBzaGlwc1s0XSlcblxuZW5lbXlCb2FyZC5wbGFjZVNoaXAoMCwgMCwgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDUpKVxuZW5lbXlCb2FyZC5wbGFjZVNoaXAoMywgNCwgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDMpKVxuZW5lbXlCb2FyZC5wbGFjZVNoaXAoNiwgNywgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDIpKVxuZW5lbXlCb2FyZC5wbGFjZVNoaXAoOSwgMSwgJ3ZlcnRpY2FsJywgY3JlYXRlU2hpcCgzKSlcbmVuZW15Qm9hcmQucGxhY2VTaGlwKDUsIDksICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCg0KSlcblxuY29uc3QgcHMgPSBwdWJTdWIoKVxuXG5hZGRMaXN0ZW5lcnNUb0VuZW15Qm9hcmQocGxheWVyQm9hcmQsIGVuZW15Qm9hcmQsIHBsYXllciwgY29tcHV0ZXIsIHBzKVxuXG5wcy5zdWJzY3JpYmUoJ2NsaWNrJywgYXR0YWNrKVxuXG5cbnJlbmRlclBsYXllclNoaXBzKHBsYXllckJvYXJkKSJdLCJuYW1lcyI6WyJjcmVhdGVTaGlwIiwibW9kdWxlIiwiZXhwb3J0cyIsImVtcHR5Q2VsbCIsImhhc0JlZW5IaXQiLCJpc1NoaXAiLCJvZmZMaW1pdHMiLCJnYW1lQm9hcmQiLCJBcnJheSIsImZpbGwiLCJtYXAiLCJjb2x1bW4iLCJyb3ciLCJpbml0aWFsaXplQm9hcmQiLCJzaGlwcyIsImdldExvY2F0aW9uIiwic2V0TG9jYXRpb24iLCJzaGlwIiwiT2JqZWN0IiwiYXNzaWduIiwiY3JlYXRlT2ZmTGltaXRMb2NhdGlvbiIsInVuZGVmaW5lZCIsImxvY2F0aW9uIiwiYWRkT2ZmTGltaXRBcmVhRm9yU2hpcHMiLCJwbGFjZVNoaXAiLCJkaXJlY3Rpb24iLCJzaGlwTGVuZ3RoIiwiZ2V0TGVuZ3RoIiwibGVuZ3RoIiwiY2hlY2tJZlJvd0Nvb3JkaW5hdGVJc1ZhbGlkIiwiaSIsInBvc2l0aW9uIiwiYWRkT2ZmTGltaXRBcmVhRm9yVmVydGljYWxseVBvc2l0aW9uZWRTaGlwIiwiY2hlY2tJZkNvbHVtbkNvb3JkaW5hdGVJc1ZhbGlkIiwiYWRkT2ZmTGltaXRBcmVhRm9ySG9yaXpvbnRhbGx5UG9zaXRpb25lZFNoaXAiLCJtYWtlUmFuZG9tQ29vcmRpbmF0ZXMiLCJyYW5kb21EaXJlY3Rpb24iLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJyYW5kb21Mb2NhdGlvbiIsImZsYXR0ZW5lZEdhbWVCb2FyZCIsImZsYXQiLCJmb3JFYWNoIiwiZWxlbWVudCIsImF2YWlsYWJpbGl0eSIsImF2YWlsYWJsZVNwYWNlcyIsImVsZW1lbnRDb2x1bW4iLCJlbGVtZW50Um93IiwiY2hlY2tJZk9mZkxpbWl0Wm9uZVdhc0NvcnJlY3RseUltcGxlbWVudGVkIiwiZmlsdGVyIiwicmVjZWl2ZUF0dGFjayIsImNoZWNrSWZBbGxTaGlwc0hhdmVTdW5rIiwiaGF2ZUFsbFNoaXBzU3VuayIsImoiLCJpc1N1bmsiLCJyYW5kb21seVBsYWNlU2hpcHMiLCJzaGlwRGV0YWlscyIsInJhbmRvbUNvbHVtbiIsInJhbmRvbVJvdyIsInB1c2giLCJuYW1lIiwiZ2V0TmFtZSIsImF0dGFjayIsImdldFN0YXR1cyIsImluY2x1ZGVzIiwiaGl0Iiwic3RhdHVzIiwiZXZlcnkiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwibiIsImdldHRlciIsIl9fZXNNb2R1bGUiLCJkIiwiYSIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsInJlbmRlckF0dGFja3MiLCJwbGF5ZXIiLCJlbmVteUJvYXJkIiwiY2VsbCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNsYXNzTGlzdCIsImFkZCIsImhhbmRsZUF0dGFjayIsImFkZExpc3RlbmVyVG9Cb2F0IiwiY2VsbHMiLCJjZWxsc0NvbnRhaW5lciIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmUiLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwiYWZ0ZXJFbGVtZW50IiwiY29udGFpbmVyIiwieSIsImNsaWVudFkiLCJxdWVyeVNlbGVjdG9yQWxsIiwicmVkdWNlIiwiY2xvc2VzdCIsImNoaWxkIiwiYm94IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0Iiwib2Zmc2V0IiwidG9wIiwiaGVpZ2h0IiwiTnVtYmVyIiwiTkVHQVRJVkVfSU5GSU5JVFkiLCJkcmFnZ2FibGUiLCJhcHBlbmRDaGlsZCIsImluc2VydEJlZm9yZSIsInBsYXllckJvYXJkIiwiY29tcHV0ZXIiLCJwcyIsInN1YnNjcmliZXJzIiwicHVibGlzaCIsImV2ZW50TmFtZSIsImRhdGEiLCJpc0FycmF5IiwiY2FsbGJhY2siLCJzdWJzY3JpYmUiLCJpbmRleCIsInVuc3Vic2NyaWJlIiwic3BsaWNlIiwicHViU3ViIiwiZW5lbXkiLCJlbmVteUJvYXJkQXJlYSIsInNldEF0dHJpYnV0ZSIsIm9uY2UiLCJhZGRMaXN0ZW5lcnNUb0VuZW15Qm9hcmQiLCJhdHRhY2tFbmVteUNlbGwiLCJhdHRhY2tQbGF5ZXJDZWxsIiwibW9kYWwiLCJtb2RhbFdpbm5lciIsInBsYXlBZ2FpbkJ1dHRvbiIsInN0eWxlIiwiZGlzcGxheSIsInJlbG9hZCIsInRleHRDb250ZW50IiwiY2hlY2tJZkdhbWVPdmVyIiwicGxheWVyQm9hcmRBcmVhIiwicGF0cm9sQm9hdCIsInN1Ym1hcmluZSIsImNhcnJpZXIiLCJiYXR0bGVTaGlwIiwiZGVzdHJveWVyIiwicXVlcnlDZWxscyIsInJlbmRlclBsYXllclNoaXBzIl0sInNvdXJjZVJvb3QiOiIifQ==