(()=>{var t={653:(t,e,r)=>{const o=r(585),n=()=>{const t={hasBeenHit:!1,isShip:!1,offLimits:!1},e=Array(10).fill(structuredClone(t)).map((()=>Array(10).fill(structuredClone(t)))),r=[o(5,"Carrier"),o(4,"Battleship"),o(3,"Destroyer"),o(3,"Submarine"),o(2,"Patrol Boat")],n=(t,r)=>e?.[t]?.[r],i=(r,o,n=(()=>Object.assign(t,{offLimits:!0}))())=>{e[r][o]=n},a=(t,e,r,o)=>{const a=o.getLength();if("vertical"===r){if(e+a<=10){for(let r=0;r<a;r+=1)i(t,e+r,o);return((t,e,r)=>{const o=[t,e+r],a=n(o[0],o[1]);a&&i(o[0],o[1],a)})(t,e,a),!0}}else if("horizontal"===r&&t+a<=10){for(let r=0;r<a;r+=1)i(t+r,e,o);return((t,e,r)=>{const o=[t+r,e],a=n(o[0],o[1]);a&&i(o[0],o[1],a),((t,e,r)=>{const o=[t,e-1],a=n(o[0],o[1]),s=[t-1,e],l=n(s[0],s[1]),c=[t+1,e-1],h=n(c[0],c[1]),d=[t-1,e-1],p=n(d[0],d[1]),u=[t+1,e+r],f=n(u[0],u[1]),m=[t-1,e+r],v=n(m[0],m[1]);a&&i(o[0],o[1],a),l&&i(s[0],s[1],l),h&&i(c[0],c[1],h),p&&i(d[0],d[1],p),f&&i(u[0],u[1],f),v&&i(m[0],m[1],v)})(t,e,r)})(t,e,a),!0}return!1},s=()=>{const t=0===Math.floor(2*Math.random())?"vertical":"horizontal";return{randomColumn:Math.floor(10*Math.random()),randomRow:Math.floor(10*Math.random()),randomDirection:t}};return{getLocation:n,receiveAttack:(t,r)=>{e[t][r].hasBeenHit=!0},checkIfAllShipsHaveSunk:()=>e.flat().every((t=>!1===t.isShip||!0===t.isShip&&!0===t.hasBeenHit&&t.getStatus().every((t=>"hit"===t)))),placeShip:a,randomlyPlaceShips:()=>{const t=[];for(let e=0;e<r.length;e+=1){const{randomColumn:o,randomRow:i,randomDirection:l}=s(),c=r[e],h=n(o,i);!0===h.isShip||!0===h.offLimits||!1===a(o,i,l,c)?e-=1:t.push({randomColumn:o,randomRow:i,randomDirection:l})}return t}}};n().placeShip(0,0,"vertical",o(3,"bobs ship")),t.exports=n},585:t=>{t.exports=(t,e="ship")=>{const r=Array(t).fill("unhit");return{name:e,getLength:()=>r.length,isSunk:()=>r.every((t=>"hit"===t)),hit:e=>{e<t&&(r[e]="hit")},getStatus:()=>r,isShip:!0}}}},e={};function r(o){var n=e[o];if(void 0!==n)return n.exports;var i=e[o]={exports:{}};return t[o](i,i.exports,r),i.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var o in e)r.o(e,o)&&!r.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";var t=r(653);const e=r.n(t)()();e.randomlyPlaceShips(),(({getLocation:t})=>{const e=document.querySelector("div.player-board");for(let r=0;r<10;r+=1)for(let o=0;o<10;o+=1){const n=document.createElement("div");n.classList.add("cell"),t(o,r).isShip&&n.classList.add("ship"),e.appendChild(n)}})(e)})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQUcsQ0FDNUIsTUFBTXpDLEVBQU91QyxTQUFTRyxjQUFjLE9BQ3BDMUMsRUFBSzJDLFVBQVVDLElBQUksUUFDZnZGLEVBQVlvRixFQUFHeEUsR0FBR3BCLFFBQ2xCbUQsRUFBSzJDLFVBQVVDLElBQUksUUFFdkJOLEVBQWdCTyxZQUFZN0MsS0RKeEMsQ0FBa0JxQyxJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvLi9zcmMvZ2FtZWJvYXJkL2dhbWVib2FyZC5qcyIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC8uL3NyYy9zaGlwL3NoaXAuanMiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3RvcC1iYXR0bGVzaGlwL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvLi9zcmMvZG9tLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC1leHByZXNzaW9ucyAqL1xuY29uc3QgY3JlYXRlU2hpcCA9IHJlcXVpcmUoJy4uL3NoaXAvc2hpcCcpXG5cbi8qIGVzbGludC1kaXNhYmxlIG5vLXBhcmFtLXJlYXNzaWduICovXG5jb25zdCBjcmVhdGVHYW1lQm9hcmQgPSAoKSA9PiB7XG4gICAgY29uc3QgZW1wdHlDZWxsID0geyBoYXNCZWVuSGl0OiBmYWxzZSwgaXNTaGlwOiBmYWxzZSwgb2ZmTGltaXRzOiBmYWxzZSB9XG4gICAgY29uc3QgZ2FtZUJvYXJkID0gQXJyYXkoMTApXG4gICAgICAgIC5maWxsKHN0cnVjdHVyZWRDbG9uZShlbXB0eUNlbGwpKVxuICAgICAgICAubWFwKCgpID0+IEFycmF5KDEwKS5maWxsKHN0cnVjdHVyZWRDbG9uZShlbXB0eUNlbGwpKSlcblxuICAgIGNvbnN0IHNoaXBzID0gW1xuICAgICAgICBjcmVhdGVTaGlwKDUsICdDYXJyaWVyJyksXG4gICAgICAgIGNyZWF0ZVNoaXAoNCwgJ0JhdHRsZXNoaXAnKSxcbiAgICAgICAgY3JlYXRlU2hpcCgzLCAnRGVzdHJveWVyJyksXG4gICAgICAgIGNyZWF0ZVNoaXAoMywgJ1N1Ym1hcmluZScpLFxuICAgICAgICBjcmVhdGVTaGlwKDIsICdQYXRyb2wgQm9hdCcpLFxuICAgIF1cblxuICAgIGNvbnN0IGNoZWNrSWZBbGxTaGlwc0hhdmVTdW5rID0gKCkgPT5cbiAgICAgICAgZ2FtZUJvYXJkLmZsYXQoKS5ldmVyeShcbiAgICAgICAgICAgIChjZWxsKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGNlbGwuaXNTaGlwID09PSBmYWxzZSkgcmV0dXJuIHRydWVcbiAgICAgICAgICAgICAgICBpZiAoY2VsbC5pc1NoaXAgPT09IHRydWUgJiYgY2VsbC5oYXNCZWVuSGl0ID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjZWxsLmdldFN0YXR1cygpLmV2ZXJ5KCh1bml0KSA9PiB1bml0ID09PSAnaGl0JylcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIChwb3NpdGlvbi5pc1NoaXAgPT09IGZhbHNlKSB8fFxuICAgICAgICAgICAgLy8gKHBvc2l0aW9uLmlzU2hpcCA9PT0gdHJ1ZSAmJiBwb3NpdGlvbi5oYXNCZWVuSGl0ID09PSB0cnVlKVxuICAgICAgICApXG5cbiAgICBjb25zdCBjcmVhdGVPZmZMaW1pdExvY2F0aW9uID0gKCkgPT5cbiAgICAgICAgT2JqZWN0LmFzc2lnbihlbXB0eUNlbGwsIHsgb2ZmTGltaXRzOiB0cnVlIH0pXG5cbiAgICBjb25zdCBnZXRMb2NhdGlvbiA9IChjb2x1bW4sIHJvdykgPT4gZ2FtZUJvYXJkPy5bY29sdW1uXT8uW3Jvd11cblxuICAgIGNvbnN0IHNldExvY2F0aW9uID0gKGNvbHVtbiwgcm93LCBzaGlwID0gY3JlYXRlT2ZmTGltaXRMb2NhdGlvbigpKSA9PiB7XG4gICAgICAgIGdhbWVCb2FyZFtjb2x1bW5dW3Jvd10gPSBzaGlwXG4gICAgfVxuXG4gICAgY29uc3QgYWRkT2ZmTGltaXRBcmVhRm9yU2hpcHMgPSAoY29sdW1uLCByb3csIHNoaXBMZW5ndGgpID0+IHtcbiAgICAgICAgY29uc3QgdG9wID0gW2NvbHVtbiwgcm93IC0gMV1cbiAgICAgICAgY29uc3QgdG9wRWxlbWVudCA9IGdldExvY2F0aW9uKHRvcFswXSwgdG9wWzFdKVxuICAgICAgICBjb25zdCBsZWZ0ID0gW2NvbHVtbiAtIDEsIHJvd11cbiAgICAgICAgY29uc3QgbGVmdEVsZW1lbnQgPSBnZXRMb2NhdGlvbihsZWZ0WzBdLCBsZWZ0WzFdKVxuICAgICAgICBjb25zdCB0b3BSaWdodCA9IFtjb2x1bW4gKyAxLCByb3cgLSAxXVxuICAgICAgICBjb25zdCB0b3BSaWdodEVsZW1lbnQgPSBnZXRMb2NhdGlvbih0b3BSaWdodFswXSwgdG9wUmlnaHRbMV0pXG4gICAgICAgIGNvbnN0IHRvcExlZnQgPSBbY29sdW1uIC0gMSwgcm93IC0gMV1cbiAgICAgICAgY29uc3QgdG9wTGVmdEVsZW1lbnQgPSBnZXRMb2NhdGlvbih0b3BMZWZ0WzBdLCB0b3BMZWZ0WzFdKVxuICAgICAgICBjb25zdCBib3R0b21SaWdodCA9IFtjb2x1bW4gKyAxLCByb3cgKyBzaGlwTGVuZ3RoXVxuICAgICAgICBjb25zdCBib3R0b21SaWdodEVsZW1lbnQgPSBnZXRMb2NhdGlvbihib3R0b21SaWdodFswXSwgYm90dG9tUmlnaHRbMV0pXG4gICAgICAgIGNvbnN0IGxlZnRSaWdodCA9IFtjb2x1bW4gLSAxLCByb3cgKyBzaGlwTGVuZ3RoXVxuICAgICAgICBjb25zdCBsZWZ0UmlnaHRFbGVtZW50ID0gZ2V0TG9jYXRpb24obGVmdFJpZ2h0WzBdLCBsZWZ0UmlnaHRbMV0pXG5cbiAgICAgICAgaWYgKHRvcEVsZW1lbnQpIHtcbiAgICAgICAgICAgIHNldExvY2F0aW9uKHRvcFswXSwgdG9wWzFdLCB0b3BFbGVtZW50KVxuICAgICAgICB9XG4gICAgICAgIGlmIChsZWZ0RWxlbWVudCkge1xuICAgICAgICAgICAgc2V0TG9jYXRpb24obGVmdFswXSwgbGVmdFsxXSwgbGVmdEVsZW1lbnQpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRvcFJpZ2h0RWxlbWVudCkge1xuICAgICAgICAgICAgc2V0TG9jYXRpb24odG9wUmlnaHRbMF0sIHRvcFJpZ2h0WzFdLCB0b3BSaWdodEVsZW1lbnQpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRvcExlZnRFbGVtZW50KSB7XG4gICAgICAgICAgICBzZXRMb2NhdGlvbih0b3BMZWZ0WzBdLCB0b3BMZWZ0WzFdLCB0b3BMZWZ0RWxlbWVudClcbiAgICAgICAgfVxuICAgICAgICBpZiAoYm90dG9tUmlnaHRFbGVtZW50KSB7XG4gICAgICAgICAgICBzZXRMb2NhdGlvbihib3R0b21SaWdodFswXSwgYm90dG9tUmlnaHRbMV0sIGJvdHRvbVJpZ2h0RWxlbWVudClcbiAgICAgICAgfVxuICAgICAgICBpZiAobGVmdFJpZ2h0RWxlbWVudCkge1xuICAgICAgICAgICAgc2V0TG9jYXRpb24obGVmdFJpZ2h0WzBdLCBsZWZ0UmlnaHRbMV0sIGxlZnRSaWdodEVsZW1lbnQpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBhZGRPZmZMaW1pdEFyZWFGb3JIb3Jpem9udGFsbHlQb3NpdGlvbmVkU2hpcCA9IChcbiAgICAgICAgY29sdW1uLFxuICAgICAgICByb3csXG4gICAgICAgIHNoaXBMZW5ndGhcbiAgICApID0+IHtcbiAgICAgICAgY29uc3QgcmlnaHQgPSBbY29sdW1uICsgc2hpcExlbmd0aCwgcm93XVxuICAgICAgICBjb25zdCByaWdodEVsZW1lbnQgPSBnZXRMb2NhdGlvbihyaWdodFswXSwgcmlnaHRbMV0pXG5cbiAgICAgICAgaWYgKHJpZ2h0RWxlbWVudCkge1xuICAgICAgICAgICAgc2V0TG9jYXRpb24ocmlnaHRbMF0sIHJpZ2h0WzFdLCByaWdodEVsZW1lbnQpXG4gICAgICAgIH1cbiAgICAgICAgYWRkT2ZmTGltaXRBcmVhRm9yU2hpcHMoY29sdW1uLCByb3csIHNoaXBMZW5ndGgpXG4gICAgfVxuXG4gICAgY29uc3QgYWRkT2ZmTGltaXRBcmVhRm9yVmVydGljYWxseVBvc2l0aW9uZWRTaGlwID0gKFxuICAgICAgICBjb2x1bW4sXG4gICAgICAgIHJvdyxcbiAgICAgICAgc2hpcExlbmd0aFxuICAgICkgPT4ge1xuICAgICAgICBjb25zdCBib3R0b20gPSBbY29sdW1uICwgcm93ICsgc2hpcExlbmd0aF1cbiAgICAgICAgY29uc3QgYm90dG9tRWxlbWVudCA9IGdldExvY2F0aW9uKGJvdHRvbVswXSwgYm90dG9tWzFdKVxuXG4gICAgICAgIGlmKGJvdHRvbUVsZW1lbnQpe1xuICAgICAgICAgICAgc2V0TG9jYXRpb24oYm90dG9tWzBdLCBib3R0b21bMV0sIGJvdHRvbUVsZW1lbnQpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBwbGFjZVNoaXAgPSAoY29sdW1uLCByb3csIGRpcmVjdGlvbiwgc2hpcCkgPT4ge1xuICAgICAgICBjb25zdCBzaGlwTGVuZ3RoID0gc2hpcC5nZXRMZW5ndGgoKVxuICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAndmVydGljYWwnKSB7XG4gICAgICAgICAgICBpZiAocm93ICsgc2hpcExlbmd0aCA8PSAxMCkge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcExlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiwgcm93ICsgaSwgc2hpcClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYWRkT2ZmTGltaXRBcmVhRm9yVmVydGljYWxseVBvc2l0aW9uZWRTaGlwKFxuICAgICAgICAgICAgICAgICAgICBjb2x1bW4sXG4gICAgICAgICAgICAgICAgICAgIHJvdyxcbiAgICAgICAgICAgICAgICAgICAgc2hpcExlbmd0aFxuICAgICAgICAgICAgICAgIClcblxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09PSAnaG9yaXpvbnRhbCcpIHtcbiAgICAgICAgICAgIGlmIChjb2x1bW4gKyBzaGlwTGVuZ3RoIDw9IDEwKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGlwTGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uICsgaSwgcm93LCBzaGlwKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhZGRPZmZMaW1pdEFyZWFGb3JIb3Jpem9udGFsbHlQb3NpdGlvbmVkU2hpcChcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLFxuICAgICAgICAgICAgICAgICAgICByb3csXG4gICAgICAgICAgICAgICAgICAgIHNoaXBMZW5ndGhcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICBjb25zdCBtYWtlUmFuZG9tQ29vcmRpbmF0ZXMgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHJhbmRvbURpcmVjdGlvbiA9XG4gICAgICAgICAgICBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyKSA9PT0gMCA/ICd2ZXJ0aWNhbCcgOiAnaG9yaXpvbnRhbCdcbiAgICAgICAgY29uc3QgcmFuZG9tQ29sdW1uID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApXG4gICAgICAgIGNvbnN0IHJhbmRvbVJvdyA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKVxuICAgICAgICByZXR1cm4geyByYW5kb21Db2x1bW4sIHJhbmRvbVJvdywgcmFuZG9tRGlyZWN0aW9uIH1cbiAgICB9XG5cbiAgICBjb25zdCByYW5kb21seVBsYWNlU2hpcHMgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHNoaXBEZXRhaWxzID0gW11cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGlwcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgY29uc3QgeyByYW5kb21Db2x1bW4sIHJhbmRvbVJvdywgcmFuZG9tRGlyZWN0aW9uIH0gPVxuICAgICAgICAgICAgICAgIG1ha2VSYW5kb21Db29yZGluYXRlcygpXG4gICAgICAgICAgICBjb25zdCBzaGlwID0gc2hpcHNbaV1cbiAgICAgICAgICAgIGNvbnN0IGxvY2F0aW9uID0gZ2V0TG9jYXRpb24ocmFuZG9tQ29sdW1uLCByYW5kb21Sb3cpXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgbG9jYXRpb24uaXNTaGlwID09PSB0cnVlIHx8XG4gICAgICAgICAgICAgICAgbG9jYXRpb24ub2ZmTGltaXRzID09PSB0cnVlIHx8XG4gICAgICAgICAgICAgICAgcGxhY2VTaGlwKHJhbmRvbUNvbHVtbiwgcmFuZG9tUm93LCByYW5kb21EaXJlY3Rpb24sIHNoaXApID09PVxuICAgICAgICAgICAgICAgICAgICBmYWxzZVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgaSAtPSAxXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNoaXBEZXRhaWxzLnB1c2goeyByYW5kb21Db2x1bW4sIHJhbmRvbVJvdywgcmFuZG9tRGlyZWN0aW9uIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNoaXBEZXRhaWxzXG4gICAgfVxuXG4gICAgY29uc3QgcmVjZWl2ZUF0dGFjayA9IChjb2x1bW4sIHJvdykgPT4ge1xuICAgICAgICBnYW1lQm9hcmRbY29sdW1uXVtyb3ddLmhhc0JlZW5IaXQgPSB0cnVlXG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgZ2V0TG9jYXRpb24sXG4gICAgICAgIHJlY2VpdmVBdHRhY2ssXG4gICAgICAgIGNoZWNrSWZBbGxTaGlwc0hhdmVTdW5rLFxuICAgICAgICBwbGFjZVNoaXAsXG4gICAgICAgIHJhbmRvbWx5UGxhY2VTaGlwcyxcbiAgICB9XG59XG5cbmNvbnN0IGJvYiA9IGNyZWF0ZUdhbWVCb2FyZCgpXG5ib2IucGxhY2VTaGlwKDAsIDAsICd2ZXJ0aWNhbCcsIGNyZWF0ZVNoaXAoMywgJ2JvYnMgc2hpcCcpKVxuXG5tb2R1bGUuZXhwb3J0cyA9IGNyZWF0ZUdhbWVCb2FyZFxuIiwiY29uc3QgY3JlYXRlU2hpcCA9IChsZW5ndGgsIG5hbWUgPSAnc2hpcCcpID0+IHtcblxuICAgIGNvbnN0IHN0YXR1cyA9IEFycmF5KGxlbmd0aCkuZmlsbCgndW5oaXQnKVxuXG4gICAgY29uc3QgZ2V0TGVuZ3RoID0gKCkgPT4gc3RhdHVzLmxlbmd0aFxuXG4gICAgY29uc3QgZ2V0U3RhdHVzID0gKCkgPT4gc3RhdHVzXG5cbiAgICBjb25zdCBoaXQgPSAocG9zaXRpb24pID0+IHtcbiAgICAgICAgaWYgKHBvc2l0aW9uIDwgbGVuZ3RoKSB7XG4gICAgICAgICAgICBzdGF0dXNbcG9zaXRpb25dID0gJ2hpdCdcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGlzU3VuayA9ICgpID0+IHN0YXR1cy5ldmVyeSgocG9zaXRpb24pID0+IHBvc2l0aW9uID09PSAnaGl0JylcblxuICAgIHJldHVybiB7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIGdldExlbmd0aCxcbiAgICAgICAgaXNTdW5rLFxuICAgICAgICBoaXQsXG4gICAgICAgIGdldFN0YXR1cyxcbiAgICAgICAgaXNTaGlwOiB0cnVlLFxuICAgIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjcmVhdGVTaGlwXG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbl9fd2VicGFja19yZXF1aXJlX18ubiA9IChtb2R1bGUpID0+IHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0KCkgPT4gKG1vZHVsZVsnZGVmYXVsdCddKSA6XG5cdFx0KCkgPT4gKG1vZHVsZSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiaW1wb3J0IHJlbmRlclBsYXllckJvYXJkIGZyb20gJy4vZG9tJ1xuaW1wb3J0IGNyZWF0ZUdhbWVCb2FyZCBmcm9tICcuL2dhbWVib2FyZC9nYW1lYm9hcmQnXG5cbmNvbnN0IHBsYXllckJvYXJkID0gY3JlYXRlR2FtZUJvYXJkKClcbnBsYXllckJvYXJkLnJhbmRvbWx5UGxhY2VTaGlwcygpXG5cbnJlbmRlclBsYXllckJvYXJkKHBsYXllckJvYXJkKVxuIiwiY29uc3QgcmVuZGVyUGxheWVyQm9hcmQgPSAoeyBnZXRMb2NhdGlvbiB9KSA9PiB7XG4gICAgY29uc3QgcGxheWVyQm9hcmRBcmVhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZGl2LnBsYXllci1ib2FyZCcpXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwOyBpICs9IDEpIHtcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAxMDsgaiArPSAxKSB7XG4gICAgICAgICAgICBjb25zdCBjZWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICAgICAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZCgnY2VsbCcpXG4gICAgICAgICAgICBpZiAoZ2V0TG9jYXRpb24oaiwgaSkuaXNTaGlwKSB7XG4gICAgICAgICAgICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKCdzaGlwJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBsYXllckJvYXJkQXJlYS5hcHBlbmRDaGlsZChjZWxsKVxuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCByZW5kZXJQbGF5ZXJCb2FyZFxuIl0sIm5hbWVzIjpbImNyZWF0ZVNoaXAiLCJjcmVhdGVHYW1lQm9hcmQiLCJlbXB0eUNlbGwiLCJoYXNCZWVuSGl0IiwiaXNTaGlwIiwib2ZmTGltaXRzIiwiZ2FtZUJvYXJkIiwiQXJyYXkiLCJmaWxsIiwic3RydWN0dXJlZENsb25lIiwibWFwIiwic2hpcHMiLCJnZXRMb2NhdGlvbiIsImNvbHVtbiIsInJvdyIsInNldExvY2F0aW9uIiwic2hpcCIsIk9iamVjdCIsImFzc2lnbiIsImNyZWF0ZU9mZkxpbWl0TG9jYXRpb24iLCJwbGFjZVNoaXAiLCJkaXJlY3Rpb24iLCJzaGlwTGVuZ3RoIiwiZ2V0TGVuZ3RoIiwiaSIsImJvdHRvbSIsImJvdHRvbUVsZW1lbnQiLCJhZGRPZmZMaW1pdEFyZWFGb3JWZXJ0aWNhbGx5UG9zaXRpb25lZFNoaXAiLCJyaWdodCIsInJpZ2h0RWxlbWVudCIsInRvcCIsInRvcEVsZW1lbnQiLCJsZWZ0IiwibGVmdEVsZW1lbnQiLCJ0b3BSaWdodCIsInRvcFJpZ2h0RWxlbWVudCIsInRvcExlZnQiLCJ0b3BMZWZ0RWxlbWVudCIsImJvdHRvbVJpZ2h0IiwiYm90dG9tUmlnaHRFbGVtZW50IiwibGVmdFJpZ2h0IiwibGVmdFJpZ2h0RWxlbWVudCIsImFkZE9mZkxpbWl0QXJlYUZvclNoaXBzIiwiYWRkT2ZmTGltaXRBcmVhRm9ySG9yaXpvbnRhbGx5UG9zaXRpb25lZFNoaXAiLCJtYWtlUmFuZG9tQ29vcmRpbmF0ZXMiLCJyYW5kb21EaXJlY3Rpb24iLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJyYW5kb21Db2x1bW4iLCJyYW5kb21Sb3ciLCJyZWNlaXZlQXR0YWNrIiwiY2hlY2tJZkFsbFNoaXBzSGF2ZVN1bmsiLCJmbGF0IiwiZXZlcnkiLCJjZWxsIiwiZ2V0U3RhdHVzIiwidW5pdCIsInJhbmRvbWx5UGxhY2VTaGlwcyIsInNoaXBEZXRhaWxzIiwibGVuZ3RoIiwibG9jYXRpb24iLCJwdXNoIiwibW9kdWxlIiwiZXhwb3J0cyIsIm5hbWUiLCJzdGF0dXMiLCJpc1N1bmsiLCJwb3NpdGlvbiIsImhpdCIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsIl9fd2VicGFja19tb2R1bGVzX18iLCJuIiwiZ2V0dGVyIiwiX19lc01vZHVsZSIsImQiLCJhIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwicGxheWVyQm9hcmQiLCJwbGF5ZXJCb2FyZEFyZWEiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJqIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImFwcGVuZENoaWxkIl0sInNvdXJjZVJvb3QiOiIifQ==