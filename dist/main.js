(()=>{var t={653:(t,e,r)=>{const o=r(585);t.exports=()=>{const t={hasBeenHit:!1,isShip:!1,offLimits:!1};let e=!1;const r=()=>{const e=Array(10).fill().map((()=>Array(10).fill()));for(let r=0;r<10;r+=1)for(let o=0;o<10;o+=1)e[r][o]={...t,column:r,row:o};return e};let i=r();const a=()=>{i=r()},n=(t,e)=>i?.[t]?.[e],l=(e,r,o=(()=>Object.assign(t,{offLimits:!0}))())=>{if(void 0===i?.[e]?.[r])return!0;const a=i[e][r];return i[e][r]={...a,...o},!0},c=(t,e)=>{l(t-1,e-1),l(t,e-1)},s=(t,e,r,o)=>{if("vertical"===r)for(let r=0;r<o;r+=1){const o=n(t,e+r);if(o&&!0===o.isShip&&!0===o.offLimits)return!0}if("horizontal"===r)for(let r=0;r<o;r+=1){const o=n(t+r,e);if(o&&!0===o.isShip&&!0===o.offLimits)return!0}return!1},d=(t,e,r,o)=>{if(i[t][e].isShip||i[t][e].offLimits)return!1;const a=o.getLength();if(s(n(t,e)))return!1;if("vertical"===r){if(((t,e)=>t>=0&&t+e-1<i.length)(e,a)){for(let r=0;r<a;r+=1)l(t,e+r,{...o,position:r}),l(t+1,e+r),l(t-1,e+r);return((t,e,r)=>{c(t,e),l(t,e+r),l(t+1,e+r),l(t-1,e+r),l(t+1,e-1)})(t,e,a),!0}}else if("horizontal"===r&&((t,e)=>t>=0&&t+e-1<i.length)(t,a)){for(let r=0;r<a;r+=1)l(t+r,e,{...o,position:r}),l(t+r,e+1),l(t+r,e-1);return((t,e,r)=>{c(t,e),l(t+r,e),l(t-1,e+1),l(t+r,e+1),l(t+r,e-1),l(t-1,e)})(t,e,a),!0}return!1},u=()=>{const t=Math.floor(100*Math.random()),e=(()=>{const t=[...i.flat()];return t.forEach((t=>{!0===t.hasBeenHit?t.availability=!1:t.availability=!0})),t})()[t];return!1===e.availability?u():[e.column,e.row]},h=t=>{const e=Math.floor(10*Math.random()),r=Math.floor(10*Math.random());let i=Math.round(Math.random());return(0!==i||(i="horizontal",!1!==d(e,r,i,o(t))))&&(1!==i||(i="vertical",!1!==d(e,r,i,o(t))))&&void 0};return{clearBoard:a,checkIfLocationIsAShipOrOffLimits:s,checkIfOffLimitZoneWasCorrectlyImplemented:t=>i.flat().filter((t=>!0===t.offLimits)).length===t+2,getLocation:n,receiveAttack:(t,e)=>{i[t][e].hasBeenHit=!0},checkIfAllShipsHaveSunk:()=>{let t=!0;for(let e=0;e<10;e+=1)for(let r=0;r<10;r+=1){const o=n(e,r);if(!1!==o.isShip&&o.isShip&&!1===o.isSunk()){t=!1;break}}return t},placeShip:d,randomlyPlaceShips:()=>{switch(a(),Math.floor(10*Math.random())){case 0:d(1,1,"horizontal",o(4)),d(1,4,"horizontal",o(4)),d(7,3,"horizontal",o(3)),d(2,7,"horizonal",o(3)),d(6,7,"horizontal",o(2)),d(5,9,"horizontal",o(2)),d(8,1,"vertical",o(1)),d(9,5,"vertical",o(1));break;case 1:d(0,1,"vertical",o(4)),d(8,1,"vertical",o(4)),d(3,1,"horizontal",o(3)),d(0,7,"vertical",o(3)),d(3,6,"horizontal",o(2)),d(8,7,"horizontal",o(2)),d(4,8,"vertical",o(1)),d(6,7,"vertical",o(1));break;case 2:d(0,1,"horizontal",o(4)),d(0,3,"horizontal",o(4)),d(9,1,"vertical",o(3)),d(2,8,"horizontal",o(3)),d(5,3,"vertical",o(2)),d(0,6,"vertical",o(2)),d(1,6,"vertical",o(1)),d(7,4,"vertical",o(1));break;case 3:d(0,0,"vertical",o(4)),d(9,0,"vertical",o(4)),d(0,5,"vertical",o(3)),d(3,1,"vertical",o(3)),d(5,1,"vertical",o(2)),d(7,1,"vertical",o(2)),d(4,7,"vertical",o(1)),d(8,7,"vertical",o(1));break;case 4:d(2,4,"horizontal",o(4)),d(0,6,"vertical",o(4)),d(2,7,"horizontal",o(3)),d(6,6,"horizontal",o(3)),d(7,1,"horizontal",o(2)),d(6,8,"horizontal",o(2)),d(2,1,"horizontal",o(1)),d(4,1,"horizontal",o(1));break;case 5:d(1,3,"horizontal",o(4)),d(6,2,"vertical",o(4)),d(0,6,"vertical",o(3)),d(8,2,"vertical",o(3)),d(0,0,"horizontal",o(2)),d(2,6,"horizontal",o(2)),d(9,6,"vertical",o(1)),d(5,9,"vertical",o(1));break;case 6:d(0,0,"vertical",o(4)),d(0,6,"vertical",o(4)),d(0,2,"horizontal",o(3)),d(6,1,"horizontal",o(3)),d(8,3,"horizontal",o(2)),d(9,5,"vertical",o(2)),d(9,8,"vertical",o(1)),d(7,9,"vertical",o(1));break;case 7:d(0,1,"vertical",o(4)),d(0,6,"vertical",o(4)),d(2,0,"horizontal",o(3)),d(6,0,"horizontal",o(3)),d(9,2,"vertical",o(2)),d(9,6,"vertical",o(2)),d(9,9,"vertical",o(1)),d(7,9,"vertical",o(1));break;case 8:d(2,0,"vertical",o(4)),d(7,1,"vertical",o(4)),d(2,5,"horizontal",o(3)),d(6,7,"vertical",o(3)),d(1,9,"horizontal",o(2)),d(2,7,"horizontal",o(2)),d(9,6,"vertical",o(1)),d(8,9,"vertical",o(1));break;case 9:d(0,0,"horizontal",o(4)),d(5,2,"vertical",o(1)),d(2,6,"vertical",o(1)),d(0,8,"horizontal",o(3)),d(4,5,"vertical",o(4)),d(7,4,"horizontal",o(2)),d(6,6,"horizontal",o(2)),d(7,8,"horizontal",o(3))}},makeRandomCoordinates:u,checkIfBoardHasBeenFullyPopulated:()=>{const t=i.flat();let e=0;return t.forEach((t=>{t.isShip&&(e+=1)})),20===e},randomFleet:()=>{for(let t=0;t<2;)!1!==h(1)&&(t+=1);for(let t=0;t<2;)!1!==h(2)&&(t+=1);for(let t=0;t<2;)!1!==h(3)&&(t+=1);for(let t=0;t<2;)!1!==h(4)&&(t+=1);e=!0},gameBoard:i,isStartAllowed:{get:()=>e,set(t){e=t}}}}},61:t=>{t.exports=(t="player")=>{let e=!1;return{getName:()=>t,attack:(t,e,{getLocation:r,receiveAttack:o})=>{const i=r(t,e);return!1===i.hasBeenHit||i.isShip&&!1===i.getStatus().includes("unhit")?(o(t,e),i.hit?(i.hit(i.position),"You hit a ship!"):"It's a hit!"):"You have already hit this spot!"},turn:{get:()=>e,set(t){e=t}},isTurn:t=>{e=!0,t.turn.set(!1)}}}},585:t=>{t.exports=(t,e="ship")=>{const r=Array(t).fill("unhit");return{getName:()=>e,getLength:()=>r.length,isSunk:()=>r.every((t=>"hit"===t)),hit:e=>{e<t&&(r[e]="hit")},getStatus:()=>r,domTargets:[],hasBeenHit:!1,offLimits:!0,isShip:!0}}}},e={};function r(o){var i=e[o];if(void 0!==i)return i.exports;var a=e[o]={exports:{}};return t[o](a,a.exports,r),a.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var o in e)r.o(e,o)&&!r.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";let t,e=!1,o=!1,i=[],a=[],n=[],l=[];function c(e){return"left"===e?(t="left",[i[0],i[1]-1]):"right"===e?(t="right",[i[0],i[1]+1]):"down"===e?(t="down",[i[0]+1,i[1]]):"up"===e?(t="up",[i[0]-1,i[1]]):void 0}function s(t,r,l,c){e=t,void 0!==r&&(o=r),void 0!==l&&(i=[l,c]),0===a.length&&void 0!==l?a=[l,c]:0!==a.length&&0===n.length&&void 0!==l&&(n=[l,c])}function d(t,e){return l=[],0!==e&&l.push([t,e-1]),9!==e&&l.push([t,e+1]),0!==t&&l.push([t-1,e]),9!==t&&l.push([t+1,e]),l}function u(r,s,u,h,p,f){let v;if(!0===h&&(i=[],a=[],n=[],l=[],e=!1,o=!1,t=""),!o&&!e)return v=p.makeRandomCoordinates(),S(s,u,v[0],v[1],p,f);if(0!==n.length&&e&&!r){let t;if(a[0]===n[0]-1&&(t=c("down")),a[0]===n[0]+1&&(t=c("up")),a[1]===n[1]-1&&(t=c("right")),a[1]===n[1]+1&&(t=c("left")),t[0]>=0&&t[0]<=9&&t[1]>=0&&t[1]<=9)return S(s,u,t[0],t[1],p,f)}else if(0!==n.length&&o&&!e){let e;if(i=a,n=[],"up"===t&&(e=c("down")),"down"===t&&(e=c("up")),"right"===t&&(e=c("left")),"left"===t&&(e=c("right")),e[0]>=0&&e[0]<=9&&e[1]>=0&&e[1]<=9)return S(s,u,e[0],e[1],p,f)}else if(o){0===l.length&&d(i[0],i[1]),0===l.length&&!0===o&&d(a[0],a[1]);const t=l.pop();return S(s,u,t[0],t[1],p,f)}}var h=r(585),p=r.n(h);let f=0;function v(t,e){let r=2;const o=document.querySelector(t),i=document.querySelector("body"),a=document.querySelectorAll(".player-board > .cell"),n=o.childNodes;let l,c,s="horizontal";n[0]&&n[0].addEventListener("mouseenter",(()=>c=0)),n[1]&&n[1].addEventListener("mouseenter",(()=>c=-1)),n[2]&&n[2].addEventListener("mouseenter",(()=>c=-2)),n[3]&&n[3].addEventListener("mouseenter",(()=>c=-3)),o.addEventListener("click",(t=>function(t){"horizontal"===s?(s="vertical",t.target.parentNode.classList.toggle("rotated")):(s="horizontal",t.target.parentNode.classList.toggle("rotated"))}(t))),o.addEventListener("dragstart",(()=>{for(let t=0;t<10;t+=1)e.gameBoard[t].forEach((t=>{(t.offLimits||t.isShip)&&document.querySelector(`.player-board > .cell[column='${t.column}'][row='${t.row}']`).classList.toggle("not-available")}))})),o.addEventListener("dragend",(()=>{if(document.querySelectorAll(".not-available").forEach((t=>t.classList.remove("not-available"))),-1===l)return;let i,a,n=`${l}`;l<10?(i=0,a=l):(n=n.split(""),i=1*n[0],a=1*n[1]),"horizontal"===s&&(a+=c),"vertical"===s&&(i+=c),a<0||".ship-1"===t&&!1===e.placeShip(a,i,s,p()(1))||".ship-2"===t&&!1===e.placeShip(a,i,s,p()(2))||".ship-3"===t&&!1===e.placeShip(a,i,s,p()(3))||".ship-4"===t&&!1===e.placeShip(a,i,s,p()(4))||(g(e),r-=1,f+=1,8===f&&e.isStartAllowed.set(!0),o.parentNode.firstChild.textContent=`${r}x`,0===r&&(o.parentNode.style.display="none"),!e.checkIfBoardHasBeenFullyPopulated())||(document.querySelector("body > main > div.player > div:nth-child(4)").style.display="none",document.querySelector(".randomize").style.display="none",e.isStartAllowed.set(!0))})),a.forEach(((t,e)=>{t.addEventListener("dragover",(t=>{t.preventDefault(),l=e}))})),i.addEventListener("dragenter",(()=>{l=-1}))}function m(t){return new Promise((e=>{setTimeout((()=>{e(2)}),t)}))}const y=(t,e)=>{if(t.checkIfAllShipsHaveSunk()){const t=document.querySelector(".modal"),e=document.querySelector(".modal-content > p"),r=document.querySelector(".modal-content > button");t.style.display="block",r.addEventListener("click",(()=>{location.reload()})),e.textContent="You lose!"}if(e.checkIfAllShipsHaveSunk()){const t=document.querySelector(".modal"),e=document.querySelector(".modal-content > p"),r=document.querySelector(".modal-content > button");t.style.display="block",e.textContent="You win!",r.addEventListener("click",(()=>{location.reload()}))}};async function S(t,e,r,o,i,a){let n=!1;const l=document.querySelector(`.player-board > .cell[column='${r}'][row='${o}']`),c=e.attack(r,o,i);if("You have already hit this spot!"===c&&u(!0,t,e,void 0,i,a),"It's a hit!"===c&&(s(!1),l.classList.add("miss")),"You hit a ship!"===c)return s(!0,!0,r,o),l.classList.add("hit"),i.getLocation(r,o).domTargets.push(l),i.getLocation(r,o).isSunk()&&(i.getLocation(r,o).domTargets.forEach((t=>t.classList.add("sunk"))),n=!0,!0===i.checkIfAllShipsHaveSunk())?y(i,a):(await m(1e3),u(!1,t,e,n,i,a));t.isTurn(e)}const g=({getLocation:t})=>{const e=document.querySelector("div.player-board");for(let r=0;r<10;r+=1)for(let o=0;o<10;o+=1){const i=e.querySelector(`.cell:nth-child(${10*o+r+1})`);i.setAttribute("column",r),i.setAttribute("row",o);const a=t(r,o);a.isShip&&(i.classList.add("ship"),i.setAttribute("ship-name",a.getName()))}};var b=r(653),L=r.n(b),k=r(61),z=r.n(k);const A=L()(),w=L()(),E=z()("player"),q=z()("computer");E.isTurn(q),function(t){document.querySelector("button.randomize").addEventListener("click",(()=>{document.querySelector(".player > div:nth-child(4)").style.display="none",t.randomlyPlaceShips(),t.isStartAllowed.set(!0),g(t)})),document.querySelector("button.reset").addEventListener("click",(()=>{location.reload()}))}(A),function(t){function e(t,e){const r=document.querySelector("body > main > div.player > div:nth-child(4)"),o=document.createElement("div");o.classList.add("ship-container"),r.appendChild(o);const i=document.createElement("span");i.classList.add(`info-${t}`),i.textContent="2x",o.appendChild(i);const a=document.createElement("div");a.classList.add("ship"),a.classList.add(`ship-${t}`),a.setAttribute("draggable","true"),o.appendChild(a);for(let t=0;t<e;t+=1){const t=document.createElement("div");t.classList.add("cell"),a.appendChild(t)}}e(1,1),e(2,2),e(3,3),e(4,4);for(let e=1;e<5;e+=1)v(`.ship-${e}`,t)}(A),w.randomlyPlaceShips();const B=(()=>{const t={};return{publish:function(e,r){Array.isArray(t[e])&&t[e].forEach((t=>{t(r)}))},subscribe:function e(r,o){Array.isArray(e[r])||(t[r]=[]),t[r].push(o);const i=t[r].length-1;return{unsubscribe(){t[r].splice(i,1)}}}}})();((t,e,r,o,i)=>{const a=document.querySelector("div.enemy-board");for(let n=0;n<10;n+=1)for(let l=0;l<10;l+=1){const c=a.querySelector(`.cell:nth-child(${10*l+n+1})`);c.setAttribute("column",n),c.setAttribute("row",l),c.addEventListener("click",(()=>{document.querySelectorAll(".enemy-board .cell").forEach((t=>{t.style="cursor: not-allowed; pointer-events: none;"})),t.isStartAllowed.get()&&(r.turn.get()&&i.publish("click",{column:n,row:l,playerBoard:t,enemyBoard:e,player:r,enemy:o}),m(1100).then((()=>{i.publish("click",{column:n,row:l,playerBoard:t,enemyBoard:e,player:r,enemy:o}),document.querySelectorAll(".enemy-board .cell").forEach((t=>{t.style="cursor: pointer; pointer-events: initial;"}))})))}))}})(A,w,E,q,B),B.subscribe("click",(({column:t,row:e,playerBoard:r,enemyBoard:o,player:i,enemy:a})=>{i.turn.get()&&r.isStartAllowed.get()&&((t,e,r,o,i,a)=>{((t,e,r,o)=>{o.attack(t,e,r)})(t,e,r,i),(async(t,e,r,o,i,a,n)=>{const l=document.querySelector(`.enemy-board > .cell[column='${e}'][row='${r}']`);o.getLocation(e,r)?.isShip?(l.classList.add("hit"),o.getLocation(e,r).domTargets.push(l),o.getLocation(e,r).isSunk()&&o.getLocation(e,r).domTargets.forEach((t=>t.classList.add("sunk")))):(l.classList.add("miss"),a.isTurn(i),await m(700),o.checkIfAllShipsHaveSunk()?y(n,o):u(!1,i,a,void 0,n,o))})(0,t,e,r,i,a,o)})(t,e,o,r,i,a)})),g(A)})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU9ySCxLQUFLSixPQUFVa0QsRUFBWTNHLGVBQWV5RCxPQTFObEMsRUFDcEJuRCxFQUNBQyxFQUNBcUcsRUFDQUQsRUFDQXVFLEVBQ0E5RyxLQVRpQixFQUFDOUQsRUFBUUMsRUFBS3FHLEVBQVlzRSxLQUMzQ0EsRUFBT25ILE9BQU96RCxFQUFRQyxFQUFLcUcsSUFVM0IwRSxDQUFhaEwsRUFBUUMsRUFBS3FHLEVBQVlzRSxHQTVDcEIxQixPQUNsQjBCLEVBQ0E1SyxFQUNBQyxFQUNBcUcsRUFDQTJFLEVBQ0FuSCxFQUNBdUMsS0FFQSxNQUFNZ0QsRUFBT3RDLFNBQVNDLGNBQ2xCLGdDQUFvQ2hILFlBQWlCQyxPQUdyRHFHLEVBQVduRyxZQUFZSCxFQUFRQyxJQUFNVCxRQUNyQzZKLEVBQUt6QixVQUFVdUIsSUFBSSxPQUNuQjdDLEVBQVduRyxZQUFZSCxFQUFRQyxHQUFLZ0UsV0FBVytCLEtBQUtxRCxHQUNoRC9DLEVBQVduRyxZQUFZSCxFQUFRQyxHQUFLNkMsVUFDcEN3RCxFQUNLbkcsWUFBWUgsRUFBUUMsR0FDcEJnRSxXQUFXbEMsU0FBUzBGLEdBQU1BLEVBQUVHLFVBQVV1QixJQUFJLFlBS3ZERSxFQUFLekIsVUFBVXVCLElBQUksUUFDbkJyRixFQUFNRCxPQUFPb0gsU0FDUHpDLEVBQU0sS0FFTGxDLEVBQVczRCwwQkFDWmtHLEVBQWdCeEMsRUFBYUMsR0FDN0JMLEdBQU8sRUFBT2dGLEVBQU9uSCxPQUFPckQsRUFBVzRGLEVBQWFDLEtBZTFENEUsQ0FBYyxFQUFTbEwsRUFBUUMsRUFBS3FHLEVBQVlzRSxFQUFROUcsRUFBT3VDLElBa04vRDhFLENBQWdCbkwsRUFBUUMsRUFBS3FHLEVBQVlELEVBQWF1RSxFQUFROUcsTUNwU2xFbUUsRUFBa0I1QixJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvLi9zcmMvZ2FtZWJvYXJkL2dhbWVib2FyZC5qcyIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC8uL3NyYy9wbGF5ZXIvcGxheWVyLmpzIiwid2VicGFjazovL3RvcC1iYXR0bGVzaGlwLy4vc3JjL3NoaXAvc2hpcC5qcyIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC8uL3NyYy9ib3QuanMiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvLi9zcmMvZHJhZy1hbmQtZHJvcC5qcyIsIndlYnBhY2s6Ly90b3AtYmF0dGxlc2hpcC8uL3NyYy9kb20uanMiLCJ3ZWJwYWNrOi8vdG9wLWJhdHRsZXNoaXAvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgY29uc2lzdGVudC1yZXR1cm4gKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLWNvbnRpbnVlICovXG4vKiBlc2xpbnQtZGlzYWJsZSBkZWZhdWx0LWNhc2UgKi9cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tY3ljbGVcbi8qIGVzbGludC1kaXNhYmxlIG5vLW11bHRpLWFzc2lnbiAqL1xuLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLWV4cHJlc3Npb25zICovXG5jb25zdCBjcmVhdGVTaGlwID0gcmVxdWlyZSgnLi4vc2hpcC9zaGlwJylcblxuLyogZXNsaW50LWRpc2FibGUgbm8tcGFyYW0tcmVhc3NpZ24gKi9cbmNvbnN0IGNyZWF0ZUdhbWVCb2FyZCA9ICgpID0+IHtcbiAgICBjb25zdCBlbXB0eUNlbGwgPSB7IGhhc0JlZW5IaXQ6IGZhbHNlLCBpc1NoaXA6IGZhbHNlLCBvZmZMaW1pdHM6IGZhbHNlIH1cblxuICAgIGxldCBpc1N0YXJ0QWxsb3dlZCA9IGZhbHNlXG4gICAgXG4gICAgY29uc3QgaW5pdGlhbGl6ZUJvYXJkID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBnYW1lQm9hcmQgPSBBcnJheSgxMCkuZmlsbCgpLm1hcCgoKSA9PiBBcnJheSgxMCkuZmlsbCgpKVxuICAgICAgICBmb3IobGV0IGNvbHVtbj0gMDsgY29sdW1uIDwgMTA7IGNvbHVtbiArPSAxKXtcbiAgICAgICAgICAgIGZvcihsZXQgcm93PSAwOyByb3cgPCAxMDsgcm93ICs9IDEpe1xuICAgICAgICAgICAgICAgIGdhbWVCb2FyZFtjb2x1bW5dW3Jvd10gPSB7Li4uZW1wdHlDZWxsLCBjb2x1bW4sIHJvd31cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZ2FtZUJvYXJkXG4gICAgXG4gICAgfVxuXG4gICAgbGV0IGdhbWVCb2FyZCA9IGluaXRpYWxpemVCb2FyZCgpXG5cbiAgICBjb25zdCBjbGVhckJvYXJkICA9ICgpID0+IHtcbiAgICAgICAgZ2FtZUJvYXJkID0gaW5pdGlhbGl6ZUJvYXJkKClcbiAgICB9XG5cbiAgICBjb25zdCBjcmVhdGVPZmZMaW1pdExvY2F0aW9uID0gKCkgPT5cbiAgICAgICAgT2JqZWN0LmFzc2lnbihlbXB0eUNlbGwsIHsgb2ZmTGltaXRzOiB0cnVlIH0pXG5cbiAgICBjb25zdCBnZXRMb2NhdGlvbiA9IChjb2x1bW4sIHJvdykgPT4gZ2FtZUJvYXJkPy5bY29sdW1uXT8uW3Jvd11cblxuICAgIGNvbnN0IHNldExvY2F0aW9uID0gKGNvbHVtbiwgcm93LCBzaGlwID0gY3JlYXRlT2ZmTGltaXRMb2NhdGlvbigpKSA9PiB7XG4gICAgICAgIGlmIChnYW1lQm9hcmQ/Lltjb2x1bW5dPy5bcm93XSA9PT0gdW5kZWZpbmVkKSByZXR1cm4gdHJ1ZVxuICAgICAgICBjb25zdCBsb2NhdGlvbiA9IGdhbWVCb2FyZFtjb2x1bW5dW3Jvd11cblxuICAgICAgICBnYW1lQm9hcmRbY29sdW1uXVtyb3ddID0gey4uLmxvY2F0aW9uLCAuLi5zaGlwfVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICBjb25zdCBjaGVja0lmQWxsU2hpcHNIYXZlU3VuayA9ICgpID0+IHtcblxuICAgICAgICBsZXQgaGF2ZUFsbFNoaXBzU3VuayA9dHJ1ZSAgXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSArPSAxKSB7XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDEwOyBqICs9IDEpIHtcbiAgICAgICAgY29uc3QgbG9jYXRpb24gPSBnZXRMb2NhdGlvbihpLCBqKVxuICAgICAgICBpZihsb2NhdGlvbi5pc1NoaXAgPT09IGZhbHNlKSBjb250aW51ZVxuICAgICAgICBpZihsb2NhdGlvbi5pc1NoaXAgJiYgbG9jYXRpb24uaXNTdW5rKCkgPT09IGZhbHNlKXtcbiAgICAgICAgICAgaGF2ZUFsbFNoaXBzU3VuayA9IGZhbHNlIFxuICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gaGF2ZUFsbFNoaXBzU3VuayBcbiAgICB9XG5cbiAgICBjb25zdCBhZGRPZmZMaW1pdEFyZWFGb3JTaGlwcyA9IChjb2x1bW4sIHJvdykgPT4ge1xuICAgICAgICAvLyB0b3AtbGVmdFxuICAgICAgICBzZXRMb2NhdGlvbihjb2x1bW4gLSAxLCByb3cgLSAxKVxuICAgICAgICAvLyB0b3BcbiAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uLCByb3cgLSAxKVxuICAgIH1cblxuICAgIGNvbnN0IGFkZE9mZkxpbWl0QXJlYUZvckhvcml6b250YWxseVBvc2l0aW9uZWRTaGlwID0gKFxuICAgICAgICBjb2x1bW4sXG4gICAgICAgIHJvdyxcbiAgICAgICAgc2hpcExlbmd0aFxuICAgICkgPT4ge1xuICAgICAgICAvLyBwb3NpdGlvbnMgcmVsYXRpdmUgdG8gdGhlIHNoaXAgaXRzZWxmKGllLiBhIGhvcml6b250YWwgc2hpcCdzIGJvdHRvbSBpcyB0byB0aGUgcmlnaHQpXG5cbiAgICAgICAgYWRkT2ZmTGltaXRBcmVhRm9yU2hpcHMoY29sdW1uLCByb3cpXG4gICAgICAgIC8vIGJvdHRvbVxuICAgICAgICBzZXRMb2NhdGlvbihjb2x1bW4gKyBzaGlwTGVuZ3RoLCByb3cpXG4gICAgICAgIC8vIGJvdHRvbS1sZWZ0XG4gICAgICAgIHNldExvY2F0aW9uKGNvbHVtbiAtIDEsIHJvdyArIDEpXG4gICAgICAgIC8vIGJvdHRvbS1yaWdodFxuICAgICAgICBzZXRMb2NhdGlvbihjb2x1bW4gKyBzaGlwTGVuZ3RoLCByb3cgKyAxKVxuICAgICAgICAvLyB0b3AtcmlnaHRcbiAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uICsgc2hpcExlbmd0aCwgcm93IC0gMSlcbiAgICAgICAgLy8gbGVmdFxuICAgICAgICBzZXRMb2NhdGlvbihjb2x1bW4gLTEsIHJvdylcbiAgICB9XG5cbiAgICBjb25zdCBhZGRPZmZMaW1pdEFyZWFGb3JWZXJ0aWNhbGx5UG9zaXRpb25lZFNoaXAgPSAoXG4gICAgICAgIGNvbHVtbixcbiAgICAgICAgcm93LFxuICAgICAgICBzaGlwTGVuZ3RoXG4gICAgKSA9PiB7XG4gICAgICAgIC8vIHBvc2l0aW9ucyByZWxhdGl2ZSB0byBob3cgdGhlIHVzZXIgc2VlcyBpdChpZS4gYSB2ZXJ0aWNhbCBzaGlwJ3MgYm90dG9tIGlzIHRvIHRoZSBib3R0b20pXG5cbiAgICAgICAgYWRkT2ZmTGltaXRBcmVhRm9yU2hpcHMoY29sdW1uLCByb3cpXG4gICAgICAgIC8vIGJvdHRvbVxuICAgICAgICBzZXRMb2NhdGlvbihjb2x1bW4sIHJvdyArIHNoaXBMZW5ndGgpXG4gICAgICAgIC8vIGJvdHRvbS1yaWdodFxuICAgICAgICBzZXRMb2NhdGlvbihjb2x1bW4gKyAxLCByb3cgKyBzaGlwTGVuZ3RoKVxuICAgICAgICAvLyBib3R0b20tbGVmdFxuICAgICAgICBzZXRMb2NhdGlvbihjb2x1bW4gLSAxLCByb3cgKyBzaGlwTGVuZ3RoKVxuICAgICAgICAvLyB0b3AtcmlnaHRcbiAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uICsgMSwgcm93IC0gMSlcbiAgICB9XG5cbiAgICBjb25zdCBjaGVja0lmQ29sdW1uQ29vcmRpbmF0ZUlzVmFsaWQgPSAoY29sdW1uLCBzaGlwTGVuZ3RoKSA9PlxuICAgICAgICBjb2x1bW4gPj0gMCAmJiBjb2x1bW4gKyBzaGlwTGVuZ3RoIC0gMSA8IGdhbWVCb2FyZC5sZW5ndGhcblxuICAgIGNvbnN0IGNoZWNrSWZSb3dDb29yZGluYXRlSXNWYWxpZCA9IChyb3csIHNoaXBMZW5ndGgpID0+XG4gICAgICAgIHJvdyA+PSAwICYmIHJvdyArIHNoaXBMZW5ndGggLSAxIDwgZ2FtZUJvYXJkLmxlbmd0aFxuXG5cbiAgICBjb25zdCBjaGVja0lmTG9jYXRpb25Jc0FTaGlwT3JPZmZMaW1pdHMgPSAoXG4gICAgICAgIGNvbHVtbixcbiAgICAgICAgcm93LFxuICAgICAgICBkaXJlY3Rpb24sXG4gICAgICAgIHNoaXBMZW5ndGhcbiAgICApID0+IHtcbiAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gJ3ZlcnRpY2FsJykge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGlwTGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsb2NhdGlvbiA9IGdldExvY2F0aW9uKGNvbHVtbiwgcm93ICsgaSlcbiAgICAgICAgICAgICAgICBpZiAobG9jYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24uaXNTaGlwID09PSB0cnVlICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5vZmZMaW1pdHMgPT09IHRydWVcbiAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gJ2hvcml6b250YWwnKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXBMZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2F0aW9uID0gZ2V0TG9jYXRpb24oY29sdW1uICsgaSwgcm93KVxuICAgICAgICAgICAgICAgIGlmIChsb2NhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5pc1NoaXAgPT09IHRydWUgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLm9mZkxpbWl0cyA9PT0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG5jb25zdCBwbGFjZVNoaXAgPSAoY29sdW1uLCByb3csIGRpcmVjdGlvbiwgc2hpcCkgPT4ge1xuICAgIGlmKGdhbWVCb2FyZFtjb2x1bW5dW3Jvd10uaXNTaGlwIHx8IGdhbWVCb2FyZFtjb2x1bW5dW3Jvd10ub2ZmTGltaXRzKSByZXR1cm4gZmFsc2VcbiAgICAgICAgY29uc3Qgc2hpcExlbmd0aCA9IHNoaXAuZ2V0TGVuZ3RoKClcbiAgICAgICAgaWYgKGNoZWNrSWZMb2NhdGlvbklzQVNoaXBPck9mZkxpbWl0cyhnZXRMb2NhdGlvbihjb2x1bW4sIHJvdywgZGlyZWN0aW9uLCBzaGlwTGVuZ3RoKSkpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gJ3ZlcnRpY2FsJykge1xuICAgICAgICAgICAgaWYgKGNoZWNrSWZSb3dDb29yZGluYXRlSXNWYWxpZChyb3csIHNoaXBMZW5ndGgpKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGlwTGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uLCByb3cgKyBpLCB7Li4uc2hpcCwgcG9zaXRpb246IGl9KVxuICAgICAgICAgICAgICAgICAgICAvLyByZXNlcnZlQXJvdW5kKGNvbHVtbiwgcm93ICsgaSlcbiAgICAgICAgICAgICAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uICsgMSwgcm93ICsgaSlcbiAgICAgICAgICAgICAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uIC0gMSwgcm93ICsgaSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYWRkT2ZmTGltaXRBcmVhRm9yVmVydGljYWxseVBvc2l0aW9uZWRTaGlwKFxuICAgICAgICAgICAgICAgICAgICBjb2x1bW4sXG4gICAgICAgICAgICAgICAgICAgIHJvdyxcbiAgICAgICAgICAgICAgICAgICAgc2hpcExlbmd0aFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PT0gJ2hvcml6b250YWwnKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2tJZkNvbHVtbkNvb3JkaW5hdGVJc1ZhbGlkKGNvbHVtbiwgc2hpcExlbmd0aCkpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXBMZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgICAgICAgICBzZXRMb2NhdGlvbihjb2x1bW4gKyBpICwgcm93LCB7Li4uc2hpcCwgcG9zaXRpb246IGl9KVxuICAgICAgICAgICAgICAgICAgICAvLyByZXNlcnZlQXJvdW5kKGNvbHVtbiArIGksIHJvdylcbiAgICAgICAgICAgICAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uICsgaSwgcm93ICsgMSlcbiAgICAgICAgICAgICAgICAgICAgc2V0TG9jYXRpb24oY29sdW1uICsgaSwgcm93IC0gMSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYWRkT2ZmTGltaXRBcmVhRm9ySG9yaXpvbnRhbGx5UG9zaXRpb25lZFNoaXAoXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbixcbiAgICAgICAgICAgICAgICAgICAgcm93LFxuICAgICAgICAgICAgICAgICAgICBzaGlwTGVuZ3RoXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgICAgICBjb25zdCBhdmFpbGFibGVTcGFjZXMgPSAoKSA9PntcblxuICAgICAgICBjb25zdCBmbGF0dGVuZWRHYW1lQm9hcmQgPSBbLi4uZ2FtZUJvYXJkLmZsYXQoKV1cblxuICAgICAgICAgICAgZmxhdHRlbmVkR2FtZUJvYXJkLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBpZihlbGVtZW50Lmhhc0JlZW5IaXQgPT09IHRydWUpe1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmF2YWlsYWJpbGl0eSA9IGZhbHNlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuYXZhaWxhYmlsaXR5ID10cnVlICBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICByZXR1cm4gZmxhdHRlbmVkR2FtZUJvYXJkXG5cbiAgICAgICAgfVxuICAgIGNvbnN0IG1ha2VSYW5kb21Db29yZGluYXRlcyA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgcmFuZG9tTG9jYXRpb24gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDApXG4gICAgICAgIGNvbnN0IGZsYXR0ZW5lZEdhbWVCb2FyZCA9IGF2YWlsYWJsZVNwYWNlcygpXG5cbiAgICAgICAgY29uc3QgbG9jYXRpb24gPSBmbGF0dGVuZWRHYW1lQm9hcmRbcmFuZG9tTG9jYXRpb25dXG5cbiAgICAgICAgaWYobG9jYXRpb24uYXZhaWxhYmlsaXR5ID09PSBmYWxzZSl7XG4gICAgICAgICAgICByZXR1cm4gbWFrZVJhbmRvbUNvb3JkaW5hdGVzKClcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGVsZW1lbnRDb2x1bW4gPSBsb2NhdGlvbi5jb2x1bW5cbiAgICAgICAgY29uc3QgZWxlbWVudFJvdyA9IGxvY2F0aW9uLnJvd1xuXG5cbiAgICAgICAgcmV0dXJuIFtlbGVtZW50Q29sdW1uLCBlbGVtZW50Um93XVxuICAgIH1cbiAgLy8gY3JlYXRlcyBhIHNoaXAgd2l0aCByYW5kb20gcG9zIGFuZCBvcmllbnRhdGlvblxuICBjb25zdCByYW5kb21TaGlwID0gKGxlbmd0aCkgPT4ge1xuICAgIGNvbnN0IHBvczEgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCk7XG4gICAgY29uc3QgcG9zMiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKTtcbiAgICBsZXQgZGlyID0gTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpKTtcblxuICAgIGlmIChkaXIgPT09IDApIHtcbiAgICAgIGRpciA9IFwiaG9yaXpvbnRhbFwiO1xuICAgICAgaWYgKHBsYWNlU2hpcChwb3MxLCBwb3MyLCBkaXIsIGNyZWF0ZVNoaXAobGVuZ3RoKSkgPT09IGZhbHNlKSByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKGRpciA9PT0gMSkge1xuICAgICAgZGlyID0gXCJ2ZXJ0aWNhbFwiO1xuICAgICAgaWYgKHBsYWNlU2hpcChwb3MxLCBwb3MyLCBkaXIsIGNyZWF0ZVNoaXAobGVuZ3RoKSkgPT09IGZhbHNlKSByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9O1xuICAvLyBjcmVhdGVzIGEgcmFuZG9tIGZsZWV0IG9mIDggc2hpcHNcbiAgY29uc3QgcmFuZG9tRmxlZXQgPSAoKSA9PiB7XG4gICAgLy8gY3JlYXRlIDIgc2hpcHMgb2YgbGVuZ3RoIDFcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDI7ICkge1xuICAgICAgaWYgKHJhbmRvbVNoaXAoMSkgPT09IGZhbHNlKSBjb250aW51ZTtcbiAgICAgIGkgKz0gMTtcbiAgICB9XG4gICAgLy8gY3JlYXRlIDIgc2hpcHMgb2YgbGVuZ3RoIDJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDI7ICkge1xuICAgICAgaWYgKHJhbmRvbVNoaXAoMikgPT09IGZhbHNlKSBjb250aW51ZTtcbiAgICAgIGkgKz0gMTtcbiAgICB9XG4gICAgLy8gY3JlYXRlIDIgc2hpcHMgb2YgbGVuZ3RoIDNcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDI7ICkge1xuICAgICAgaWYgKHJhbmRvbVNoaXAoMykgPT09IGZhbHNlKSBjb250aW51ZTtcbiAgICAgIGkgKz0gMTtcbiAgICB9XG4gICAgLy8gY3JlYXRlIDEgc2hpcCBvZiBsZW5ndGggNFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMjsgKSB7XG4gICAgICBpZiAocmFuZG9tU2hpcCg0KSA9PT0gZmFsc2UpIGNvbnRpbnVlO1xuICAgICAgaSArPSAxO1xuICAgIH1cbiAgICBpc1N0YXJ0QWxsb3dlZCA9IHRydWVcbiAgfTtcblxuICAgIGNvbnN0IHJhbmRvbWx5UGxhY2VTaGlwcyA9ICgpID0+IHtcblxuICAgIGNsZWFyQm9hcmQoKVxuICAgIGNvbnN0IHJhbmRvbVBvc3NpYmlsaXR5ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApXG4gICAgc3dpdGNoKHJhbmRvbVBvc3NpYmlsaXR5KXtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgcGxhY2VTaGlwKDEsIDEsICdob3Jpem9udGFsJyxjcmVhdGVTaGlwKDQpKVxuICAgICAgICAgICAgcGxhY2VTaGlwKDEsIDQsICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCg0KSlcbiAgICAgICAgICAgIHBsYWNlU2hpcCg3LCAzLCAnaG9yaXpvbnRhbCcsIGNyZWF0ZVNoaXAoMykpXG4gICAgICAgICAgICBwbGFjZVNoaXAoMiwgNywgJ2hvcml6b25hbCcsIGNyZWF0ZVNoaXAoMykpXG4gICAgICAgICAgICBwbGFjZVNoaXAoNiwgNywgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDIpKVxuICAgICAgICAgICAgcGxhY2VTaGlwKDUsIDksICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCgyKSlcbiAgICAgICAgICAgIHBsYWNlU2hpcCg4LCAxLCAndmVydGljYWwnLCBjcmVhdGVTaGlwKDEpKVxuICAgICAgICAgICAgcGxhY2VTaGlwKDksIDUsICd2ZXJ0aWNhbCcsIGNyZWF0ZVNoaXAoMSkpXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgcGxhY2VTaGlwKDAsIDEsICd2ZXJ0aWNhbCcsIGNyZWF0ZVNoaXAoNCkpXG4gICAgICAgICAgICBwbGFjZVNoaXAoOCwgMSwgJ3ZlcnRpY2FsJywgY3JlYXRlU2hpcCg0KSlcbiAgICAgICAgICAgIHBsYWNlU2hpcCgzLCAxLCAnaG9yaXpvbnRhbCcsIGNyZWF0ZVNoaXAoMykpXG4gICAgICAgICAgICBwbGFjZVNoaXAoMCwgNywgJ3ZlcnRpY2FsJywgY3JlYXRlU2hpcCgzKSlcbiAgICAgICAgICAgIHBsYWNlU2hpcCgzLCA2LCAnaG9yaXpvbnRhbCcsIGNyZWF0ZVNoaXAoMikpXG4gICAgICAgICAgICBwbGFjZVNoaXAoOCwgNywgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDIpKVxuICAgICAgICAgICAgcGxhY2VTaGlwKDQsIDgsICd2ZXJ0aWNhbCcsIGNyZWF0ZVNoaXAoMSkpXG4gICAgICAgICAgICBwbGFjZVNoaXAoNiwgNywgJ3ZlcnRpY2FsJywgY3JlYXRlU2hpcCgxKSlcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICBwbGFjZVNoaXAoMCwgMSwgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDQpKVxuICAgICAgICAgICAgcGxhY2VTaGlwKDAsIDMsICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCg0KSlcbiAgICAgICAgICAgIHBsYWNlU2hpcCg5LCAxLCAndmVydGljYWwnLCBjcmVhdGVTaGlwKDMpKVxuICAgICAgICAgICAgcGxhY2VTaGlwKDIsIDgsICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCgzKSlcbiAgICAgICAgICAgIHBsYWNlU2hpcCg1LCAzLCAndmVydGljYWwnLCBjcmVhdGVTaGlwKDIpKVxuICAgICAgICAgICAgcGxhY2VTaGlwKDAsIDYsICd2ZXJ0aWNhbCcsIGNyZWF0ZVNoaXAoMikpXG4gICAgICAgICAgICBwbGFjZVNoaXAoMSwgNiwgJ3ZlcnRpY2FsJywgY3JlYXRlU2hpcCgxKSlcbiAgICAgICAgICAgIHBsYWNlU2hpcCg3LCA0LCAndmVydGljYWwnLCBjcmVhdGVTaGlwKDEpKVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgIHBsYWNlU2hpcCgwLCAwLCAndmVydGljYWwnLCBjcmVhdGVTaGlwKDQpKVxuICAgICAgICAgICAgcGxhY2VTaGlwKDksIDAsICd2ZXJ0aWNhbCcsIGNyZWF0ZVNoaXAoNCkpXG4gICAgICAgICAgICBwbGFjZVNoaXAoMCwgNSwgJ3ZlcnRpY2FsJywgY3JlYXRlU2hpcCgzKSlcbiAgICAgICAgICAgIHBsYWNlU2hpcCgzLCAxLCAndmVydGljYWwnLCBjcmVhdGVTaGlwKDMpKVxuICAgICAgICAgICAgcGxhY2VTaGlwKDUsIDEsICd2ZXJ0aWNhbCcsIGNyZWF0ZVNoaXAoMikpXG4gICAgICAgICAgICBwbGFjZVNoaXAoNywgMSwgJ3ZlcnRpY2FsJywgY3JlYXRlU2hpcCgyKSlcbiAgICAgICAgICAgIHBsYWNlU2hpcCg0LCA3LCAndmVydGljYWwnLCBjcmVhdGVTaGlwKDEpKVxuICAgICAgICAgICAgcGxhY2VTaGlwKDgsIDcsICd2ZXJ0aWNhbCcsIGNyZWF0ZVNoaXAoMSkpXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgcGxhY2VTaGlwKDIsIDQsICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCg0KSlcbiAgICAgICAgICAgIHBsYWNlU2hpcCgwLCA2LCAndmVydGljYWwnLCBjcmVhdGVTaGlwKDQpKVxuICAgICAgICAgICAgcGxhY2VTaGlwKDIsIDcsICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCgzKSlcbiAgICAgICAgICAgIHBsYWNlU2hpcCg2LCA2LCAnaG9yaXpvbnRhbCcsIGNyZWF0ZVNoaXAoMykpXG4gICAgICAgICAgICBwbGFjZVNoaXAoNywgMSwgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDIpKVxuICAgICAgICAgICAgcGxhY2VTaGlwKDYsIDgsICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCgyKSlcbiAgICAgICAgICAgIHBsYWNlU2hpcCgyLCAxLCAnaG9yaXpvbnRhbCcsIGNyZWF0ZVNoaXAoMSkpXG4gICAgICAgICAgICBwbGFjZVNoaXAoNCwgMSwgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDEpKVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgIHBsYWNlU2hpcCgxLCAzLCAnaG9yaXpvbnRhbCcsIGNyZWF0ZVNoaXAoNCkpXG4gICAgICAgICAgICBwbGFjZVNoaXAoNiwgMiwgJ3ZlcnRpY2FsJywgY3JlYXRlU2hpcCg0KSlcbiAgICAgICAgICAgIHBsYWNlU2hpcCgwLCA2LCAndmVydGljYWwnLCBjcmVhdGVTaGlwKDMpKVxuICAgICAgICAgICAgcGxhY2VTaGlwKDgsIDIsICd2ZXJ0aWNhbCcsIGNyZWF0ZVNoaXAoMykpXG4gICAgICAgICAgICBwbGFjZVNoaXAoMCwgMCwgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDIpKVxuICAgICAgICAgICAgcGxhY2VTaGlwKDIsIDYsICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCgyKSlcbiAgICAgICAgICAgIHBsYWNlU2hpcCg5LCA2LCAndmVydGljYWwnLCBjcmVhdGVTaGlwKDEpKVxuICAgICAgICAgICAgcGxhY2VTaGlwKDUsIDksICd2ZXJ0aWNhbCcsIGNyZWF0ZVNoaXAoMSkpXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgcGxhY2VTaGlwKDAsIDAsICd2ZXJ0aWNhbCcsIGNyZWF0ZVNoaXAoNCkpXG4gICAgICAgICAgICBwbGFjZVNoaXAoMCwgNiwgJ3ZlcnRpY2FsJywgY3JlYXRlU2hpcCg0KSlcbiAgICAgICAgICAgIHBsYWNlU2hpcCgwLCAyLCAnaG9yaXpvbnRhbCcsIGNyZWF0ZVNoaXAoMykpXG4gICAgICAgICAgICBwbGFjZVNoaXAoNiwgMSwgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDMpKVxuICAgICAgICAgICAgcGxhY2VTaGlwKDgsIDMsICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCgyKSlcbiAgICAgICAgICAgIHBsYWNlU2hpcCg5LCA1LCAndmVydGljYWwnLCBjcmVhdGVTaGlwKDIpKVxuICAgICAgICAgICAgcGxhY2VTaGlwKDksIDgsICd2ZXJ0aWNhbCcsIGNyZWF0ZVNoaXAoMSkpXG4gICAgICAgICAgICBwbGFjZVNoaXAoNywgOSwgJ3ZlcnRpY2FsJywgY3JlYXRlU2hpcCgxKSlcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICBwbGFjZVNoaXAoMCwgMSwgJ3ZlcnRpY2FsJywgY3JlYXRlU2hpcCg0KSlcbiAgICAgICAgICAgIHBsYWNlU2hpcCgwLCA2LCAndmVydGljYWwnLCBjcmVhdGVTaGlwKDQpKVxuICAgICAgICAgICAgcGxhY2VTaGlwKDIsIDAsICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCgzKSlcbiAgICAgICAgICAgIHBsYWNlU2hpcCg2LCAwLCAnaG9yaXpvbnRhbCcsIGNyZWF0ZVNoaXAoMykpXG4gICAgICAgICAgICBwbGFjZVNoaXAoOSwgMiwgJ3ZlcnRpY2FsJywgY3JlYXRlU2hpcCgyKSlcbiAgICAgICAgICAgIHBsYWNlU2hpcCg5LCA2LCAndmVydGljYWwnLCBjcmVhdGVTaGlwKDIpKVxuICAgICAgICAgICAgcGxhY2VTaGlwKDksIDksICd2ZXJ0aWNhbCcsIGNyZWF0ZVNoaXAoMSkpXG4gICAgICAgICAgICBwbGFjZVNoaXAoNywgOSwgJ3ZlcnRpY2FsJywgY3JlYXRlU2hpcCgxKSlcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICBwbGFjZVNoaXAoMiwgMCwgJ3ZlcnRpY2FsJywgY3JlYXRlU2hpcCg0KSlcbiAgICAgICAgICAgIHBsYWNlU2hpcCg3LCAxLCAndmVydGljYWwnLCBjcmVhdGVTaGlwKDQpKVxuICAgICAgICAgICAgcGxhY2VTaGlwKDIsIDUsICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCgzKSlcbiAgICAgICAgICAgIHBsYWNlU2hpcCg2LCA3LCAndmVydGljYWwnLCBjcmVhdGVTaGlwKDMpKVxuICAgICAgICAgICAgcGxhY2VTaGlwKDEsIDksICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCgyKSlcbiAgICAgICAgICAgIHBsYWNlU2hpcCgyLCA3LCAnaG9yaXpvbnRhbCcsIGNyZWF0ZVNoaXAoMikpXG4gICAgICAgICAgICBwbGFjZVNoaXAoOSwgNiwgJ3ZlcnRpY2FsJywgY3JlYXRlU2hpcCgxKSlcbiAgICAgICAgICAgIHBsYWNlU2hpcCg4LCA5LCAndmVydGljYWwnLCBjcmVhdGVTaGlwKDEpKVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgOTpcbiAgICAgICAgICAgIHBsYWNlU2hpcCgwLCAwLCAnaG9yaXpvbnRhbCcsIGNyZWF0ZVNoaXAoNCkpXG4gICAgICAgICAgICBwbGFjZVNoaXAoNSwgMiwgJ3ZlcnRpY2FsJywgY3JlYXRlU2hpcCgxKSlcbiAgICAgICAgICAgIHBsYWNlU2hpcCgyLCA2LCAndmVydGljYWwnLCBjcmVhdGVTaGlwKDEpKVxuICAgICAgICAgICAgcGxhY2VTaGlwKDAsIDgsICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCgzKSlcbiAgICAgICAgICAgIHBsYWNlU2hpcCg0LCA1LCAndmVydGljYWwnLCBjcmVhdGVTaGlwKDQpKVxuICAgICAgICAgICAgcGxhY2VTaGlwKDcsIDQsICdob3Jpem9udGFsJywgY3JlYXRlU2hpcCgyKSlcbiAgICAgICAgICAgIHBsYWNlU2hpcCg2LCA2LCAnaG9yaXpvbnRhbCcsIGNyZWF0ZVNoaXAoMikpXG4gICAgICAgICAgICBwbGFjZVNoaXAoNywgOCwgJ2hvcml6b250YWwnLCBjcmVhdGVTaGlwKDMpKVxuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHJlY2VpdmVBdHRhY2sgPSAoY29sdW1uLCByb3cpID0+IHtcbiAgICAgICAgZ2FtZUJvYXJkW2NvbHVtbl1bcm93XS5oYXNCZWVuSGl0ID0gdHJ1ZVxuICAgIH1cblxuICAgIGNvbnN0IGNoZWNrSWZPZmZMaW1pdFpvbmVXYXNDb3JyZWN0bHlJbXBsZW1lbnRlZCA9IChzaGlwTGVuZ3RoKSA9PlxuICAgICAgICBnYW1lQm9hcmQuZmxhdCgpLmZpbHRlcigoZWxlbWVudCkgPT4gZWxlbWVudC5vZmZMaW1pdHMgPT09IHRydWUpXG4gICAgICAgICAgICAubGVuZ3RoID09PVxuICAgICAgICBzaGlwTGVuZ3RoICsgMlxuICAgIC8vIGFkZGluZyBzaGlwTGVuZ3RoIHBsdXMgdHdvIGJlY2F1c2UgZm9yIGV2ZXJ5IGluY3JlYXNlIGluIHRoZSBzaXplIG9mIHNoaXAsIHRoZSB6b25lcyBjb3ZlcmVkIGluY3JlYXNlIGJ5IDIgdW5pdHNcblxuICAgICBcbiAgICBjb25zdCBjaGVja0lmQm9hcmRIYXNCZWVuRnVsbHlQb3B1bGF0ZWQgPSAoKSA9PiB7XG5cbiAgICAgICAgY29uc3QgZmxhdHRlbmVkR2FtZUJvYXJkID0gZ2FtZUJvYXJkLmZsYXQoKVxuXG4gICAgICAgIGxldCBudW1PZlNoaXBDZWxscyA9IDBcblxuICAgICAgICBmbGF0dGVuZWRHYW1lQm9hcmQuZm9yRWFjaCgobG9jYXRpb24pID0+IHtcblxuICAgICAgICAgICAgaWYobG9jYXRpb24uaXNTaGlwKXtcbiAgICAgICAgICAgICAgICBudW1PZlNoaXBDZWxscyArPSAxXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgcmV0dXJuIG51bU9mU2hpcENlbGxzID09PSAyMFxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIGNsZWFyQm9hcmQsXG4gICAgICAgIGNoZWNrSWZMb2NhdGlvbklzQVNoaXBPck9mZkxpbWl0cyxcbiAgICAgICAgY2hlY2tJZk9mZkxpbWl0Wm9uZVdhc0NvcnJlY3RseUltcGxlbWVudGVkLFxuICAgICAgICBnZXRMb2NhdGlvbixcbiAgICAgICAgcmVjZWl2ZUF0dGFjayxcbiAgICAgICAgY2hlY2tJZkFsbFNoaXBzSGF2ZVN1bmssXG4gICAgICAgIHBsYWNlU2hpcCxcbiAgICAgICAgcmFuZG9tbHlQbGFjZVNoaXBzLFxuICAgICAgICBtYWtlUmFuZG9tQ29vcmRpbmF0ZXMsXG4gICAgICAgIGNoZWNrSWZCb2FyZEhhc0JlZW5GdWxseVBvcHVsYXRlZCxcbiAgICAgICAgcmFuZG9tRmxlZXQsXG4gICAgICAgIGdhbWVCb2FyZCxcbiAgICAgICAgaXNTdGFydEFsbG93ZWQgOiB7XG4gICAgICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlzU3RhcnRBbGxvd2VkXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0KHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgaXNTdGFydEFsbG93ZWQgPSB2YWx1ZVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxubW9kdWxlLmV4cG9ydHMgPSBjcmVhdGVHYW1lQm9hcmQiLCJjb25zdCBjcmVhdGVQbGF5ZXIgPSAobmFtZSA9ICdwbGF5ZXInKSA9PiB7XG5cbiAgICBsZXQgdHVybiA9IGZhbHNlXG4gICAgY29uc3QgZ2V0TmFtZSA9ICgpID0+IG5hbWVcblxuICAgIGNvbnN0IGF0dGFjayA9IChjb2x1bW4sIHJvdywgeyBnZXRMb2NhdGlvbiwgcmVjZWl2ZUF0dGFjayB9KSA9PiB7XG4gICAgICAgIGNvbnN0IGxvY2F0aW9uID0gZ2V0TG9jYXRpb24oY29sdW1uLCByb3cpXG4gICAgICAgIGlmIChsb2NhdGlvbi5oYXNCZWVuSGl0ID09PSBmYWxzZSB8fCAobG9jYXRpb24uaXNTaGlwICYmIGxvY2F0aW9uLmdldFN0YXR1cygpLmluY2x1ZGVzKCd1bmhpdCcpID09PSBmYWxzZSkpIHtcbiAgICAgICAgICAgIHJlY2VpdmVBdHRhY2soY29sdW1uLCByb3cpXG4gICAgICAgICAgICBpZihsb2NhdGlvbi5oaXQpe1xuXG4gICAgICAgICAgICAgICAgbG9jYXRpb24uaGl0KGxvY2F0aW9uLnBvc2l0aW9uKVxuICAgICAgICAgICAgICAgIHJldHVybiBcIllvdSBoaXQgYSBzaGlwIVwiXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gXCJJdCdzIGEgaGl0IVwiXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gJ1lvdSBoYXZlIGFscmVhZHkgaGl0IHRoaXMgc3BvdCEnXG4gICAgfVxuXG4gICAgY29uc3QgaXNUdXJuID0gKGVuZW15KSA9PiB7XG4gICAgICAgIHR1cm4gPSB0cnVlXG4gICAgICAgIGVuZW15LnR1cm4uc2V0KGZhbHNlKVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIGdldE5hbWUsXG4gICAgICAgIGF0dGFjayxcbiAgICAgICAgdHVybjoge1xuICAgICAgICAgICAgZ2V0ICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHVybjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQgKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdHVybiA9IHZhbHVlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgaXNUdXJuLFxuICAgICAgICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY3JlYXRlUGxheWVyXG4iLCJjb25zdCBjcmVhdGVTaGlwID0gKGxlbmd0aCwgbmFtZSA9ICdzaGlwJykgPT4ge1xuXG4gICAgY29uc3QgZG9tVGFyZ2V0cyA9IFtdXG5cbiAgICBjb25zdCBzdGF0dXMgPSBBcnJheShsZW5ndGgpLmZpbGwoJ3VuaGl0JylcblxuICAgIGNvbnN0IGdldExlbmd0aCA9ICgpID0+IHN0YXR1cy5sZW5ndGhcblxuICAgIGNvbnN0IGdldFN0YXR1cyA9ICgpID0+IHN0YXR1c1xuXG4gICAgY29uc3QgaGl0ID0gKHBvc2l0aW9uKSA9PiB7XG4gICAgICAgIGlmIChwb3NpdGlvbiA8IGxlbmd0aCkge1xuICAgICAgICAgICAgc3RhdHVzW3Bvc2l0aW9uXSA9ICdoaXQnXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBnZXROYW1lID0gKCkgPT4gIG5hbWVcblxuICAgIGNvbnN0IGlzU3VuayA9ICgpID0+IHN0YXR1cy5ldmVyeSgocG9zaXRpb24pID0+IHBvc2l0aW9uID09PSAnaGl0JylcblxuICAgIHJldHVybiB7XG4gICAgICAgIGdldE5hbWUsXG4gICAgICAgIGdldExlbmd0aCxcbiAgICAgICAgaXNTdW5rLFxuICAgICAgICBoaXQsXG4gICAgICAgIGdldFN0YXR1cyxcbiAgICAgICAgZG9tVGFyZ2V0cyxcbiAgICAgICAgaGFzQmVlbkhpdDogZmFsc2UsXG4gICAgICAgIG9mZkxpbWl0czogdHJ1ZSxcbiAgICAgICAgaXNTaGlwOiB0cnVlLFxuICAgIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjcmVhdGVTaGlwXG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbl9fd2VicGFja19yZXF1aXJlX18ubiA9IChtb2R1bGUpID0+IHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0KCkgPT4gKG1vZHVsZVsnZGVmYXVsdCddKSA6XG5cdFx0KCkgPT4gKG1vZHVsZSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLyogZXNsaW50LWRpc2FibGUgaW1wb3J0L25vLW11dGFibGUtZXhwb3J0cyAqL1xuLyogZXNsaW50LWRpc2FibGUgY29uc2lzdGVudC1yZXR1cm4gKi9cbi8qIGVzbGludC1kaXNhYmxlIGltcG9ydC9uby1jeWNsZSAqL1xuLyogZXNsaW50LWRpc2FibGUgbm8tZWxzZS1yZXR1cm4gKi9cbmltcG9ydCB7cmVuZGVyQXR0YWNrUDIgfSBmcm9tICcuL2RvbSdcblxubGV0IHdhc0hpdCA9IGZhbHNlO1xubGV0IHN0YXR1cyA9IGZhbHNlO1xubGV0IGxhc3RIaXRQb3MgPSBbXTtcbmxldCBmaXJzdEhpdFBvcyA9IFtdO1xubGV0IHNlY29uZEhpdFBvcyA9IFtdO1xubGV0IHN1cnJvdW5kaW5nUG9zID0gW107XG5sZXQgYXR0YWNrRGlyZWN0aW9uO1xuXG4vLyBnZXQgcG9zIG9mIGF0dGFjayBiYXNlZCBvbiBkaXJlY3Rpb25cbmZ1bmN0aW9uIGF0dGFja1Rvd2FyZHMoZGlyKSB7XG4gIGlmIChkaXIgPT09IFwibGVmdFwiKSB7XG4gICAgYXR0YWNrRGlyZWN0aW9uID0gXCJsZWZ0XCI7XG4gICAgcmV0dXJuIFtsYXN0SGl0UG9zWzBdLCBsYXN0SGl0UG9zWzFdIC0gMV07XG4gIH1cbiAgaWYgKGRpciA9PT0gXCJyaWdodFwiKSB7XG4gICAgYXR0YWNrRGlyZWN0aW9uID0gXCJyaWdodFwiO1xuICAgIHJldHVybiBbbGFzdEhpdFBvc1swXSwgbGFzdEhpdFBvc1sxXSArIDFdO1xuICB9XG4gIGlmIChkaXIgPT09IFwiZG93blwiKSB7XG4gICAgYXR0YWNrRGlyZWN0aW9uID0gXCJkb3duXCI7XG4gICAgcmV0dXJuIFtsYXN0SGl0UG9zWzBdICsgMSwgbGFzdEhpdFBvc1sxXV07XG4gIH1cbiAgaWYgKGRpciA9PT0gXCJ1cFwiKSB7XG4gICAgYXR0YWNrRGlyZWN0aW9uID0gXCJ1cFwiO1xuICAgIHJldHVybiBbbGFzdEhpdFBvc1swXSAtIDEsIGxhc3RIaXRQb3NbMV1dO1xuICB9XG59XG5cbmZ1bmN0aW9uIHNldFdhc0hpdCh2YWx1ZSwgc3RhdCwgcG9zMSwgcG9zMikge1xuICB3YXNIaXQgPSB2YWx1ZTtcbiAgaWYgKHN0YXQgIT09IHVuZGVmaW5lZCkgc3RhdHVzID0gc3RhdDtcbiAgaWYgKHBvczEgIT09IHVuZGVmaW5lZCkgbGFzdEhpdFBvcyA9IFtwb3MxLCBwb3MyXTtcbiAgaWYgKGZpcnN0SGl0UG9zLmxlbmd0aCA9PT0gMCAmJiBwb3MxICE9PSB1bmRlZmluZWQpIGZpcnN0SGl0UG9zID0gW3BvczEsIHBvczJdO1xuICBlbHNlIGlmIChcbiAgICBmaXJzdEhpdFBvcy5sZW5ndGggIT09IDAgJiZcbiAgICBzZWNvbmRIaXRQb3MubGVuZ3RoID09PSAwICYmXG4gICAgcG9zMSAhPT0gdW5kZWZpbmVkXG4gIClcbiAgICBzZWNvbmRIaXRQb3MgPSBbcG9zMSwgcG9zMl07XG59XG5mdW5jdGlvbiBnZXRXYXNIaXQoKSB7XG4gIHJldHVybiBbd2FzSGl0LCBsYXN0SGl0UG9zLCBzdGF0dXNdO1xufVxuXG5mdW5jdGlvbiByZWdpc3RlclN1cnJvdW5kaW5nUG9zKHBvczEsIHBvczIpIHtcbiAgc3Vycm91bmRpbmdQb3MgPSBbXTtcbiAgaWYgKHBvczIgIT09IDApIHN1cnJvdW5kaW5nUG9zLnB1c2goW3BvczEsIHBvczIgLSAxXSk7XG4gIGlmIChwb3MyICE9PSA5KSBzdXJyb3VuZGluZ1Bvcy5wdXNoKFtwb3MxLCBwb3MyICsgMV0pO1xuICBpZiAocG9zMSAhPT0gMCkgc3Vycm91bmRpbmdQb3MucHVzaChbcG9zMSAtIDEsIHBvczJdKTtcbiAgaWYgKHBvczEgIT09IDkpIHN1cnJvdW5kaW5nUG9zLnB1c2goW3BvczEgKyAxLCBwb3MyXSk7XG4gIHJldHVybiBzdXJyb3VuZGluZ1Bvcztcbn1cblxuZnVuY3Rpb24gYWlQbGF5KHJlcGVhdCwgcDEsIHAyLCBpc1N1bmssIHBsYXllckJvYXJkLCBlbmVteUJvYXJkKSB7XG4gIGxldCBwb3M7IFxuICBpZiAoaXNTdW5rID09PSB0cnVlKSB7XG4gICAgbGFzdEhpdFBvcyA9IFtdO1xuICAgIGZpcnN0SGl0UG9zID0gW107XG4gICAgc2Vjb25kSGl0UG9zID0gW107XG4gICAgc3Vycm91bmRpbmdQb3MgPSBbXTtcbiAgICB3YXNIaXQgPSBmYWxzZTtcbiAgICBzdGF0dXMgPSBmYWxzZTtcbiAgICBhdHRhY2tEaXJlY3Rpb24gPSBcIlwiO1xuICB9XG4gIGlmICghc3RhdHVzICYmICF3YXNIaXQpIHtcbiAgICBwb3MgPSBwbGF5ZXJCb2FyZC5tYWtlUmFuZG9tQ29vcmRpbmF0ZXMoKVxuXG4gICAgcmV0dXJuIHJlbmRlckF0dGFja1AyKHAxLCBwMiwgcG9zWzBdLCBwb3NbMV0sIHBsYXllckJvYXJkLCBlbmVteUJvYXJkKTtcbiAgfSBlbHNlIGlmIChzZWNvbmRIaXRQb3MubGVuZ3RoICE9PSAwICYmIHdhc0hpdCAmJiAhcmVwZWF0KSB7XG4gICAgbGV0IG5ld1BvcztcbiAgICBpZiAoZmlyc3RIaXRQb3NbMF0gPT09IHNlY29uZEhpdFBvc1swXSAtIDEpIG5ld1BvcyA9IGF0dGFja1Rvd2FyZHMoXCJkb3duXCIpO1xuICAgIGlmIChmaXJzdEhpdFBvc1swXSA9PT0gc2Vjb25kSGl0UG9zWzBdICsgMSkgbmV3UG9zID0gYXR0YWNrVG93YXJkcyhcInVwXCIpO1xuICAgIGlmIChmaXJzdEhpdFBvc1sxXSA9PT0gc2Vjb25kSGl0UG9zWzFdIC0gMSkgbmV3UG9zID0gYXR0YWNrVG93YXJkcyhcInJpZ2h0XCIpO1xuICAgIGlmIChmaXJzdEhpdFBvc1sxXSA9PT0gc2Vjb25kSGl0UG9zWzFdICsgMSkgbmV3UG9zID0gYXR0YWNrVG93YXJkcyhcImxlZnRcIik7XG4gICAgaWYgKG5ld1Bvc1swXSA+PSAwICYmIG5ld1Bvc1swXSA8PSA5ICYmIG5ld1Bvc1sxXSA+PSAwICYmIG5ld1Bvc1sxXSA8PSA5KVxuICAgICAgcmV0dXJuIHJlbmRlckF0dGFja1AyKHAxLCBwMiwgbmV3UG9zWzBdLCBuZXdQb3NbMV0sIHBsYXllckJvYXJkLCBlbmVteUJvYXJkKTtcbiAgfSBlbHNlIGlmIChzZWNvbmRIaXRQb3MubGVuZ3RoICE9PSAwICYmIHN0YXR1cyAmJiAhd2FzSGl0KSB7XG4gICAgbGFzdEhpdFBvcyA9IGZpcnN0SGl0UG9zO1xuICAgIHNlY29uZEhpdFBvcyA9IFtdO1xuICAgIGxldCBuZXdQb3M7XG4gICAgaWYgKGF0dGFja0RpcmVjdGlvbiA9PT0gXCJ1cFwiKSBuZXdQb3MgPSBhdHRhY2tUb3dhcmRzKFwiZG93blwiKTtcbiAgICBpZiAoYXR0YWNrRGlyZWN0aW9uID09PSBcImRvd25cIikgbmV3UG9zID0gYXR0YWNrVG93YXJkcyhcInVwXCIpO1xuICAgIGlmIChhdHRhY2tEaXJlY3Rpb24gPT09IFwicmlnaHRcIikgbmV3UG9zID0gYXR0YWNrVG93YXJkcyhcImxlZnRcIik7XG4gICAgaWYgKGF0dGFja0RpcmVjdGlvbiA9PT0gXCJsZWZ0XCIpIG5ld1BvcyA9IGF0dGFja1Rvd2FyZHMoXCJyaWdodFwiKTtcbiAgICBpZiAobmV3UG9zWzBdID49IDAgJiYgbmV3UG9zWzBdIDw9IDkgJiYgbmV3UG9zWzFdID49IDAgJiYgbmV3UG9zWzFdIDw9IDkpXG4gICAgICByZXR1cm4gcmVuZGVyQXR0YWNrUDIocDEsIHAyLCBuZXdQb3NbMF0sIG5ld1Bvc1sxXSwgcGxheWVyQm9hcmQsIGVuZW15Qm9hcmQpO1xuICB9IGVsc2UgaWYgKHN0YXR1cykge1xuICAgIGlmIChzdXJyb3VuZGluZ1Bvcy5sZW5ndGggPT09IDApXG4gICAgICByZWdpc3RlclN1cnJvdW5kaW5nUG9zKGxhc3RIaXRQb3NbMF0sIGxhc3RIaXRQb3NbMV0pO1xuICAgIGlmIChzdXJyb3VuZGluZ1Bvcy5sZW5ndGggPT09IDAgJiYgc3RhdHVzID09PSB0cnVlKVxuICAgICAgcmVnaXN0ZXJTdXJyb3VuZGluZ1BvcyhmaXJzdEhpdFBvc1swXSwgZmlyc3RIaXRQb3NbMV0pO1xuICAgIGNvbnN0IG5ld1BvcyA9IHN1cnJvdW5kaW5nUG9zLnBvcCgpO1xuICAgIHJldHVybiByZW5kZXJBdHRhY2tQMihwMSwgcDIsIG5ld1Bvc1swXSwgbmV3UG9zWzFdLCBwbGF5ZXJCb2FyZCwgZW5lbXlCb2FyZCk7XG4gIH1cbn1cblxuZXhwb3J0IHsgYWlQbGF5LCBnZXRXYXNIaXQsIHNldFdhc0hpdCwgbGFzdEhpdFBvcywgc3Vycm91bmRpbmdQb3MgfTtcblxuIiwiLyogZXNsaW50LWRpc2FibGUgaW1wb3J0L25vLWN5Y2xlICovXG4vKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvbm8tbXV0YWJsZS1leHBvcnRzICovXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1yZXR1cm4tYXNzaWduICovXG5pbXBvcnQge3JlbmRlclBsYXllclNoaXBzfSBmcm9tICcuL2RvbSdcbmltcG9ydCBjcmVhdGVTaGlwIGZyb20gJy4vc2hpcC9zaGlwJ1xuXG5sZXQgdG90YWxBbW91bnRTaGlwcyA9IDBcblxuZnVuY3Rpb24gc2hpcERyYWcoc2hpcE5hbWUsIHBsYXllckJvYXJkKSB7XG4gICAgbGV0IGFtb3VudExlZnQgPSAyXG5cbiAgICBjb25zdCBzaGlwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzaGlwTmFtZSlcbiAgICBjb25zdCBib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpXG4gICAgY29uc3QgY2VsbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucGxheWVyLWJvYXJkID4gLmNlbGwnKVxuICAgIGNvbnN0IGNoaWxkID0gc2hpcC5jaGlsZE5vZGVzXG4gICAgbGV0IGRyYWdTZWxlY3Rpb247XG4gICAgbGV0IG9mZnNldDtcbiAgICBsZXQgZGlyID0gXCJob3Jpem9udGFsXCJcblxuICAgIGlmKGNoaWxkWzBdKSBjaGlsZFswXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgKCkgPT4gKG9mZnNldCA9IDApKVxuICAgIGlmKGNoaWxkWzFdKSBjaGlsZFsxXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgKCkgPT4gKG9mZnNldCA9IC0xKSlcbiAgICBpZihjaGlsZFsyXSkgY2hpbGRbMl0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsICgpID0+IChvZmZzZXQgPSAtMikpXG4gICAgaWYoY2hpbGRbM10pIGNoaWxkWzNdLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCAoKSA9PiAob2Zmc2V0ID0gLTMpKVxuXG4gICAgZnVuY3Rpb24gY2hhbmdlRGlyKGUpIHtcbiAgICAgICAgaWYoZGlyID09PSBcImhvcml6b250YWxcIikge1xuICAgICAgICAgICAgZGlyID0gXCJ2ZXJ0aWNhbFwiXG4gICAgICAgICAgICBlLnRhcmdldC5wYXJlbnROb2RlLmNsYXNzTGlzdC50b2dnbGUoXCJyb3RhdGVkXCIpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkaXIgPSBcImhvcml6b250YWxcIjtcbiAgICAgICAgICAgIGUudGFyZ2V0LnBhcmVudE5vZGUuY2xhc3NMaXN0LnRvZ2dsZShcInJvdGF0ZWRcIilcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNoaXAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiBjaGFuZ2VEaXIoZSkpXG5cbiAgICBzaGlwLmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnc3RhcnRcIiwgKCkgPT4ge1xuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgMTA7IGkgKz0gMSl7XG4gICAgICAgICAgICBwbGF5ZXJCb2FyZC5nYW1lQm9hcmRbaV0uZm9yRWFjaCgoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmKGUub2ZmTGltaXRzIHx8IGUuaXNTaGlwKVxuICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5wbGF5ZXItYm9hcmQgPiAuY2VsbFtjb2x1bW49JyR7ZS5jb2x1bW59J11bcm93PScke2Uucm93fSddYCkuY2xhc3NMaXN0LnRvZ2dsZShcIm5vdC1hdmFpbGFibGVcIilcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9KVxuXG4gICAgc2hpcC5hZGRFdmVudExpc3RlbmVyKCdkcmFnZW5kJywgKCkgPT4ge1xuXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubm90LWF2YWlsYWJsZVwiKS5mb3JFYWNoKChlKSA9PiBlLmNsYXNzTGlzdC5yZW1vdmUoXCJub3QtYXZhaWxhYmxlXCIpKVxuXG4gICAgICAgIGlmKGRyYWdTZWxlY3Rpb24gPT09IC0xKSByZXR1cm5cblxuICAgICAgICBsZXQgcG9zMTtcbiAgICAgICAgbGV0IHBvczI7XG4gICAgICAgIGxldCBwb3MgPSBgJHsgIGRyYWdTZWxlY3Rpb259YFxuXG4gICAgICAgIGlmKGRyYWdTZWxlY3Rpb24gPCAxMCkge1xuICAgICAgICAgICAgcG9zMSA9IDA7XG4gICAgICAgICAgICBwb3MyID0gZHJhZ1NlbGVjdGlvblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcG9zID0gcG9zLnNwbGl0KFwiXCIpXG4gICAgICAgICAgICBwb3MxID0gcG9zWzBdICogMVxuICAgICAgICAgICAgcG9zMiA9IHBvc1sxXSAqIDFcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKGRpciA9PT0gXCJob3Jpem9udGFsXCIpIHBvczIgKz0gb2Zmc2V0XG4gICAgICAgIGlmKGRpciA9PT0gXCJ2ZXJ0aWNhbFwiKSBwb3MxICs9IG9mZnNldFxuXG4gICAgICAgIGlmKHBvczIgPCAwKSByZXR1cm5cblxuICAgICAgICBpZihzaGlwTmFtZSA9PT0gXCIuc2hpcC0xXCIpe1xuICAgICAgICAgICAgaWYocGxheWVyQm9hcmQucGxhY2VTaGlwKHBvczIsIHBvczEsIGRpciwgY3JlYXRlU2hpcCgxKSkgPT09IGZhbHNlKSByZXR1cm5cbiAgICAgICAgICAgIH1cbiAgICAgICAgaWYoc2hpcE5hbWUgPT09IFwiLnNoaXAtMlwiKXtcblxuICAgICAgICAgICAgaWYocGxheWVyQm9hcmQucGxhY2VTaGlwKHBvczIsIHBvczEsIGRpciwgY3JlYXRlU2hpcCgyKSkgPT09IGZhbHNlKSByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICBpZihzaGlwTmFtZSA9PT0gXCIuc2hpcC0zXCIpIHtcblxuICAgICAgICAgICAgaWYocGxheWVyQm9hcmQucGxhY2VTaGlwKHBvczIsIHBvczEsIGRpciwgY3JlYXRlU2hpcCgzKSkgPT09IGZhbHNlKSByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICBpZihzaGlwTmFtZSA9PT0gXCIuc2hpcC00XCIpIHtcblxuICAgICAgICAgICAgaWYocGxheWVyQm9hcmQucGxhY2VTaGlwKHBvczIsIHBvczEsIGRpciwgY3JlYXRlU2hpcCg0KSkgPT09IGZhbHNlKSByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIHJlbmRlclBsYXllclNoaXBzKHBsYXllckJvYXJkKVxuXG4gICAgICAgIGFtb3VudExlZnQgLT0gMVxuICAgICAgICB0b3RhbEFtb3VudFNoaXBzICs9IDFcblxuICAgICAgICBpZih0b3RhbEFtb3VudFNoaXBzID09PSA4KSBwbGF5ZXJCb2FyZC5pc1N0YXJ0QWxsb3dlZC5zZXQodHJ1ZSlcbiAgICAgICAgc2hpcC5wYXJlbnROb2RlLmZpcnN0Q2hpbGQudGV4dENvbnRlbnQgPSBgJHthbW91bnRMZWZ0fXhgXG4gICAgICAgIGlmKGFtb3VudExlZnQgPT09IDApIHNoaXAucGFyZW50Tm9kZS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCIgXG4gICAgICAgIGlmKHBsYXllckJvYXJkLmNoZWNrSWZCb2FyZEhhc0JlZW5GdWxseVBvcHVsYXRlZCgpKSB7XG4gICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiYm9keSA+IG1haW4gPiBkaXYucGxheWVyID4gZGl2Om50aC1jaGlsZCg0KVwiKVxuICAgICAgICAgICAgY29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPVwibm9uZVwiXG4gICAgICAgICAgICBjb25zdCByYW5kb21CdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucmFuZG9taXplJylcbiAgICAgICAgICAgIHJhbmRvbUJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCJcbiAgICAgICAgICAgIHBsYXllckJvYXJkLmlzU3RhcnRBbGxvd2VkLnNldCh0cnVlKVxuICAgICAgICB9XG4gICAgfSlcblxuICAgIGNlbGxzLmZvckVhY2goKGUsIGkpID0+IHtcbiAgICAgICAgZS5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ292ZXJcIiwgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgICAgICBkcmFnU2VsZWN0aW9uID0gaSBcbiAgICAgICAgfSlcbiAgICB9KVxuXG4gICAgYm9keS5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ2VudGVyXCIsICgpID0+IHtcbiAgICAgICAgZHJhZ1NlbGVjdGlvbiA9IC0xXG4gICAgfSlcbn1cblxuZXhwb3J0IHtzaGlwRHJhZywgdG90YWxBbW91bnRTaGlwc30iLCIvKiBlc2xpbnQtZGlzYWJsZSBuby11c2UtYmVmb3JlLWRlZmluZSAqL1xuLyogZXNsaW50LWRpc2FibGUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzICovXG4vKiBlc2xpbnQtZGlzYWJsZSBjb25zaXN0ZW50LXJldHVybiAqL1xuLyogZXNsaW50LWRpc2FibGUgaW1wb3J0L25vLWN5Y2xlICovXG4vKiBlc2xpbnQtZGlzYWJsZSBkZWZhdWx0LWNhc2UgKi9cbmltcG9ydCB7IGFpUGxheSwgc2V0V2FzSGl0IH0gZnJvbSAnLi9ib3QnXG5pbXBvcnQgeyBzaGlwRHJhZyB9IGZyb20gJy4vZHJhZy1hbmQtZHJvcCdcblxuLy8gY3JlYXRlcyBhIGRlbGF5IHRvIGJlIHVzZWQgaW4gYW4gYXN5bmMgZnVuY3Rpb25cbmZ1bmN0aW9uIGRlbGF5KGRlbGF5SW5Ncykge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHJlc29sdmUoMilcbiAgICAgICAgfSwgZGVsYXlJbk1zKVxuICAgIH0pXG59XG5cbmNvbnN0IGNoZWNrSWZHYW1lT3ZlciA9IChwbGF5ZXJCb2FyZCwgZW5lbXlCb2FyZCkgPT4ge1xuICAgIGlmIChwbGF5ZXJCb2FyZC5jaGVja0lmQWxsU2hpcHNIYXZlU3VuaygpKSB7XG4gICAgICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsJylcbiAgICAgICAgY29uc3QgbW9kYWxXaW5uZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwtY29udGVudCA+IHAnKVxuICAgICAgICBjb25zdCBwbGF5QWdhaW5CdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAgICAgJy5tb2RhbC1jb250ZW50ID4gYnV0dG9uJ1xuICAgICAgICApXG5cbiAgICAgICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9ICdibG9jaydcbiAgICAgICAgcGxheUFnYWluQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKClcbiAgICAgICAgfSlcblxuICAgICAgICBtb2RhbFdpbm5lci50ZXh0Q29udGVudCA9ICdZb3UgbG9zZSEnXG4gICAgfVxuICAgIGlmIChlbmVteUJvYXJkLmNoZWNrSWZBbGxTaGlwc0hhdmVTdW5rKCkpIHtcbiAgICAgICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwnKVxuICAgICAgICBjb25zdCBtb2RhbFdpbm5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC1jb250ZW50ID4gcCcpXG4gICAgICAgIGNvbnN0IHBsYXlBZ2FpbkJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgICAgICAnLm1vZGFsLWNvbnRlbnQgPiBidXR0b24nXG4gICAgICAgIClcblxuICAgICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJ1xuICAgICAgICBtb2RhbFdpbm5lci50ZXh0Q29udGVudCA9ICdZb3Ugd2luISdcbiAgICAgICAgcGxheUFnYWluQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKClcbiAgICAgICAgfSlcbiAgICB9XG59XG5cbmNvbnN0IGVuYWJsZUN1cnNvciA9ICgpID0+IHtcbiAgICBjb25zdCBjZWxscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lbmVteS1ib2FyZCAuY2VsbCcpXG4gICAgY2VsbHMuZm9yRWFjaCgoY2VsbCkgPT4ge1xuICAgICAgICBjZWxsLnN0eWxlID0gJ2N1cnNvcjogcG9pbnRlcjsgcG9pbnRlci1ldmVudHM6IGluaXRpYWw7J1xuICAgIH0pXG59XG5cbmNvbnN0IGRpc2FibGVDdXJzb3IgPSAoKSA9PiB7XG4gICAgY29uc3QgY2VsbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZW5lbXktYm9hcmQgLmNlbGwnKVxuICAgIGNlbGxzLmZvckVhY2goKGNlbGwpID0+IHtcbiAgICAgICAgY2VsbC5zdHlsZSA9ICdjdXJzb3I6IG5vdC1hbGxvd2VkOyBwb2ludGVyLWV2ZW50czogbm9uZTsnXG4gICAgfSlcbn1cblxuY29uc3QgcmVuZGVyQXR0YWNrcyA9IGFzeW5jIChcbiAgICBwbGF5ZXIsXG4gICAgY29sdW1uLFxuICAgIHJvdyxcbiAgICBlbmVteUJvYXJkLFxuICAgIGh1bWFuLFxuICAgIGVuZW15LFxuICAgIHBsYXllckJvYXJkXG4pID0+IHtcbiAgICBjb25zdCBjZWxsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgYC4ke3BsYXllcn0tYm9hcmQgPiAuY2VsbFtjb2x1bW49JyR7Y29sdW1ufSddW3Jvdz0nJHtyb3d9J11gXG4gICAgKVxuXG4gICAgaWYgKGVuZW15Qm9hcmQuZ2V0TG9jYXRpb24oY29sdW1uLCByb3cpPy5pc1NoaXApIHtcbiAgICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKCdoaXQnKVxuICAgICAgICBlbmVteUJvYXJkLmdldExvY2F0aW9uKGNvbHVtbiwgcm93KS5kb21UYXJnZXRzLnB1c2goY2VsbClcbiAgICAgICAgaWYgKGVuZW15Qm9hcmQuZ2V0TG9jYXRpb24oY29sdW1uLCByb3cpLmlzU3VuaygpKSB7XG4gICAgICAgICAgICBlbmVteUJvYXJkXG4gICAgICAgICAgICAgICAgLmdldExvY2F0aW9uKGNvbHVtbiwgcm93KVxuICAgICAgICAgICAgICAgIC5kb21UYXJnZXRzLmZvckVhY2goKGUpID0+IGUuY2xhc3NMaXN0LmFkZCgnc3VuaycpKVxuICAgICAgICB9XG4gICAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNlbGwuY2xhc3NMaXN0LmFkZCgnbWlzcycpXG4gICAgZW5lbXkuaXNUdXJuKGh1bWFuKVxuICAgIGF3YWl0IGRlbGF5KDcwMClcblxuICAgIHJldHVybiBlbmVteUJvYXJkLmNoZWNrSWZBbGxTaGlwc0hhdmVTdW5rKClcbiAgICAgICAgPyBjaGVja0lmR2FtZU92ZXIocGxheWVyQm9hcmQsIGVuZW15Qm9hcmQpXG4gICAgICAgIDogYWlQbGF5KGZhbHNlLCBodW1hbiwgZW5lbXksIHVuZGVmaW5lZCwgcGxheWVyQm9hcmQsIGVuZW15Qm9hcmQpXG59XG5cbmNvbnN0IGhhbmRsZUF0dGFjayA9IChjb2x1bW4sIHJvdywgZW5lbXlCb2FyZCwgcGxheWVyKSA9PlxuICAgIHBsYXllci5hdHRhY2soY29sdW1uLCByb3csIGVuZW15Qm9hcmQpXG5cbmNvbnN0IGF0dGFja0VuZW15Q2VsbCA9IChcbiAgICBjb2x1bW4sXG4gICAgcm93LFxuICAgIGVuZW15Qm9hcmQsXG4gICAgcGxheWVyQm9hcmQsXG4gICAgcGxheWVyLFxuICAgIGVuZW15XG4pID0+IHtcbiAgICBoYW5kbGVBdHRhY2soY29sdW1uLCByb3csIGVuZW15Qm9hcmQsIHBsYXllcilcbiAgICByZW5kZXJBdHRhY2tzKCdlbmVteScsIGNvbHVtbiwgcm93LCBlbmVteUJvYXJkLCBwbGF5ZXIsIGVuZW15LCBwbGF5ZXJCb2FyZClcbn1cblxuLy8gcmVuZGVycyBhdHRhY2sgZm9yIHAyIChBSSlcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZW5kZXJBdHRhY2tQMihcbiAgICBwMSxcbiAgICBwMixcbiAgICBwb3MxLFxuICAgIHBvczIsXG4gICAgcGxheWVyQm9hcmQsXG4gICAgZW5lbXlCb2FyZFxuKSB7XG4gICAgbGV0IGlzU3VuayA9IGZhbHNlXG4gICAgY29uc3QgZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgIGAucGxheWVyLWJvYXJkID4gLmNlbGxbY29sdW1uPScke3BvczF9J11bcm93PScke3BvczJ9J11gXG4gICAgKVxuXG4gICAgY29uc3QgYXR0YWNrID0gcDIuYXR0YWNrKHBvczEsIHBvczIsIHBsYXllckJvYXJkKVxuXG4gICAgaWYgKGF0dGFjayA9PT0gJ1lvdSBoYXZlIGFscmVhZHkgaGl0IHRoaXMgc3BvdCEnKSB7XG4gICAgICAgIGNvbnN0IHJlcGVhdCA9IHRydWVcbiAgICAgICAgYWlQbGF5KHJlcGVhdCwgcDEsIHAyLCB1bmRlZmluZWQsIHBsYXllckJvYXJkLCBlbmVteUJvYXJkKVxuICAgIH1cbiAgICBpZiAoYXR0YWNrID09PSBcIkl0J3MgYSBoaXQhXCIpIHtcbiAgICAgICAgc2V0V2FzSGl0KGZhbHNlKVxuICAgICAgICBlLmNsYXNzTGlzdC5hZGQoJ21pc3MnKVxuICAgIH1cbiAgICBpZiAoYXR0YWNrID09PSAnWW91IGhpdCBhIHNoaXAhJykge1xuICAgICAgICBzZXRXYXNIaXQodHJ1ZSwgdHJ1ZSwgcG9zMSwgcG9zMilcbiAgICAgICAgZS5jbGFzc0xpc3QuYWRkKCdoaXQnKVxuICAgICAgICBwbGF5ZXJCb2FyZC5nZXRMb2NhdGlvbihwb3MxLCBwb3MyKS5kb21UYXJnZXRzLnB1c2goZSlcbiAgICAgICAgLy8gaWYgc2hpcCBpcyBzdW5rLCBhZGQgXCJzdW5rXCIgY2xhc3NcbiAgICAgICAgaWYgKHBsYXllckJvYXJkLmdldExvY2F0aW9uKHBvczEsIHBvczIpLmlzU3VuaygpKSB7XG4gICAgICAgICAgICBwbGF5ZXJCb2FyZFxuICAgICAgICAgICAgICAgIC5nZXRMb2NhdGlvbihwb3MxLCBwb3MyKVxuICAgICAgICAgICAgICAgIC5kb21UYXJnZXRzLmZvckVhY2goKGxvY2F0aW9uKSA9PlxuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5jbGFzc0xpc3QuYWRkKCdzdW5rJylcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICBpc1N1bmsgPSB0cnVlXG4gICAgICAgICAgICBpZiAocGxheWVyQm9hcmQuY2hlY2tJZkFsbFNoaXBzSGF2ZVN1bmsoKSA9PT0gdHJ1ZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gY2hlY2tJZkdhbWVPdmVyKHBsYXllckJvYXJkLCBlbmVteUJvYXJkKVxuICAgICAgICB9XG4gICAgICAgIGF3YWl0IGRlbGF5KDEwMDApXG4gICAgICAgIHJldHVybiBhaVBsYXkoZmFsc2UsIHAxLCBwMiwgaXNTdW5rLCBwbGF5ZXJCb2FyZCwgZW5lbXlCb2FyZClcbiAgICB9XG5cbiAgICBwMS5pc1R1cm4ocDIpIC8vIGdpdmVzIHR1cm4gdG8gUDFcbn1cbi8vIGh0dHBzOi8vanNtYW5pZmVzdC5jb20vdGhlLXB1Ymxpc2gtc3Vic2NyaWJlLXBhdHRlcm4taW4tamF2YXNjcmlwdC9cblxuZXhwb3J0IGNvbnN0IHB1YlN1YiA9ICgpID0+IHtcbiAgICBjb25zdCBzdWJzY3JpYmVycyA9IHt9XG5cbiAgICBmdW5jdGlvbiBwdWJsaXNoKGV2ZW50TmFtZSwgZGF0YSkge1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoc3Vic2NyaWJlcnNbZXZlbnROYW1lXSkpIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIHN1YnNjcmliZXJzW2V2ZW50TmFtZV0uZm9yRWFjaCgoY2FsbGJhY2spID0+IHtcbiAgICAgICAgICAgIGNhbGxiYWNrKGRhdGEpXG4gICAgICAgIH0pXG4gICAgfVxuICAgIGZ1bmN0aW9uIHN1YnNjcmliZShldmVudE5hbWUsIGNhbGxiYWNrKSB7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShzdWJzY3JpYmVbZXZlbnROYW1lXSkpIHtcbiAgICAgICAgICAgIHN1YnNjcmliZXJzW2V2ZW50TmFtZV0gPSBbXVxuICAgICAgICB9XG4gICAgICAgIHN1YnNjcmliZXJzW2V2ZW50TmFtZV0ucHVzaChjYWxsYmFjaylcbiAgICAgICAgY29uc3QgaW5kZXggPSBzdWJzY3JpYmVyc1tldmVudE5hbWVdLmxlbmd0aCAtIDFcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdW5zdWJzY3JpYmUoKSB7XG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlcnNbZXZlbnROYW1lXS5zcGxpY2UoaW5kZXgsIDEpXG4gICAgICAgICAgICB9LFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgcHVibGlzaCxcbiAgICAgICAgc3Vic2NyaWJlLFxuICAgIH1cbn1cblxuZXhwb3J0IGNvbnN0IHJlbmRlclBsYXllclNoaXBzID0gKHsgZ2V0TG9jYXRpb24gfSkgPT4ge1xuICAgIGNvbnN0IHBsYXllckJvYXJkQXJlYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5wbGF5ZXItYm9hcmQnKVxuXG4gICAgZm9yIChsZXQgY29sdW1uID0gMDsgY29sdW1uIDwgMTA7IGNvbHVtbiArPSAxKSB7XG4gICAgICAgIGZvciAobGV0IHJvdyA9IDA7IHJvdyA8IDEwOyByb3cgKz0gMSkge1xuICAgICAgICAgICAgY29uc3QgY2VsbCA9IHBsYXllckJvYXJkQXJlYS5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAgICAgICAgIGAuY2VsbDpudGgtY2hpbGQoJHtyb3cgKiAxMCArIGNvbHVtbiArIDF9KWBcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIGNlbGwuc2V0QXR0cmlidXRlKCdjb2x1bW4nLCBjb2x1bW4pXG4gICAgICAgICAgICBjZWxsLnNldEF0dHJpYnV0ZSgncm93Jywgcm93KVxuICAgICAgICAgICAgY29uc3QgbG9jYXRpb24gPSBnZXRMb2NhdGlvbihjb2x1bW4sIHJvdylcbiAgICAgICAgICAgIGlmIChsb2NhdGlvbi5pc1NoaXApIHtcbiAgICAgICAgICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoJ3NoaXAnKVxuICAgICAgICAgICAgICAgIGNlbGwuc2V0QXR0cmlidXRlKCdzaGlwLW5hbWUnLCBsb2NhdGlvbi5nZXROYW1lKCkpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVEcmFnQW5kRHJvcEZsZWV0KHBsYXllckJvYXJkKSB7XG4gICAgcmVuZGVyU2hpcFNlbGVjdCgxLCAxKVxuICAgIHJlbmRlclNoaXBTZWxlY3QoMiwgMilcbiAgICByZW5kZXJTaGlwU2VsZWN0KDMsIDMpXG4gICAgcmVuZGVyU2hpcFNlbGVjdCg0LCA0KVxuXG4gICAgZnVuY3Rpb24gcmVuZGVyU2hpcFNlbGVjdChpLCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgICAgICdib2R5ID4gbWFpbiA+IGRpdi5wbGF5ZXIgPiBkaXY6bnRoLWNoaWxkKDQpJ1xuICAgICAgICApXG4gICAgICAgIGNvbnN0IHNoaXBDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgICAgICBzaGlwQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3NoaXAtY29udGFpbmVyJylcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHNoaXBDb250YWluZXIpXG5cbiAgICAgICAgY29uc3Qgc2hpcEluZm8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJylcbiAgICAgICAgc2hpcEluZm8uY2xhc3NMaXN0LmFkZChgaW5mby0ke2l9YClcbiAgICAgICAgc2hpcEluZm8udGV4dENvbnRlbnQgPSAnMngnXG4gICAgICAgIHNoaXBDb250YWluZXIuYXBwZW5kQ2hpbGQoc2hpcEluZm8pXG5cbiAgICAgICAgY29uc3Qgc2hpcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgICAgIHNoaXAuY2xhc3NMaXN0LmFkZCgnc2hpcCcpXG4gICAgICAgIHNoaXAuY2xhc3NMaXN0LmFkZChgc2hpcC0ke2l9YClcbiAgICAgICAgc2hpcC5zZXRBdHRyaWJ1dGUoJ2RyYWdnYWJsZScsICd0cnVlJylcbiAgICAgICAgc2hpcENvbnRhaW5lci5hcHBlbmRDaGlsZChzaGlwKVxuXG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgbGVuZ3RoOyBqICs9IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IGNlbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgICAgICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKCdjZWxsJylcbiAgICAgICAgICAgIHNoaXAuYXBwZW5kQ2hpbGQoY2VsbClcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgNTsgaSArPSAxKSBzaGlwRHJhZyhgLnNoaXAtJHtpfWAsIHBsYXllckJvYXJkKVxufVxuXG5leHBvcnQgY29uc3QgYWRkTGlzdGVuZXJzVG9FbmVteUJvYXJkID0gKFxuICAgIHBsYXllckJvYXJkLFxuICAgIGVuZW15Qm9hcmQsXG4gICAgcGxheWVyLFxuICAgIGVuZW15LFxuICAgIHBzXG4pID0+IHtcbiAgICBjb25zdCBlbmVteUJvYXJkQXJlYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5lbmVteS1ib2FyZCcpXG5cbiAgICBmb3IgKGxldCBjb2x1bW4gPSAwOyBjb2x1bW4gPCAxMDsgY29sdW1uICs9IDEpIHtcbiAgICAgICAgZm9yIChsZXQgcm93ID0gMDsgcm93IDwgMTA7IHJvdyArPSAxKSB7XG4gICAgICAgICAgICAvLyBDcmVkaXRpbmcgZm9ybXVsYSB0byBjYWxjdWxhdGUgbnRoLWNoaWxkIHVzaW5nIG5lc3RlZCBsb29wOiBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy84ODcyNjYyL21hdGgtdG8tZGV0ZXJtaW5lLWl0ZW0taW5kZXgtYmFzZWQtb24tY29sLXJvdy1zZWxlY3Rpb24taW4tZ3JpZFxuICAgICAgICAgICAgY29uc3QgY2VsbCA9IGVuZW15Qm9hcmRBcmVhLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgICAgICAgICAgYC5jZWxsOm50aC1jaGlsZCgke3JvdyAqIDEwICsgY29sdW1uICsgMX0pYFxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgY2VsbC5zZXRBdHRyaWJ1dGUoJ2NvbHVtbicsIGNvbHVtbilcbiAgICAgICAgICAgIGNlbGwuc2V0QXR0cmlidXRlKCdyb3cnLCByb3cpXG5cbiAgICAgICAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgZGlzYWJsZUN1cnNvcigpXG4gICAgICAgICAgICAgICAgaWYgKHBsYXllckJvYXJkLmlzU3RhcnRBbGxvd2VkLmdldCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwbGF5ZXIudHVybi5nZXQoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHMucHVibGlzaCgnY2xpY2snLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXJCb2FyZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmVteUJvYXJkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmVteSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZGVsYXkoMTEwMCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcy5wdWJsaXNoKCdjbGljaycsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllckJvYXJkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZW15Qm9hcmQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZW15LFxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuYWJsZUN1cnNvcigpXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZEJ1dHRvbkxpc3RlbmVycyhwbGF5ZXJCb2FyZCkge1xuICAgIGNvbnN0IHJhbmRvbWl6ZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbi5yYW5kb21pemUnKVxuXG4gICAgcmFuZG9taXplQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBjb25zdCBzaGlwcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wbGF5ZXIgPiBkaXY6bnRoLWNoaWxkKDQpJylcbiAgICAgICAgc2hpcHMuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgICAgICBwbGF5ZXJCb2FyZC5yYW5kb21seVBsYWNlU2hpcHMoKVxuICAgICAgICBwbGF5ZXJCb2FyZC5pc1N0YXJ0QWxsb3dlZC5zZXQodHJ1ZSlcbiAgICAgICAgcmVuZGVyUGxheWVyU2hpcHMocGxheWVyQm9hcmQpXG4gICAgfSlcblxuICAgIGNvbnN0IHJlc2V0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYnV0dG9uLnJlc2V0JylcblxuICAgIHJlc2V0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKVxuICAgIH0pXG59XG5cbmV4cG9ydCBjb25zdCBhdHRhY2sgPSAoe1xuICAgIGNvbHVtbixcbiAgICByb3csXG4gICAgcGxheWVyQm9hcmQsXG4gICAgZW5lbXlCb2FyZCxcbiAgICBwbGF5ZXIsXG4gICAgZW5lbXksXG59KSA9PiB7XG4gICAgaWYgKCFwbGF5ZXIudHVybi5nZXQoKSB8fCAhcGxheWVyQm9hcmQuaXNTdGFydEFsbG93ZWQuZ2V0KCkpIHJldHVyblxuICAgIGF0dGFja0VuZW15Q2VsbChjb2x1bW4sIHJvdywgZW5lbXlCb2FyZCwgcGxheWVyQm9hcmQsIHBsYXllciwgZW5lbXkpXG59XG4iLCJpbXBvcnQgeyBhZGRMaXN0ZW5lcnNUb0VuZW15Qm9hcmQsIHJlbmRlclBsYXllclNoaXBzLCBwdWJTdWIsIGF0dGFjaywgY3JlYXRlRHJhZ0FuZERyb3BGbGVldCwgYWRkQnV0dG9uTGlzdGVuZXJzfSBmcm9tICcuL2RvbSdcblxuaW1wb3J0IGNyZWF0ZUdhbWVCb2FyZCBmcm9tICcuL2dhbWVib2FyZC9nYW1lYm9hcmQnXG5pbXBvcnQgY3JlYXRlUGxheWVyIGZyb20gJy4vcGxheWVyL3BsYXllcidcblxuY29uc3QgcGxheWVyQm9hcmQgPSBjcmVhdGVHYW1lQm9hcmQoKVxuY29uc3QgZW5lbXlCb2FyZCA9IGNyZWF0ZUdhbWVCb2FyZCgpXG5jb25zdCBwbGF5ZXIgPSBjcmVhdGVQbGF5ZXIoJ3BsYXllcicpXG5jb25zdCBjb21wdXRlciA9IGNyZWF0ZVBsYXllcignY29tcHV0ZXInKVxuXG5wbGF5ZXIuaXNUdXJuKGNvbXB1dGVyKVxuXG5hZGRCdXR0b25MaXN0ZW5lcnMocGxheWVyQm9hcmQpXG5cbmNyZWF0ZURyYWdBbmREcm9wRmxlZXQocGxheWVyQm9hcmQpXG5cbmVuZW15Qm9hcmQucmFuZG9tbHlQbGFjZVNoaXBzKClcblxuY29uc3QgcHMgPSBwdWJTdWIoKVxuXG5hZGRMaXN0ZW5lcnNUb0VuZW15Qm9hcmQocGxheWVyQm9hcmQsIGVuZW15Qm9hcmQsIHBsYXllciwgY29tcHV0ZXIsIHBzKVxuXG5wcy5zdWJzY3JpYmUoJ2NsaWNrJywgYXR0YWNrKVxuXG5yZW5kZXJQbGF5ZXJTaGlwcyhwbGF5ZXJCb2FyZCkiXSwibmFtZXMiOlsiY3JlYXRlU2hpcCIsIm1vZHVsZSIsImV4cG9ydHMiLCJlbXB0eUNlbGwiLCJoYXNCZWVuSGl0IiwiaXNTaGlwIiwib2ZmTGltaXRzIiwiaXNTdGFydEFsbG93ZWQiLCJpbml0aWFsaXplQm9hcmQiLCJnYW1lQm9hcmQiLCJBcnJheSIsImZpbGwiLCJtYXAiLCJjb2x1bW4iLCJyb3ciLCJjbGVhckJvYXJkIiwiZ2V0TG9jYXRpb24iLCJzZXRMb2NhdGlvbiIsInNoaXAiLCJPYmplY3QiLCJhc3NpZ24iLCJjcmVhdGVPZmZMaW1pdExvY2F0aW9uIiwidW5kZWZpbmVkIiwibG9jYXRpb24iLCJhZGRPZmZMaW1pdEFyZWFGb3JTaGlwcyIsImNoZWNrSWZMb2NhdGlvbklzQVNoaXBPck9mZkxpbWl0cyIsImRpcmVjdGlvbiIsInNoaXBMZW5ndGgiLCJpIiwicGxhY2VTaGlwIiwiZ2V0TGVuZ3RoIiwibGVuZ3RoIiwiY2hlY2tJZlJvd0Nvb3JkaW5hdGVJc1ZhbGlkIiwicG9zaXRpb24iLCJhZGRPZmZMaW1pdEFyZWFGb3JWZXJ0aWNhbGx5UG9zaXRpb25lZFNoaXAiLCJjaGVja0lmQ29sdW1uQ29vcmRpbmF0ZUlzVmFsaWQiLCJhZGRPZmZMaW1pdEFyZWFGb3JIb3Jpem9udGFsbHlQb3NpdGlvbmVkU2hpcCIsIm1ha2VSYW5kb21Db29yZGluYXRlcyIsInJhbmRvbUxvY2F0aW9uIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiZmxhdHRlbmVkR2FtZUJvYXJkIiwiZmxhdCIsImZvckVhY2giLCJlbGVtZW50IiwiYXZhaWxhYmlsaXR5IiwiYXZhaWxhYmxlU3BhY2VzIiwicmFuZG9tU2hpcCIsInBvczEiLCJwb3MyIiwiZGlyIiwicm91bmQiLCJjaGVja0lmT2ZmTGltaXRab25lV2FzQ29ycmVjdGx5SW1wbGVtZW50ZWQiLCJmaWx0ZXIiLCJyZWNlaXZlQXR0YWNrIiwiY2hlY2tJZkFsbFNoaXBzSGF2ZVN1bmsiLCJoYXZlQWxsU2hpcHNTdW5rIiwiaiIsImlzU3VuayIsInJhbmRvbWx5UGxhY2VTaGlwcyIsImNoZWNrSWZCb2FyZEhhc0JlZW5GdWxseVBvcHVsYXRlZCIsIm51bU9mU2hpcENlbGxzIiwicmFuZG9tRmxlZXQiLCJnZXQiLCJzZXQiLCJ2YWx1ZSIsIm5hbWUiLCJ0dXJuIiwiZ2V0TmFtZSIsImF0dGFjayIsImdldFN0YXR1cyIsImluY2x1ZGVzIiwiaGl0IiwiaXNUdXJuIiwiZW5lbXkiLCJzdGF0dXMiLCJldmVyeSIsImRvbVRhcmdldHMiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwibiIsImdldHRlciIsIl9fZXNNb2R1bGUiLCJkIiwiYSIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImF0dGFja0RpcmVjdGlvbiIsIndhc0hpdCIsImxhc3RIaXRQb3MiLCJmaXJzdEhpdFBvcyIsInNlY29uZEhpdFBvcyIsInN1cnJvdW5kaW5nUG9zIiwiYXR0YWNrVG93YXJkcyIsInNldFdhc0hpdCIsInN0YXQiLCJyZWdpc3RlclN1cnJvdW5kaW5nUG9zIiwicHVzaCIsImFpUGxheSIsInJlcGVhdCIsInAxIiwicDIiLCJwbGF5ZXJCb2FyZCIsImVuZW15Qm9hcmQiLCJwb3MiLCJyZW5kZXJBdHRhY2tQMiIsIm5ld1BvcyIsInBvcCIsInRvdGFsQW1vdW50U2hpcHMiLCJzaGlwRHJhZyIsInNoaXBOYW1lIiwiYW1vdW50TGVmdCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImJvZHkiLCJjZWxscyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjaGlsZCIsImNoaWxkTm9kZXMiLCJkcmFnU2VsZWN0aW9uIiwib2Zmc2V0IiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJ0YXJnZXQiLCJwYXJlbnROb2RlIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiY2hhbmdlRGlyIiwicmVtb3ZlIiwic3BsaXQiLCJyZW5kZXJQbGF5ZXJTaGlwcyIsImZpcnN0Q2hpbGQiLCJ0ZXh0Q29udGVudCIsInN0eWxlIiwiZGlzcGxheSIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJkZWxheSIsImRlbGF5SW5NcyIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsImNoZWNrSWZHYW1lT3ZlciIsIm1vZGFsIiwibW9kYWxXaW5uZXIiLCJwbGF5QWdhaW5CdXR0b24iLCJyZWxvYWQiLCJhc3luYyIsImFkZCIsInBsYXllckJvYXJkQXJlYSIsImNlbGwiLCJzZXRBdHRyaWJ1dGUiLCJjb21wdXRlciIsImFkZEJ1dHRvbkxpc3RlbmVycyIsInJlbmRlclNoaXBTZWxlY3QiLCJjb250YWluZXIiLCJzaGlwQ29udGFpbmVyIiwiY3JlYXRlRWxlbWVudCIsImFwcGVuZENoaWxkIiwic2hpcEluZm8iLCJjcmVhdGVEcmFnQW5kRHJvcEZsZWV0IiwicHMiLCJzdWJzY3JpYmVycyIsInB1Ymxpc2giLCJldmVudE5hbWUiLCJkYXRhIiwiaXNBcnJheSIsImNhbGxiYWNrIiwic3Vic2NyaWJlIiwiaW5kZXgiLCJ1bnN1YnNjcmliZSIsInNwbGljZSIsInB1YlN1YiIsInBsYXllciIsImVuZW15Qm9hcmRBcmVhIiwidGhlbiIsImFkZExpc3RlbmVyc1RvRW5lbXlCb2FyZCIsImhhbmRsZUF0dGFjayIsImh1bWFuIiwicmVuZGVyQXR0YWNrcyIsImF0dGFja0VuZW15Q2VsbCJdLCJzb3VyY2VSb290IjoiIn0=